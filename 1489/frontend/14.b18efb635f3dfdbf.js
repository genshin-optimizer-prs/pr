"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[14],{42861:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z"}),"Difference");e.Z=a},66859:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M8.65 5.82C9.36 4.72 10.6 4 12 4c2.21 0 4 1.79 4 4 0 1.4-.72 2.64-1.82 3.35L8.65 5.82zM20 17.17c-.02-1.1-.63-2.11-1.61-2.62-.54-.28-1.13-.54-1.77-.76L20 17.17zm1.19 4.02L2.81 2.81 1.39 4.22l8.89 8.89c-1.81.23-3.39.79-4.67 1.45-1 .51-1.61 1.54-1.61 2.66V20h13.17l2.61 2.61 1.41-1.42z"}),"PersonOff");e.Z=a},24648:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");e.Z=a},30014:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ot});var r=i(45492),n=i(42745),l=i(92252),a=i(42861),c=i(67550),s=i(7671),o=i(41075),d=i(83249),Z=i(79906),h=i(2784),u=i(61877),f=i(11141),p=i(83660),m=i(71179),y=i(45269),b=i(24264),g=i(16549),x=i(62197),v=i(56961),w=i(23690),P=i(69698),C=i(1665),k=i(52903);function I({pageKey:t,text:e="",modalTitle:i="",children:l}){const[a,c,u]=(0,r.aV)("true"!==localStorage.getItem(`infoShown_${t}`)),[f]=(0,h.useState)(Array.isArray(e)?(0,n.F_)(e):e),p=(0,h.useCallback)((()=>{u(),localStorage.setItem(`infoShown_${t}`,"true")}),[u,t]);return(0,k.BX)(b.Z,{children:[(0,k.BX)(o.ZP,{container:!0,children:[(0,k.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,k.tZ)(x.Z,{variant:"caption",pl:1,children:f})}),(0,k.tZ)(o.ZP,{item:!0,xs:"auto",children:(0,k.tZ)(d.Z,{size:"small",color:"info",variant:"contained",onClick:c,startIcon:(0,k.tZ)(g.Z,{}),children:(0,k.tZ)(C.v,{ns:"ui",key18:"info"})})})]}),(0,k.tZ)(P.Z,{containerProps:{maxWidth:"xl"},open:a,onClose:p,children:(0,k.BX)(b.Z,{children:[(0,k.tZ)(s.Z,{sx:{py:1},children:(0,k.BX)(o.ZP,{container:!0,children:[(0,k.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,k.tZ)(x.Z,{variant:"h6",children:i})}),(0,k.tZ)(o.ZP,{item:!0,children:(0,k.tZ)(w.Z,{onClick:p})})]})}),(0,k.tZ)(v.Z,{}),(0,k.tZ)(s.Z,{children:(0,k.tZ)(h.Suspense,{fallback:(0,k.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:500}),children:l})}),(0,k.tZ)(v.Z,{}),(0,k.tZ)(s.Z,{sx:{py:1},children:(0,k.tZ)(w.Z,{large:!0,onClick:p})})]})})]})}var A=i(66146),B=i(6853);function X(){const{database:t}=(0,h.useContext)(B.t),[e,i]=(0,h.useState)(t.displayArtifact.get());return(0,h.useEffect)((()=>t.displayArtifact.follow(((t,e)=>i(e)))),[t]),e}var S=i(30706),F=i(24648),D=i(75927),M=i(93994),$=i(22698),V=i(66859),T=i(12366);const z=(0,h.lazy)((()=>Promise.all([i.e(497),i.e(537),i.e(313)]).then(i.bind(i,22537))));function K({numShowing:t,total:e,artifactIds:i}){const{t:r}=(0,f.$G)(["artifact","ui"]),{database:n}=(0,h.useContext)(B.t),{filterOption:l}=X(),a=(0,h.useCallback)((t=>n.displayArtifact.set({filterOption:Object.assign({},l,t)})),[n,l]);return(0,k.tZ)(h.Suspense,{fallback:(0,k.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,k.tZ)(b.Z,{children:(0,k.BX)(s.Z,{children:[(0,k.BX)(o.ZP,{container:!0,children:[(0,k.tZ)(o.ZP,{item:!0,children:(0,k.tZ)(x.Z,{variant:"h6",children:(0,k.tZ)(f.cC,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,k.tZ)(o.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:t!==e&&(0,k.BX)(x.Z,{children:["Filtered ",(0,k.tZ)("strong",{children:t})," / ",e]})}),(0,k.tZ)(o.ZP,{item:!0,children:(0,k.tZ)(d.Z,{size:"small",color:"error",onClick:()=>n.displayArtifact.set({action:"reset"}),startIcon:(0,k.tZ)(F.Z,{}),children:(0,k.tZ)(f.cC,{t:r,i18nKey:"ui:reset"})})})]}),(0,k.tZ)(h.Suspense,{fallback:(0,k.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,k.tZ)(z,{filterOption:l,filterOptionDispatch:a,filteredIds:i})})]})})})}function j({artifactIds:t}){const{t:e}=(0,f.$G)(["artifact","ui"]),{database:i}=(0,h.useContext)(B.t),{numDelete:r,numUnequip:n,numUnlock:l,numLock:a}=(0,h.useMemo)((()=>{const e=t.map((t=>i.arts.get(t))),r=e.reduce(((t,e)=>t+(e.lock?0:1)),0),n=e.length-r;return{numDelete:r,numUnequip:e.reduce(((t,e)=>t+(e.location?1:0)),0),numUnlock:r,numLock:n}}),[t,i]);return(0,k.BX)(o.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,k.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!n,onClick:()=>window.confirm(`Are you sure you want to unequip ${n} artifacts currently equipped on characters?`)&&t.map((t=>i.arts.set(t,{location:""}))),startIcon:(0,k.tZ)(V.Z,{}),children:[(0,k.tZ)(f.cC,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,k.tZ)(T.Z,{sx:{ml:1},color:n?"success":"secondary",children:n})]})}),(0,k.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!r,onClick:()=>window.confirm(`Are you sure you want to delete ${r} artifacts?`)&&t.map((t=>{var e;return!(null!=(e=i.arts.get(t))&&e.lock)&&i.arts.remove(t)})),startIcon:(0,k.tZ)($.Z,{}),children:[(0,k.tZ)(f.cC,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,k.tZ)(T.Z,{sx:{ml:1},color:r?"success":"secondary",children:r})]})}),(0,k.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:()=>window.confirm(`Are you sure you want to unlock ${a} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!1}))),startIcon:(0,k.tZ)(M.Z,{}),children:[(0,k.tZ)(f.cC,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,k.tZ)(T.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,k.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:()=>window.confirm(`Are you sure you want to lock ${l} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!0}))),startIcon:(0,k.tZ)(D.Z,{}),children:[(0,k.tZ)(f.cC,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,k.tZ)(T.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,k.tZ)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-around",children:(0,k.tZ)(x.Z,{variant:"caption",color:"text.secondary",children:(0,k.BX)(f.cC,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only apply to",(0,k.tZ)("b",{children:"currently filtered artifacts"})]})})})]})}var E=i(15015),O=i(33927),W=i(107),G=i(87833);let U,q,H=t=>t;function L({show:t,onHide:e}){const{t:i}=(0,f.$G)("artifact");return(0,k.tZ)(P.Z,{open:t,onClose:e,children:(0,k.BX)(G.Z,{children:[(0,k.BX)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,k.BX)(x.Z,{variant:"h6",flexGrow:1,children:[(0,k.tZ)(a.Z,{sx:{verticalAlign:"text-top",mr:1}}),i(U||(U=H`showDup`))]}),(0,k.tZ)(w.Z,{onClick:e})]}),(0,k.tZ)(v.Z,{}),(0,k.tZ)(s.Z,{children:(0,k.tZ)(N,{})})]})})}function N(){const{t}=(0,f.$G)("artifact"),{database:e}=(0,h.useContext)(B.t),[i,n]=(0,r.NW)();(0,h.useEffect)((()=>e.arts.followAny(n)),[n,e]);const l=(0,h.useMemo)((()=>{const t=i&&[];let r=e.arts.keys;for(;0!==r.length;){const i=r.shift();if(!i)continue;const n=e.arts.get(i);if(!n)continue;const{duplicated:l}=e.arts.findDups(n,r);if(!l.length)continue;const a=l.map((t=>t.id));t.push([i,...a].sort((t=>{var i,r;return null!=(i=null==(r=e.arts.get(t))?void 0:r.location)&&i?-1:1}))),r=r.filter((t=>!a.includes(t)))}return t}),[e,i]),a=(0,h.useMemo)((()=>({})),[]);return(0,k.BX)(O.Z,{spacing:2,children:[l.map((t=>(0,k.tZ)(b.Z,{sx:{overflowX:"scroll"},children:(0,k.tZ)(s.Z,{sx:{display:"flex",gap:1},children:t.map((t=>(0,k.tZ)(c.Z,{sx:{minWidth:300},children:(0,k.tZ)(S.Z,{artifactId:t,canEquip:!0,onDelete:()=>e.arts.remove(t),editorProps:a})},t)))})},t.join()))),!l.length&&(0,k.tZ)(W.Z,{variant:"filled",severity:"success",children:t(q||(q=H`noDupAlert`))})]})}var _=i(503),R=i(86569),Q=i(68330);const J=[..._._m];function Y({probabilityFilter:t={},setProbabilityFilter:e,disabled:i=!1}){const{t:r}=(0,f.$G)("artifact");return(0,k.BX)(b.Z,{children:[(0,k.tZ)(s.Z,{sx:{py:1},children:(0,k.tZ)(x.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,k.tZ)(v.Z,{}),(0,k.tZ)(s.Z,{children:(0,k.BX)(o.ZP,{container:!0,spacing:1,children:[(0,k.tZ)(o.ZP,{item:!0,xs:12,md:6,children:(0,k.tZ)(G.Z,{children:(0,k.tZ)(s.Z,{children:(0,k.BX)(x.Z,{children:['This UI only pops up when "Sort by"',(0,k.tZ)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,k.BX)(R.Z,{color:"warning",children:[" ","Artifacts that already reach the criteria(100%) or are at 0% are hidden."]})]})})})}),(0,k.tZ)(o.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,k.tZ)(Q.Z,{statKeys:J,statFilters:t,setStatFilters:e,disabled:i,label:r("probabilityFilter.label")})})]})})]})}var tt=i(57928);let et,it,rt,nt=t=>t;const lt=h.lazy((()=>Promise.all([i.e(497),i.e(592),i.e(286),i.e(934)]).then(i.bind(i,88344)))),at=h.lazy((()=>Promise.all([i.e(592),i.e(528)]).then(i.bind(i,76806)))),ct={xs:1,sm:2,md:3,lg:3,xl:4},st={xs:10,sm:12,md:24,lg:24,xl:24};function ot(){const{t}=(0,f.$G)(["artifact","ui"]),{database:e}=(0,h.useContext)(B.t),i=X(),[g,x,v]=(0,r.aV)(!1),[w,P,C]=(0,r.aV)(!1),F=(0,r.JT)(),D=st[F],{sortType:M,effFilter:$,ascending:V,probabilityFilter:T}=i,z="probability"===M,[O,W]=(0,h.useState)(0),G=(0,h.useRef)(null),[U,q]=(0,r.NW)(),H=(0,h.useDeferredValue)(U),N=(0,h.useMemo)((()=>new Set($)),[$]),_=(0,h.useCallback)((t=>e.arts.remove(t)),[e]);(0,h.useEffect)((()=>(u.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((()=>q())))),[e,q]);const R=(0,h.useCallback)((t=>e.displayArtifact.set({probabilityFilter:t})),[e]),Q=(0,h.useMemo)((()=>!e.arts.values.length),[e]),J=(0,h.useMemo)((()=>(0,E.x3)(N,T)),[N,T]),ot=(0,h.useMemo)((()=>(0,E.EM)(N)),[N]),dt=(0,h.useDeferredValue)(i),Zt=(0,h.useDeferredValue)(T);(0,h.useEffect)((()=>{if(z)return e.arts.values.forEach((t=>e.arts.setProbability(t.id,(0,tt.B)(t,Zt)))),()=>e.arts.values.forEach((t=>e.arts.setProbability(t.id,-1)))}),[e,z,Zt]);const{artifactIds:ht,totalArtNum:ut}=(0,h.useMemo)((()=>{var t;const{sortType:i=E.OQ[0],ascending:r=!1,filterOption:l}=dt;let a=e.arts.values;z&&(a=a.filter((t=>t.probability&&1!==t.probability)));const c=a.filter((0,n.CZ)(l,ot)).sort((0,n.ef)(null!=(t=E.t$[i])?t:[],r,J)).map((t=>t.id));return Object.assign({artifactIds:c,totalArtNum:a.length},H)}),[dt,H,e,J,ot,z]),{artifactIdsToShow:ft,numPages:pt,currentPageIndex:mt}=(0,h.useMemo)((()=>{const t=Math.ceil(ht.length/D),e=(0,n.re)(O,0,t-1);return{artifactIdsToShow:ht.slice(e*D,(e+1)*D),numPages:t,currentPageIndex:e}}),[ht,O,D]),yt=ht.length!==ut?`${ht.length}/${ut}`:`${ut}`,bt={count:pt,page:mt+1,onChange:(0,h.useCallback)(((t,e)=>{var i;null==(i=G.current)||i.scrollIntoView({behavior:"smooth"}),W(e-1)}),[W,G])},gt={numShowing:ft.length,total:yt,t},xt={sortKeys:[...E.OQ],value:M,onChange:t=>e.displayArtifact.set({sortType:t}),ascending:V,onChangeAsc:t=>e.displayArtifact.set({ascending:t})};return(0,k.BX)(c.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,k.tZ)(h.Suspense,{fallback:!1,children:(0,k.tZ)(lt,{artifactIdToEdit:g?"new":"",cancelEdit:v,allowUpload:!0,allowEmpty:!0})}),(0,k.tZ)(h.Suspense,{fallback:!1,children:(0,k.tZ)(L,{show:w,onHide:C})}),(0,k.tZ)(I,{pageKey:"artifactPage",modalTitle:t(et||(et=nt`info.title`)),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,k.tZ)(at,{})}),Q&&(0,k.tZ)(p.Z,{}),(0,k.tZ)(K,{numShowing:ht.length,total:ut,artifactIds:ht}),(0,k.tZ)(b.Z,{ref:G,children:(0,k.tZ)(s.Z,{children:(0,k.tZ)(y.Z,{placement:"top",title:(0,k.tZ)(f.cC,{t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"}),children:(0,k.tZ)(c.Z,{children:(0,k.tZ)(m.Z,{selectedKeys:$,onChange:t=>e.displayArtifact.set({effFilter:t})})})})})}),(0,k.tZ)(b.Z,{children:(0,k.BX)(s.Z,{children:[(0,k.tZ)(c.Z,{pb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,k.tZ)(A.Z,{paginationProps:bt,showingTextProps:gt,displaySort:!0,sortByButtonProps:xt})}),(0,k.tZ)(j,{artifactIds:ht})]})}),z&&(0,k.tZ)(Y,{probabilityFilter:T,setProbabilityFilter:R}),(0,k.BX)(o.ZP,{container:!0,columns:ct,spacing:1,children:[(0,k.tZ)(o.ZP,{item:!0,xs:!0,children:(0,k.tZ)(d.Z,{fullWidth:!0,onClick:x,color:"info",startIcon:(0,k.tZ)(l.Z,{}),children:t(it||(it=nt`addNew`))})}),(0,k.tZ)(o.ZP,{item:!0,xs:1,children:(0,k.tZ)(d.Z,{fullWidth:!0,onClick:P,color:"info",startIcon:(0,k.tZ)(a.Z,{}),children:t(rt||(rt=nt`showDup`))})})]}),(0,k.tZ)(h.Suspense,{fallback:(0,k.tZ)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,k.tZ)(o.ZP,{container:!0,spacing:1,columns:ct,children:ft.map((t=>(0,k.tZ)(o.ZP,{item:!0,xs:1,children:(0,k.tZ)(S.Z,{artifactId:t,effFilter:N,onDelete:_,editorProps:{},canEquip:!0})},t)))})}),pt>1&&(0,k.tZ)(b.Z,{children:(0,k.tZ)(s.Z,{children:(0,k.tZ)(c.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,k.tZ)(A.Z,{paginationProps:bt,showingTextProps:gt})})})})]})}}}]);