import{u as L,f as t,k as C,d as N,aB as f,aq as k,q as e,p as l,C as T,_ as B,D as R,O as W,t as j,Q as w,cl as q,T as S,I as G,v as $,a4 as O}from"./index-59c4fd80.js";import{T as P,i as Q}from"./LocationName-f05c2951.js";import{d as V}from"./Close-0fbb42e0.js";import{g as o}from"./index-714835cc.js";import{c as v}from"./totalUtils-18c8f1ab.js";import{W as J,a as K}from"./WeaponCard-2b85e680.js";import{C as U}from"./CardActionArea-9ac53781.js";import{i as X}from"./index-6873d20e.js";import"./DropdownButton-dc3a36fa.js";import"./index-b5c4e079.js";import"./SolidToggleButtonGroup-1f3f91b9.js";import"./useWeapon-9259db15.js";import"./LocationAutocomplete-b798426d.js";function ca({show:I,ascension:b=0,onHide:p,onSelect:D,filter:g=()=>!0,weaponTypeFilter:i}){const{t:d}=L(["page_weapon","weaponNames_gen"]),[m,x]=t.useState(i?[i]:[...C]),c=N(),[E,M]=t.useState(c.displayWeapon.get());t.useEffect(()=>c.displayWeapon.follow((a,s)=>M(s)),[c]),t.useEffect(()=>{i&&x([i])},[i]);const[y,_]=t.useState(""),u=t.useDeferredValue(y),{rarity:h}=E,n=t.useMemo(()=>f.filter(a=>g(o(a))).filter(a=>m.includes(o(a).weaponType)).filter(a=>!u||d(`weaponNames_gen:${a}`).toLowerCase().includes(u.toLowerCase())).filter(a=>h.includes(o(a).rarity)).sort((a,s)=>o(s).rarity-o(a).rarity),[u,g,h,d,m]),z=t.useMemo(()=>v(C,a=>f.forEach(s=>{const r=o(s).weaponType;a[r].total++,n.includes(s)&&a[r].current++})),[n]),A=t.useMemo(()=>v(k,a=>f.forEach(s=>{const r=o(s).rarity;a[r].total++,n.includes(s)&&a[r].current++})),[n]);return e(O,{open:I,onClose:p,children:l($,{children:[l(T,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(J,{value:m,totals:z,onChange:x,disabled:!!i,size:"small"}),e(K,{sx:{height:"100%"},onChange:a=>c.displayWeapon.set({rarity:a}),value:h,totals:A,size:"small"}),e(P,{autoFocus:!0,size:"small",value:y,onChange:a=>_(a.target.value),label:d("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}}),e(B,{onClick:p,sx:{ml:"auto"},children:e(V,{})})]}),e(R,{}),e(T,{children:e(W,{container:!0,spacing:1,children:n.map(a=>{var r;const s=o(a);return e(W,{item:!0,lg:3,md:4,children:e(j,{sx:{height:"100%"},children:l(U,{onClick:()=>{p(),D(a)},sx:{display:"flex"},children:[e(w,{component:"img",src:q(a,b>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),l(w,{sx:{flexGrow:1,px:1},children:[e(S,{variant:"subtitle1",children:s.name}),l(S,{sx:{display:"flex",alignItems:"baseline"},children:[e(G,{size:1.5,src:(r=X.weaponTypes)==null?void 0:r[s.weaponType]}),e(Q,{stars:s.rarity,colored:!0})]})]})]})})},a)})})})]})})}export{ca as default};
