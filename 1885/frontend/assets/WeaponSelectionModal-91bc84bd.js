import{u as L,e as t,h as C,b as _,ay as f,an as R,p as e,n as l,C as T,Y as j,D as k,M as W,s as B,N as w,T as S,I as G,t as $,a2 as P}from"./index-e591079e.js";import{T as V,h as Y}from"./LocationName-7ad29a9d.js";import{z as q}from"./index-b0c20c19.js";import{d as J}from"./Close-7eb3a67d.js";import{g as o}from"./index-9e7b93fb.js";import{c as b}from"./totalUtils-ae06c23e.js";import{W as K,a as O}from"./WeaponCard-4a444cc0.js";import{C as Q}from"./CardActionArea-1706dabe.js";import{i as U}from"./index-9a8f4ab9.js";import"./DropdownButton-9385c11c.js";import"./SolidToggleButtonGroup-20ed242b.js";import"./useWeapon-06892495.js";import"./ConditionalWrapper-cdbd3efe.js";function ca({show:I,ascension:v=0,onHide:p,onSelect:D,filter:g=()=>!0,weaponTypeFilter:n}){const{t:m}=L(["page_weapon","weaponNames_gen"]),[d,x]=t.useState(n?[n]:[...C]),c=_(),[M,z]=t.useState(c.displayWeapon.get());t.useEffect(()=>c.displayWeapon.follow((a,s)=>z(s)),[c]),t.useEffect(()=>{n&&x([n])},[n]);const[y,E]=t.useState(""),u=t.useDeferredValue(y),{rarity:h}=M,i=t.useMemo(()=>f.filter(a=>g(o(a))).filter(a=>d.includes(o(a).weaponType)).filter(a=>!u||m(`weaponNames_gen:${a}`).toLowerCase().includes(u.toLowerCase())).filter(a=>h.includes(o(a).rarity)).sort((a,s)=>o(s).rarity-o(a).rarity),[u,g,h,m,d]),N=t.useMemo(()=>b(C,a=>f.forEach(s=>{const r=o(s).weaponType;a[r].total++,i.includes(s)&&a[r].current++})),[i]),A=t.useMemo(()=>b(R,a=>f.forEach(s=>{const r=o(s).rarity;a[r].total++,i.includes(s)&&a[r].current++})),[i]);return e(P,{open:I,onClose:p,children:l($,{children:[l(T,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(K,{value:d,totals:N,onChange:x,disabled:!!n,size:"small"}),e(O,{sx:{height:"100%"},onChange:a=>c.displayWeapon.set({rarity:a}),value:h,totals:A,size:"small"}),e(V,{autoFocus:!0,size:"small",value:y,onChange:a=>E(a.target.value),label:m("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}}),e(j,{onClick:p,sx:{ml:"auto"},children:e(J,{})})]}),e(k,{}),e(T,{children:e(W,{container:!0,spacing:1,children:i.map(a=>{var r;const s=o(a);return e(W,{item:!0,lg:3,md:4,children:e(B,{sx:{height:"100%"},children:l(Q,{onClick:()=>{p(),D(a)},sx:{display:"flex"},children:[e(w,{component:"img",src:q(a,v>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),l(w,{sx:{flexGrow:1,px:1},children:[e(S,{variant:"subtitle1",children:s.name}),l(S,{sx:{display:"flex",alignItems:"baseline"},children:[e(G,{size:1.5,src:(r=U.weaponTypes)==null?void 0:r[s.weaponType]}),e(Y,{stars:s.rarity,colored:!0})]})]})]})})},a)})})})]})})}export{ca as default};
