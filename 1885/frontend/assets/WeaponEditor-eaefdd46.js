import{az as Le,ay as we,aA as Y,aB as v,e as p,aC as De,aD as ae,du as U,j as $,aE as H,aF as Ae,b3 as G,dJ as Ye,ce as Je,cV as Xe,aU as Ke,d0 as he,aY as Qe,n as f,p as t,T as S,N as I,Z as se,B as O,d1 as Ze,aW as et,c6 as tt,V as Re,u as re,bp as xe,bz as W,aN as $e,as as Me,b5 as nt,D as J,c5 as at,K as st,dK as C,dL as ot,dM as it,bX as be,dN as Pe,dO as rt,dP as lt,a8 as ct,dQ as dt,dR as ut,a7 as pt,a6 as mt,b7 as le,b as X,bh as T,cB as B,dS as j,aG as Oe,W as ft,C as oe,X as Te,dT as ht,M as w,Y as ge,t as xt,s as bt,a1 as gt,R as yt,$ as Ct}from"./index-79c6eb67.js";import{r as Be,n as vt,z as It,x as St,y as kt,u as z}from"./index-fe2ac691.js";import{u as Lt}from"./useWeapon-d9d2692d.js";import{d as wt}from"./Close-1f3a8af0.js";import{L as Dt,a as At,b as Rt}from"./ConditionalWrapper-23de6fd9.js";import{D as k}from"./DataContext-86497ec9.js";import{d as $t,a as Mt}from"./InfoTooltip-408ca81d.js";import{E as ye,C as Pt}from"./StatIcon-42db946b.js";import{C as Ot,B as ce}from"./ColoredText-190c61b7.js";import{S as Ce}from"./SqBadge-b4d76ad3.js";import{B as ve}from"./BootstrapTooltip-cb2098bb.js";import{d as Ie,C as Tt,a as Bt,M as q,D as je}from"./DropdownButton-cb142def.js";import{d as Fe,a as Ne}from"./CheckBoxOutlineBlank-55809c5e.js";import{h as jt}from"./StarDisplay-bd464f13.js";import{g as Ft}from"./index-728e4819.js";function Nt(e){return we("MuiListItem",e)}const Vt=Le("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),P=Vt;function _t(e){return we("MuiListItemSecondaryAction",e)}Le("MuiListItemSecondaryAction",["root","disableGutters"]);const Et=["className"],Gt=e=>{const{disableGutters:n,classes:a}=e;return Ae({root:["root",n&&"disableGutters"]},_t,a)},Wt=Y("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.disableGutters&&n.disableGutters]}})(({ownerState:e})=>v({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),Ve=p.forwardRef(function(n,a){const s=De({props:n,name:"MuiListItemSecondaryAction"}),{className:l}=s,i=ae(s,Et),c=p.useContext(U),r=v({},s,{disableGutters:c.disableGutters}),u=Gt(r);return $.jsx(Wt,v({className:H(u.root,l),ownerState:r,ref:a},i))});Ve.muiName="ListItemSecondaryAction";const zt=Ve,Ut=["className"],Ht=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],qt=(e,n)=>{const{ownerState:a}=e;return[n.root,a.dense&&n.dense,a.alignItems==="flex-start"&&n.alignItemsFlexStart,a.divider&&n.divider,!a.disableGutters&&n.gutters,!a.disablePadding&&n.padding,a.button&&n.button,a.hasSecondaryAction&&n.secondaryAction]},Yt=e=>{const{alignItems:n,button:a,classes:s,dense:l,disabled:i,disableGutters:c,disablePadding:r,divider:u,hasSecondaryAction:o,selected:m}=e;return Ae({root:["root",l&&"dense",!c&&"gutters",!r&&"padding",u&&"divider",i&&"disabled",a&&"button",n==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction",m&&"selected"],container:["container"]},Nt,s)},Jt=Y("div",{name:"MuiListItem",slot:"Root",overridesResolver:qt})(({theme:e,ownerState:n})=>v({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&v({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${Ye.root}`]:{paddingRight:48}},{[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${P.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.alignItems==="flex-start"&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})),Xt=Y("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,n)=>n.container})({position:"relative"}),Kt=p.forwardRef(function(n,a){const s=De({props:n,name:"MuiListItem"}),{alignItems:l="center",autoFocus:i=!1,button:c=!1,children:r,className:u,component:o,components:m={},componentsProps:b={},ContainerComponent:x="li",ContainerProps:{className:h}={},dense:d=!1,disabled:y=!1,disableGutters:D=!1,disablePadding:K=!1,divider:Q=!1,focusVisibleClassName:Z,secondaryAction:V,selected:ee=!1,slotProps:F={},slots:g={}}=s,L=ae(s.ContainerProps,Ut),qe=ae(s,Ht),ue=p.useContext(U),te=p.useMemo(()=>({dense:d||ue.dense||!1,alignItems:l,disableGutters:D}),[l,ue.dense,d,D]),ne=p.useRef(null);Je(()=>{i&&ne.current&&ne.current.focus()},[i]);const M=p.Children.toArray(r),pe=M.length&&Xe(M[M.length-1],["ListItemSecondaryAction"]),_=v({},s,{alignItems:l,autoFocus:i,button:c,dense:te.dense,disabled:y,disableGutters:D,disablePadding:K,divider:Q,hasSecondaryAction:pe,selected:ee}),me=Yt(_),fe=Ke(ne,a),E=g.root||m.Root||Jt,N=F.root||b.root||{},A=v({className:H(me.root,N.className,u),disabled:y},qe);let R=o||"li";return c&&(A.component=o||"div",A.focusVisibleClassName=H(P.focusVisible,Z),R=Qe),pe?(R=!A.component&&!o?"div":R,x==="li"&&(R==="li"?R="div":A.component==="li"&&(A.component="div")),$.jsx(U.Provider,{value:te,children:$.jsxs(Xt,v({as:x,className:H(me.container,h),ref:fe,ownerState:_},L,{children:[$.jsx(E,v({},N,!he(E)&&{as:R,ownerState:v({},_,N.ownerState)},A,{children:M})),M.pop()]}))})):$.jsx(U.Provider,{value:te,children:$.jsxs(E,v({},N,{as:R,ref:fe},!he(E)&&{ownerState:v({},_,N.ownerState)},A,{children:[M,V&&$.jsx(zt,{children:V})]}))})}),_e=Kt;function Qt({avatar:e,title:n,action:a}){return f(I,{display:"flex",gap:1,p:2,alignItems:"center",children:[e,t(S,{variant:"subtitle1",sx:{flexGrow:1},children:n}),a&&t(S,{variant:"caption",children:a})]})}function Zt({title:e,children:n,id:a="dropdownbtn",...s}){const[l,i]=p.useState(null),c=!!l,r=p.useCallback(o=>i(o.currentTarget),[i]),u=p.useCallback(()=>i(null),[i]);return f(p.Suspense,{fallback:t(O,{endIcon:t(Ie,{}),...s,children:t(se,{width:50})}),children:[t(O,{...s,id:a,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:r,endIcon:t(Ie,{}),children:e}),t(tt,{id:"basic-menu",anchorEl:l,open:c,placement:"bottom-start",transition:!0,onClick:u,sx:{zIndex:1500},children:({TransitionProps:o,placement:m})=>t(Ze,{...o,style:{transformOrigin:m==="bottom-start"?"left top":"left bottom"},children:t(et,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:t(Tt,{onClickAway:u,children:f("div",{children:[" ",t(p.Suspense,{fallback:t(se,{width:"100%",height:"1000"}),children:t(Bt,{"aria-labelledby":a,children:n})})]})})})})})]})}const Ee=p.createContext({setFormulaData:()=>{},onModalOpen:()=>{},onModalClose:()=>{}});function On({children:e}){const[n,a,s]=Re(),[[l,i],c]=p.useState([void 0,void 0]),r=p.useCallback((u,o)=>{u&&o?a():s(),c([u,o])},[a,s]);return t(Ee.Provider,{value:{setFormulaData:r,data:l,node:i,modalOpen:n,onModalOpen:a,onModalClose:s},children:e})}const Se={melt:{cryo:"pyro",pyro:"cryo"},vaporize:{hydro:"pyro",pyro:"hydro"}},ke={mx:.25,px:.25};function en({reaction:e,trigger:n}){const{t:a}=re("sheet_gen");n||(n=Object.keys(Se[e])[0]);const s=Se[e][n];return s?f(I,{display:"flex",alignItems:"center",children:[t(Ot,{color:"melt",children:a(`reaction.${e}`)}),t(Ce,{sx:ke,color:s,children:t(ye,{ele:s,iconProps:xe})}),"+",t(Ce,{sx:ke,color:n,children:t(ye,{ele:n,iconProps:xe})})]}):null}function Ge({fields:e,bgt:n="normal"}){return t(We,{sx:{m:0},bgt:n,children:e.map((a,s)=>t(tn,{field:a,component:_e},s))})}function tn({field:e,component:n}){const{data:a,compareData:s}=p.useContext(k);if(!p.useMemo(()=>{var i;return((i=e==null?void 0:e.canShow)==null?void 0:i.call(e,a))??!0},[e,a]))return null;if("node"in e){const i=a.get(e.node);if(i.isEmpty)return null;if(s){const c=s.get(e.node),r=c.isEmpty?0:c.value;return t(ie,{node:i,compareValue:r,component:n})}else return t(ie,{node:i,component:n})}return t(nn,{field:e,component:n})}function nn({field:e,component:n}){var r;const{data:a}=p.useContext(k),s=C(e.value,a),l=C(e.variant,a),i=e.text&&t("span",{children:e.text}),c=e.textSuffix&&f("span",{children:[" ",e.textSuffix]});return f(I,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1},component:n,children:[f(S,{color:`${l}.main`,children:[i,c]}),f(S,{children:[typeof s=="number"?(r=s.toFixed)==null?void 0:r.call(s,e.fixed):s,e.unit]})]})}function ie({node:e,compareValue:n,component:a,emphasize:s}){const{data:l}=p.useContext(k),{setFormulaData:i}=p.useContext(Ee),c=p.useCallback(()=>i(l,e),[i,l,e]);if(e.isEmpty)return null;const{multi:r}=e.info,u=r&&f("span",{children:[r,"×"]}),o=e.value;let m=!1;const{unit:b,fixed:x,variant:h,subVariant:d}=Be(e.info);if(n!==void 0){const y=o-n,D=W(y/n,"%",x);m=f(Me,{children:[t("span",{children:W(o,b,x)}),Math.abs(y)>1e-4&&t(ve,{title:f(S,{children:["Compare to"," ",t("strong",{children:W(n,b,x)})]}),children:f($e,{color:y>0?"success":"error",sx:{display:"flex",gap:.5,alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap"},children:[f("span",{children:["(",y>0?"+":"",W(y,b,x),")"]}),b!=="%"&&n!==0&&f("span",{children:["(",y>0?"+":"",D,")"]})]})})]})}else m=t("span",{children:vt(e)});return f(I,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1,boxShadow:s?"0px 0px 0px 2px red inset":void 0},component:a,children:[t(an,{node:e}),f(S,{sx:{display:"flex",gap:.5,alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap"},children:[u,m]}),!!e.formula&&t(ve,{placement:"top",title:t(S,{children:f(p.Suspense,{fallback:t(se,{variant:"rectangular",width:300,height:30}),children:[nt.includes(h)&&f(I,{sx:{display:"inline-flex",gap:1,mr:1},children:[t(I,{children:t(en,{reaction:h,trigger:d})}),t(J,{orientation:"vertical",flexItem:!0})]}),t("span",{children:e.formula})]})}),children:t($t,{onClick:c,fontSize:"inherit",sx:{cursor:"help"}})})]})}function an({node:e}){const{textSuffix:n,icon:a,isTeamBuff:s,variant:l,name:i}=Be(e.info);return f(S,{component:"div",sx:{display:"flex",gap:1,alignItems:"center",marginRight:"auto"},children:[!!s&&t(st,{}),a,f($e,{color:l!=="invalid"?l:void 0,children:[i,n&&f("span",{children:[" ",n]})]})]})}const We=Y(at)(({theme:e,bgt:n="normal"})=>{const a=n==="light"?"contentLight":n==="dark"?"contentDark":"contentNormal";return{borderRadius:e.shape.borderRadius,overflow:"hidden",margin:0,"> .MuiListItem-root:nth-of-type(even)":{backgroundColor:e.palette[a].main},"> .MuiListItem-root:nth-of-type(odd)":{backgroundColor:e.palette[a].dark}}});function sn({level:e,ascension:n,setBoth:a,useLow:s=!1,disabled:l=!1}){const{t:i}=re("ui"),c=s?lt:be,r=p.useCallback((o=1)=>{o=ct(o,1,s?dt:ut);const m=c.findIndex(b=>o<=b);a({level:o,ascension:m})},[a,c,s]),u=p.useCallback(()=>{const o=c.findIndex(m=>e!==90&&e===m);a(n===o?{ascension:n+1}:{ascension:o})},[a,c,n,e]);return f(ce,{sx:{bgcolor:o=>o.palette.contentNormal.main},children:[t(mt,{children:t(pt,{onChange:r,value:e,startAdornment:"Lv. ",disabled:l,inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),t(O,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(s?ot:it)(e)||l,onClick:u,children:f("strong",{children:["/ ",be[n]]})}),t(je,{title:i("selectlevel"),sx:{flexGrow:1},disabled:l,children:[...s?Pe:rt].map(([o,m])=>{const b=o===e&&m===n;return t(q,{selected:b,disabled:b,onClick:()=>a({level:o,ascension:m}),children:o===c[m]?`Lv. ${o}`:`Lv. ${o}/${c[m]}`},`${o}/${m}`)})})]})}function on({conditional:e,disabled:n=!1}){const{data:a}=p.useContext(k);return Object.keys(C(e.states,a)).length===1&&"path"in e?t(rn,{conditional:e,disabled:n}):"path"in e?t(ln,{conditional:e,disabled:n}):t(cn,{conditional:e,disabled:n})}function rn({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(le),{data:l}=p.useContext(k),i=X(),c=p.useCallback(x=>{e.path[0]==="resonance"?i.teams.set(a,h=>{const d=T(h.conditional);x?B(d,e.path,x):j(d,e.path),h.conditional=d}):i.teamChars.set(s,h=>{const d=T(h.conditional);x?B(d,e.path,x):j(d,e.path),h.conditional=d})},[i,e.path,s,a]),r=l.get(e.value).value,[u,o]=Object.entries(C(e.states,l))[0],m=Ue(o.name),b=de(e.name);return f(O,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:r?"success":"primary",onClick:()=>c(r?void 0:u),disabled:n,startIcon:r?t(Fe,{}):t(Ne,{}),children:[b," ",m]})}function ln({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(le),{data:l}=p.useContext(k),i=X(),c=p.useCallback(x=>{e.path[0]==="resonance"?i.teams.set(a,h=>{const d=T(h.conditional);x?B(d,e.path,x):j(d,e.path),h.conditional=d}):i.teamChars.set(s,h=>{const d=T(h.conditional);x?B(d,e.path,x):j(d,e.path),h.conditional=d})},[i,e.path,s,a]),r=l.get(e.value).value,u=C(e.states,l),o=r?u[r]:void 0,m=o?Ue(o.name):t(Oe,{color:"secondary",children:"Not Active"}),b=de(e.name);return f(Zt,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:r&&o?"success":"primary",title:f("span",{children:[b," ",m]}),disabled:n,children:[t(q,{onClick:()=>c(),selected:!o,disabled:!o,children:t("span",{children:"Not Active"})}),t(J,{}),Object.entries(u).map(([x,h])=>t(q,{onClick:()=>c(x),selected:r===x,disabled:r===x,children:h.name},x))]})}function cn({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(le),{data:l}=p.useContext(k),i=X(),c=p.useCallback((r,u)=>{r[0]==="resonance"?i.teamChars.set(a,o=>{const m=T(o.conditional);u?B(m,r,u):j(m,r),o.conditional=m}):i.teamChars.set(s,o=>{const m=T(o.conditional);u?B(m,r,u):j(m,r),o.conditional=m})},[i,s,a]);return t(ce,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(C(e.states,l)).map(([r,u])=>{const o=l.get(u.value).value,m=o===r;return t(O,{color:m?"success":"primary",disabled:n,fullWidth:!0,onClick:()=>c(u.path,o?void 0:r),size:"small",startIcon:m?t(Fe,{}):t(Ne,{}),sx:{borderRadius:0},children:de(u.name)},r)})})}function ze(e){return typeof e!="string"}function Ue(e){if(!e)return"";let n="primary",a=e;return e&&ze(e)&&e.props.color&&(n=e.props.color,a=t("span",{children:e.props.children})),t(Oe,{sx:{ml:.5},color:n,children:a})}function de(e){if(ze(e)){const n=e.props.key18,a=e.props.ns,s=e.props.values;return t(ft,{ns:a,key18:n,values:s,useBadge:!0})}return e}function dn({conditional:e,hideHeader:n=!1,hideDesc:a=!1,disabled:s=!1,bgt:l="normal"}){var r;const{data:i}=p.useContext(k);let c;if("path"in e){const u=i.get(e.value).value,o=C(e.states,i);c=u&&((r=o[u])==null?void 0:r.fields)}else{const u=C(e.states,i);c=Object.values(u).flatMap(o=>i.get(o.value).value?o.fields:[])}return f(Te,{bgt:l,children:[!C(n,e)&&t(He,{header:e.header,hideDesc:a}),t(oe,{sx:{p:0,"&:last-child":{pb:0}},children:t(on,{conditional:e,disabled:s})}),c&&t(Ge,{bgt:l,fields:c})]})}function un({sections:e,teamBuffOnly:n,hideDesc:a=!1,hideHeader:s=!1,disabled:l=!1,bgt:i="normal"}){const{data:c}=p.useContext(k);if(!e.length)return null;const r=e.map((u,o)=>u.canShow&&!c.get(u.canShow).value||n&&!u.teamBuff?null:t(pn,{section:u,hideDesc:a,hideHeader:s,disabled:l,bgt:i},o)).filter(u=>u);return r.length?t(I,{display:"flex",flexDirection:"column",gap:1,children:r}):null}function pn({section:e,hideDesc:n=!1,hideHeader:a=!1,disabled:s=!1,bgt:l="normal"}){return"fields"in e?t(mn,{section:e,hideDesc:n,hideHeader:a,bgt:l}):"states"in e?t(dn,{conditional:e,hideDesc:n,hideHeader:a,disabled:s,bgt:l}):t(fn,{section:e})}function mn({section:e,hideDesc:n,hideHeader:a,bgt:s="normal"}){return f(Te,{bgt:s,children:[!C(a,e)&&e.header&&t(He,{header:e.header,hideDesc:n,hideDivider:e.fields.length===0}),t(Ge,{bgt:s,fields:e.fields})]})}function fn({section:e}){const{data:n}=p.useContext(k);return t("div",{children:C(e.text,n)})}function He({header:e,hideDesc:n,hideDivider:a}){const{data:s}=p.useContext(k),{icon:l,title:i,action:c}=e,r=C(l,s),u=!n&&C(e.description,s);return f(Me,{children:[t(Qt,{avatar:r,title:n?i:f("span",{children:[i,t(Mt,{title:t(S,{children:u})})]}),action:c}),!a&&t(J,{})]})}function hn({refinement:e,setRefinement:n,disabled:a=!1}){const{t:s}=re("ui");return t(je,{title:s("refinement",{value:e}),disabled:a,children:ht.map(l=>t(q,{onClick:()=>n(l),selected:e===l,disabled:e===l,children:s("refinement",{value:l})},l))})}const xn=yt.lazy(()=>Ct(()=>import("./WeaponSelectionModal-d9d1c46e.js"),["./WeaponSelectionModal-d9d1c46e.js","./index-79c6eb67.js","./index-470587c3.css","./index-fe2ac691.js","./ColoredText-190c61b7.js","./SqBadge-b4d76ad3.js","./Close-1f3a8af0.js","./index-728e4819.js","./totalUtils-5b63d050.js","./StarDisplay-bd464f13.js","./DropdownButton-cb142def.js","./WeaponCard-56ae9219.js","./SolidToggleButtonGroup-d1cbb205.js","./useWeapon-d9d2692d.js","./ConditionalWrapper-23de6fd9.js","./CardActionArea-370e7c9d.js"],import.meta.url));function bn({weaponId:e,footer:n=!1,onClose:a,extraButtons:s}){const{data:l}=p.useContext(k),i=X(),c=Lt(e),{key:r="",level:u=0,refinement:o=1,ascension:m=0,lock:b,location:x="",id:h}=c??{},d=r?Ft(r):void 0,y=p.useCallback(g=>{i.weapons.set(e,g)},[e,i]),D=p.useCallback(g=>h&&i.weapons.set(h,{location:g}),[i,h]),K=p.useCallback(g=>g.weaponTypeKey===(d==null?void 0:d.weaponType),[d]),[Q,Z,V]=Re(),ee=r?It(r,m>=2):"";p.useEffect(()=>{if(!(!d||!y||d.key!==(c==null?void 0:c.key))&&d.rarity<=2&&(u>70||m>4)){const[g,L]=Pe[0];y({level:g,ascension:L})}},[d,c,y,u,m]);const F=p.useMemo(()=>d&&c&&St([d.data,kt(c)]),[d,c]);return t(gt,{open:!!e,onClose:a,containerProps:{maxWidth:"md"},children:f(bt,{children:[t(xn,{ascension:m,show:Q,onHide:V,onSelect:g=>y({key:g}),weaponTypeFilter:d&&d.weaponType}),t(oe,{children:d&&F&&f(w,{container:!0,spacing:1.5,children:[t(w,{item:!0,xs:12,sm:3,children:f(w,{container:!0,spacing:1.5,children:[t(w,{item:!0,xs:6,sm:12,children:f(I,{sx:{position:"relative",display:"flex"},children:[t(I,{component:"img",src:ee,className:`grad-${d.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),t(ge,{color:"primary",onClick:()=>h&&i.weapons.set(h,{lock:!b}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:b?t(Dt,{}):t(At,{})})]})}),t(w,{item:!0,xs:6,sm:12,children:t(S,{children:t("small",{children:d.description})})})]})}),f(w,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[f(I,{display:"flex",gap:1,flexWrap:"wrap",children:[f(ce,{children:[t(O,{color:"info",onClick:Z,children:(d==null?void 0:d.name)??"Select a Weapon"}),(d==null?void 0:d.hasRefinement)&&t(hn,{refinement:o,setRefinement:g=>y({refinement:g})}),s]}),a&&t(ge,{onClick:a,sx:{marginLeft:"auto"},children:t(wt,{})})]}),t(I,{display:"flex",gap:1,flexWrap:"wrap",children:d&&t(sn,{level:u,ascension:m,setBoth:y,useLow:!d.hasRefinement})}),t(jt,{stars:d.rarity}),t(S,{variant:"subtitle1",children:t("strong",{children:d.passiveName})}),t(S,{gutterBottom:!0,children:d.passiveName&&d.passiveDescription(F.get(z.weapon.refinement).value-1)}),f(I,{display:"flex",flexDirection:"column",gap:1,children:[f(xt,{children:[t(Pt,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),t(J,{}),t(We,{children:[z.weapon.main,z.weapon.sub,z.weapon.sub2].map(g=>{const L=F.get(g);return L.isEmpty||!L.value?null:t(ie,{node:L,component:_e},JSON.stringify(L.info))})})]}),l&&d.document&&t(un,{sections:d.document})]})]})]})}),n&&h&&t(oe,{sx:{py:1},children:t(w,{container:!0,spacing:1,children:t(w,{item:!0,flexGrow:1,children:t(Rt,{location:x,setLocation:D,filter:K,autoCompleteProps:{getOptionDisabled:g=>!g.key}})})})})]})})}const Tn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"}));export{en as A,Qt as C,Zt as D,Ee as F,_e as L,an as N,hn as R,bn as W,ie as a,We as b,un as c,sn as d,On as e,Tn as f};
