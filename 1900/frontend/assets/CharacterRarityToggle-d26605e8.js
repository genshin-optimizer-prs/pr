import{b as $,aH as Je,aG as Qe,aI as we,b4 as Y,aJ as q,d as l,aK as ut,aL as Ze,cp as fa,aM as Me,j as M,aN as et,b1 as _n,b0 as Rn,cq as ka,c as ht,b7 as Ln,b8 as kt,cr as Sn,T as y,a7 as $a,aD as Ge,aB as le,q as e,ba as tt,aT as kn,bt as Ne,b_ as Bt,a8 as zt,p as c,by as pe,bh as Ke,O as f,bb as de,a5 as Ee,af as at,aR as _e,_ as me,Z,t as At,bc as H,C as z,az as ne,N as v,bW as Ta,am as pt,f as mt,I as De,s as be,a2 as F,cg as Da,r as ge,i as xe,m as Ot,bQ as $n,bf as Ua,cs as Tn,v as ye,bg as ja,ae as Dn,ct as Un,aZ as jn,cu as ga,cv as In,cw as bt,cx as yt,bI as Mn,cy as vt,D as X,k as Bn,c9 as zn,c8 as An,Y as N,B as E,$ as nt,u as K,bA as xa,bB as Ca,bz as ba,aa as On,W as se,o as He,l as he,be as $e,w as Q,bE as Nn,a4 as rt,cz as Ia,cA as En,cB as Ma,cC as Wn,cD as Pn,cE as Fn,bx as Ye,b9 as qn,bv as ft,cF as Hn,a1 as Ba,bP as Nt,as as za,ar as Vn,cG as Gn,a6 as Et,cH as Aa,a3 as gt,bi as Kn,cl as Yn,M as Xn,aP as xt,cI as Jn,bY as Qn,cJ as $t,aF as Tt,n as Dt,e as Wt,cK as Zn,cL as er,cM as tr,cN as wt,h as ar,ce as nr,c7 as rr,aS as Oa}from"./index-153af171.js";import{u as or,g as ir,l as Pt,k as Ft,m as qt,n as Ht,b as Na,c as sr,e as lr,H as cr,o as dr,p as ur,a as Te,j as hr,d as Ea,T as Wa,q as pr}from"./TeamCard-c6132e6b.js";import{b as ot,D as J,g as mr,a as Pa}from"./getDisplayUtil-3cb641eb.js";import{I as Vt,J as Fa,g as Gt,K as fr,z as ya,M as gr,N as xr,O as Cr,D as qa,P as br,Q as yr,x as Oe,R as Kt,C as Yt,e as A,U as Xt,V as Ha,W as vr,T as Xe,r as wr,b as Va,X as _r,u as Ga,a as Ka,S as Ya,d as it,f as Jt,s as Xa,w as Ja,Y as Rr}from"./index-5a321f82.js";import{u as Lr,r as Qt,a as Sr,c as kr,n as $r}from"./uiData-3df78ec3.js";import{d as ve}from"./Close-8c7be6e5.js";import{a as Qa,C as Tr,L as Le,F as Dr,A as Ur,W as Za,D as en,b as jr}from"./WeaponEditor-cdeca829.js";import{i as We}from"./index-d4d223e1.js";import{S as Zt,E as ea}from"./StatIcon-5f31f8b4.js";import{C as Be}from"./CardActionArea-d8213cc1.js";import{S as ta}from"./SlotIcon-86010403.js";import{u as Ut,f as Ir,A as st,d as Mr,i as Br,b as zr}from"./ArtifactSort-919694a8.js";import{b as lt,c as Ar,d as Or,w as Nr,W as Er}from"./WeaponCard-b65da350.js";import{d as ke}from"./Info-3ef80394.js";import{a as tn,d as an}from"./CheckBoxOutlineBlank-6e179f06.js";import{b as Wr}from"./util-3e22b532.js";import{d as Pr,M as Fr,D as qr}from"./DropdownButton-990b99d4.js";import{C as fe}from"./CardHeader-5a31813a.js";import{C as nn}from"./ChevronRight-d199cbec.js";import Hr from"./WeaponSelectionModal-4c43ca9e.js";import{d as Vr}from"./Settings-935ef9e4.js";import{d as Gr}from"./LocationAutocomplete-1468d07e.js";import{c as va}from"./totalUtils-42d7ebed.js";function Kr(t){const a=$();return Vt(a.builds,t)}function rn(t){const a=$();return Vt(a.buildTcs,t)}function Pe(t){const a=$();return Vt(a.optConfigs,t)}function Yr(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:o=!1}=t,i=Fa({badgeContent:a,max:r});let s=n;n===!1&&a===0&&!o&&(s=!0);const{badgeContent:d,max:p=r}=s?i:t,u=d&&Number(d)>p?`${p}+`:d;return{badgeContent:d,invisible:s,max:p,displayValue:u}}function Xr(t){return Qe("MuiBadge",t)}const Jr=Je("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Re=Jr,Qr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],_t=10,Rt=4,Zr=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:o,variant:i,classes:s={}}=t,d={root:["root"],badge:["badge",i,r&&"invisible",`anchorOrigin${Y(n.vertical)}${Y(n.horizontal)}`,`anchorOrigin${Y(n.vertical)}${Y(n.horizontal)}${Y(o)}`,`overlap${Y(o)}`,a!=="default"&&`color${Y(a)}`]};return et(d,Xr,s)},eo=we("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),to=we("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${Y(n.anchorOrigin.vertical)}${Y(n.anchorOrigin.horizontal)}${Y(n.overlap)}`],n.color!=="default"&&a[`color${Y(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>q({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:_t*2,lineHeight:1,padding:"0 6px",height:_t*2,borderRadius:_t,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:Rt,height:Rt*2,minWidth:Rt*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Re.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),ao=l.forwardRef(function(a,n){var r,o,i,s,d,p;const u=ut({props:a,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:m,component:x,components:g={},componentsProps:C={},children:b,overlap:L="rectangular",color:T="default",invisible:k=!1,max:I=99,badgeContent:W,slots:U,slotProps:S,showZero:j=!1,variant:R="standard"}=u,w=Ze(u,Qr),{badgeContent:O,invisible:_,max:re,displayValue:oe}=Yr({max:I,invisible:k,badgeContent:W,showZero:j}),ae=Fa({anchorOrigin:h,color:T,overlap:L,variant:R,badgeContent:W}),V=_||O==null&&R!=="dot",{color:ee=T,overlap:G=L,anchorOrigin:te=h,variant:B=R}=V?ae:u,ie=B!=="dot"?oe:void 0,Ue=q({},u,{badgeContent:O,invisible:V,max:re,displayValue:ie,showZero:j,anchorOrigin:te,color:ee,overlap:G,variant:B}),ze=Zr(Ue),je=(r=(o=U==null?void 0:U.root)!=null?o:g.Root)!=null?r:eo,ce=(i=(s=U==null?void 0:U.badge)!=null?s:g.Badge)!=null?i:to,ue=(d=S==null?void 0:S.root)!=null?d:C.root,Ae=(p=S==null?void 0:S.badge)!=null?p:C.badge,D=fa({elementType:je,externalSlotProps:ue,externalForwardedProps:w,additionalProps:{ref:n,as:x},ownerState:Ue,className:Me(ue==null?void 0:ue.className,ze.root,m)}),P=fa({elementType:ce,externalSlotProps:Ae,ownerState:Ue,className:Me(ze.badge,Ae==null?void 0:Ae.className)});return M.jsxs(je,q({},D,{children:[b,M.jsx(ce,q({},P,{children:ie}))]}))}),no=ao;function ro(t){return Qe("PrivateSwitchBase",t)}Je("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const oo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],io=t=>{const{classes:a,checked:n,disabled:r,edge:o}=t,i={root:["root",n&&"checked",r&&"disabled",o&&`edge${Y(o)}`],input:["input"]};return et(i,ro,a)},so=we(_n)(({ownerState:t})=>q({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),lo=we("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),co=l.forwardRef(function(a,n){const{autoFocus:r,checked:o,checkedIcon:i,className:s,defaultChecked:d,disabled:p,disableFocusRipple:u=!1,edge:h=!1,icon:m,id:x,inputProps:g,inputRef:C,name:b,onBlur:L,onChange:T,onFocus:k,readOnly:I,required:W=!1,tabIndex:U,type:S,value:j}=a,R=Ze(a,oo),[w,O]=Rn({controlled:o,default:!!d,name:"SwitchBase",state:"checked"}),_=ka(),re=B=>{k&&k(B),_&&_.onFocus&&_.onFocus(B)},oe=B=>{L&&L(B),_&&_.onBlur&&_.onBlur(B)},ae=B=>{if(B.nativeEvent.defaultPrevented)return;const ie=B.target.checked;O(ie),T&&T(B,ie)};let V=p;_&&typeof V>"u"&&(V=_.disabled);const ee=S==="checkbox"||S==="radio",G=q({},a,{checked:w,disabled:V,disableFocusRipple:u,edge:h}),te=io(G);return M.jsxs(so,q({component:"span",className:Me(te.root,s),centerRipple:!0,focusRipple:!u,disabled:V,tabIndex:null,role:void 0,onFocus:re,onBlur:oe,ownerState:G,ref:n},R,{children:[M.jsx(lo,q({autoFocus:r,checked:o,defaultChecked:d,className:te.input,disabled:V,id:ee?x:void 0,name:b,onChange:ae,readOnly:I,ref:C,required:W,ownerState:G,tabIndex:U,type:S},S==="checkbox"&&j===void 0?{}:{value:j},g)),w?i:m]}))}),uo=co,ho=ht(M.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),po=ht(M.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),mo=ht(M.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function fo(t){return Qe("MuiCheckbox",t)}const go=Je("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Lt=go,xo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Co=t=>{const{classes:a,indeterminate:n,color:r,size:o}=t,i={root:["root",n&&"indeterminate",`color${Y(r)}`,`size${Y(o)}`]},s=et(i,fo,a);return q({},a,s)},bo=we(uo,{shouldForwardProp:t=>Ln(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.indeterminate&&a.indeterminate,n.color!=="default"&&a[`color${Y(n.color)}`]]}})(({theme:t,ownerState:a})=>q({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:kt(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${Lt.checked}, &.${Lt.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${Lt.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),yo=M.jsx(po,{}),vo=M.jsx(ho,{}),wo=M.jsx(mo,{}),_o=l.forwardRef(function(a,n){var r,o;const i=ut({props:a,name:"MuiCheckbox"}),{checkedIcon:s=yo,color:d="primary",icon:p=vo,indeterminate:u=!1,indeterminateIcon:h=wo,inputProps:m,size:x="medium",className:g}=i,C=Ze(i,xo),b=u?h:p,L=u?h:s,T=q({},i,{color:d,indeterminate:u,size:x}),k=Co(T);return M.jsx(bo,q({type:"checkbox",inputProps:q({"data-indeterminate":u},m),icon:l.cloneElement(b,{fontSize:(r=b.props.fontSize)!=null?r:x}),checkedIcon:l.cloneElement(L,{fontSize:(o=L.props.fontSize)!=null?o:x}),ownerState:T,ref:n,className:Me(k.root,g)},C,{classes:k}))}),Ro=_o;function Lo(t){return Qe("MuiFormControlLabel",t)}const So=Je("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ve=So,ko=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],$o=t=>{const{classes:a,disabled:n,labelPlacement:r,error:o,required:i}=t,s={root:["root",n&&"disabled",`labelPlacement${Y(r)}`,o&&"error",i&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return et(s,Lo,a)},To=we("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[{[`& .${Ve.label}`]:a.label},a.root,a[`labelPlacement${Y(n.labelPlacement)}`]]}})(({theme:t,ownerState:a})=>q({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ve.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ve.label}`]:{[`&.${Ve.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Do=we("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,a)=>a.asterisk})(({theme:t})=>({[`&.${Ve.error}`]:{color:(t.vars||t).palette.error.main}})),Uo=l.forwardRef(function(a,n){var r,o;const i=ut({props:a,name:"MuiFormControlLabel"}),{className:s,componentsProps:d={},control:p,disabled:u,disableTypography:h,label:m,labelPlacement:x="end",required:g,slotProps:C={}}=i,b=Ze(i,ko),L=ka(),T=(r=u??p.props.disabled)!=null?r:L==null?void 0:L.disabled,k=g??p.props.required,I={disabled:T,required:k};["checked","name","onChange","value","inputRef"].forEach(w=>{typeof p.props[w]>"u"&&typeof i[w]<"u"&&(I[w]=i[w])});const W=Sn({props:i,muiFormControl:L,states:["error"]}),U=q({},i,{disabled:T,labelPlacement:x,required:k,error:W.error}),S=$o(U),j=(o=C.typography)!=null?o:d.typography;let R=m;return R!=null&&R.type!==y&&!h&&(R=M.jsx(y,q({component:"span"},j,{className:Me(S.label,j==null?void 0:j.className),children:R}))),M.jsxs(To,q({className:Me(S.root,s),ownerState:U,ref:n},b,{children:[l.cloneElement(p,I),k?M.jsxs($a,{direction:"row",alignItems:"center",children:[R,M.jsxs(Do,{ownerState:U,"aria-hidden":!0,className:S.asterisk,children:["â€‰","*"]})]}):R]}))}),jo=Uo,Io=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Mo=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Bo=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,zo=""+new URL("splash_amber-51176566.png",import.meta.url).href,Ao=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,Oo=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,No=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,Eo=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,Wo=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,Po=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,Fo=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,qo=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,Ho=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,Vo=""+new URL("splash_chiori-0fd0d497.png",import.meta.url).href,Go=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,Ko=""+new URL("splash_collei-504a299e.png",import.meta.url).href,Yo=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,Xo=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,Jo=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,Qo=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,Zo=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,ei=""+new URL("splash_eula-1491affb.png",import.meta.url).href,ti=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,ai=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,ni=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,ri=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,oi=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,ii=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,si=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,li=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,ci=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,di=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,ui=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,hi=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,pi=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,mi=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,fi=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,gi=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,xi=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Ci=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,bi=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,yi=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,vi=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,wi=""+new URL("splash_lumine-51240648.png",import.meta.url).href,_i=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,Ri=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,Li=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Si=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,ki=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,$i=""+new URL("splash_navia-749d043e.png",import.meta.url).href,Ti=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Di=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Ui=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,ji=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Ii=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Mi=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,Bi=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,zi=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Ai=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,Oi=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,Ni=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,Ei=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,Wi=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,Pi=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,Fi=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,qi=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,Hi=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,Vi=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,Gi=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,Ki=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,Yi=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,Xi=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,Ji=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,Qi=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,Zi=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,es=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,ts=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,as=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,ns=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,rs=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,os={Albedo:Mo,Alhaitham:Bo,Amber:zo,AratakiItto:di,Baizhu:No,Barbara:Eo,Beidou:Wo,Bennett:Po,Candace:Fo,Charlotte:qo,Chevreuse:Ho,Chiori:Vo,Chongyun:Go,Collei:Ko,Cyno:Yo,Dehya:Xo,Diluc:Jo,Diona:Qo,Dori:Zo,Eula:ei,Faruzan:ti,Fischl:ai,Freminet:ni,Furina:ri,Gaming:oi,Ganyu:ii,Gorou:si,HuTao:ci,Jean:ui,KaedeharaKazuha:mi,Kaeya:hi,KamisatoAyaka:Ao,KamisatoAyato:Oo,Kaveh:pi,Keqing:fi,Kirara:gi,Klee:xi,KujouSara:Ai,KukiShinobu:bi,Layla:yi,Lisa:vi,Lynette:_i,Lyney:Ri,Mika:Li,Mona:Si,Nahida:ki,Navia:$i,Neuvillette:Ti,Nilou:Di,Ningguang:Ui,Noelle:ji,Qiqi:Ii,RaidenShogun:Mi,Razor:Bi,Rosaria:zi,SangonomiyaKokomi:Ci,Sayu:Oi,Shenhe:Ni,ShikanoinHeizou:li,Sucrose:Ei,Tartaglia:Wi,Thoma:Pi,Tighnari:Fi,TravelerF:wi,TravelerM:Io,Venti:qi,Wanderer:Hi,Wriothesley:Vi,Xiangling:Gi,Xianyun:Ki,Xiao:Yi,Xingqiu:Xi,Xinyan:Ji,YaeMiko:Qi,Yanfei:Zi,Yaoyao:es,Yelan:ts,Yoimiya:as,YunJin:ns,Zhongli:rs};function is(t,a){return os[Ge(t,a)]??""}function on({characterKey:t}){const{gender:a}=le();return t?e(Ne,{placement:"right-end",title:e(y,{children:e(tt,{characterKey:t,gender:a})}),children:e(kn,{characterKey:t,sideMargin:!0})}):null}function jt({statKey:t,disableIcon:a=!1}){return c(f,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Zt,{statKey:t,iconProps:pe}),c("span",{children:[Bt.get(t),Ke(t)]})]})}function sn({statKey:t,disableIcon:a=!1}){return e(zt,{color:Bt.getVariant(t),children:e(jt,{statKey:t,disableIcon:a})})}const ss=ht(M.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom");function ls(t=0,a,n){const{teamId:r,teamCharId:o}=l.useContext(de);return cs(r,o,t,a,n)}function cs(t,a,n=0,r,o){const i=$(),[s,d]=Ee(),p=l.useDeferredValue(s),{gender:u}=le(),{loadoutData:h}=or(t)??{loadoutData:[]},m=l.useMemo(()=>p&&ds(i,t,u,a,n,r,o),[p,u,t,i,n,a,r,o]);return l.useEffect(()=>t?i.teams.follow(t,d):void 0,[t,d,i]),l.useEffect(()=>{if(!s)return()=>{};const x=h.map(g=>{if(!g)return()=>{};const C=i.teamChars.follow(g.teamCharId,d),b=i.teamChars.followChar(g.teamCharId,d),L=i.teams.followLoadoutDatum(g,d);return()=>{C(),b(),L()}});return()=>{x.forEach(g=>g())}},[s,i,h,d]),m}function ds(t,a,n,r,o=0,i,s){if(!a)return;const d=t.teams.getActiveTeamChar(a);if(!d)return;const{teamData:p,teamBundle:u}=us(t,a,r,o,i,s)??{};if(!p||!u)return;const h=Lr(p,n,d.key);return at(h,(x,g)=>{const{data:C,...b}=u[g];return{...x,...b}})}function us(t,a,n,r=0,o,i){if(!a)return;const s=t.teams.get(a);if(!s)return;const{loadoutData:d,enemyOverride:p,conditional:u}=s,h=d.map(g=>{if(!g)return;const{teamCharId:C,buildType:b,buildTcId:L}=g,T=t.teamChars.get(C);if(!T)return;const{key:k,infusionAura:I,customMultiTargets:W,conditional:U,bonusStats:S,hitMode:j,reaction:R}=T,w=t.chars.get(k);if(!w)return;const{key:O,level:_,constellation:re,ascension:oe,talent:ae}=w,V=C===n,ee=(()=>i&&V?i:t.teams.getLoadoutWeapon(g))(),G=(()=>o&&V?o:b==="tc"&&L?ir(t.buildTcs.get(L)):Object.values(t.teams.getLoadoutArtifacts(g)).filter(B=>B))(),te=(()=>r&&V?r:0)();return hs(t,V,te,{key:O,level:_,constellation:re,ascension:oe,talent:ae,infusionAura:I,customMultiTargets:W,conditional:{...U,...u},bonusStats:S,enemyOverride:p,hitMode:j,reaction:R},ee,G)}).filter(g=>g),m=Object.fromEntries(h.filter(g=>g).map(g=>[g.character.key,g]));return{teamData:at(m,({data:g})=>g),teamBundle:m}}function hs(t,a=!1,n,r,o,i){const s=t.chars.get(r.key),d=ot(r.key,t.gender);if(!d)return;const p=Gt(o.key);if(!p)return;const u=fr[_e(r.key).weaponType],h=a?(()=>{const{display:C,...b}=p.data;return ya([b,u])})():p.data,m=ya([d.data,h,gr]),g=[...Array.isArray(i)?i.map(C=>xr(C,n)):[i],Cr(r,a?m:void 0),qa(o),m,br,yr];return{character:s,weapon:o,characterSheet:d,weaponSheet:p,data:g}}function ln(){const{data:t}=l.useContext(J),a=t.get(Oe.special),{name:n,icon:r}=Qt(a.info);return c(f,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(o=>e(Qa,{node:o},JSON.stringify(o.info))),n&&c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(y,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),r,e(y,{children:n})]})]})}function ps({characterKey:t,onClick:a,onClickHeader:n,footer:r,hideStats:o}){var C;const i=$(),s=Pt(t),d=Ft(t),p=(C=s==null?void 0:s[t])==null?void 0:C.target,u=l.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),h=l.useCallback(b=>e(Be,{onClick:u,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:b}),[u]),m=l.useMemo(()=>d&&{character:d},[d]),x=l.useMemo(()=>p&&s&&{data:p,teamData:s},[p,s]),{favorite:g}=qt(t);return e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:o?300:600}),children:c(At,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(f,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(Z,{sx:{p:.5},onClick:b=>i.charMeta.set(t,{favorite:!g}),children:g?e(Kt,{}):e(Ht,{})})}),e(Yt,{condition:!!a,wrapper:h,children:d&&x&&m?e(ms,{characterContextObj:m,dataContextObj:x,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:o}):e(fs,{characterKey:t})}),r]})})}function ms({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:r,onClickHeader:o,hideStats:i}){return e(H.Provider,{value:t,children:c(J.Provider,{value:a,children:[e(Na,{characterKey:n,onClick:r?void 0:o,children:e(sr,{characterKey:n})}),c(f,{sx:s=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:i?`${s.spacing(1)}!important`:void 0}),children:[e(lr,{}),!i&&e(ln,{})]})]})})}function fs({characterKey:t}){return c(ne,{children:[e(Na,{characterKey:t,children:e(cr,{characterKey:t})}),e(z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const gs=l.createContext({}),xs=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,Cs=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,bs=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,ys=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,vs=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,ws=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,_s=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,Rs=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,Ls=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,Ss=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,ks=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,$s=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Ts=""+new URL("Character_Chiori_Card-190184e6.jpg",import.meta.url).href,Ds=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,Us=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,js=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,Is=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Ms=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Bs=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,zs=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,As=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Os=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Ns=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Es=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Ws=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,Ps=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Fs=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,qs=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Hs=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,Vs=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,Gs=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,Ks=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,Ys=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,Xs=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,Js=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,Qs=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,Zs=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,el=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,tl=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,al=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,nl=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,rl=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,ol=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,il=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,sl=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,ll=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,cl=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,dl=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,ul=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,hl=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,pl=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,ml=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,fl=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,gl=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,xl=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,Cl=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,bl=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,yl=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,vl=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,wl=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,_l=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Rl=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,Ll=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,Sl=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,kl=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,$l=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Tl=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Dl=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,Ul=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,jl=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,Il=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Ml=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Bl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,zl=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Al=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Ol=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Nl=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,El=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Wl=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,Pl=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Fl=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,ql=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,wa={Albedo:xs,Alhaitham:Cs,Aloy:bs,Amber:ys,AratakiItto:vs,Baizhu:ws,Barbara:_s,Beidou:Rs,Bennett:Ls,Candace:Ss,Charlotte:ks,Chevreuse:$s,Chiori:Ts,Chongyun:Ds,Collei:Us,Cyno:js,Dehya:Is,Diluc:Ms,Diona:Bs,Dori:zs,Eula:As,Faruzan:Os,Fischl:Ns,Freminet:Es,Furina:Ws,Gaming:Ps,Ganyu:Fs,Gorou:qs,HuTao:Hs,Jean:Vs,KaedeharaKazuha:Js,Kaeya:Gs,KamisatoAyaka:Ks,KamisatoAyato:Ys,Kaveh:Xs,Keqing:Qs,Kirara:Zs,Klee:el,KujouSara:tl,KukiShinobu:al,Layla:nl,Lisa:rl,Lyney:il,Lynette:ol,Mika:sl,Mona:ll,Nahida:cl,Navia:dl,Neuvillette:ul,Nilou:hl,Ningguang:pl,Noelle:ml,Qiqi:fl,RaidenShogun:gl,Razor:xl,Rosaria:Cl,SangonomiyaKokomi:bl,Sayu:yl,Shenhe:vl,ShikanoinHeizou:wl,Somnia:_l,Sucrose:Rl,Tartaglia:Ll,Thoma:Sl,Tighnari:kl,TravelerF:Fl,TravelerM:ql,Venti:$l,Wanderer:Tl,Wriothesley:Dl,Xiangling:Ul,Xianyun:jl,Xiao:Il,Xingqiu:Ml,Xinyan:Bl,YaeMiko:zl,Yanfei:Al,Yaoyao:Ol,Yelan:Nl,Yoimiya:El,YunJin:Wl,Zhongli:Pl};function Hl(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return wa[`Traveler${a}`]??"";default:return wa[t]??""}}function Cu(){const{character:{key:t}}=l.useContext(H),{gender:a}=le(),n=ot(t,a),{data:r}=l.useContext(J),o={auto:r.get(A.total.auto).value,skill:r.get(A.total.skill).value,burst:r.get(A.total.burst).value},i={auto:r.get(A.total.autoBoost).value,skill:r.get(A.total.skillBoost).value,burst:r.get(A.total.burstBoost).value};return e(f,{children:e(v,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var d;return e(v,{item:!0,xs:4,children:e(no,{badgeContent:o[s],color:i[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(f,{component:"img",src:(d=n.getTalentOfKey(s))==null?void 0:d.img,width:"100%",height:"auto"})})},s)})})})}function Vl(){const{character:{key:t}}=l.useContext(H),a=$(),{data:n}=l.useContext(J),r=n.get(A.constellation).value,{gender:o}=le(),i=ot(t,o);return e(v,{container:!0,spacing:1,children:Ta(1,6).map(s=>{var d;return e(v,{item:!0,xs:4,children:e(Be,{onClick:()=>a.chars.set(t,{constellation:s===r?s-1:s}),children:e(f,{component:"img",src:(d=i.getTalentOfKey(`constellation${s}`))==null?void 0:d.img,sx:{...r>=s?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},s)})})}function Gl(){const{silly:t}=l.useContext(pt),{character:{key:a}}=l.useContext(H),{gender:n}=le(),{data:r}=l.useContext(J),o=r.get(A.lvl).value,i=r.get(A.asc).value,s=is(a,n),d=Hl(a,n);return t&&s?e(Kl,{src:s,level:o,ascension:i}):e(Yl,{src:d,level:o,ascension:i})}function Kl({src:t,level:a,ascension:n}){const{character:{key:r}}=l.useContext(H);return c(f,{sx:{position:"relative"},children:[e(f,{src:t,component:"img",width:"100%",height:"auto"}),c(f,{sx:{width:"100%",height:"100%"},children:[e(f,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(cn,{})}),e(y,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Xt,{stars:_e(r).rarity,colored:!0})}),e(un,{}),e(dn,{level:a,ascension:n})]})]})}function Yl({src:t,level:a,ascension:n}){const{character:{key:r}}=l.useContext(H);return c(f,{sx:{position:"relative"},children:[c(f,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(y,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Xt,{stars:_e(r).rarity,colored:!0})}),e(f,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(cn,{})}),e(un,{}),e(dn,{level:a,ascension:n})]}),e(f,{src:t,component:"img",width:"100%",height:"auto"})]})}function cn(){const{character:{key:t}}=l.useContext(H),{gender:a}=le(),n=mt(t),r=_e(t).weaponType;return e(be,{color:n,sx:{height:"auto"},label:c(y,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(ea,{ele:n}),e(f,{sx:{whiteSpace:"normal",textAlign:"center"},children:e(tt,{characterKey:t,gender:a})}),e(De,{src:We.weaponTypes[r]})]})})}function dn({level:t,ascension:a}){return e(y,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(F,{children:Da(t,a)})})}function un(){const{character:{key:t}}=l.useContext(H),a=$(),{favorite:n}=qt(t);return e(f,{sx:{position:"absolute",left:0,top:0},children:e(Z,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(Kt,{}):e(Ht,{})})})}var aa={},Xl=xe;Object.defineProperty(aa,"__esModule",{value:!0});var Fe=aa.default=void 0,Jl=Xl(ge()),Ql=M,Zl=(0,Jl.default)((0,Ql.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");Fe=aa.default=Zl;function ct({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:o,BGComponent:i=ye}){const s=Ut(t),d=$(),p=l.useCallback(I=>e(Be,{onClick:o,sx:{height:"100%"},children:I}),[o]),u=Ot();if(!s)return e(i,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:We.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:h,rarity:m,level:x,mainStatKey:g,substats:C,location:b}=s,L=Math.max(Math.min(n,m*4),x),T=$n.find(I=>s.mainStatKey.includes(I)),k=T?kt(u.palette[T].main,.6):kt(u.palette.secondary.main,.6);return e(i,{sx:{height:"100%",maxHeight:"8em"},children:e(Yt,{condition:!!o,wrapper:p,children:c(f,{display:"flex",height:"100%",children:[c(f,{className:`grad-${m}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(dr,{art:s,children:e(f,{component:"img",src:Ua(s.setKey,h),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),c(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(be,{size:"small",label:e("strong",{children:` +${x}`}),color:Wr(x)}),r&&e(be,{size:"small",label:b?e(on,{characterKey:b&&d.chars.LocationToCharacterKey(b)}):e(Ha,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(be,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:k,p:1},icon:e(Ne,{placement:"top",title:e(y,{children:e(sn,{statKey:g})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Zt,{statKey:g,iconProps:{style:{padding:"4px"}}})})}),label:e(y,{sx:{mx:-.7},children:e(zt,{color:L!==x?"warning":void 0,children:Tn(g,m,L)})})})]}),e(f,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:C.map((I,W)=>e(ec,{stat:I},W+I.key))})]})})})}function ec({stat:t}){var o;if(!t.value)return null;const a=((o=t.rolls)==null?void 0:o.length)??0,n=`roll${Dn(a,1,6)}`,r=Ke(t.key);return e(f,{display:"flex",gap:1,alignContent:"center",children:c(y,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(Ne,{placement:"top",title:e(y,{children:t.key&&e(sn,{statKey:t.key})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Zt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${ja(t.value,r)}${r}`})]})})}function tc(t){return Qe("MuiMasonry",t)}Je("MuiMasonry",["root"]);const ac=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],Se=t=>Number(t.replace("px","")),nc={flexBasis:"100%",width:0,margin:0,padding:0},rc=t=>{const{classes:a}=t;return et({root:["root"]},tc,a)},oc=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const u={},h=Se(a.spacing(t.defaultSpacing));for(let m=1;m<=t.defaultColumns;m+=1)u[`&:nth-of-type(${t.defaultColumns}n+${m%t.defaultColumns})`]={order:m};return r.height=t.defaultHeight,r.margin=-(h/2),r["& > *"]=q({},n["& > *"],u,{margin:h/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${h}px)`}),q({},n,r)}const o=ga({values:t.spacing,breakpoints:a.breakpoints.values}),i=In(a);n=bt(n,yt({theme:a},o,u=>{let h;if(typeof u=="string"&&!Number.isNaN(Number(u))||typeof u=="number"){const m=Number(u);h=vt(i,m)}else h=u;return q({margin:`calc(0px - (${h} / 2))`,"& > *":{margin:`calc(${h} / 2)`}},t.maxColumnHeight&&{height:typeof h=="number"?Math.ceil(t.maxColumnHeight+Se(h)):`calc(${t.maxColumnHeight}px + ${h})`})}));const d=ga({values:t.columns,breakpoints:a.breakpoints.values});return n=bt(n,yt({theme:a},d,u=>{const m=`${(100/Number(u)).toFixed(2)}%`,x=typeof o=="string"&&!Number.isNaN(Number(o))||typeof o=="number"?vt(i,Number(o)):"0px";return{"& > *":{width:`calc(${m} - ${x})`}}})),typeof o=="object"&&(n=bt(n,yt({theme:a},o,(u,h)=>{if(h){const m=Number(u),x=Object.keys(d).pop(),g=vt(i,m);return{"& > *":{width:`calc(${`${(100/(typeof d=="object"?d[h]||d[x]:d)).toFixed(2)}%`} - ${g})`}}}return null}))),n},ic=we("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(oc),sc=l.forwardRef(function(a,n){const r=ut({props:a,name:"MuiMasonry"}),{children:o,className:i,component:s="div",columns:d=4,spacing:p=1,defaultColumns:u,defaultHeight:h,defaultSpacing:m}=r,x=Ze(r,ac),g=l.useRef(),[C,b]=l.useState(),L=!C&&h&&u!==void 0&&m!==void 0,[T,k]=l.useState(L?u-1:0),I=q({},r,{spacing:p,columns:d,maxColumnHeight:C,defaultColumns:u,defaultHeight:h,defaultSpacing:m,isSSR:L}),W=rc(I),U=R=>{if(!g.current||!R||R.length===0)return;const w=g.current,O=g.current.firstChild,_=w.clientWidth,re=O.clientWidth;if(_===0||re===0)return;const oe=window.getComputedStyle(O),ae=Se(oe.marginLeft),V=Se(oe.marginRight),ee=Math.round(_/(re+ae+V)),G=new Array(ee).fill(0);let te=!1;w.childNodes.forEach(B=>{if(B.nodeType!==Node.ELEMENT_NODE||B.dataset.class==="line-break"||te)return;const ie=window.getComputedStyle(B),Ue=Se(ie.marginTop),ze=Se(ie.marginBottom),je=Se(ie.height)?Math.ceil(Se(ie.height))+Ue+ze:0;if(je===0){te=!0;return}for(let ce=0;ce<B.childNodes.length;ce+=1){const ue=B.childNodes[ce];if(ue.tagName==="IMG"&&ue.clientHeight===0){te=!0;break}}if(!te){const ce=G.indexOf(Math.min(...G));G[ce]+=je;const ue=ce+1;B.style.order=ue}}),te||Mn.flushSync(()=>{b(Math.max(...G)),k(ee>0?ee-1:0)})};Un(()=>{if(typeof ResizeObserver>"u")return;let R;const w=new ResizeObserver(()=>{R=requestAnimationFrame(U)});return g.current&&g.current.childNodes.forEach(O=>{w.observe(O)}),()=>{R&&window.cancelAnimationFrame(R),w&&w.disconnect()}},[d,p,o]);const S=jn(n,g),j=new Array(T).fill("").map((R,w)=>M.jsx("span",{"data-class":"line-break",style:q({},nc,{order:w+1})},w));return M.jsxs(ic,q({as:s,className:Me(W.root,i),ref:S,ownerState:I},x,{children:[o,j]}))}),lc=sc,cc=l.createContext(void 0);function dc({columns:t={xs:1,sm:2,md:3,xl:4}}){const{data:a}=l.useContext(J),n=l.useMemo(()=>mr(a).filter(([,r])=>Object.values(r).some(o=>!o.isEmpty)),[a]);return e(f,{sx:{mr:-1,mb:-1},children:e(lc,{columns:t,spacing:1,children:n.map(([r,o])=>e(uc,{displayNs:o,sectionKey:r},r))})})}function uc({displayNs:t,sectionKey:a}){const n=l.useContext(cc),{data:r,compareData:o}=l.useContext(J),i=$(),s=l.useMemo(()=>Pa(r,a,i),[i,r,a]),d=l.useMemo(()=>at(t,(m,x)=>vr(["display",a,x])),[t,a]);if(!s)return e(ye,{});const{title:p,icon:u,action:h}=s;return c(ye,{children:[e(Tr,{avatar:u&&e(De,{size:2,src:u}),title:p,action:h&&e(F,{children:h})}),e(X,{}),e(Dr,{sx:{m:0},children:Object.entries(t).map(([m,x])=>e(Qa,{node:x,compareValue:o?o.get(d[m]).value:void 0,component:Le,emphasize:JSON.stringify(n)===JSON.stringify([a,m])},m))})]})}function dt({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=ye,weaponTypeKey:o="sword"}){const i=Sr(t),s=(i==null?void 0:i.key)&&Gt(i.key);return!i||!s?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:We.weaponTypes[o],sx:{width:"25%",height:"auto",opacity:.7}})}):e(hn,{weapon:i,weaponSheet:s,onClick:n,showLocation:a,BGComponent:r})}function hn({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:o=ye}){const i=$(),{refinement:s,location:d}=t,p=l.useCallback(h=>e(Be,{sx:{height:"100%"},onClick:r,children:h}),[r]),u=l.useMemo(()=>a&&t&&kr([a.data,qa(t)]),[a,t]);return e(o,{sx:{height:"100%",maxHeight:"8em"},children:e(Yt,{condition:!!r,wrapper:p,children:c(f,{display:"flex",height:"100%",alignItems:"stretch",children:[c(f,{className:`grad-${Bn(t.key).rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(ur,{weaponKey:t.key,children:e(f,{component:"img",src:zn(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),c(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(be,{size:"small",label:e("strong",{children:Da(t.level,t.ascension)}),color:"primary"}),n&&e(be,{size:"small",label:d?e(on,{characterKey:i.chars.LocationToCharacterKey(d)}):e(Ha,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:An(t.key)&&e(be,{size:"small",color:"info",label:c("strong",{children:["R",s]})})})]}),c(f,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(_a,{node:u.get(Oe.weapon.main)}),e(_a,{node:u.get(Oe.weapon.sub)})]})]})})})}function _a({node:t}){const{name:a,icon:n}=Qt(t.info);return a?e(f,{display:"flex",gap:1,alignContent:"center",children:c(y,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(Ne,{placement:"top",title:e(y,{children:a}),disableInteractive:!0,children:e("span",{children:n})}),e("span",{children:$r(t)})]})}):null}function hc({equipChangeProps:t,showPrompt:a,OnHidePrompt:n,onEquip:r}){const[o,i]=l.useState(""),[s,d]=l.useState(!1),p=$(),{teamCharId:u}=l.useContext(de),{character:{key:h}}=l.useContext(H),m=_e(h).weaponType,x=()=>{s&&p.teamChars.newBuild(u,{name:o!==""?o:`Duplicate of ${t.currentName}`,artifactIds:t.currentArtifacts,weaponId:t.currentWeapon}),r(),i(""),d(!1),n()};return e(nt,{open:a,onClose:n,children:c(N,{children:[e(fe,{title:c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Te,{}),c("span",{children:["Confirm Equipment Changes for"," ",e("strong",{children:t.currentName})]})]}),action:e(Z,{onClick:n,children:e(ve,{})})}),e(X,{}),e(z,{sx:{display:"flex",flexDirection:"column"},children:c(f,{children:[c(N,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(F,{color:"success",children:"Current Equipment"})}),e(z,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:c(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(v,{item:!0,xs:1,children:e(dt,{weaponId:t.currentWeapon,weaponTypeKey:m})}),Object.entries(t.currentArtifacts).map(([g,C])=>e(v,{item:!0,xs:1,children:e(ct,{artifactId:C,slotKey:g})},C||g))]})})]}),e(f,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",padding:2,children:e(Pr,{sx:{fontSize:40}})}),c(N,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(F,{color:"success",children:"New Equipment"})}),e(z,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:c(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(v,{item:!0,xs:1,children:e(dt,{weaponId:t.newWeapon,weaponTypeKey:m})}),Object.entries(t.newArtifacts).map(([g,C])=>e(v,{item:!0,xs:1,children:e(ct,{artifactId:C,slotKey:g})},C||g))]})})]})]})}),c(z,{sx:{pt:"0",display:"flex",flexDirection:"column"},children:[e(y,{sx:{fontSize:20},children:"Do you want to make the changes shown above?"}),u&&e(jo,{label:c(ne,{children:["Copy the current equipment in"," ",e("strong",{children:t.currentName})," to a new build. Otherwise, they will be overwritten."]}),control:e(Ro,{checked:s,onChange:g=>d(g.target.checked),color:s?"success":"secondary"})}),s&&e(Xe,{label:"Build Name",placeholder:`Duplicate of ${t.currentName}`,value:o,onChange:g=>i(g.target.value),size:"small",sx:{width:"75%",marginX:4}}),c(f,{sx:{display:"flex",justifyContent:"flex-end",gap:1,marginTop:4},children:[e(E,{color:"error",onClick:n,children:"Cancel"}),e(E,{color:"success",onClick:x,children:"Equip"})]})]})]})})}function pc({artifacts:t}){const a=l.useMemo(()=>{const n=t.filter(r=>r).reduce((r,o)=>(r[o.setKey]?r[o.setKey].push(o.slotKey):r[o.setKey]=[o.slotKey],r),{});return Object.keys(n).forEach(r=>{var o;((o=n[r])==null?void 0:o.length)===1&&delete n[r]}),n},[t]);return e(ne,{children:Object.entries(a).sort(([n,r],[o,i])=>i.length-r.length).map(([n,r])=>e(mc,{setKey:n,slotarr:r},n))})}function mc({setKey:t,slotarr:a}){const n=wr(t),r=a.length,o=Object.keys(n.setEffects).map(i=>parseInt(i)).filter(i=>i<=r);return e(f,{children:e(Ir,{setKey:t,numInSet:r,children:e(F,{sx:{height:"100%"},color:"primary",children:c(y,{children:[a.map(i=>e(ta,{slotKey:i,iconProps:pe},i))," ",e(Va,{setKey:t}),o.map((i,s)=>e(F,{sx:{ml:.5},color:"success",children:i},""+i+s))]})})})})}var na={},fc=xe;Object.defineProperty(na,"__esModule",{value:!0});var It=na.default=void 0,gc=fc(ge()),xc=M,Cc=(0,gc.default)((0,xc.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");It=na.default=Cc;var ra={},bc=xe;Object.defineProperty(ra,"__esModule",{value:!0});var Mt=ra.default=void 0,yc=bc(ge()),vc=M,wc=(0,yc.default)((0,vc.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");Mt=ra.default=wc;function _c({setKey:t,buttonGroupSx:a}){const{t:n}=K("sheet"),{teamChar:{optConfigId:r}}=l.useContext(de),{artSetExclusion:o}=Pe(r),i=(o==null?void 0:o[t])??[],s=i.includes(2),d=i.includes(4),p=$();return c(On,{sx:a,fullWidth:!0,children:[e(E,{startIcon:s?e(xa,{}):e(Ca,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ba(o,t,2)}),color:s?"secondary":"success",endIcon:s?e(It,{}):e(Mt,{}),children:n`2set`}),e(E,{startIcon:d?e(xa,{}):e(Ca,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ba(o,t,4)}),color:d?"secondary":"success",endIcon:d?e(It,{}):e(Mt,{}),children:n`4set`})]})}const Rc=l.memo(Lc);function Lc({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r,mainStatAssumptionLevel:o,allowLocationsState:i}){var Ae;const{loadoutDatum:{buildType:s,buildId:d},teamChar:{buildIds:p=[]}}=l.useContext(de),{character:{key:u,equippedArtifacts:h,equippedWeapon:m}}=l.useContext(H),x=$(),{data:g,compareData:C}=l.useContext(J),[b,L]=Ee();l.useEffect(()=>{const D=p.map(P=>x.builds.follow(P,L));return()=>D.forEach(P=>P())},[x,p,L]);const T=l.useMemo(()=>{var D;return{oldId:(D=C==null?void 0:C.get(A.weapon.id))==null?void 0:D.value,newId:g.get(A.weapon.id).value??""}},[g,C]),[k,I,W]=se(!1),U=l.useMemo(()=>He(he,D=>{var P;return{oldId:(P=C==null?void 0:C.get(A.art[D].id))==null?void 0:P.value,newId:g.get(A.art[D].id).value??""}}),[g,C]),[S,j]=l.useState(),R=l.useCallback(()=>j(void 0),[j]),w=d&&s==="real",O=l.useCallback(()=>{if(w){x.builds.set(d,{weaponId:g.get(A.weapon.id).value,artifactIds:He(he,Ce=>{var Ie;return(Ie=g.get(A.art[Ce].id).value)==null?void 0:Ie.toString()})});return}const D=x.chars.get(u);if(!D)return;he.forEach(Ce=>{var qe;const Ie=(qe=g.get(A.art[Ce].id).value)==null?void 0:qe.toString();if(Ie)x.arts.set(Ie,{location:$e(u)});else{const Ct=D.equippedArtifacts[Ce];Ct&&x.arts.get(Ct)&&x.arts.set(Ct,{location:""})}});const P=g.get(A.weapon.id).value;P&&x.weapons.set(P,{location:$e(u)})},[u,w,d,g,x]),_=l.useMemo(()=>Object.fromEntries(he.map(D=>{var P;return[D,(P=g.get(A.art[D].id).value)==null?void 0:P.toString()]})),[g]),re=l.useMemo(()=>_&&Object.values(_).map(D=>x.arts.get(D)).filter(D=>D),[_,x.arts]),oe=l.useMemo(()=>e(v,{item:!0,xs:1,children:e(dt,{showLocation:!0,weaponId:g.get(A.weapon.id).value,onClick:I})}),[g,I]),ae=l.useMemo(()=>he.map(D=>e(v,{item:!0,xs:1,children:e(ct,{showLocation:!0,slotKey:D,artifactId:_[D],mainStatAssumptionLevel:o,onClick:()=>{const P=U[D].oldId,Ce=U[D].newId;j({oldId:P!==Ce?P:void 0,newId:Ce})}})},D)),[j,U,o,_]),V=he.every(D=>_[D]===h[D])&&g.get(A.weapon.id).value===m,ee=l.useMemo(()=>b&&p.filter(D=>{const P=x.builds.get(D);if(!P)return!1;const{artifactIds:Ce,weaponId:Ie}=P;return he.every(qe=>_[qe]===Ce[qe])&&g.get(A.weapon.id).value===Ie}),[b,x,p,_,g]),G=s==="real"&&ee.includes(d),te=G||s==="equipped"&&V,B=s===void 0,ie=l.useMemo(()=>B?m:b&&s==="real"?x.builds.get(d).weaponId:b&&s==="equipped"?m:"",[b,x,s,d,m,B]),Ue=l.useMemo(()=>B?h:b&&s==="real"?x.builds.get(d).artifactIds:b&&s==="equipped"?h:He(he,()=>""),[b,x,s,d,h,B]),[ze,je,ce]=se(),ue={currentName:s==="real"?x.builds.get(d).name:"Equipped",currentWeapon:ie,currentArtifacts:Ue,newWeapon:g.get(A.weapon.id).value,newArtifacts:He(he,D=>g.get(A.art[D].id).value)};return e(At,{sx:{boxShadow:te?"0px 0px 0px 2px green inset":void 0},children:c(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:600}),children:[T&&e(Sc,{newOld:T,showWeapon:k,onClose:W}),S&&e(kc,{newOld:S,mainStatAssumptionLevel:o,onClose:R,allowLocationsState:i,compareFromCharEditor:B}),c(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[c(f,{display:"flex",gap:1,flexWrap:"wrap",children:[t!==void 0&&e(F,{color:V?"success":"info",children:c(y,{sx:{display:"flex",gap:1},children:[e("strong",{children:t}),V&&e("span",{children:"(Equipped)"})]})}),!!ee.length&&e(F,{color:G?"success":"info",children:c(y,{sx:{display:"flex",gap:1},children:[e(Te,{}),e("span",{children:(Ae=x.builds.get(G?d:ee[0]))==null?void 0:Ae.name}),G&&e("span",{children:"(current build)"}),ee.length>1&&e(Q,{arrow:!0,title:e(f,{children:ee.map(D=>{var P;return c(y,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Te,{}),(P=x.builds.get(D))==null?void 0:P.name]})})}),children:e(ke,{})})]})}),e(pc,{artifacts:re}),e(f,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(hc,{equipChangeProps:ue,showPrompt:ze,onEquip:O,OnHidePrompt:ce}),e(E,{size:"small",color:"success",onClick:je,disabled:r||G,startIcon:e(ss,{}),children:"Equip to Current Build"}),a]}),e(f,{children:c(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[oe,ae]})}),e(dc,{})]})]})})}function Sc({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const o=$(),i=a!==t,s=l.useCallback(d=>o.weapons.remove(d),[o]);return e(rt,{open:n,onClose:r,containerProps:{maxWidth:i?"md":"xs"},children:e(ye,{children:c(z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[i&&c(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(y,{variant:"h6",textAlign:"center",color:"info",children:e(F,{children:"TC Weapon"})}):e(lt,{weaponId:a,onDelete:s})]}),i&&e(f,{display:"flex",flexGrow:1}),i&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(nn,{sx:{fontSize:40}})}),i&&e(f,{display:"flex",flexGrow:1}),c(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(lt,{weaponId:t,onDelete:s})]})]})})})}function kc({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:o,compareFromCharEditor:i}){var x;const s=$(),{character:{key:d}}=l.useContext(H),p=((x=s.arts.get(t))==null?void 0:x.location)??"",u=Ut(t),h=Ut(a),m=l.useCallback(g=>s.arts.remove(g),[s]);return e(rt,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(ye,{children:c(z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&c(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(y,{variant:"h6",textAlign:"center",color:"info",children:e(F,{children:"TC Artifact"})}):e(st,{artifactId:a,onDelete:m,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:h==null?void 0:h.slotKey}}),a!=="tc"&&!i&&e(Ra,{id:a})]}),a&&e(f,{display:"flex",flexGrow:1}),a&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(nn,{sx:{fontSize:40}})}),a&&e(f,{display:"flex",flexGrow:1}),c(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(st,{artifactId:t,onDelete:m,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:u==null?void 0:u.slotKey}}),!i&&c(ne,{children:[u&&e(Ra,{id:t}),p&&p!==$e(d)&&o!=="all"&&e($c,{locationKey:p}),u&&Nn.includes(u.setKey)&&e(_c,{setKey:u.setKey})]})]})]})})})}function Ra({id:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(de),r=$(),{artExclusion:o}=Pe(n),i=o.includes(t),s=l.useCallback(()=>r.optConfigs.set(n,{artExclusion:Ia(o,t)}),[t,o,r,n]);return n?e(Ne,{title:e(f,{children:e(y,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(E,{onClick:s,color:i?"secondary":"success",size:"small",startIcon:i?e(tn,{}):e(an,{}),children:a`excludeArt.includeArtifactButton`})}):null}function $c({locationKey:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(de),r=$(),{gender:o}=le(),i=r.chars.LocationToCharacterKey(t),{excludedLocations:s}=Pe(n)??{excludedLocations:[]},d=s.includes(t),p=l.useCallback(()=>r.optConfigs.set(n,{excludedLocations:Ia(s,t)}),[t,s,r,n]);return n?e(E,{onClick:p,color:d?"secondary":"success",size:"small",startIcon:d?e(tn,{}):e(an,{}),children:c("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:e(tt,{characterKey:i,gender:o})})]})}):null}const La={pyro:["vaporize","melt"],hydro:["vaporize"],cryo:["melt"],anemo:["vaporize","melt"]},Sa={dendro:["spread"],electro:["aggravate"],anemo:["aggravate"]},St={mx:.25,px:.25};function Tc({reaction:t}){const{t:a}=K("sheet_gen"),n=t==="spread"?"dendro":"electro";return c(f,{display:"flex",alignItems:"center",children:[e(zt,{color:t,children:a(`reaction.${t}`)}),e(F,{sx:St,color:"dendro",children:e(En,{...pe})}),"+",e(F,{sx:St,color:"electro",children:e(Ma,{...pe})}),"+",e(F,{sx:St,color:n,children:e(ea,{ele:n,iconProps:pe})})]})}const bu={"":e("span",{children:"No Team Melee Infusion"}),pyro:c("span",{children:[e(Wn,{...pe})," ",e(F,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:c("span",{children:[e(Pn,{...pe})," ",e(F,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:c("span",{children:[e(Fn,{...pe})," ",e(F,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:c("span",{children:[e(Ma,{...pe})," ",e(F,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Dc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{reaction:r}}=l.useContext(de),o=$(),{data:i}=l.useContext(J),s=i.get(A.charEle).value,d=i.get(_r).value,p=[...new Set([...La[s]??[],...La[d]??[],...Sa[s]??[],...Sa[d]??[]])];return c(ft,{exclusive:!0,baseColor:"secondary",value:r,onChange:(u,h)=>o.teamChars.set(n,{reaction:h}),disabled:!n,...t,children:[e(Ye,{value:"",disabled:!r,children:a`noReaction`}),p.map(u=>e(Ye,{value:u,disabled:r===u,children:[...qn].includes(u)?e(Ur,{reaction:u}):e(Tc,{reaction:u})},u))]})}function Uc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=l.useContext(de),o=$();return e(ft,{exclusive:!0,baseColor:"secondary",value:r,onChange:(i,s)=>o.teamChars.set(n,{hitMode:s}),disabled:!n,...t,children:Hn.map(i=>e(Ye,{value:i,disabled:r===i,children:a(`hitmode.${i}`)},i))})}function pn({artId:t,weaponId:a}){const{t:n}=K("page_character"),[r,o,i]=se(!1);return c(ne,{children:[e(nt,{open:r,onClose:i,containerProps:{maxWidth:"xl"},children:e(jc,{artId:t,weaponId:a,onHide:i})}),e(Q,{title:e(y,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(E,{color:"info",size:"small",onClick:o,children:e(Mr,{})})})]})}function jc(t){var r;const a=l.useContext(de),n=l.useContext(H);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(Ic,{...t}):n!=null&&n.character?e(Mc,{...t}):null}function Ic({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:o}}=l.useContext(H),{loadoutDatum:i,teamChar:{optConfigId:s}}=l.useContext(de),{mainStatAssumptionLevel:d}=Pe(s),{data:p}=l.useContext(J),u=l.useMemo(()=>{const x=r.arts.get(t??""),g=r.teams.getLoadoutArtifacts(i),C=at(g,(b,L)=>L===(x==null?void 0:x.slotKey)?x:b);return Object.values(C).filter(b=>b)},[r,i,t]),h=ls(d,u,a?r.weapons.get(a):void 0),m=l.useMemo(()=>h&&{data:h[o].target,teamData:h,compareData:p},[o,h,p]);return m?e(mn,{dataProviderValue:m,onHide:n}):null}function Mc({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:o,equippedArtifacts:i}}=l.useContext(H),{data:s}=l.useContext(J),d=l.useMemo(()=>{const h=r.arts.get(t??""),m=at(i,(x,g)=>g===(h==null?void 0:h.slotKey)?h:r.arts.get(x));return Object.values(m).filter(x=>x)},[r,i,t]),p=Pt(o,0,d,a?r.weapons.get(a):void 0),u=l.useMemo(()=>p&&{data:p[o].target,teamData:p,compareData:s},[o,p,s]);if(u)return e(mn,{dataProviderValue:u,onHide:n})}function mn({dataProviderValue:t,onHide:a}){const{teamChar:{optConfigId:n}}=l.useContext(de),{mainStatAssumptionLevel:r,allowLocationsState:o}=Pe(n)??{mainStatAssumptionLevel:0,allowLocationsState:"all"};return e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:600}),children:t&&e(J.Provider,{value:t,children:e(Rc,{extraButtonsLeft:c(ne,{children:[e(Uc,{size:"small"}),e(Dc,{size:"small"})]}),extraButtonsRight:e(Z,{onClick:a,children:e(ve,{})}),mainStatAssumptionLevel:r,allowLocationsState:o})})})}const Bc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},zc=l.lazy(()=>Ba(()=>import("./ArtifactEditor-23fe9de5.js"),["./ArtifactEditor-23fe9de5.js","./index-153af171.js","./index-30729562.css","./DropdownButton-990b99d4.js","./ArtifactRarityDropdown-ab1baca4.js","./index-5a321f82.js","./StatIcon-5f31f8b4.js","./index-d4d223e1.js","./ArtifactStatKeyDisplay-2c974ba5.js","./util-3e22b532.js","./Close-8c7be6e5.js","./Help-c44873c2.js","./LockOpen-1aa44b7e.js","./SlotIcon-86010403.js","./LocationAutocomplete-1468d07e.js","./ArtifactSort-919694a8.js","./Info-3ef80394.js","./CardActionArea-d8213cc1.js","./InfoTooltip-bccbfa4e.js","./CardHeader-5a31813a.js","./ChevronRight-d199cbec.js"],import.meta.url)),Ac=l.lazy(()=>Ba(()=>import("./ArtifactFilterDisplay-6e7604ae.js").then(t=>t.b),["./ArtifactFilterDisplay-6e7604ae.js","./index-153af171.js","./index-30729562.css","./index-5a321f82.js","./DropdownButton-990b99d4.js","./StatIcon-5f31f8b4.js","./index-d4d223e1.js","./totalUtils-42d7ebed.js","./useDisplayArtifact-e521feb9.js","./SlotIcon-86010403.js","./LockOpen-1aa44b7e.js","./ArtifactStatKeyDisplay-2c974ba5.js","./util-3e22b532.js"],import.meta.url));function fn({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:o}=K(["page_character","artifact"]),i=$(),s=l.useCallback(R=>{t(R),r()},[t,r]),d=l.useCallback((R,w)=>({...R,...w,slotKeys:[a]}),[a]),[p,u,h]=se(!1),[m,x]=l.useReducer(d,{...Br(),slotKeys:[a]}),[g,C]=Ee();l.useEffect(()=>i.arts.followAny(C),[i,C]);const b=Ga(),L=l.useMemo(()=>zr(),[]),T=i.arts.values.filter(R=>R.slotKey===m.slotKeys[0]).length,k=l.useMemo(()=>{const R=Jt(m,L);return g&&i.arts.values.filter(R).map(w=>w.id)},[g,i,L,m]),{numShow:I,setTriggerElement:W}=Ka(Bc[b],k.length),U=l.useMemo(()=>k.slice(0,I),[k,I]),S=k.length!==T?`${k.length}/${T}`:`${T}`,j={numShowing:U.length,total:S,t:o,namespace:"artifact"};return e(rt,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:c(ye,{children:[e(l.Suspense,{fallback:!1,children:e(zc,{artifactIdToEdit:p?"new":"",cancelEdit:h,allowUpload:!0,allowEmpty:!0,fixedSlotKey:m.slotKeys[0]})}),c(z,{sx:{py:1,display:"flex",alignItems:"center"},children:[c(y,{variant:"h6",children:[a?e(De,{src:We.slot[a]}):null," ",o`tabEquip.swapArt`]}),e(Z,{onClick:r,sx:{ml:"auto"},children:e(ve,{})})]}),e(X,{}),e(z,{children:e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:200}),children:e(Ac,{filterOption:m,filterOptionDispatch:x,filteredIds:k,disableSlotFilter:!0})})}),e(X,{}),c(z,{children:[e(f,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Ya,{showingTextProps:j})}),e(E,{fullWidth:!0,onClick:u,color:"info",startIcon:e(it,{}),children:o("artifact:addNew")}),e(f,{mt:1,children:e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:300}),children:e(v,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:U.map(R=>e(v,{item:!0,xs:1,children:e(st,{artifactId:R,extraButtons:e(pn,{artId:R}),onClick:s})},R))})})}),k.length!==U.length&&e(me,{ref:R=>{R&&W(R)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const Oc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Nc=Nt([...za]);function oa({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:o}=K(["page_character","page_weapon","weaponNames_gen"]),i=$(),[s,d]=l.useState(!1),p=l.useCallback(_=>{t(_),r()},[t,r]),[u,h]=l.useState(""),m=l.useCallback(_=>{h(i.weapons.new(Vn(_)))},[i,h]),x=l.useCallback(()=>h(""),[]),[g,C]=Ee();l.useEffect(()=>i.weapons.followAny(C),[C,i]);const b=Ga(),[L,T]=l.useState([5,4,3]),[k,I]=l.useState(""),W=l.useDeferredValue(k),U=l.useMemo(()=>(g&&i.weapons.values.filter(Jt({weaponType:a,rarity:L,name:W},Ar())).sort(Xa(Nr.level??[],!1,Or())).map(_=>_.id))??[],[g,i,L,a,W]),{numShow:S,setTriggerElement:j}=Ka(Oc[b],U.length),R=l.useMemo(()=>U.slice(0,S),[U,S]),w=`${U.length}`,O={numShowing:R.length,total:w,t:o,namespace:"page_weapon"};return c(ne,{children:[e(l.Suspense,{fallback:!1,children:e(Hr,{show:s,onHide:()=>d(!1),onSelect:m,weaponTypeFilter:a})}),e(l.Suspense,{fallback:!1,children:e(Za,{weaponId:u,footer:!0,onClose:x})}),e(rt,{open:n,onClose:r,children:c(N,{children:[e(fe,{title:c(y,{variant:"h6",display:"flex",gap:1,children:[a?e(De,{src:We.weaponTypes[a]}):null,e("span",{children:o`page_character:tabEquip.swapWeapon`})]}),action:e(Z,{onClick:r,children:e(ve,{})})}),e(X,{}),c(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[c(v,{container:!0,spacing:1,children:[e(v,{item:!0,children:e(ft,{sx:{height:"100%"},value:L,size:"small",children:za.map(_=>e(Ye,{value:_,onClick:()=>T(Nc(L,_)),children:c(f,{display:"flex",children:[e("strong",{children:_}),e(Ja,{})]})},_))})}),e(v,{item:!0,flexGrow:1,children:e(Xe,{autoFocus:!0,size:"small",value:k,onChange:_=>I(_.target.value),label:o("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(f,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ya,{showingTextProps:O})}),e(E,{fullWidth:!0,onClick:()=>d(!0),color:"info",startIcon:e(it,{}),children:o("page_weapon:addWeapon")}),e(v,{container:!0,spacing:1,children:R.map(_=>e(v,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(lt,{weaponId:_,onClick:p,extraButtons:e(pn,{weaponId:_})})},_))}),U.length!==R.length&&e(me,{ref:_=>{_&&j(_)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})]})}const Ec={xs:1,sm:2,md:3,lg:3,xl:3};function Wc({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:r,setArtifact:o}){const i=$(),[s,d]=l.useState("");l.useEffect(()=>{a&&s&&s!==a&&d(a)},[s,a]);const p=l.useCallback(()=>a&&d(a),[a]),u=l.useCallback(()=>d(""),[]);return c(f,{children:[e(Za,{weaponId:s,footer:!0,onClose:u,extraButtons:e(Vc,{weaponTypeKey:t,onChangeId:r})}),c(v,{item:!0,columns:Ec,container:!0,spacing:1,children:[e(v,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&i.weapons.keys.includes(a)?e(lt,{weaponId:a,onEdit:p,extraButtons:e(Hc,{weaponTypeKey:t,onChangeId:r})}):e(Pc,{weaponTypeKey:t,onChangeId:r})}),!!n&&Object.entries(n).map(([h,m])=>e(v,{item:!0,xs:1,children:i.arts.keys.includes(m)?e(st,{artifactId:m,extraButtons:e(qc,{slotKey:h,onChangeId:x=>o(h,x)}),editorProps:{}}):e(Fc,{slotKey:h,onChangeId:x=>o(h,x)})},m||h))]})]})}function Pc({weaponTypeKey:t,onChangeId:a}){const[n,r,o]=se();return c(N,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(z,{children:c(y,{children:[e(De,{src:We.weaponTypes[t]})," ",t]})}),e(X,{}),c(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(oa,{weaponTypeKey:t,show:n,onClose:o,onChangeId:a}),e(E,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Fe,{sx:{height:100,width:100}})})]})]})}function Fc({slotKey:t,onChangeId:a}){const[n,r,o]=se(),{t:i}=K("artifact");return c(N,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(z,{children:c(y,{children:[e(ta,{iconProps:pe,slotKey:t})," ",i(`slotName.${t}`)]})}),e(X,{}),c(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(fn,{slotKey:t,show:n,onClose:o,onChangeId:a}),e(E,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Fe,{sx:{height:100,width:100}})})]})]})}function qc({slotKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,o,i]=se();return c(ne,{children:[e(Q,{title:e(y,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(E,{color:"info",size:"small",onClick:o,children:e(Fe,{})})}),e(fn,{slotKey:t,show:r,onClose:i,onChangeId:a})]})}function Hc({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,o,i]=se();return c(ne,{children:[e(Q,{title:e(y,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(E,{color:"info",size:"small",onClick:o,children:e(Fe,{})})}),e(oa,{weaponTypeKey:t,onChangeId:a,show:r,onClose:i})]})}function Vc({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,o,i]=se();return c(ne,{children:[e(E,{color:"info",onClick:o,startIcon:e(Fe,{}),children:n`tabEquip.swapWeapon`}),e(oa,{weaponTypeKey:t,onChangeId:a,show:r,onClose:i})]})}function Gc({talentKey:t,dropDownButtonProps:a}){const{t:n}=K("sheet_gen"),{character:{talent:r,key:o}}=l.useContext(H),i=$(),{data:s}=l.useContext(J),d=s.get(Oe.total[`${t}Boost`]).value,p=s.get(Oe.total[t]).value,u=s.get(Oe.asc).value;return e(qr,{fullWidth:!0,title:n("talentLvl",{level:p}),color:d?"info":"primary",...a,children:Ta(1,Gn[u]).map(h=>e(Fr,{selected:r[t]===h,disabled:r[t]===h,onClick:()=>i.chars.set(o,m=>{m.talent[t]=h}),children:n("talentLvl",{level:h+d})},h))})}var ia={},Kc=xe;Object.defineProperty(ia,"__esModule",{value:!0});var gn=ia.default=void 0,Yc=Kc(ge()),Xc=M,Jc=(0,Yc.default)((0,Xc.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart");gn=ia.default=Jc;var sa={},Qc=xe;Object.defineProperty(sa,"__esModule",{value:!0});var la=sa.default=void 0,Zc=Qc(ge()),ed=M,td=(0,Zc.default)((0,ed.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");la=sa.default=td;var ca={},ad=xe;Object.defineProperty(ca,"__esModule",{value:!0});var da=ca.default=void 0,nd=ad(ge()),rd=M,od=(0,nd.default)((0,rd.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm15 0h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"DashboardCustomize");da=ca.default=od;function id(){return c(Et,{severity:"info",children:["A ",e("strong",{children:"Build"})," is comprised of a weapon and 5 artifacts. A"," ",e("strong",{children:"TC Build"})," allows the artifacts to be created from its stats."]})}function sd(){return c(Et,{severity:"info",children:[e("strong",{children:"Loadouts"})," provides character context data, including bonus stats, conditionals, multi-targets, optimization config, and stores builds. A single ",e("strong",{children:"Loadout"})," can be used for many teams."]})}function ld({teamCharId:t}){const a=$(),n=a.teamChars.get(t),[r,o]=l.useState(n.name),i=l.useDeferredValue(r),[s,d]=l.useState(n.description),p=l.useDeferredValue(s);return l.useEffect(()=>{const u=a.teamChars.get(t);if(!u)return;const{name:h,description:m}=u;o(h),d(m)},[a,t]),l.useEffect(()=>{a.teamChars.set(t,u=>{u.name=i})},[a,i]),l.useEffect(()=>{a.teamChars.set(t,u=>{u.description=p})},[a,p]),c(ne,{children:[e(Xe,{fullWidth:!0,label:"Loadout Name",placeholder:"Loadout Name",value:r,onChange:u=>o(u.target.value)}),e(Xe,{fullWidth:!0,label:"Loadout Description",value:s,onChange:u=>d(u.target.value),multiline:!0,minRows:2})]})}function cd(){return c(Et,{severity:"info",children:[e("strong",{children:"Teams"})," are a container for 4 character loadouts. It provides a way for characters to apply team buffs, and configuration of enemy stats. Loadouts can be shared between teams."]})}var ua={},dd=xe;Object.defineProperty(ua,"__esModule",{value:!0});var xn=ua.default=void 0,ud=dd(ge()),hd=M,pd=(0,ud.default)((0,hd.jsx)("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science");xn=ua.default=pd;function Cn({name:t,description:a,active:n=!1,onActive:r,children:o,onEdit:i,onCopyToTc:s,onDupe:d,onEquip:p,onRemove:u,hideFooter:h=!1}){const m=c(ne,{children:[e(fe,{title:t,action:a&&e(Q,{title:e(y,{children:a}),children:e(ke,{})})}),e(z,{sx:{pt:0,pb:1},children:o})]});return c(N,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:n?"0px 0px 0px 2px green inset":void 0},children:[r?e(Be,{onClick:r,children:m}):m,!h&&c(Aa,{sx:{display:"flex",justifyContent:"space-around",marginTop:"auto"},children:[e(Q,{title:e(y,{children:"Edit Build Settings"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:i,disabled:!i,children:e("span",{children:e(Gr,{})})})}),e(Q,{title:e(y,{children:"Copy to TC Builds"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:s,disabled:!s,children:e(xn,{})})}),e(Q,{title:e(y,{children:"Duplicate Build"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:d,disabled:!d,children:e(la,{})})}),e(Q,{title:e(y,{children:"Equip Build"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:p,disabled:!p,children:e(Te,{})})}),e(Q,{title:e(y,{children:"Delete Build"}),placement:"top",arrow:!0,children:e(Z,{color:"error",size:"small",onClick:u,disabled:!u,children:e(gt,{})})})]})]})}function md({buildId:t,characterKey:a}){const{name:n,description:r,weaponId:o,artifactIds:i}=Kr(t),s=_e(a).weaponType;return e(Cn,{name:n,description:r,hideFooter:!0,children:e(f,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:c(v,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:3,xl:3},children:[e(v,{item:!0,xs:1,children:e(dt,{weaponId:o,weaponTypeKey:s})}),Object.entries(i).map(([d,p])=>e(v,{item:!0,xs:1,children:e(ct,{artifactId:p,slotKey:d})},p||d))]})})})}function fd({buildTcId:t}){const a=rn(t),{name:n,description:r}=a;return e(Cn,{name:n,description:r,hideFooter:!0,children:e(gd,{buildTcId:t})})}function gd({buildTcId:t}){const{weapon:a,artifact:{slots:n,substats:{stats:r},sets:o}}=rn(t),i=Gt(a.key),s=Object.entries(r),d=s.slice(0,5),p=s.slice(5);return e(f,{children:c(v,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:2,xl:2},children:[e(v,{item:!0,xs:1,children:c(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(hn,{weapon:a,weaponSheet:i}),!!Object.keys(o).length&&e(N,{sx:{flexGrow:1},children:e(f,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:Object.entries(o).map(([u,h])=>c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(De,{size:2,src:Ua(u,"flower")}),e("span",{children:e(Va,{setKey:u})}),c(F,{children:["x",h]})]},u))})})]})}),e(v,{item:!0,xs:1,children:e(N,{sx:{flexGrow:1,height:"100%",p:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"space-between"},children:Object.entries(n).map(([u,{level:h,statKey:m}])=>c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ta,{slotKey:u}),c(F,{children:["+",h]}),e(jt,{statKey:m})]},u))})}),[d,p].map((u,h)=>e(v,{item:!0,xs:1,children:e(N,{sx:{flexGrow:1,height:"100%"},children:e(f,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1},children:u.map(([m,x])=>c(f,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[e(jt,{statKey:m}),c("span",{children:[ja(x,Ke(m)),Ke(m)]})]},m))})})},h))]})})}var ha={},xd=xe;Object.defineProperty(ha,"__esModule",{value:!0});var bn=ha.default=void 0,Cd=xd(ge()),bd=M,yd=(0,Cd.default)((0,bd.jsx)("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"}),"TrackChanges");bn=ha.default=yd;function vd({optimizationTarget:t,showEmptyTargets:a=!1}){const{t:n}=K("page_character_optimize"),{data:r}=l.useContext(J),o=$(),i=l.useMemo(()=>t&&Pa(r,t[0],o),[r,t,o]),s=n("targetSelector.selectOptTarget"),{title:d,icon:p,action:u}=i??{},h=t&&Kn(r.getDisplay(),t),m=!t||!i||!h||!a&&h.isEmpty,{variant:x=m?"secondary":void 0,textSuffix:g,icon:C,name:b}=(h&&Qt(h.info))??{};return c(N,{bgt:"light",children:[e(fe,{title:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(bn,{}),e("span",{children:"Optimization Target"})]})}),e(X,{}),e(z,{children:m?e("strong",{children:s}):c($a,{divider:e(X,{orientation:"vertical",flexItem:!0}),spacing:1,children:[c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[p?e(De,{src:p,size:2}):C,e("span",{children:d}),!!u&&e(F,{color:"success",sx:{whiteSpace:"normal"},children:u})]}),e(y,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:c(F,{color:x==="invalid"?void 0:x,sx:{whiteSpace:"normal"},children:[e("strong",{children:b}),g&&c("span",{children:[" ",g]})]})})]})})]})}function wd({show:t,onHide:a,teamCharId:n,onDelete:r,teamIds:o,conditionalCount:i}){const s=$(),{name:d,description:p,buildIds:u,buildTcIds:h,customMultiTargets:m,bonusStats:x}=s.teamChars.get(n),g=l.useCallback(()=>{a(),r()},[r,a]);return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"md"},children:c(N,{children:[e(fe,{title:c("span",{children:["Delete Loadout: ",e("strong",{children:d}),"?"]}),action:e(Z,{onClick:a,children:e(ve,{})})}),e(X,{}),c(z,{children:[p&&e(N,{bgt:"dark",sx:{mb:2},children:e(z,{children:p})}),e(y,{children:"Deleting the Loadout will also delete the following data:"}),c(Yn,{sx:{listStyleType:"disc",pl:4},children:[!!u.length&&e(Le,{sx:{display:"list-item"},children:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved builds: ",u.length," ",e(Q,{title:e(f,{children:u.map(C=>{var b;return c(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Te,{}),e("span",{children:(b=s.builds.get(C))==null?void 0:b.name})]},C)})}),children:e(ke,{})})]})}),!!h.length&&e(Le,{sx:{display:"list-item"},children:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved TC builds: ",h.length," ",e(Q,{title:e(f,{children:h.map(C=>{var b;return c(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Te,{}),e("span",{children:(b=s.buildTcs.get(C))==null?void 0:b.name})]},C)})}),children:e(ke,{})})]})}),!!m.length&&e(Le,{sx:{display:"list-item"},children:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All Custom Multi-targets: ",m.length," ",e(Q,{title:e(f,{children:m.map((C,b)=>c(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(da,{}),e("span",{children:C.name})]},b))}),children:e(ke,{})})]})}),!!Object.keys(x).length&&c(Le,{sx:{display:"list-item"},children:["Bonus stats: ",Object.keys(x).length]}),!!i&&c(Le,{sx:{display:"list-item"},children:["Conditionals: ",i]}),e(Le,{sx:{display:"list-item"},children:"Optimization Configuration"}),!!o.length&&e(Le,{sx:{display:"list-item"},children:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[c("span",{children:["Any teams with this loadout will have this loadout removed from the team. Teams will not be deleted. Teams affected:"," ",o.length]}),e(Q,{title:e(f,{children:o.map(C=>{var b;return c(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Xn,{}),e("span",{children:(b=s.teams.get(C))==null?void 0:b.name})]},C)})}),children:e(ke,{})})]})})]})]}),c(Aa,{sx:{float:"right"},children:[e(E,{startIcon:e(ve,{}),color:"secondary",onClick:a,children:"Cancel"}),e(E,{startIcon:e(gt,{}),color:"error",onClick:g,children:"Delete"})]})]})})}function _d({show:t,onHide:a,teamCharId:n,teamIds:r}){const[o,i,s]=se(),d=xt(),p=$(),{key:u,name:h,buildIds:m,buildTcIds:x,customMultiTargets:g,bonusStats:C,optConfigId:b,conditional:L}=hr(n),{optimizationTarget:T}=Pe(b),k=()=>{a(),p.teamChars.remove(n)},I=()=>{p.teamChars.duplicate(n)&&a()},W=S=>{const j=p.teams.new();p.teams.set(j,R=>{R.loadoutData[0]={teamCharId:S}}),d(`/teams/${j}`,{state:{openSetting:!0}})},U=l.useMemo(()=>{let S=0;return Jn(L,[],j=>typeof j!="object",()=>S++),S},[L]);return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"lg"},children:c(N,{children:[e(fe,{title:c(f,{display:"flex",gap:1,alignItems:"center",children:[e(Ea,{}),e("strong",{children:h})]}),action:e(Z,{onClick:a,children:e(ve,{})})}),e(X,{}),c(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(sd,{}),e(ld,{teamCharId:n}),e(f,{children:c(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[e(v,{item:!0,xs:1,children:e(E,{color:"info",onClick:()=>I(),fullWidth:!0,startIcon:e(la,{}),children:"Duplicate Loadout"})}),c(v,{item:!0,xs:1,children:[e(wd,{show:o,onHide:s,onDelete:k,teamCharId:n,teamIds:r,conditionalCount:U}),e(E,{fullWidth:!0,startIcon:e(gt,{}),color:"error",onClick:i,children:"Delete Loadout"})]})]})}),e(f,{children:c(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[!!Object.keys(C).length&&e(v,{item:!0,xs:1,children:e(Rd,{bonusStats:C})}),!!T&&e(v,{item:!0,xs:1,children:e(vd,{optimizationTarget:T})}),!!g.length&&e(v,{item:!0,xs:1,children:e(Ld,{customMultiTargets:g})}),e(v,{item:!0,xs:1,children:e(N,{bgt:"light",children:e(z,{children:c(y,{variant:"h6",children:["Conditionals: ",e("strong",{children:U})]})})})})]})})]}),e(X,{}),e(fe,{title:c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Te,{}),e("span",{children:"Builds"})]})}),e(X,{}),c(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(id,{}),e(f,{children:e(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:m.map(S=>e(v,{item:!0,xs:1,children:e(md,{buildId:S,characterKey:u})},S))})}),e(f,{children:e(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:x.map(S=>e(v,{item:!0,xs:1,children:e(fd,{buildTcId:S})},S))})})]}),e(X,{}),e(fe,{title:c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Te,{}),e("span",{children:"Teams"})]})}),e(X,{}),c(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(cd,{}),c(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[r.map(S=>e(v,{item:!0,xs:1,children:e(Wa,{bgt:"light",teamId:S,onClick:j=>d(`/teams/${S}${j?`/${j}`:""}`)})},S)),e(v,{item:!0,xs:1,children:e(E,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentLight.main"},variant:"outlined",onClick:()=>W(n),color:"info",startIcon:e(it,{}),children:"Add new Team"})})]})]})]})})}function Rd({bonusStats:t}){return c(N,{bgt:"light",children:[e(fe,{title:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(gn,{}),e("span",{children:"Bonus Stats"})]}),titleTypographyProps:{variant:"h6"}}),e(en,{bgt:"light",sections:[{fields:Object.entries(t).map(([a,n])=>({text:Bt.getStr(a)??a,value:n,unit:Ke(a)}))}]})]})}function Ld({customMultiTargets:t}){return c(N,{bgt:"light",children:[e(fe,{title:c(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(da,{}),e("span",{children:"Custom multi-targets"})]}),titleTypographyProps:{variant:"h6"}}),e(en,{bgt:"light",sections:[{fields:t.map(({name:a,description:n})=>({text:a,value:n?e(Q,{title:n,children:e(ke,{})}):void 0}))}]})]})}const Sd={xs:1,md:2};function kd({teamCharId:t,teamIds:a}){const n=xt(),r=$(),{name:o,description:i}=r.teamChars.get(t),s=h=>{const m=r.teams.new();r.teams.set(m,x=>{x.loadoutData[0]={teamCharId:h}}),n(`/teams/${m}`,{state:{openSetting:!0}})},[d,p,u]=se();return c(ne,{children:[e(_d,{show:d,onHide:u,teamCharId:t,teamIds:a}),c(N,{bgt:"light",children:[e(Be,{onClick:p,children:e(z,{children:c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ea,{}),e(y,{children:o}),!!i&&e(Ne,{title:e(y,{children:i}),children:e(ke,{})}),e(Vr,{sx:{ml:"auto"}})]})})}),e(X,{}),e(z,{children:c(v,{container:!0,columns:Sd,spacing:1,children:[a.map(h=>e(v,{item:!0,xs:1,children:e(Wa,{teamId:h,onClick:m=>n(`/teams/${h}${m?`/${m}`:""}`)})},h)),e(v,{item:!0,xs:1,children:e(E,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentNormal.main"},variant:"outlined",onClick:()=>s(t),color:"info",startIcon:e(it,{}),children:"Add new Team"})})]})})]},t)]})}var pa={},$d=xe;Object.defineProperty(pa,"__esModule",{value:!0});var yn=pa.default=void 0,Td=$d(ge()),Dd=M,Ud=(0,Td.default)((0,Dd.jsx)("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female");yn=pa.default=Ud;var ma={},jd=xe;Object.defineProperty(ma,"__esModule",{value:!0});var vn=ma.default=void 0,Id=jd(ge()),Md=M,Bd=(0,Id.default)((0,Md.jsx)("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male");vn=ma.default=Bd;function zd(){const{t}=K("ui"),a=$(),{character:n}=l.useContext(H),{key:r}=n,{gender:o}=le(),i=l.useCallback(()=>a.dbMeta.set({gender:o==="F"?"M":"F"}),[o,a]);return r.startsWith("Traveler")?c(E,{onClick:i,startIcon:o==="F"?e(yn,{}):e(vn,{}),children:[e("strong",{children:t(`gender.${o}`)})," "]}):null}function Ad({onClose:t}){const{t:a}=K(["page_character","sillyWisher_charNames","charNames_gen"]),n=xt(),r=$(),{character:o,character:{key:i}}=l.useContext(H),{gender:s}=le(),d=ot(i,s),{silly:p}=l.useContext(pt),u=l.useCallback(async()=>{const h=a(`${p?"sillyWisher_charNames":"charNames_gen"}:${Ge(i,s)}`);window.confirm(a("removeCharacter",{value:h}))&&(r.chars.remove(i),n("/characters"))},[r,n,i,s,p,a]);return c(f,{display:"flex",flexDirection:"column",gap:1,children:[c(f,{display:"flex",gap:1,children:[e(zd,{}),e(E,{color:"error",onClick:()=>u(),startIcon:e(gt,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(Z,{onClick:t,children:e(ve,{})})]}),e(f,{children:c(v,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(v,{item:!0,xs:8,sm:5,md:4,lg:3,children:c(N,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Gl,{}),e(f,{sx:{px:1},children:e(jr,{level:o.level,ascension:o.ascension,setBoth:h=>r.chars.set(i,h)})}),e(f,{sx:{px:2},children:e(ln,{})}),e(y,{sx:{textAlign:"center",pb:-1},variant:"h6",children:e(Qn,{characterKey:i,gender:s})}),e(Vl,{})]})}),c(v,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(f,{children:e(v,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(h=>{var m;return e(v,{item:!0,xs:1,children:e(Gc,{talentKey:h,dropDownButtonProps:{startIcon:e(De,{src:(m=d.getTalentOfKey(h))==null?void 0:m.img,size:1.75,sideMargin:!0})}},h)},h)})})}),e(Od,{}),e(Nd,{})]})]})})]})}function Od(){const{character:{key:t}}=l.useContext(H),{data:a}=l.useContext(J),n=$(),r=_e(t).weaponType,o=a.get(A.weapon.id).value,i=l.useMemo(()=>He(he,s=>a.get(A.art[s].id).value),[a]);return e(f,{children:e(Wc,{weaponTypeKey:r,weaponId:o,artifactIds:i,setWeapon:s=>{n.weapons.set(s,{location:$e(t)})},setArtifact:(s,d)=>{n.arts.set(d,{location:$e(t)})}})})}function Nd(){const t=xt(),{character:{key:a}}=l.useContext(H),n=$(),{gender:r}=le(),[o,i]=Ee(),s=l.useMemo(()=>{const p={};return n.teamChars.entries.map(([u,h])=>{h.key===a&&(p[u]||(p[u]=[]))}),n.teams.entries.forEach(([u,h])=>{const m=h.loadoutData.find(x=>{var g;return x&&((g=n.teamChars.get(x==null?void 0:x.teamCharId))==null?void 0:g.key)===a});m&&p[m==null?void 0:m.teamCharId].push(u)}),o&&p},[o,a,n]);l.useEffect(()=>n.teams.followAny(()=>i()),[n,i]),l.useEffect(()=>n.teamChars.followAny(()=>i()),[n,i]);const d=()=>{const p=n.teams.new(),u=n.teamChars.new(a);n.teams.set(p,h=>{h.loadoutData[0]={teamCharId:u}}),t(`/teams/${p}`,{state:{openSetting:!0}})};return c(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[c(y,{variant:"h6",children:["Team Loadouts with"," ",e(tt,{characterKey:a,gender:r})]}),Object.entries(s).map(([p,u])=>e(kd,{teamCharId:p,teamIds:u},p)),e(E,{fullWidth:!0,onClick:()=>d(),color:"info",startIcon:e(it,{}),variant:"outlined",sx:{backgroundColor:"contentLight.main"},children:"Add new Loadout+Team"}),e(N,{bgt:"light"})]})}function yu({characterKey:t,onClose:a}){return e(nt,{open:!!t,onClose:a,children:e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Ed,{characterKey:t,onClose:a},t)})})}function Ed({characterKey:t,onClose:a}){const n=Ft(t),r=Pt(t),{target:o}=(r==null?void 0:r[t])??{},i=l.useMemo(()=>{if(!(!r||!o))return{data:o,teamData:r,compareData:void 0}},[o,r]),s=l.useMemo(()=>n&&{character:n},[n]),[d,p]=l.useState(),[u,h]=l.useState(),m=l.useMemo(()=>({chartData:d,setChartData:p,graphBuilds:u,setGraphBuilds:h}),[d,u]);return l.useEffect(()=>{p(void 0),h(void 0)},[t]),e(N,{children:e(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:e(l.Suspense,{fallback:e(me,{variant:"rectangular",width:"100%",height:1e3}),children:i&&s&&m?e(H.Provider,{value:s,children:e(J.Provider,{value:i,children:e(gs.Provider,{value:m,children:e(Ad,{onClose:a})})})}):e(me,{variant:"rectangular",width:"100%",height:1e3})})})})}function Wd(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>$t.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ge(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>Tt.char.data[$e(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Pd(t,a){return{element:(n,r)=>r.includes(mt(n)),weaponType:(n,r)=>r.includes(Tt.char.data[$e(n)].weaponType),rarity:(n,r)=>r.includes(Tt.char.data[$e(n)].rarity),name:(n,r)=>r===void 0||$t.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ge(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&$t.t(`charNames_gen:${Ge(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const wn={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Fd=Nt([...Wt]);function qd({value:t,totals:a,onChange:n,...r}){const o=Ot(),i=!Dt(o.breakpoints.up("md")),s=!Dt(o.breakpoints.up("sm"));return e(er,{exclusive:!0,value:t,...r,children:Wt.map(d=>c(Zn,{value:d,sx:{p:i?1:void 0,minWidth:i?0:"6em",display:"flex"},selectedColor:d,onClick:()=>n(Fd(t,d)),children:[e(ea,{ele:d,iconProps:{fontSize:i&&!s?"inherit":void 0}}),!s&&e(be,{sx:{ml:.5},label:a[d],size:"small"})]},d))})}const Hd=Object.keys(wn);function vu({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:o=!1}){const{t:i}=K(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:s}=l.useContext(pt),d=$(),[p,u]=l.useState(()=>d.displayCharacter.get());l.useEffect(()=>d.displayCharacter.follow((w,O)=>u(O)),[d,u]);const{gender:h}=le(),[m,x]=Ee();l.useEffect(()=>d.charMeta.followAny(()=>x()),[x,d]);const[g,C]=l.useState(""),b=l.useDeferredValue(g),L=l.useDeferredValue(p),T=l.useDeferredValue(m),k=l.useMemo(()=>{const{element:w,weaponType:O,sortType:_,ascending:re}=L,oe=[...o?["new"]:[],...wn[_]??[]];return T&&wt.filter(ae=>r(ae,d.chars.get(ae),ot(ae,h))).filter(Jt({element:w,weaponType:O,name:b},Pd(d,s))).sort(Xa(oe,re,Wd(d,s),["new","favorite"]))},[L,o,T,b,d,s,r,h]),I=l.useMemo(()=>va(ar,w=>wt.forEach(O=>{const _=_e(O).weaponType;w[_].total++,k.includes(O)&&w[_].current++})),[k]),W=l.useMemo(()=>va(Wt,w=>wt.forEach(O=>{const _=mt(O);w[_].total++,k.includes(O)&&w[_].current++})),[k]),{weaponType:U,element:S,sortType:j,ascending:R}=p;return e(rt,{open:t,onClose:()=>{C(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:c(ye,{children:[c(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[c(f,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Er,{sx:{height:"100%"},onChange:w=>d.displayCharacter.set({weaponType:w}),value:U,totals:I,size:"small"}),e(qd,{sx:{height:"100%"},onChange:w=>d.displayCharacter.set({element:w}),value:S,totals:W,size:"small"}),e(Z,{sx:{ml:"auto"},onClick:()=>{C(""),a()},children:e(ve,{})})]}),c(f,{display:"flex",gap:1,children:[e(Xe,{autoFocus:!0,value:g,onChange:w=>C(w.target.value),label:i("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),e(Rr,{sortKeys:Hd,value:j,onChange:w=>d.displayCharacter.set({sortType:w}),ascending:R,onChangeAsc:w=>d.displayCharacter.set({ascending:w})})]})]}),e(X,{}),e(J.Provider,{value:{teamData:void 0},children:e(z,{children:e(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:k.map(w=>e(v,{item:!0,xs:1,children:e(Gd,{characterKey:w,onClick:()=>{C(""),a(),n==null||n(w)}})},w))})})})]})})}const Vd=we(({className:t,...a})=>e(Q,{...a,classes:{popper:t}}))({[`& .${tr.tooltip}`]:{padding:0}});function Gd({characterKey:t,onClick:a}){const{gender:n}=le(),r=Ft(t),{favorite:o}=qt(t),i=$(),{silly:s}=l.useContext(pt),[d,p,u]=se(),{level:h=1,ascension:m=0,constellation:x=0}=r??{},g=nr(t,"banner",n),C=_e(t).rarity;return e(Vd,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:d,onClose:u,onOpen:p,title:e(f,{sx:{width:300},children:e(ps,{hideStats:!0,characterKey:t})}),children:e(f,{children:c(At,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(f,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(Z,{sx:{p:.25},onClick:b=>{u(),i.charMeta.set(t,{favorite:!o})},children:o?e(Kt,{}):e(Ht,{})})}),e(Be,{onClick:a,children:c(f,{display:"flex",position:"relative",className:g?void 0:`grad-${C}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${g})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(f,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(f,{component:"img",src:pr(t,n,s),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),c(f,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(y,{variant:"body2",sx:{flexGrow:1},children:e(F,{color:mt(t),sx:{opacity:.85,textShadow:"0 0 5px gray"},children:e(tt,{characterKey:t,gender:n})})}),r?c(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[c(f,{sx:{textShadow:"0 0 5px gray"},children:[c(y,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",h]}),c(y,{variant:"body2",component:"span",color:"text.secondary",children:["/",rr[m]]})]}),c(y,{variant:"body2",children:["C",x]})]}):e(y,{component:"span",variant:"body2",children:e(F,{children:"NEW"})}),e(Xt,{stars:C,colored:!0})]})]})})]})})})}const Kd=Nt([...Oa]);function wu({value:t,totals:a,onChange:n,...r}){const o=Ot(),i=!Dt(o.breakpoints.up("sm"));return e(ft,{exclusive:!0,value:t,...r,children:Oa.map(s=>e(Ye,{value:s,sx:{p:i?1:void 0,minWidth:i?0:"6em",display:"flex",gap:i?0:1},onClick:()=>n(Kd(t,s)),children:c(f,{display:"flex",children:[e("strong",{children:s}),e(Ja,{}),!i&&e(be,{label:a[s],size:"small"})]})},s))})}export{ct as A,Cn as B,wu as C,sn as D,qd as E,ls as F,gs as G,ln as H,Rc as I,us as J,Uc as K,sd as L,lc as M,Gl as N,cc as O,Cu as P,Vl as Q,Dc as R,jt as S,dc as T,Gc as U,xn as V,dt as W,cd as X,cs as Y,ps as a,Pd as b,wn as c,Wd as d,yu as e,vu as f,hc as g,Wc as h,rn as i,hn as j,bu as k,la as l,La as m,Sa as n,Tc as o,da as p,gn as q,ld as r,id as s,ds as t,Kr as u,Pe as v,Mt as w,It as x,_c as y,pc as z};
