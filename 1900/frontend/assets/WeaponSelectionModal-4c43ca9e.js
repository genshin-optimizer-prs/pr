import{u as L,d as t,h as W,b as _,aE as f,k as o,q as e,p as l,C,Z as k,D as R,N as T,t as j,O as w,c9 as B,T as S,I as G,v as $,a4 as q,as as O}from"./index-153af171.js";import{g as P,T as U,U as V}from"./index-5a321f82.js";import{c as b}from"./totalUtils-42d7ebed.js";import{W as Z}from"./uiData-3df78ec3.js";import{d as J}from"./Close-8c7be6e5.js";import{W as Q,a as X}from"./WeaponCard-b65da350.js";import{C as Y}from"./CardActionArea-d8213cc1.js";import{i as K}from"./index-d4d223e1.js";import"./DropdownButton-990b99d4.js";import"./StatIcon-5f31f8b4.js";import"./LocationAutocomplete-1468d07e.js";function ca({show:v,ascension:I=0,onHide:p,onSelect:D,filter:g=()=>!0,weaponTypeFilter:n}){const{t:d}=L(["page_weapon","weaponNames_gen"]),[m,x]=t.useState(n?[n]:[...W]),c=_(),[E,N]=t.useState(c.displayWeapon.get());t.useEffect(()=>c.displayWeapon.follow((a,s)=>N(s)),[c]),t.useEffect(()=>{n&&x([n])},[n]);const[y,M]=t.useState(""),u=t.useDeferredValue(y),{rarity:h}=E,i=t.useMemo(()=>f.filter(a=>g(P(a))).filter(a=>m.includes(o(a).weaponType)).filter(a=>!u||d(`weaponNames_gen:${a}`).toLowerCase().includes(u.toLowerCase())).filter(a=>h.includes(o(a).rarity)).sort((a,s)=>o(s).rarity-o(a).rarity),[u,g,h,d,m]),z=t.useMemo(()=>b(W,a=>f.forEach(s=>{const r=o(s).weaponType;a[r].total++,i.includes(s)&&a[r].current++})),[i]),A=t.useMemo(()=>b(O,a=>f.forEach(s=>{const r=o(s).rarity;a[r].total++,i.includes(s)&&a[r].current++})),[i]);return e(q,{open:v,onClose:p,children:l($,{children:[l(C,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Q,{value:m,totals:z,onChange:x,disabled:!!n,size:"small"}),e(X,{sx:{height:"100%"},onChange:a=>c.displayWeapon.set({rarity:a}),value:h,totals:A,size:"small"}),e(U,{autoFocus:!0,size:"small",value:y,onChange:a=>M(a.target.value),label:d("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}}),e(k,{onClick:p,sx:{ml:"auto"},children:e(J,{})})]}),e(R,{}),e(C,{children:e(T,{container:!0,spacing:1,children:i.map(a=>{var r;const s=o(a);return e(T,{item:!0,lg:3,md:4,children:e(j,{sx:{height:"100%"},children:l(Y,{onClick:()=>{p(),D(a)},sx:{display:"flex"},children:[e(w,{component:"img",src:B(a,I>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),l(w,{sx:{flexGrow:1,px:1},children:[e(S,{variant:"subtitle1",children:e(Z,{weaponKey:a})}),l(S,{sx:{display:"flex",alignItems:"baseline"},children:[e(G,{size:1.5,src:(r=K.weaponTypes)==null?void 0:r[s.weaponType]}),e(V,{stars:s.rarity,colored:!0})]})]})]})})},a)})})})]})})}export{ca as default};
