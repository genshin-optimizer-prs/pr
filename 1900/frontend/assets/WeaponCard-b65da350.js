import{m as z,n as I,q as e,as as _,bx as B,p as s,s as M,O as i,bv as A,bP as D,h as N,I as $,aF as v,cJ as j,u as V,b as Z,d as m,k as S,aR as E,c9 as X,_ as Y,Z as ee,T as c,c7 as ae,C as ne,w as te,B as L,a3 as se,t as oe}from"./index-153af171.js";import{w as re,g as ie,D as le,e as f,C as ce,U as pe,$ as de}from"./index-5a321f82.js";import{i as F}from"./index-d4d223e1.js";import{a as ue,c as me,W as he,r as ge,n as ye}from"./uiData-3df78ec3.js";import{L as fe,a as xe,b as be,d as we}from"./LocationAutocomplete-1468d07e.js";import{C as ke}from"./CardActionArea-d8213cc1.js";const ve=D([..._]);function Be({value:a,totals:n,onChange:p,...d}){const h=z(),l=!I(h.breakpoints.up("sm"));return e(A,{exclusive:!0,value:a,...d,children:_.map(o=>e(B,{value:o,sx:{p:l?1:void 0,minWidth:l?0:"6em",display:"flex",gap:l?0:1},onClick:()=>p(ve(a,o)),children:s(i,{display:"flex",children:[e("strong",{children:o}),e(re,{}),e(M,{label:n[o],size:"small"})]})},o))})}const Ce=D([...N]);function Me({value:a,totals:n,onChange:p,...d}){const h=z(),l=!I(h.breakpoints.up("sm"));return e(A,{exclusive:!0,value:a,...d,children:N.map(o=>{var u;return s(B,{value:o,sx:{p:l?1:void 0,minWidth:l?0:"6em",display:"flex",gap:l?0:1},onClick:()=>p(Ce(a,o)),children:[e($,{src:(u=F.weaponTypes)==null?void 0:u[o],size:2,sideMargin:!0}),e(M,{label:n[o],size:"small"})]},o)})})}function Ae(){return{level:a=>a.level*(a.ascension+1),rarity:a=>v.weapon.data[a.key].rarity,name:a=>j.t(`weaponNames_gen:${a.key}`)}}function De(){return{rarity:(a,n)=>n.includes(v.weapon.data[a.key].rarity),weaponType:(a,n)=>n.includes(v.weapon.data[a.key].weaponType),name:(a,n)=>j.t(`weaponNames_gen:${a.key}`).toLowerCase().includes(n.toLowerCase())}}const Ne={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function $e({weaponId:a,onClick:n,onEdit:p,onDelete:d,canEquip:h=!1,extraButtons:l}){const{t:o}=V(["page_weapon","ui"]),u=Z(),r=ue(a),g=r==null?void 0:r.key,y=g&&ie(g),K=m.useCallback(t=>g&&S(g).weaponType===E(t).weaponType,[g]),O=m.useCallback(t=>e(ke,{onClick:()=>n==null?void 0:n(a),children:t}),[n,a]),R=m.useCallback(t=>e(i,{children:t}),[]),G=m.useCallback(t=>a&&u.weapons.set(a,{location:t}),[u,a]),x=m.useMemo(()=>y&&r&&me([y.data,le(r)]),[y,r]);if(!r||!y||!x)return null;const{level:H,ascension:C,refinement:U,id:b,location:w="",lock:k}=r,J=x.get(f.weapon.type).value,P=[f.weapon.main,f.weapon.sub,f.weapon.sub2].map(t=>x.get(t)),q=X(r.key,C>=2),W=S(r.key);return e(m.Suspense,{fallback:e(Y,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:s(oe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s(ce,{condition:!!n,wrapper:O,falseWrapper:R,children:[s(i,{className:`grad-${W.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!n&&e(ee,{color:"primary",onClick:()=>u.weapons.set(b,{lock:!k}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:k?e(fe,{}):e(xe,{})}),s(i,{sx:{position:"relative",zIndex:1},children:[s(i,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e($,{size:2,src:F.weaponTypes[J]}),e(c,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:e("strong",{children:e(he,{weaponKey:r.key})})})]}),s(c,{component:"span",variant:"h5",children:["Lv. ",H]}),s(c,{component:"span",variant:"h5",color:"text.secondary",children:["/",ae[C]]}),s(c,{variant:"h6",children:["Refinement ",e("strong",{children:U})]}),e(pe,{stars:W.rarity,colored:!0})]}),e(i,{sx:{height:"100%",position:"absolute",right:0,top:0},children:e(i,{component:"img",src:q??"",width:"auto",height:"100%",sx:{float:"right"}})})]}),e(ne,{children:P.map(t=>{const{name:T,icon:Q}=ge(t.info);return T?s(i,{sx:{display:"flex"},children:[s(c,{flexGrow:1,children:[Q," ",T]}),e(c,{children:ye(t)})]},JSON.stringify(t.info)):null})})]}),s(i,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[e(i,{sx:{flexGrow:1},children:h?e(be,{location:w,setLocation:G,filter:K,autoCompleteProps:{getOptionDisabled:t=>!t.key}}):e(de,{location:w})}),s(i,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!p&&e(te,{title:e(c,{children:o`page_weapon:edit`}),placement:"top",arrow:!0,children:e(L,{color:"info",size:"small",onClick:()=>p(b),children:e(we,{})})}),!!d&&e(L,{color:"error",size:"small",onClick:()=>d(b),disabled:!!w||k,children:e(se,{})}),l]})]})]})})}export{Me as W,Be as a,$e as b,De as c,Ae as d,Ne as w};
