import{g as qt,a as Yt,c as Ye,j as x,s as re,P as Cr,b as te,d as Ve,l as Be,_ as h,r as b,u as Xt,e as Qt,I as Zt,f as ge,h as Jt,i as $r,k as wr,m as At,n as Lr,o as ft,p as Ee,q as mt,t as Fe,v as It,w as er,x as Rr,y as me,z as we,A as Le,B as _r,C as ye,D as n,E as Pr,F as Mr,G as tr,H as _,J as Ar,K as Ir,L as rr,M as zr,N as Tr,O as jr,Q as vt,R as zt,S as Tt,T as Nr,U as ie,V as Dr,W as q,X as be,Y as ar,Z as Kr,$ as ve,a0 as Or,a1 as or,a2 as Hr,a3 as Er,a4 as jt,a5 as Fr,a6 as Vr,a7 as Br,a8 as nr,a9 as le,aa as Wr,ab as ht,ac as Ur}from"./index-BzASJOyk.js";import{u as sr,C as Gr}from"./useForceUpdate-CbGHhQc5.js";import{M as Me,D as We,T as qr}from"./DropdownButton-BtV3QBv0.js";import{u as Nt,S as Dt,s as Yr,a as Ue,b as Kt,R as bt}from"./RelicCard-Bv4SjOaW.js";import{d as gt}from"./Add-BDVYJni7.js";import{C as Xr,G as Qr,L as yt,a as Zr,d as Jr,b as ea}from"./LocationAutocomplete-BWo84HAQ.js";import{u as ta,a as ra}from"./useInfScroll-BFPild9G.js";const aa={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},oa=aa;function Pe(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function na(e){return Yt("MuiAlert",e)}const sa=qt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Ot=sa,la=Ye(x.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ia=Ye(x.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ca=Ye(x.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),ua=Ye(x.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),da=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],pa=e=>{const{variant:t,color:a,severity:r,classes:p}=e,u={root:["root",`color${te(a||r)}`,`${t}${te(a||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Jt(u,na,p)},fa=re(Cr,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${te(a.color||a.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?Ve:Be,a=e.palette.mode==="light"?Be:Ve;return h({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:a(e.palette[r].light,.9),[`& .${Ot.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${Ot.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:h({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)})}))]})}),ma=re("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),va=re("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Ht=re("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Et={success:x.jsx(la,{fontSize:"inherit"}),warning:x.jsx(ia,{fontSize:"inherit"}),error:x.jsx(ca,{fontSize:"inherit"}),info:x.jsx(ua,{fontSize:"inherit"})},ha=b.forwardRef(function(t,a){const r=Xt({props:t,name:"MuiAlert"}),{action:p,children:u,className:c,closeText:d="Close",color:m,components:I={},componentsProps:V={},icon:w,iconMapping:o=Et,onClose:M,role:C="alert",severity:L="success",slotProps:v={},slots:R={},variant:ae="standard"}=r,H=Qt(r,da),P=h({},r,{color:m,severity:L,variant:ae,colorSeverity:m||L}),j=pa(P),N={slots:h({closeButton:I.CloseButton,closeIcon:I.CloseIcon},R),slotProps:h({},V,v)},[z,B]=Nt("closeButton",{elementType:Zt,externalForwardedProps:N,ownerState:P}),[ce,W]=Nt("closeIcon",{elementType:Xr,externalForwardedProps:N,ownerState:P});return x.jsxs(fa,h({role:C,elevation:0,ownerState:P,className:ge(j.root,c),ref:a},H,{children:[w!==!1?x.jsx(ma,{ownerState:P,className:j.icon,children:w||o[L]||Et[L]}):null,x.jsx(va,{ownerState:P,className:j.message,children:u}),p!=null?x.jsx(Ht,{ownerState:P,className:j.action,children:p}):null,p==null&&M?x.jsx(Ht,{ownerState:P,className:j.action,children:x.jsx(z,h({size:"small","aria-label":d,title:d,color:"inherit",onClick:M},B,{children:x.jsx(ce,h({fontSize:"small"},W))}))}):null]}))}),ba=ha;function ga(e,t,a=(r,p)=>r===p){return e.length===t.length&&e.every((r,p)=>a(r,t[p]))}const ya=2;function lr(e,t){return e-t}function Ft(e,t){var a;const{index:r}=(a=e.reduce((p,u,c)=>{const d=Math.abs(t-u);return p===null||d<p.distance||d===p.distance?{distance:d,index:c}:p},null))!=null?a:{};return r}function De(e,t){if(t.current!==void 0&&e.changedTouches){const a=e;for(let r=0;r<a.changedTouches.length;r+=1){const p=a.changedTouches[r];if(p.identifier===t.current)return{x:p.clientX,y:p.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ge(e,t,a){return(e-t)*100/(a-t)}function xa(e,t,a){return(a-t)*e+t}function Sa(e){if(Math.abs(e)<1){const a=e.toExponential().split("e-"),r=a[0].split(".")[1];return(r?r.length:0)+parseInt(a[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function ka(e,t,a){const r=Math.round((e-a)/t)*t+a;return Number(r.toFixed(Sa(t)))}function Vt({values:e,newValue:t,index:a}){const r=e.slice();return r[a]=t,r.sort(lr)}function Ke({sliderRef:e,activeIndex:t,setActive:a}){var r,p;const u=Ee(e.current);if(!((r=e.current)!=null&&r.contains(u.activeElement))||Number(u==null||(p=u.activeElement)==null?void 0:p.getAttribute("data-index"))!==t){var c;(c=e.current)==null||c.querySelector(`[type="range"][data-index="${t}"]`).focus()}a&&a(t)}function Oe(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?ga(e,t):!1}const Ca={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},$a=e=>e;let He;function Bt(){return He===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?He=CSS.supports("touch-action","none"):He=!0),He}function wa(e){const{"aria-labelledby":t,defaultValue:a,disabled:r=!1,disableSwap:p=!1,isRtl:u=!1,marks:c=!1,max:d=100,min:m=0,name:I,onChange:V,onChangeCommitted:w,orientation:o="horizontal",rootRef:M,scale:C=$a,step:L=1,shiftStep:v=10,tabIndex:R,value:ae}=e,H=b.useRef(),[P,j]=b.useState(-1),[N,z]=b.useState(-1),[B,ce]=b.useState(!1),W=b.useRef(0),[U,pe]=$r({controlled:ae,default:a??m,name:"Slider"}),Y=V&&((s,i,f)=>{const S=s.nativeEvent||s,k=new S.constructor(S.type,S);Object.defineProperty(k,"target",{writable:!0,value:{value:i,name:I}}),V(k,i,f)}),oe=Array.isArray(U);let O=oe?U.slice().sort(lr):[U];O=O.map(s=>s==null?m:Pe(s,m,d));const l=c===!0&&L!==null?[...Array(Math.floor((d-m)/L)+1)].map((s,i)=>({value:m+L*i})):c||[],g=l.map(s=>s.value),{isFocusVisibleRef:D,onBlur:ne,onFocus:xe,ref:Re}=wr(),[Ae,he]=b.useState(-1),G=b.useRef(),Ie=At(Re,G),ze=At(M,Ie),Se=s=>i=>{var f;const S=Number(i.currentTarget.getAttribute("data-index"));xe(i),D.current===!0&&he(S),z(S),s==null||(f=s.onFocus)==null||f.call(s,i)},ke=s=>i=>{var f;ne(i),D.current===!1&&he(-1),z(-1),s==null||(f=s.onBlur)==null||f.call(s,i)},Te=(s,i)=>{const f=Number(s.currentTarget.getAttribute("data-index")),S=O[f],k=g.indexOf(S);let y=i;if(l&&L==null){const ee=g[g.length-1];y>ee?y=ee:y<g[0]?y=g[0]:y=y<S?g[k-1]:g[k+1]}if(y=Pe(y,m,d),oe){p&&(y=Pe(y,O[f-1]||-1/0,O[f+1]||1/0));const ee=y;y=Vt({values:O,newValue:y,index:f});let se=f;p||(se=y.indexOf(ee)),Ke({sliderRef:G,activeIndex:se})}pe(y),he(f),Y&&!Oe(y,U)&&Y(s,y,f),w&&w(s,y)},Xe=s=>i=>{var f;if(L!==null){const S=Number(i.currentTarget.getAttribute("data-index")),k=O[S];let y=null;(i.key==="ArrowLeft"||i.key==="ArrowDown")&&i.shiftKey||i.key==="PageDown"?y=Math.max(k-v,m):((i.key==="ArrowRight"||i.key==="ArrowUp")&&i.shiftKey||i.key==="PageUp")&&(y=Math.min(k+v,d)),y!==null&&(Te(i,y),i.preventDefault())}s==null||(f=s.onKeyDown)==null||f.call(s,i)};Lr(()=>{if(r&&G.current.contains(document.activeElement)){var s;(s=document.activeElement)==null||s.blur()}},[r]),r&&P!==-1&&j(-1),r&&Ae!==-1&&he(-1);const Qe=s=>i=>{var f;(f=s.onChange)==null||f.call(s,i),Te(i,i.target.valueAsNumber)},je=b.useRef();let ue=o;u&&o==="horizontal"&&(ue+="-reverse");const T=({finger:s,move:i=!1})=>{const{current:f}=G,{width:S,height:k,bottom:y,left:ee}=f.getBoundingClientRect();let se;ue.indexOf("vertical")===0?se=(y-s.y)/k:se=(s.x-ee)/S,ue.indexOf("-reverse")!==-1&&(se=1-se);let $;if($=xa(se,m,d),L)$=ka($,L,m);else{const $e=Ft(g,$);$=g[$e]}$=Pe($,m,d);let X=0;if(oe){i?X=je.current:X=Ft(O,$),p&&($=Pe($,O[X-1]||-1/0,O[X+1]||1/0));const $e=$;$=Vt({values:O,newValue:$,index:X}),p&&i||(X=$.indexOf($e),je.current=X)}return{newValue:$,activeIndex:X}},A=ft(s=>{const i=De(s,H);if(!i)return;if(W.current+=1,s.type==="mousemove"&&s.buttons===0){Z(s);return}const{newValue:f,activeIndex:S}=T({finger:i,move:!0});Ke({sliderRef:G,activeIndex:S,setActive:j}),pe(f),!B&&W.current>ya&&ce(!0),Y&&!Oe(f,U)&&Y(s,f,S)}),Z=ft(s=>{const i=De(s,H);if(ce(!1),!i)return;const{newValue:f}=T({finger:i,move:!0});j(-1),s.type==="touchend"&&z(-1),w&&w(s,f),H.current=void 0,J()}),fe=ft(s=>{if(r)return;Bt()||s.preventDefault();const i=s.changedTouches[0];i!=null&&(H.current=i.identifier);const f=De(s,H);if(f!==!1){const{newValue:k,activeIndex:y}=T({finger:f});Ke({sliderRef:G,activeIndex:y,setActive:j}),pe(k),Y&&!Oe(k,U)&&Y(s,k,y)}W.current=0;const S=Ee(G.current);S.addEventListener("touchmove",A,{passive:!0}),S.addEventListener("touchend",Z,{passive:!0})}),J=b.useCallback(()=>{const s=Ee(G.current);s.removeEventListener("mousemove",A),s.removeEventListener("mouseup",Z),s.removeEventListener("touchmove",A),s.removeEventListener("touchend",Z)},[Z,A]);b.useEffect(()=>{const{current:s}=G;return s.addEventListener("touchstart",fe,{passive:Bt()}),()=>{s.removeEventListener("touchstart",fe),J()}},[J,fe]),b.useEffect(()=>{r&&J()},[r,J]);const Ze=s=>i=>{var f;if((f=s.onMouseDown)==null||f.call(s,i),r||i.defaultPrevented||i.button!==0)return;i.preventDefault();const S=De(i,H);if(S!==!1){const{newValue:y,activeIndex:ee}=T({finger:S});Ke({sliderRef:G,activeIndex:ee,setActive:j}),pe(y),Y&&!Oe(y,U)&&Y(i,y,ee)}W.current=0;const k=Ee(G.current);k.addEventListener("mousemove",A,{passive:!0}),k.addEventListener("mouseup",Z)},F=Ge(oe?O[0]:m,m,d),Ce=Ge(O[O.length-1],m,d)-F,Je=(s={})=>{const i=mt(s),f={onMouseDown:Ze(i||{})},S=h({},i,f);return h({},s,{ref:ze},S)},et=s=>i=>{var f;(f=s.onMouseOver)==null||f.call(s,i);const S=Number(i.currentTarget.getAttribute("data-index"));z(S)},tt=s=>i=>{var f;(f=s.onMouseLeave)==null||f.call(s,i),z(-1)};return{active:P,axis:ue,axisProps:Ca,dragging:B,focusedThumbIndex:Ae,getHiddenInputProps:(s={})=>{var i;const f=mt(s),S={onChange:Qe(f||{}),onFocus:Se(f||{}),onBlur:ke(f||{}),onKeyDown:Xe(f||{})},k=h({},f,S);return h({tabIndex:R,"aria-labelledby":t,"aria-orientation":o,"aria-valuemax":C(d),"aria-valuemin":C(m),name:I,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(i=e.step)!=null?i:void 0,disabled:r},s,k,{style:h({},oa,{direction:u?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Je,getThumbProps:(s={})=>{const i=mt(s),f={onMouseOver:et(i||{}),onMouseLeave:tt(i||{})};return h({},s,i,f)},marks:l,open:N,range:oe,rootRef:ze,trackLeap:Ce,trackOffset:F,values:O,getThumbStyle:s=>({pointerEvents:P!==-1&&P!==s?"none":void 0})}}const La=e=>!e||!Fe(e);function Ra(e){return Yt("MuiSlider",e)}const _a=qt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Q=_a,Pa=e=>{const{open:t}=e;return{offset:ge(t&&Q.valueLabelOpen),circle:Q.valueLabelCircle,label:Q.valueLabelLabel}};function Ma(e){const{children:t,className:a,value:r}=e,p=Pa(e);return t?b.cloneElement(t,{className:ge(t.props.className)},x.jsxs(b.Fragment,{children:[t.props.children,x.jsx("span",{className:ge(p.offset,a),"aria-hidden":!0,children:x.jsx("span",{className:p.circle,children:x.jsx("span",{className:p.label,children:r})})})]})):null}const Aa=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Wt(e){return e}const Ia=re("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`color${te(a.color)}`],a.size!=="medium"&&t[`size${te(a.size)}`],a.marked&&t.marked,a.orientation==="vertical"&&t.vertical,a.track==="inverted"&&t.trackInverted,a.track===!1&&t.trackFalse]}})(({theme:e})=>{var t;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Q.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Q.dragging}`]:{[`& .${Q.thumb}, & .${Q.track}`]:{transition:"none"}},variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),za=re("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ta=re("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>{var t;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a,track:"inverted"},style:h({},e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:h({backgroundColor:Be(e.palette[a].main,.62),borderColor:Be(e.palette[a].main,.62)},e.applyStyles("dark",{backgroundColor:Ve(e.palette[a].main,.5)}),e.applyStyles("dark",{borderColor:Ve(e.palette[a].main,.5)})))}))]}}),ja=re("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.thumb,t[`thumbColor${te(a.color)}`],a.size!=="medium"&&t[`thumbSize${te(a.size)}`]]}})(({theme:e})=>{var t;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Q.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a},style:{[`&:hover, &.${Q.focusVisible}`]:h({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${It(e.palette[a].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${Q.active}`]:h({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${It(e.palette[a].main,.16)}`})}}))]}}),Na=re(Ma,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e})=>h({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Da=re("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>er(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:a}=e;return[t.mark,a&&t.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),Ka=re("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>er(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e})=>h({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),Oa=e=>{const{disabled:t,dragging:a,marked:r,orientation:p,track:u,classes:c,color:d,size:m}=e,I={root:["root",t&&"disabled",a&&"dragging",r&&"marked",p==="vertical"&&"vertical",u==="inverted"&&"trackInverted",u===!1&&"trackFalse",d&&`color${te(d)}`,m&&`size${te(m)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",m&&`thumbSize${te(m)}`,d&&`thumbColor${te(d)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Jt(I,Ra,c)},Ha=({children:e})=>e,Ea=b.forwardRef(function(t,a){var r,p,u,c,d,m,I,V,w,o,M,C,L,v,R,ae,H,P,j,N,z,B,ce,W;const U=Xt({props:t,name:"MuiSlider"}),pe=Rr(),{"aria-label":Y,"aria-valuetext":oe,"aria-labelledby":O,component:l="span",components:g={},componentsProps:D={},color:ne="primary",classes:xe,className:Re,disableSwap:Ae=!1,disabled:he=!1,getAriaLabel:G,getAriaValueText:Ie,marks:ze=!1,max:Se=100,min:ke=0,orientation:Te="horizontal",shiftStep:Xe=10,size:Qe="medium",step:je=1,scale:ue=Wt,slotProps:T,slots:A,track:Z="normal",valueLabelDisplay:fe="off",valueLabelFormat:J=Wt}=U,Ze=Qt(U,Aa),F=h({},U,{isRtl:pe,max:Se,min:ke,classes:xe,disabled:he,disableSwap:Ae,orientation:Te,marks:ze,color:ne,size:Qe,step:je,shiftStep:Xe,scale:ue,track:Z,valueLabelDisplay:fe,valueLabelFormat:J}),{axisProps:Ce,getRootProps:Je,getHiddenInputProps:et,getThumbProps:tt,open:Lt,active:rt,axis:_e,focusedThumbIndex:s,range:i,dragging:f,marks:S,values:k,trackOffset:y,trackLeap:ee,getThumbStyle:se}=wa(h({},F,{rootRef:a}));F.marked=S.length>0&&S.some(K=>K.label),F.dragging=f,F.focusedThumbIndex=s;const $=Oa(F),X=(r=(p=A==null?void 0:A.root)!=null?p:g.Root)!=null?r:Ia,$e=(u=(c=A==null?void 0:A.rail)!=null?c:g.Rail)!=null?u:za,Rt=(d=(m=A==null?void 0:A.track)!=null?m:g.Track)!=null?d:Ta,_t=(I=(V=A==null?void 0:A.thumb)!=null?V:g.Thumb)!=null?I:ja,Pt=(w=(o=A==null?void 0:A.valueLabel)!=null?o:g.ValueLabel)!=null?w:Na,at=(M=(C=A==null?void 0:A.mark)!=null?C:g.Mark)!=null?M:Da,ot=(L=(v=A==null?void 0:A.markLabel)!=null?v:g.MarkLabel)!=null?L:Ka,Mt=(R=(ae=A==null?void 0:A.input)!=null?ae:g.Input)!=null?R:"input",nt=(H=T==null?void 0:T.root)!=null?H:D.root,mr=(P=T==null?void 0:T.rail)!=null?P:D.rail,st=(j=T==null?void 0:T.track)!=null?j:D.track,lt=(N=T==null?void 0:T.thumb)!=null?N:D.thumb,it=(z=T==null?void 0:T.valueLabel)!=null?z:D.valueLabel,vr=(B=T==null?void 0:T.mark)!=null?B:D.mark,hr=(ce=T==null?void 0:T.markLabel)!=null?ce:D.markLabel,br=(W=T==null?void 0:T.input)!=null?W:D.input,gr=me({elementType:X,getSlotProps:Je,externalSlotProps:nt,externalForwardedProps:Ze,additionalProps:h({},La(X)&&{as:l}),ownerState:h({},F,nt==null?void 0:nt.ownerState),className:[$.root,Re]}),yr=me({elementType:$e,externalSlotProps:mr,ownerState:F,className:$.rail}),xr=me({elementType:Rt,externalSlotProps:st,additionalProps:{style:h({},Ce[_e].offset(y),Ce[_e].leap(ee))},ownerState:h({},F,st==null?void 0:st.ownerState),className:$.track}),ct=me({elementType:_t,getSlotProps:tt,externalSlotProps:lt,ownerState:h({},F,lt==null?void 0:lt.ownerState),className:$.thumb}),Sr=me({elementType:Pt,externalSlotProps:it,ownerState:h({},F,it==null?void 0:it.ownerState),className:$.valueLabel}),ut=me({elementType:at,externalSlotProps:vr,ownerState:F,className:$.mark}),dt=me({elementType:ot,externalSlotProps:hr,ownerState:F,className:$.markLabel}),kr=me({elementType:Mt,getSlotProps:et,externalSlotProps:br,ownerState:F});return x.jsxs(X,h({},gr,{children:[x.jsx($e,h({},yr)),x.jsx(Rt,h({},xr)),S.filter(K=>K.value>=ke&&K.value<=Se).map((K,E)=>{const pt=Ge(K.value,ke,Se),Ne=Ce[_e].offset(pt);let de;return Z===!1?de=k.indexOf(K.value)!==-1:de=Z==="normal"&&(i?K.value>=k[0]&&K.value<=k[k.length-1]:K.value<=k[0])||Z==="inverted"&&(i?K.value<=k[0]||K.value>=k[k.length-1]:K.value>=k[0]),x.jsxs(b.Fragment,{children:[x.jsx(at,h({"data-index":E},ut,!Fe(at)&&{markActive:de},{style:h({},Ne,ut.style),className:ge(ut.className,de&&$.markActive)})),K.label!=null?x.jsx(ot,h({"aria-hidden":!0,"data-index":E},dt,!Fe(ot)&&{markLabelActive:de},{style:h({},Ne,dt.style),className:ge($.markLabel,dt.className,de&&$.markLabelActive),children:K.label})):null]},E)}),k.map((K,E)=>{const pt=Ge(K,ke,Se),Ne=Ce[_e].offset(pt),de=fe==="off"?Ha:Pt;return x.jsx(de,h({},!Fe(de)&&{valueLabelFormat:J,valueLabelDisplay:fe,value:typeof J=="function"?J(ue(K),E):J,index:E,open:Lt===E||rt===E||fe==="on",disabled:he},Sr,{children:x.jsx(_t,h({"data-index":E},ct,{className:ge($.thumb,ct.className,rt===E&&$.active,s===E&&$.focusVisible),style:h({},Ne,se(E),ct.style),children:x.jsx(Mt,h({"data-index":E,"aria-label":G?G(E):Y,"aria-valuenow":ue(K),"aria-labelledby":O,"aria-valuetext":Ie?Ie(ue(K),E):oe,value:k[E]},kr))}))}),E)})]}))}),Fa=Ea;var xt={},Va=Le;Object.defineProperty(xt,"__esModule",{value:!0});var ir=xt.default=void 0,Ba=Va(we()),Wa=x,Ua=(0,Ba.default)((0,Wa.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");ir=xt.default=Ua;var St={},Ga=Le;Object.defineProperty(St,"__esModule",{value:!0});var cr=St.default=void 0,qa=Ga(we()),Ya=x,Xa=(0,qa.default)((0,Ya.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");cr=St.default=Xa;var kt={},Qa=Le;Object.defineProperty(kt,"__esModule",{value:!0});var ur=kt.default=void 0,Za=Qa(we()),Ja=x,eo=(0,Za.default)((0,Ja.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");ur=kt.default=eo;var Ct={},to=Le;Object.defineProperty(Ct,"__esModule",{value:!0});var dr=Ct.default=void 0,ro=to(we()),ao=x,oo=(0,ro.default)((0,ao.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");dr=Ct.default=oo;var $t={},no=Le;Object.defineProperty($t,"__esModule",{value:!0});var pr=$t.default=void 0,so=no(we()),lo=x,io=(0,so.default)((0,lo.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");pr=$t.default=io;var wt={},co=Le;Object.defineProperty(wt,"__esModule",{value:!0});var fr=wt.default=void 0,uo=co(we()),po=x,fo=(0,uo.default)((0,po.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update");fr=wt.default=fo;function mo(e,t){const r=(()=>{switch(t.type){case"reset":return;case"substat":{const{index:p,substat:u}=t,c=[...e.substats],d=u.key?c.findIndex(m=>m.key===u.key):-1;if(d===-1||d===p)c[p]={...u};else{const m=c[p];c[p]={...c[d]},c[d]={...m}}return{...e,substats:c}}case"overwrite":return t.relic;case"update":return{...e,...t.relic}}})();return r&&_r(r,!0)}function vo({rarity:e,onRarityChange:t,filter:a,...r}){const{t:p}=ye("relic");return n(We,{...r,title:e?n(Dt,{stars:e,inline:!0}):p`editor.rarity`,color:e?"success":"primary",children:Pr.map(u=>n(Me,{disabled:!a(u),onClick:()=>t(u),children:n(Dt,{stars:u,inline:!0})},u))})}function ho({relicSetKey:e,setRelicSetKey:t,label:a="",...r}){const{t:p}=ye(["relic","relicNames_gen"]);a=a||p("relic:autocompleteLabels.set");const u=b.useMemo(()=>Mr.map(d=>({key:d,label:p(`relicNames_gen:${d}`)})),[p]),c=b.useCallback(d=>t(d??""),[t]);return n(Qr,{options:u,valueKey:e,onChange:c,toImg:()=>n(tr,{children:" "}),label:a,...r})}function qe({statKey:e}){const{t}=ye("statKey_gen");return _("span",{children:[t(e),Yr(e)]})}function bo({index:e,relic:t,setSubstat:a}){const{t:r}=ye("relic"),{mainStatKey:p="",rarity:u=5}=t??{},{key:c="",value:d=0,rolls:m=[],efficiency:I=0}=(t==null?void 0:t.substats[e])??{},V=m.length;let w="",o=[],M=0;if(t){const v=t.rarity,{numUpgrades:R,high:ae}=Or[v];M=R+ae-3-V,o=c?Ar(c,v):[]}const C=7-o.length;M<0&&(w=w||r("editor.substat.error.noOverRoll",{value:M+V}));const L=b.useMemo(()=>c?[{value:0},...Ir(u,c).map(v=>({value:v}))]:[{value:0}],[c,u]);return _(ve,{bgt:"light",children:[n(ie,{sx:{display:"flex"},children:_(rr,{size:"small",sx:{width:"100%",display:"flex"},children:[_(We,{startIcon:c?n(Ue,{statKey:c}):void 0,title:c?n(qe,{statKey:c}):r("editor.substat.substatFormat",{value:e+1}),disabled:!t,color:c?"success":"primary",sx:{whiteSpace:"nowrap"},children:[c&&n(Me,{onClick:()=>a(e,{key:"",value:0}),children:r`editor.substat.noSubstat`}),zr.filter(v=>p!==v).map(v=>_(Me,{selected:c===v,disabled:c===v,onClick:()=>a(e,{key:v,value:0}),children:[n(yt,{children:n(Ue,{statKey:v})}),n(Zr,{children:n(qe,{statKey:v})})]},v))]}),n(Tr,{sx:{flexBasis:30,flexGrow:1},children:n(jr,{float:vt(c)==="%",placeholder:r`editor.substat.selectSub`,value:c?zt(Tt(d,c),c):void 0,onChange:v=>{let R=v??0;vt(c)==="%"&&(R=R/100),a(e,{key:c,value:R})},disabled:!c,error:!!w,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!o.length&&n(Nr,{children:r`editor.substat.nextRolls`})]})}),n(ie,{px:2,children:n(go,{value:zt(Tt(d,c),c),marks:L,setValue:v=>{let R=v??0;vt(c)==="%"&&(R=R/100),a(e,{key:c,value:R})},disabled:!c})}),n(ie,{sx:{px:1,pb:1},children:w?n(Dr,{color:"error",children:r`ui:error`}):_(q,{container:!0,children:[n(q,{item:!0,flexGrow:1,children:!!m.length&&[...m].sort().map((v,R)=>n(be,{component:"span",color:`roll${ar(C+o.indexOf(v),1,6)}.main`,sx:{ml:1},children:v},`${R}.${v}`))}),n(q,{item:!0,xs:"auto",flexShrink:1,children:n(be,{children:_(Kr,{t:r,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",I]})})})]})})]})}function go({value:e,setValue:t,marks:a,disabled:r=!1}){var c,d;const[p,u]=b.useState(e);return b.useEffect(()=>u(e),[e]),n(Fa,{value:p,step:.1,disabled:r,min:((c=a[1])==null?void 0:c.value)??0,max:((d=a[a.length-1])==null?void 0:d.value)??0,onChange:(m,I)=>u(I),onChangeCommitted:(m,I)=>t(I),valueLabelDisplay:"auto"})}const Ut={rarity:[5,4,3,2],setEffects:{}};function yo({relicIdToEdit:e="new",cancelEdit:t,fixedSlotKey:a,allowEmpty:r=!1,disableSet:p=!1}){const{t:u}=ye("relic"),{t:c}=ye(["slotKey_gen","statKey_gen"]),{database:d}=or(),[m,I]=sr();b.useEffect(()=>d.relics.followAny(I),[d,I]);const[V,w]=b.useState(!1);b.useEffect(()=>{e==="new"&&(w(!0),M({type:"reset"}));const l=e&&m&&d.relics.get(e);l&&(w(!0),M({type:"overwrite",relic:Hr(l)}))},[e,d,m]);const[o,M]=b.useReducer(mo,void 0),{relic:C,errors:L}=b.useMemo(()=>o?Er(o,e):{relic:void 0,errors:[]},[o,e]),{prev:v,prevEditType:R}=b.useMemo(()=>{const l=m&&e&&d.relics.get(e);if(l)return{prev:l,prevEditType:"edit"};if(o===void 0)return{prev:void 0,prevEditType:""};const{duplicated:g,upgraded:D}=m&&d.relics.findDups(o);return{prev:g[0]??D[0],prevEditType:g.length!==0?"duplicate":"upgrade"}},[o,e,d,m]),ae=!["new",""].includes(e)&&!!(o!=null&&o.location)||!!a||!!e&&e!=="new",{rarity:H=5,level:P=0}=o??{},j=b.useMemo(()=>(o==null?void 0:o.slotKey)??a??"head",[a,o]),N=o?Ut:void 0,z=b.useCallback(l=>{const g=l.setKey?Ut:N;function D(ne,xe,Re){return ne&&xe.includes(ne)?ne:Re??xe[0]}l.setKey&&(l.rarity=D(o==null?void 0:o.rarity,g.rarity,Math.max(...g.rarity)),l.slotKey=D(o==null?void 0:o.slotKey,["head","hands"])),l.rarity&&(l.level=(o==null?void 0:o.level)??0),l.level&&(l.level=ar(l.level,0,3*(l.rarity??o.rarity))),l.slotKey&&(l.mainStatKey=D(o==null?void 0:o.mainStatKey,jt[l.slotKey])),l.mainStatKey&&(l.substats=[0,1,2,3].map(ne=>o&&o.substats[ne].key!==l.mainStatKey?o.substats[ne]:{key:"",value:0})),M({type:"update",relic:l})},[o,N,M]),B=b.useCallback(()=>{t==null||t(),M({type:"reset"})},[t,M]),ce=b.useCallback((l,g)=>M({type:"substat",index:l,substat:g}),[]),W=!L.length,U=b.useCallback(l=>{if(!e&&o&&!window.confirm(u`editor.clearPrompt`)){l==null||l.preventDefault();return}w(!1),B()},[u,e,o,w,B]),pe=Fr(),Y=Vr(pe.breakpoints.up("md")),oe=e!=="new"&&e||(v==null?void 0:v.id),O=()=>window.confirm(u`editor.clearPrompt`);return n(b.Suspense,{fallback:!1,children:n(Br,{open:V,onClose:U,children:_(ve,{bgt:"dark",children:[n(Gr,{title:"Relic Editor",action:n(Zt,{onClick:U,children:n(Jr,{})})}),_(nr,{sx:{display:"flex",flexDirection:"column",gap:1},children:[_(q,{container:!0,spacing:1,columns:{xs:1,md:2},children:[_(q,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[_(ie,{sx:{display:"flex",gap:1},children:[n(ho,{disabled:p,size:"small",relicSetKey:(o==null?void 0:o.setKey)??"",setRelicSetKey:l=>z({setKey:l}),sx:{flexGrow:1},label:o!=null&&o.setKey?"":u`editor.unknownSetName`}),n(vo,{rarity:o?H:void 0,onRarityChange:l=>z({rarity:l}),filter:l=>{var g,D;return!!((D=(g=N==null?void 0:N.rarity)==null?void 0:g.includes)!=null&&D.call(g,l))},disabled:!N})]}),_(ie,{component:"div",display:"flex",children:[n(qr,{label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:P,disabled:!N,onChange:l=>{const g=parseInt(l.target.value)||0;z({level:g})}}),_(rr,{children:[n(le,{onClick:()=>z({level:P-1}),disabled:!N||P===0,children:"-"}),H?[...Array(H+1).keys()].map(l=>3*l).map(l=>n(le,{onClick:()=>z({level:l}),disabled:!N||P===l,children:l},l)):null,n(le,{onClick:()=>z({level:P+1}),disabled:!N||P===H*3,children:"+"})]})]}),_(ie,{component:"div",display:"flex",children:[n(We,{startIcon:o!=null&&o.slotKey?n(Kt,{slotKey:o.slotKey}):void 0,title:o?c(o.slotKey):u`slot`,value:j,disabled:ae||!N,color:o?"success":"primary",children:Wr.map(l=>_(Me,{selected:j===l,disabled:j===l,onClick:()=>z({slotKey:l}),children:[n(yt,{children:n(Kt,{slotKey:l})}),c(l)]},l))}),n(ve,{bgt:"light",sx:{p:1,ml:1,flexGrow:1},children:n(b.Suspense,{fallback:n(ht,{width:"60%"}),children:n(be,{color:"text.secondary",children:c(`slotKey_gen:${j}`)})})})]}),_(ie,{component:"div",display:"flex",gap:1,children:[n(We,{startIcon:o!=null&&o.mainStatKey?n(Ue,{statKey:o.mainStatKey}):void 0,title:n("b",{children:o?n(qe,{statKey:o.mainStatKey}):u`mainStat`}),disabled:!N,color:o?"success":"primary",children:jt[j].map(l=>_(Me,{selected:(o==null?void 0:o.mainStatKey)===l,disabled:(o==null?void 0:o.mainStatKey)===l,onClick:()=>z({mainStatKey:l}),children:[n(yt,{children:n(Ue,{statKey:l})}),n(qe,{statKey:l})]},l))}),n(ve,{bgt:"light",sx:{p:1,flexGrow:1},children:n(be,{color:"text.secondary",children:o?Ur(H,o.mainStatKey,P):u`mainStat`})}),n(le,{onClick:()=>z({lock:!(o!=null&&o.lock)}),color:o!=null&&o.lock?"success":"primary",disabled:!o,children:o!=null&&o.lock?n(dr,{}):n(pr,{})})]}),n(ea,{locKey:(C==null?void 0:C.location)??"",setLocKey:l=>z({location:l})})]}),n(q,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[0,1,2,3].map(l=>n(bo,{index:l,relic:C,setSubstat:ce},l))})]}),v&&_(q,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[n(q,{item:!0,xs:12,md:5.5,lg:4,children:_(ve,{bgt:"light",children:[n(be,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:R!=="edit"?R==="duplicate"?u`editor.dupeRelic`:u`editor.updateRelic`:u`editor.beforeEdit`}),n(bt,{relic:v})]})}),Y&&n(q,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:n(ve,{bgt:"light",sx:{display:"flex"},children:n(cr,{sx:{fontSize:40}})})}),n(q,{item:!0,xs:12,md:5.5,lg:4,children:_(ve,{bgt:"light",children:[n(be,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:u`editor.preview`}),C&&n(bt,{relic:C})]})})]}),!W&&n(ba,{variant:"filled",severity:"error",children:L.map((l,g)=>n("div",{children:l},g))}),_(ie,{display:"flex",gap:2,children:[R==="edit"?n(le,{startIcon:n(gt,{}),onClick:()=>{o&&d.relics.set(v.id,o),r||(w(!1),t()),B()},disabled:!o||!W,color:"primary",children:u`editor.btnSave`}):n(le,{startIcon:n(gt,{}),onClick:()=>{d.relics.new(o),r||(w(!1),t()),B()},disabled:!o||!W,color:R==="duplicate"?"warning":"primary",children:u`editor.btnAdd`}),r&&n(le,{startIcon:n(ir,{}),disabled:!o,onClick:()=>{O()&&B()},color:"error",children:u`editor.btnClear`}),v&&R!=="edit"&&n(le,{startIcon:n(fr,{}),onClick:()=>{o&&d.relics.set(v.id,o),B(),r||w(!1)},disabled:!o||!W,color:"success",children:u`editor.btnUpdate`}),!!oe&&n(le,{startIcon:n(ur,{}),onClick:()=>{window.confirm(u`editor.confirmDelete`)&&(d.relics.remove(oe),B(),r||w(!1))},disabled:!o||!W,color:"error",children:u`editor.delete`})]})]})]})})})}const Gt={xs:1,sm:2,md:3,lg:3,xl:4},xo={xs:10,sm:12,md:24,lg:24,xl:24};function So({onAdd:e,onEdit:t}){const{t:a}=ye("relic"),{database:r}=or(),[p,u]=sr();b.useEffect(()=>r.relics.followAny(u),[r,u]);const{relicIds:c,totalRelicsNum:d}=b.useMemo(()=>{const C=r.relics.values,L=C.length,v=C.map(R=>R.id);return p&&{relicIds:v,totalRelicsNum:L}},[r,p]),m=ta(),I=c.length!==d?`${c.length}/${d}`:d,{numShow:V,setTriggerElement:w}=ra(xo[m],c.length),o=b.useMemo(()=>c.slice(0,V),[c,V]),M={numShowing:o.length,totalShowing:I};return _(tr,{children:[n(ve,{bgt:"dark",children:n(nr,{children:n(ie,{pb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:_(be,{color:"text.secondary",children:["Showing ",n("b",{children:M.numShowing})," out of"," ",M.totalShowing," Items"]})})})}),n(q,{container:!0,columns:Gt,spacing:1,children:n(q,{item:!0,xs:!0,children:n(le,{fullWidth:!0,onClick:e,color:"info",startIcon:n(gt,{}),children:a`addNew`})})}),_(b.Suspense,{fallback:n(ht,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:[n(q,{container:!0,columns:Gt,spacing:1,children:o.map(C=>n(q,{item:!0,xs:1,children:n(bt,{relic:r.relics.get(C),onEdit:()=>t==null?void 0:t(C),onDelete:()=>r.relics.remove(C),setLocation:L=>r.relics.set(C,{location:L}),onLockToggle:()=>r.relics.set(C,({lock:L})=>({lock:!L}))})},C))}),c.length!==o.length&&n(ht,{ref:C=>{C&&w(C)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})}function Po(){const[e,t]=b.useState("");return _(ie,{display:"flex",flexDirection:"column",gap:1,my:1,children:[n(yo,{relicIdToEdit:e,cancelEdit:()=>t(""),allowEmpty:!0}),n(So,{onAdd:()=>t("new"),onEdit:t})]})}export{Po as default};
