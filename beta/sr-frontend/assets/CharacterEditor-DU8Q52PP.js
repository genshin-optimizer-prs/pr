import{bO as Z,bP as w,bQ as A,bR as $,bS as k,bT as J,bU as K,bV as ee,r as f,bW as se,bX as te,j as R,f as ne,bY as oe,bZ as ie,b_ as le,b$ as T,s as ae,u as re,N as S,i as L,k as V,aB as ce,n,aX as ue,c0 as de,q as a,ab as u,L as I,H as l,aD as h,X as O,$ as pe,W as fe,c1 as me,G as p,Y as y}from"./index-CQ-smxDy.js";import{s as ve,c as he}from"./index-BpGzr9zh.js";import{C as be}from"./CardActionArea-_6qAgY2l.js";import{M as F,D as G,T as M}from"./DropdownButton-DTADd-QS.js";const ge=["component","direction","spacing","divider","children","className","useFlexGap"],Ce=Z(),ke=w("div",{name:"MuiStack",slot:"Root",overridesResolver:(s,e)=>e.root});function xe(s){return oe({props:s,name:"MuiStack",defaultTheme:Ce})}function _e(s,e){const t=f.Children.toArray(s).filter(Boolean);return t.reduce((o,r,i)=>(o.push(r),i<t.length-1&&o.push(f.cloneElement(e,{key:`separator-${i}`})),o),[])}const Re=s=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[s],Se=({ownerState:s,theme:e})=>{let t=A({display:"flex",flexDirection:"column"},$({theme:e},k({values:s.direction,breakpoints:e.breakpoints.values}),o=>({flexDirection:o})));if(s.spacing){const o=J(e),r=Object.keys(e.breakpoints.values).reduce((c,d)=>((typeof s.spacing=="object"&&s.spacing[d]!=null||typeof s.direction=="object"&&s.direction[d]!=null)&&(c[d]=!0),c),{}),i=k({values:s.direction,base:r}),m=k({values:s.spacing,base:r});typeof i=="object"&&Object.keys(i).forEach((c,d,b)=>{if(!i[c]){const C=d>0?i[b[d-1]]:"column";i[c]=C}}),t=K(t,$({theme:e},m,(c,d)=>s.useFlexGap?{gap:T(o,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Re(d?i[d]:s.direction)}`]:T(o,c)}}))}return t=ee(e.breakpoints,t),t};function je(s={}){const{createStyledComponent:e=ke,useThemeProps:t=xe,componentName:o="MuiStack"}=s,r=()=>ie({root:["root"]},c=>le(o,c),{}),i=e(Se);return f.forwardRef(function(c,d){const b=t(c),g=se(b),{component:C="div",direction:W="column",spacing:q=0,divider:D,children:P,className:U,useFlexGap:z=!1}=g,X=te(g,ge),Y={direction:W,spacing:q,useFlexGap:z},Q=r();return R.jsx(i,A({as:C,ownerState:Y,ref:d,className:ne(Q.root,U)},X,{children:D?_e(P,D):P}))})}const Ee=je({createStyledComponent:ae("div",{name:"MuiStack",slot:"Root",overridesResolver:(s,e)=>e.root}),useThemeProps:s=>re({props:s,name:"MuiStack"})}),H=Ee;function N(s=""){const{database:e}=S(),[t,o]=f.useState(e.chars.get(s));return f.useEffect(()=>o(e.chars.get(s)),[e,s]),f.useEffect(()=>s?e.chars.follow(s,(r,i,m)=>i==="update"&&o(m)):void 0,[s,o,e]),t}var j={},Be=V;Object.defineProperty(j,"__esModule",{value:!0});var x=j.default=void 0,De=Be(L()),Pe=R,$e=(0,De.default)((0,Pe.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");x=j.default=$e;var E={},Te=V;Object.defineProperty(E,"__esModule",{value:!0});var _=E.default=void 0,ye=Te(L()),Me=R,Ae=(0,ye.default)((0,Me.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");_=E.default=Ae;function Le(){return f.useContext(ce)}function v({characterKey:s,abilityKey:e}){const t=N(s),{database:o}=S(),r=e.charAt(0).toUpperCase()+e.slice(1);return n(G,{title:`${r} Lv. ${(t==null?void 0:t[e])??1}`,disabled:!t,children:!!s&&ue(1,de[e][(t==null?void 0:t.ascension)??0]).map(i=>a(F,{selected:(t==null?void 0:t[e])===i,disabled:(t==null?void 0:t[e])===i,onClick:()=>o.chars.set(s,{[e]:i}),children:[r," Lv. ",i]},`${e}_${i}`))})}function He({character:s,onClick:e}){const t=Le()??ve(he(s));return console.log(u.final.hp.tag),n(H,{children:n(I,{children:a(O,{children:[e?n(be,{onClick:e,children:n(l,{variant:"h4",children:s.key})}):n(l,{variant:"h4",children:s.key}),n(h,{}),a(l,{children:["Eidolon: ",s.eidolon]}),a(l,{children:["Level: ",s.level]}),a(l,{children:["ATK: ",t.compute(u.final.atk).val]}),a(l,{children:["Break effect: ",t.compute(u.final.brEffect_).val]}),a(l,{children:["CRIT Rate: ",t.compute(u.final.crit_).val]}),a(l,{children:["CRIT DMG: ",t.compute(u.final.crit_dmg_).val]}),a(l,{children:["DEF: ",t.compute(u.final.def).val]}),a(l,{children:["Effect Hit Rate: ",t.compute(u.final.eff_).val]}),a(l,{children:["Effect RES: ",t.compute(u.final.eff_res_).val]}),a(l,{children:["Energy Regeneration Rate: ",t.compute(u.final.enerRegen_).val]}),a(l,{children:["Heal Boost: ",t.compute(u.final.heal_).val]}),a(l,{children:["HP: ",t.compute(u.final.hp).val]}),a(l,{children:["Speed: ",t.compute(u.final.spd).val]})]})})})}function Ne({characterKey:s,onClose:e}){return n(fe,{open:!!s,onClose:e,children:n(f.Suspense,{fallback:n(pe,{variant:"rectangular",width:"100%",height:1e3}),children:s&&n(Ve,{characterKey:s})})})}function Ve({characterKey:s}){const e=N(s),{database:t}=S();return n(I,{children:a(O,{sx:{display:"flex",flexDirection:"column",gap:1},children:[n(l,{variant:"h2",children:s}),n(M,{type:"number",label:"Level",variant:"outlined",inputProps:{min:1,max:90},value:(e==null?void 0:e.level)||0,onChange:o=>t.chars.set(s,{level:parseInt(o.target.value)}),disabled:!e}),n(M,{type:"number",label:"Ascension",variant:"outlined",inputProps:{min:0,max:6},value:(e==null?void 0:e.ascension)||0,onChange:o=>t.chars.set(s,{ascension:parseInt(o.target.value)}),disabled:!e}),n(G,{title:`Eidolon Lv. ${(e==null?void 0:e.eidolon)??0}`,fullWidth:!1,disabled:!e,children:me.map(o=>a(F,{selected:(e==null?void 0:e.eidolon)===o,disabled:(e==null?void 0:e.eidolon)===o,onClick:()=>t.chars.set(s,{eidolon:o}),children:["Eidolon Lv. ",o]},o))}),a(H,{spacing:1,children:[n(l,{variant:"h6",children:"Abilites"}),n(h,{}),a(p,{container:!0,gap:1,children:[n(p,{item:!0,children:n(v,{characterKey:s,abilityKey:"basic"})}),n(p,{item:!0,children:n(v,{characterKey:s,abilityKey:"skill"})}),n(p,{item:!0,children:n(v,{characterKey:s,abilityKey:"ult"})}),n(p,{item:!0,children:n(v,{characterKey:s,abilityKey:"talent"})})]}),n(l,{variant:"h6",children:"Bonus Abilities"}),n(h,{}),n(p,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.bonusAbilities)??{}).map(([o,r])=>n(p,{item:!0,children:n(y,{color:r?"success":"primary",onClick:()=>{t.chars.set(s,{bonusAbilities:{...e==null?void 0:e.bonusAbilities,[o]:!r}})},startIcon:r?n(x,{}):n(_,{}),children:o})},o))}),n(l,{variant:"h6",children:"Stat Boosts"}),n(h,{}),n(p,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.statBoosts)??{}).map(([o,r])=>n(p,{item:!0,children:n(y,{color:r?"success":"primary",onClick:()=>{t.chars.set(s,{statBoosts:{...e==null?void 0:e.statBoosts,[o]:!r}})},startIcon:r?n(x,{}):n(_,{}),children:o})},o))})]})]})})}export{Ne as C,H as S,He as a,_ as b,Le as c,x as d,N as u};
