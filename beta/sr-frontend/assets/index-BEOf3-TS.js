import{r as c,B as e,ag as F,E as M,aK as $,z as q,A,j as H,aJ as I,a8 as _,x as L,ac as O,O as h,aI as Q,$ as p,a2 as x,af as w,aL as k,a5 as B,I as V,ae as W,aF as K,ad as J,aM as G,aN as N,aO as U,aP as X,ak as Y,aQ as Z}from"./index-DXVxfmMk.js";import{C as ee}from"./CardActionArea-aIb_XOoa.js";import{C as ae}from"./CardHeader-BKZWiBpR.js";function j({value:t,onChange:a,...s}){const[r,i]=c.useState(t);c.useEffect(()=>{i(t)},[t]);const l=()=>a(r);return e(F,{value:r,onChange:o=>i(o.target.value),onBlur:l,onKeyDown:o=>o.key==="Enter"&&!s.multiline&&l(),...s})}function te(t){const{t:a}=M("ui"),s=$({path:"/:page/*"}),r=a("pageTitle"),i=t??((s==null?void 0:s.params.page)&&a(`tabs.${s==null?void 0:s.params.page}`));c.useEffect(()=>{i?document.title=`${i} - ${r}`:document.title=r},[a,r,i])}var E={},se=A;Object.defineProperty(E,"__esModule",{value:!0});var z=E.default=void 0,re=se(q()),ne=H,oe=(0,re.default)((0,ne.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");z=E.default=oe;function ie({teamId:t,charKey:a,tab:s=""}){const{t:r}=M("page_team"),i=I(),{database:l}=_(),o=l.teams.get(t),{loadoutData:d}=o,y=L(),b=O(y.breakpoints.down("md")),[f,m]=c.useState(!1),[T,u]=c.useState(o.name),[g,D]=c.useState(o.description),P=n=>{u(n),l.teams.set(t,{name:n})},R=n=>{D(n),l.teams.set(t,{description:n})};return h(p,{sx:()=>({borderBottom:"1px rgb(200,200,200,0.3) solid","& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px",backgroundColor:"rgb(200,200,200,0.5)"}}),children:[e(ee,{onClick:()=>m(!0),children:e(Q,{placement:"top",title:h(p,{children:[h(p,{sx:{display:"flex",color:"info.light",gap:1},children:[e(z,{}),e(x,{children:e("strong",{children:r`team.editNameDesc`})})]}),!!o.description&&e(x,{children:o.description})]}),children:e(w,{sx:{display:"flex",justifyContent:"center","&:hover":{color:"info.light"}},children:h(x,{variant:"h5",sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",textShadow:"#000 0 0 10px !important"},children:[e(k,{}),T]})})})}),e(J,{open:f,onClose:()=>m(!1),children:h(B,{children:[e(ae,{title:r`team.editNameDesc`,avatar:e(k,{}),titleTypographyProps:{variant:"h6"},action:e(V,{onClick:()=>m(!1),children:e(W,{})})}),e(K,{}),e(w,{children:h(p,{display:"flex",flexDirection:"column",gap:2,sx:{mt:2},children:[e(j,{label:r`team.name`,value:T,onChange:n=>P(n),autoFocus:!0}),e(j,{label:r`team.desc`,value:g,onChange:n=>R(n),multiline:!0,minRows:4})]})})]})}),e(K,{}),h(G,{variant:"fullWidth",value:a??"team",orientation:b?"vertical":"horizontal",children:[e(N,{icon:e(k,{}),iconPosition:"start",value:"team",label:"Team Settings",onClick:()=>i(`/teams/${t}/`)}),d.map((n,C)=>{var S;const v=n&&((S=l.teamChars.get(n==null?void 0:n.teamCharId))==null?void 0:S.key);return e(N,{icon:e(U,{}),iconPosition:"start",value:v??C,disabled:!d[C],label:v?e(x,{children:r`Character Name`}):`Character ${C+1}`,onClick:()=>v&&i(`/teams/${t}/${v}/${s}`)},C)})]})]})}const ce=e(Y,{variant:"rectangular",width:"100%",height:1e3});function ue(){const{database:t}=_(),{teamId:a}=X(),s=!a||!t.teams.keys.includes(a);return c.useEffect(()=>{s||t.teams.set(a,{lastEdit:Date.now()})},[a,t.teams,s]),s?e(Z,{to:"/teams"}):e(p,{display:"flex",flexDirection:"column",gap:1,children:e(c.Suspense,{fallback:ce,children:a&&e(le,{teamId:a})})})}function le({teamId:t}){var m;const{database:a}=_(),s=I(),r=a.teams.get(t),{loadoutData:i}=r,{params:{characterKey:l}}=$({path:"/teams/:teamId/:characterKey",end:!1})??{params:{}},{params:{tab:o}}=$({path:"/teams/:teamId/:characterKey/:tab"})??{params:{}},d=c.useMemo(()=>i.find(u=>{var g;return(u==null?void 0:u.teamCharId)&&((g=a.teamChars.get(u.teamCharId))==null?void 0:g.key)===l}),[i,a.teamChars,l]);c.useEffect(()=>{window.scrollTo({top:0})},[]),c.useEffect(()=>{d||s("",{replace:!0})},[d,s]);const y=d==null?void 0:d.teamCharId,b=(m=a.teamChars.get(y))==null?void 0:m.key,{t:f}=M(["charNames_gen","page_character"]);return te(c.useMemo(()=>`${r.name} - ${f("charNames_gen:Character")} - ${f(`page_character:tabs.${o}`)}`,[f,r.name,o])),e(p,{sx:{display:"flex",gap:1,flexDirection:"column",mx:1,mt:2},children:e(B,{children:e(ie,{teamId:t,charKey:b,tab:o})})})}export{ue as default};
