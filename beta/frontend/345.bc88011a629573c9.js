"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[345,313],{29754:(e,a,t)=>{var n=t(14859);a.Z=void 0;var o=n(t(68671)),s=t(52322),l=(0,o.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.Z=l},92252:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(29798),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},54278:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(29798),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock")},40535:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(29798),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen")},50090:(e,a,t)=>{t.d(a,{W:()=>y});var n=t(45492),o=t(503),s=t(66615),l=t(67550),r=t(79906),c=t(2784),i=t(11141),p=t(23657),d=t(44180),u=t(34156),h=t(55893),Z=t(75958),f=t(80680),g=t(52903);let v,m=e=>e;function y({location:e,setLocation:a,filter:t=(()=>!0),autoCompleteProps:y={}}){const{t:w}=(0,i.$G)(["ui","artifact","sillyWisher_charNames","charNames_gen"]),{silly:x}=(0,c.useContext)(p.E),{database:b}=(0,c.useContext)(u.t),{gender:C}=(0,h.Z)(),W=(0,c.useCallback)((e=>a=>w(`${e?"sillyWisher_charNames":"charNames_gen"}:${(0,o.Cs)(b.chars.LocationToCharacterKey(a),C)}`)),[b,C,w]),[k,I]=(0,n.NW)();(0,c.useEffect)((()=>b.arts.followAny((()=>I()))),[b,I]);const z=(0,c.useMemo)((()=>k&&b.chars.keys.map((e=>(0,o.V7)(e)))),[k,b]),S=(0,c.useCallback)((e=>""===e?(0,g.tZ)(s.Z,{}):(0,g.tZ)(l.Z,{sx:{opacity:z.includes(e)?void 0:.7},children:(0,g.tZ)(f.Z,{characterKey:b.chars.LocationToCharacterKey(e)})})),[b,z]),T=(0,c.useCallback)((e=>"Traveler"===e?o.vF.some((e=>b.charMeta.get(e).favorite)):!!e&&b.charMeta.get(e).favorite),[b]),M=(0,c.useMemo)((()=>[{key:"",label:w(v||(v=m`artifact:filterLocation.inventory`))},...Array.from(new Set(o.vp.filter((e=>t((0,d.m)(b.chars.LocationToCharacterKey(e),C)))))).map((e=>({key:e,label:W(x)(e),favorite:T(e),alternateNames:x?[W(!x)(e)]:void 0,color:z.includes(e)?void 0:"secondary"}))).sort(((e,a)=>e.favorite&&!a.favorite?-1:!e.favorite&&a.favorite?1:!e.color&&a.color?-1:e.color&&!a.color?1:e.label.localeCompare(a.label)))]),[w,b.chars,C,z,t,W,x,T]);return(0,g.tZ)(c.Suspense,{fallback:(0,g.tZ)(r.Z,{variant:"text",width:100}),children:(0,g.tZ)(Z._,Object.assign({size:"small",options:M,valueKey:e,onChange:e=>a(null!=e?e:""),toImg:S},y))})}},28265:(e,a,t)=>{t.d(a,{Z:()=>g});var n=t(98283),o=t(72539),s=t(503),l=t(47746),r=t(86432),c=t(92794),i=t(66198),p=t(61851),d=t(79410),u=t(58489),h=t(52903);const Z=["value","totals","onChange"],f=(0,p.X)([...s.yd]);function g(e){let{value:a,totals:t,onChange:p}=e,g=(0,n.Z)(e,Z);const v=(0,l.Z)(),m=!(0,r.Z)(v.breakpoints.up("sm"));return(0,h.tZ)(u.Z,Object.assign({exclusive:!0,value:a},g,{children:s.yd.map((e=>{var n;return(0,h.BX)(c.Z,{value:e,sx:{p:m?1:void 0,minWidth:m?0:"6em",display:"flex",gap:m?0:1},onClick:()=>p(f(a,e)),children:[(0,h.tZ)(d.Z,{src:null==(n=o.CL.weaponTypes)?void 0:n[e],size:2,sideMargin:!0}),(0,h.tZ)(i.Z,{label:t[e],size:"small"})]},e)}))}))}},35072:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(45492),o=t(42745),s=t(503),l=t(92252),r=t(67550),c=t(7671),i=t(13780),p=t(79906),d=t(83249),u=t(41075),h=t(2784),Z=t(61877),f=t(11141),g=t(24264),v=t(66146),m=t(90844),y=t(28265),w=t(25616),x=t(34156),b=t(54578),C=t(7794),W=t(2313),k=t(73501),I=t(52903);const z=h.lazy((()=>t.e(592).then(t.bind(t,18571)))),S=(0,h.lazy)((()=>t.e(262).then(t.bind(t,64262)))),T={xs:1,sm:2,md:3,lg:3,xl:4},M={xs:10,sm:12,md:24,lg:24,xl:24},P=Object.keys(b.gd);function j(){const{t:e}=(0,f.$G)(["page_weapon","ui","weaponNames_gen"]),{database:a}=(0,h.useContext)(x.t),[t,j]=(0,h.useState)(a.displayWeapon.get());(0,h.useEffect)((()=>a.displayWeapon.follow(((e,a)=>j(a)))),[a]);const[L,N]=(0,h.useState)(!1),[E,V]=(0,n.NW)(),$=(0,h.useRef)(null),[_,B]=(0,h.useState)(0);(0,h.useEffect)((()=>(Z.ZP.send({hitType:"pageview",page:"/weapon"}),a.weapons.followAny(((e,a)=>("new"===a||"remove"===a)&&V())))),[V,a]);const H=(0,n.JT)(),O=M[H],X=(0,h.useCallback)((async n=>{const o=a.weapons.get(n);if(!o)return;const s=e(`weaponNames_gen:${o.key}`);window.confirm(e("removeWeapon",{value:s}))&&(a.weapons.remove(n),t.editWeaponId===n&&a.displayWeapon.set({editWeaponId:""}))}),[t.editWeaponId,a,e]),A=(0,h.useCallback)((e=>{a.displayWeapon.set({editWeaponId:e})}),[a]),K=(0,h.useCallback)((e=>{A(a.weapons.new((0,C.xg)(e)))}),[a,A]),[D,U]=(0,h.useState)(""),G=(0,h.useDeferredValue)(D),{sortType:F,ascending:q,weaponType:J,rarity:R}=t,{weaponIdList:Y,totalWeaponNum:Q}=(0,h.useMemo)((()=>{var e;const t=a.weapons.values,n=t.length,s=t.filter((0,o.CZ)({weaponType:J,rarity:R,name:G},(0,b.Xg)())).sort((0,o.ef)(null!=(e=b.gd[F])?e:[],q,(0,b.Sn)())).map((e=>e.id));return E&&{weaponIdList:s,totalWeaponNum:n}}),[E,a,F,q,R,J,G]),{weaponIdsToShow:ee,numPages:ae,currentPageIndex:te}=(0,h.useMemo)((()=>{const e=Math.ceil(Y.length/O),a=(0,o.re)(_,0,e-1);return{weaponIdsToShow:Y.slice(a*O,(a+1)*O),numPages:e,currentPageIndex:a}}),[Y,_,O]),ne=Y.length!==Q?`${Y.length}/${Q}`:`${Q}`,oe=(0,h.useCallback)(((e,a)=>{var t;null==(t=$.current)||t.scrollIntoView({behavior:"smooth"}),B(a-1)}),[B,$]),se=(0,h.useCallback)((()=>a.displayWeapon.set({editWeaponId:""})),[a]),{editWeaponId:le}=t;(0,h.useEffect)((()=>{le&&(a.weapons.get(le)||se())}),[a,le,se]);const re=(0,h.useMemo)((()=>(0,W.W)(s.yd,(e=>Object.entries(a.weapons.data).forEach((([a,t])=>{const n=(0,w.ub)(t.key).weaponType;e[n].total++,Y.includes(a)&&e[n].current++}))))),[a,Y]),ce=(0,h.useMemo)((()=>(0,W.W)(s.U1,(e=>Object.entries(a.weapons.data).forEach((([a,t])=>{const n=(0,w.ub)(t.key).rarity;e[n].total++,Y.includes(a)&&e[n].current++}))))),[a,Y]),ie={count:ae,page:te+1,onChange:oe},pe={numShowing:ee.length,total:ne,t:e},de={sortKeys:[...P],value:F,onChange:e=>a.displayWeapon.set({sortType:e}),ascending:q,onChangeAsc:e=>a.displayWeapon.set({ascending:e})};return(0,I.BX)(r.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,I.tZ)(h.Suspense,{fallback:!1,children:(0,I.tZ)(z,{show:L,onHide:()=>N(!1),onSelect:K})}),(0,I.tZ)(h.Suspense,{fallback:!1,children:(0,I.tZ)(S,{weaponId:le,footer:!0,onClose:se})}),(0,I.tZ)(g.Z,{ref:$,children:(0,I.BX)(c.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,I.BX)(r.Z,{display:"flex",flexWrap:"wrap",gap:1,alignItems:"stretch",children:[(0,I.tZ)(y.Z,{onChange:e=>a.displayWeapon.set({weaponType:e}),value:J,totals:re,size:"small"}),(0,I.tZ)(m.Z,{sx:{height:"100%"},onChange:e=>a.displayWeapon.set({rarity:e}),value:R,totals:ce,size:"small"}),(0,I.tZ)(r.Z,{flexGrow:1}),(0,I.tZ)(i.Z,{autoFocus:!0,size:"small",value:D,onChange:e=>U(e.target.value),label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})]}),(0,I.tZ)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:(0,I.tZ)(v.Z,{paginationProps:ie,showingTextProps:pe,displaySort:!0,sortByButtonProps:de})})]})}),(0,I.BX)(h.Suspense,{fallback:(0,I.tZ)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:[(0,I.tZ)(d.Z,{fullWidth:!0,onClick:()=>N(!0),color:"info",startIcon:(0,I.tZ)(l.Z,{}),children:e("page_weapon:addWeapon")}),(0,I.tZ)(u.ZP,{container:!0,spacing:1,columns:T,children:ee.map((e=>(0,I.tZ)(u.ZP,{item:!0,xs:1,children:(0,I.tZ)(k.Z,{weaponId:e,onDelete:X,onEdit:A,canEquip:!0})},e)))})]}),ae>1&&(0,I.tZ)(g.Z,{children:(0,I.tZ)(c.Z,{children:(0,I.tZ)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,I.tZ)(v.Z,{paginationProps:ie,showingTextProps:pe})})})})]})}},30311:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(13073),o=t(2784),s=t(34156);function l(e=""){const{database:a}=(0,o.useContext)(s.t);return(0,n.Y)(a.weapons,e)}},2313:(e,a,t)=>{t.d(a,{A:()=>o,W:()=>s});var n=t(42745);function o(e,a){const t=(0,n.vU)(e,(e=>l(e)));return a(t),(0,n.vU)(t,(e=>r(e)))}function s(e,a){const t=l(e);return a(t),r(t)}function l(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}function r(e){return(0,n.vU)(e,(({total:e,current:a})=>a===e?`${e}`:`${a}/${e}`))}}}]);