import{u as F,a as $,ae as L,b as e,d as n,f as a,C as v,T as r,B,e as O,aj as E,aq as G,R as V,N as Y,Y as q,h as D,i as X,bM as Z,r as x,b0 as J,bS as Q,k as U,l as K,cX as ee,g as te,D as ae,S as M,bY as N,aT as ne,V as ie,bT as oe,o as se,p as re,t as le,bV as ce,cY as de,z as he,cZ as pe,ct as I,ck as P,_ as xe,c_ as ge}from"./index-BIazPvVU.js";import{u as ue,c as y,h as k}from"./useTeamChar-Bd7CspC3.js";import{T as me}from"./TeamDelModal-CcFSC2qs.js";function ve({teamId:t,onClick:l,bgt:c}){const i=F(t),{name:o,description:s,loadoutData:p}=i,g=$(),[u,h,T]=L();return e(D,{bgt:c,sx:{height:"100%",border:"1px rgba(200,200,200,0.4) solid"},children:n(a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[n(a,{sx:{display:"flex",flexDirection:"row"},children:[e(v,{onClick:()=>l(),sx:{p:1},children:n(r,{sx:{display:"flex",gap:1},variant:"h6",children:[e("span",{children:o})," ",s&&e(B,{title:e(r,{children:s}),children:e(O,{})})]})}),e(me,{teamId:t,show:u,onHide:T,onDel:function(){}}),e(E,{onClick:h,color:"error",children:e(G,{})})]}),e(a,{sx:{marginTop:"auto"},children:p.map((m,w)=>{var b;const S=m==null?void 0:m.teamCharId,d=S&&((b=g.teamChars.get(S))==null?void 0:b.key);return n(V.Fragment,{children:[e(Y,{}),d?e(v,{onClick:()=>l(d),children:e(be,{characterKey:d,teamId:t,teamCharId:S})}):e(v,{onClick:()=>l(),sx:{height:120,position:"relative"},children:e(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:120,backgroundColor:"neutral600.main"},children:e(a,{component:"img",src:q.team[`team${w+1}`],sx:{width:"auto",my:"15px",height:90,opacity:.7,mx:"auto"}})})})]},w)})})]})})}const C={banner:0,bannerFilter:1,characterIcon:2,darkDRop:3,other:4};function be({characterKey:t,teamId:l,teamCharId:c}){var H;const i=$(),o=X(t),{gender:s}=Z(),{silly:p}=x.useContext(J),g=Q(t),{name:u}=ue(c),h=i.teams.getLoadoutDatum(l,c),T=i.teams.getActiveBuildName(h),m=x.useMemo(()=>i.teams.getLoadoutWeapon(h),[h,i]),w=(()=>{const{buildType:f,buildTcId:R}=h;return f==="tc"&&R?U(i.buildTcs.get(R)):Object.values(i.teams.getLoadoutArtifacts(h)).filter(_=>_)})(),S=x.useMemo(()=>i.teams.getLoadoutArtifactData(h),[i,h]),d=K(t,void 0,w,m),b=(H=d==null?void 0:d[t])==null?void 0:H.target,A=x.useMemo(()=>o&&{character:o},[o]),z=x.useMemo(()=>b&&d&&{data:b,teamData:d},[b,d]),j=ee(t,"banner",s),W=te(t);return!A||!z?null:e(le.Provider,{value:A,children:e(ae.Provider,{value:z,children:e(x.Suspense,{fallback:e(M,{variant:"rectangular",width:"100%",height:300}),children:n(a,{className:j?void 0:`grad-${g.rarity}star`,sx:{display:"flex","&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${j})`,backgroundPosition:"center",backgroundSize:"cover",zIndex:C.banner}},children:[e(a,{sx:f=>({position:"absolute",width:"100%",height:"100%",zIndex:C.bannerFilter,backdropFilter:"blur(3px)",background:`linear-gradient(to right, ${y(k(f.palette.neutral600.main),.8)}, ${y(k(f.palette.neutral600.main),.4)} 100% )`})}),e(a,{sx:f=>({position:"absolute",width:"100%",height:"100%",zIndex:C.darkDRop,background:`linear-gradient(to top, ${y(k(f.palette.neutral600.main),.9)}, rgba(0,0,0,0) 25% )`})}),n(a,{sx:{height:120,width:120,position:"absolute",zIndex:C.other},children:[o&&e(r,{sx:{position:"absolute",lineHeight:1,bottom:0,p:.5,textShadow:"0 0 5px black"},children:N(o.level,o.ascension)}),o&&n(r,{sx:{position:"absolute",lineHeight:1,bottom:0,right:0,p:.5,textShadow:"0 0 5px black"},children:["C",o.constellation]}),t.startsWith("Traveler")&&e(r,{sx:{position:"absolute",lineHeight:1,top:0,left:0,p:.5,textShadow:"0 0 5px black"},children:e(ne,{color:W,children:e(ie,{ele:W})})})]}),e(a,{component:"img",src:oe(t,s,p),sx:{height:120,width:120,zIndex:C.characterIcon}}),n(a,{sx:{pr:.5,pl:.5,py:.5,display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:0,justifyContent:"space-between",zIndex:C.other},children:[n(r,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(se,{}),e("span",{children:u})]}),n(r,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(re,{}),e("span",{children:T})]}),n(a,{sx:{display:"flex",mb:.5,gap:1},children:[e(fe,{weapon:m}),e(Ce,{artifactData:S})]})]})]})})})})}function fe({weapon:t}){return n(D,{bgt:"neutral600",sx:{height:"100%",maxHeight:"50px",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)"},children:[e(a,{component:"img",src:ce(t.key,t.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}}),n(a,{sx:{pr:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",color:"neutral200.main"},children:[e(r,{sx:{},children:N(t.level,t.ascension)}),de(t.key)&&n(r,{children:["R",t.refinement]})]})]})}function Ce({artifactData:t}){const{setNum:l={},mains:c={}}=t,{t:i}=he("statKey_gen"),o=Object.entries(l).filter(([,s])=>s===2||s===4);return n(D,{bgt:"neutral600",sx:{height:"100%",maxHeight:"50px",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)",flexGrow:1},children:[e(a,{sx:{Width:"50px",minWidth:"50px",height:"50px",position:"relative"},children:o.length===2?e(ye,{sets:o.map(([s])=>s)}):o.length===1?e(ke,{set:o[0][0],num:o[0][1]}):!1}),e(a,{sx:{display:"flex",flexGrow:1,position:"relative",justifyContent:"space-around",alignItems:"center"},children:Object.entries(c).filter(([,s])=>s).map(([s,p])=>{const g=e(xe,{slotKey:s,iconProps:{sx:{fontSize:"inherit"}}}),u=e(ge,{statKey:p,iconProps:{sx:{fontSize:"inherit"}}});return e(B,{title:e(a,{children:n(x.Suspense,{fallback:e(M,{variant:"text"}),children:[n(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[g,e(pe,{slotKey:s})]}),n(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[u,i(p)]})]})}),children:n(r,{sx:{lineHeight:0},children:[g,u]})},s+p)})})]})}function ye({sets:t}){const l=t[0],c=t[1];return n(P,{children:[e(a,{component:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(0 0, 0 100%, 100% 0)"},src:I(l,"flower")}),e(a,{component:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(100% 100%, 0 100%, 100% 0)"},src:I(c,"flower")}),e(a,{className:"botright",sx:i=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:y(k(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"}),e(a,{sx:i=>({position:"absolute",top:0,left:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:y(k(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"})]})}function ke({set:t,num:l}){return n(P,{children:[e(a,{sx:c=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:y(k(c.palette.primary.main),.4),borderRadius:"100%"}),children:l}),e(a,{component:"img",src:I(t,"flower"),sx:{Width:"50px",height:"50px"}})]})}export{ve as T};
