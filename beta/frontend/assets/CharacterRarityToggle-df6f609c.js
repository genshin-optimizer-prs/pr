import{b as k,at as Ft,as as Kt,au as $e,aS as Q,av as ee,e as l,aw as qt,ax as Ht,cf as Lt,ay as et,j as J,az as Vt,p as e,cg as za,ch as Na,ci as Ea,by as Pa,F as Fa,r as Ue,i as Te,n as m,U as ge,B as z,cj as Ka,aO as qa,cc as Ha,c as Ne,ap as Ae,J as S,K as g,bI as Gt,a9 as ut,d as be,T as _,q as ie,ck as Va,aB as Yt,bl as Z,bJ as tt,l as dt,bB as Ga,aU as kt,cl as Ya,t as ae,b4 as Xa,b3 as Ja,a0 as ht,cm as Qa,aM as Za,cn as $t,co as en,cp as Ve,cq as Ge,cr as Ye,bt as tn,a3 as le,D as Ce,am as _e,u as H,bn as Ut,bo as Tt,bm as Mt,Q as ue,o as ye,k as se,b1 as xe,C as G,s as Xt,aA as ne,V as Me,bp as an,cs as Jt,b9 as nn,ca as rn,$ as Qt,bK as on,bM as sn,b5 as ln,bN as cn,bX as un,bW as dn,bO as hn,X as De,ct as pn,cu as mn,cv as Zt,cw as fn,cx as gn,cy as Cn,cz as xn,bc as bn,cA as yn,aI as ea,v as Ee,_ as ta,af as aa,ae as vn,bE as wn,cB as _n,a$ as Rn,aE as Sn,b0 as Ln,b2 as kn,aC as Dt,W as $n,cC as at,ar as nt,cD as Un,m as rt,f as pt,cE as Tn,cF as Xe,h as Mn,bY as Dn,aG as na}from"./index-e426fdd0.js";import{b as E,u as ra,k as oa,F as sa,l as jn,m as In,j as An,n as Bn,o as ia,h as On,a as Wn,T as zn,d as jt,i as la,C as Nn,p as En}from"./TeamCard-74951872.js";import{D as Y,a as Pn,L as Fn,b as Kn,A as qn}from"./FieldDisplay-eda96b38.js";import{u as I,E as mt,g as ce,S as ft,a as Hn,B as ca,p as te,x as ua,C as Vn,v as Gn,w as da,n as Yn,D as Xn,r as ot,o as It,m as Jn,A as Qn,F as Zn,i as Be,q as er,G as tr,H as ar,I as nr,J as rr,b as At,c as Bt,K as or}from"./index-0f994c71.js";import{B as je,a as sr}from"./BootstrapTooltip-2c1bfebd.js";import{C as Pe}from"./CloseButton-6f831480.js";import{I as Re,i as Se,C as Fe,B as ir}from"./ColoredText-be62572a.js";import{C as lr,T as re,W as ha,L as cr}from"./WeaponEditor-9deba8ab.js";import{S as q}from"./SqBadge-c98db679.js";import{u as ur,b as gt,F as pa,a as dr,C as ma,f as Ct,s as fa,d as ga,T as Ca,S as hr}from"./StarDisplay-d8d32f18.js";import{b as xa,u as ba,P as Oe,A as ya}from"./LocationAutocomplete-ee2bd6b1.js";import{C as Ke}from"./CardActionArea-e1546a3c.js";import{u as st,f as pr,A as We,d as mr,i as fr,b as gr}from"./ArtifactSort-218c8387.js";import{b as ze,c as Cr,d as xr,w as br,W as yr}from"./WeaponCard-7480ffe3.js";import{a as va,d as wa}from"./CheckBoxOutlineBlank-d6424708.js";import{A as vr}from"./Artifact-868d23a9.js";import{g as _a,a as wr,b as _r}from"./index-2d1932b6.js";import{g as xt,W as Ra}from"./index-cc53a2bf.js";import{u as Rr}from"./useWeapon-05b6198b.js";import{S as Sr}from"./SlotIcon-d75dcc9c.js";import{C as Sa}from"./ChevronRight-191535ac.js";import{C as Lr,a as kr,M as La,D as $r}from"./DropdownButton-4430c964.js";import{T as we,S as qe,h as bt,a as Ur,c as Ot}from"./totalUtils-11106e31.js";import Tr from"./WeaponSelectionModal-1dc6d859.js";function Ie(t){const a=k();return ur(a.optConfigs,t)}function Mr(t){const{badgeContent:a,invisible:n=!1,max:o=99,showZero:s=!1}=t,r=xa({badgeContent:a,max:o});let i=n;n===!1&&a===0&&!s&&(i=!0);const{badgeContent:c,max:f=o}=i?r:t,u=c&&Number(c)>f?`${f}+`:c;return{badgeContent:c,invisible:i,max:f,displayValue:u}}function Dr(t){return Kt("MuiBadge",t)}const jr=Ft("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),me=jr,Ir=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Je=10,Qe=4,Ar=t=>{const{color:a,anchorOrigin:n,invisible:o,overlap:s,variant:r,classes:i={}}=t,c={root:["root"],badge:["badge",r,o&&"invisible",`anchorOrigin${Q(n.vertical)}${Q(n.horizontal)}`,`anchorOrigin${Q(n.vertical)}${Q(n.horizontal)}${Q(s)}`,`overlap${Q(s)}`,a!=="default"&&`color${Q(a)}`]};return Vt(c,Dr,i)},Br=$e("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Or=$e("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${Q(n.anchorOrigin.vertical)}${Q(n.anchorOrigin.horizontal)}${Q(n.overlap)}`],n.color!=="default"&&a[`color${Q(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>ee({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Je*2,lineHeight:1,padding:"0 6px",height:Je*2,borderRadius:Je,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:Qe,height:Qe*2,minWidth:Qe*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),Wr=l.forwardRef(function(a,n){var o,s,r,i,c,f;const u=qt({props:a,name:"MuiBadge"}),{anchorOrigin:p={vertical:"top",horizontal:"right"},className:d,component:h,components:C={},componentsProps:b={},children:v,overlap:w="rectangular",color:U="default",invisible:M=!1,max:T=99,badgeContent:B,slots:O,slotProps:A,showZero:P=!1,variant:D="standard"}=u,x=Ht(u,Ir),{badgeContent:$,invisible:W,max:V,displayValue:F}=Mr({max:T,invisible:M,badgeContent:B,showZero:P}),L=xa({anchorOrigin:p,color:U,overlap:w,variant:D,badgeContent:B}),j=W||$==null&&D!=="dot",{color:R=U,overlap:y=w,anchorOrigin:N=p,variant:K=D}=j?L:u,X=K!=="dot"?F:void 0,de=ee({},u,{badgeContent:$,invisible:j,max:V,displayValue:X,showZero:P,anchorOrigin:N,color:R,overlap:y,variant:K}),he=Ar(de),ke=(o=(s=O==null?void 0:O.root)!=null?s:C.Root)!=null?o:Br,oe=(r=(i=O==null?void 0:O.badge)!=null?i:C.Badge)!=null?r:Or,pe=(c=A==null?void 0:A.root)!=null?c:b.root,He=(f=A==null?void 0:A.badge)!=null?f:b.badge,Oa=Lt({elementType:ke,externalSlotProps:pe,externalForwardedProps:x,additionalProps:{ref:n,as:h},ownerState:de,className:et(pe==null?void 0:pe.className,he.root,d)}),Wa=Lt({elementType:oe,externalSlotProps:He,ownerState:de,className:et(he.badge,He==null?void 0:He.className)});return J.jsxs(ke,ee({},Oa,{children:[v,J.jsx(oe,ee({},Wa,{children:X}))]}))}),zr=Wr;function Nr({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(Fa,{...a});case"plume":return e(Pa,{...a});case"sands":return e(Ea,{...a});case"goblet":return e(Na,{...a});case"circlet":return e(za,{...a})}}var yt={},Er=Te;Object.defineProperty(yt,"__esModule",{value:!0});var it=yt.default=void 0,Pr=Er(Ue()),Fr=J,Kr=(0,Pr.default)((0,Fr.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");it=yt.default=Kr;function qr({title:t,children:a,id:n="dropdownbtn",...o}){const[s,r]=l.useState(null),i=!!s,c=l.useCallback(u=>r(u.currentTarget),[r]),f=l.useCallback(()=>r(null),[r]);return m(l.Suspense,{fallback:e(z,{endIcon:e(it,{}),...o,children:e(ge,{width:50})}),children:[e(z,{...o,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:c,endIcon:e(it,{}),children:t}),e(Ha,{id:"basic-menu",anchorEl:s,open:i,placement:"bottom-start",transition:!0,onClick:f,sx:{zIndex:1500},children:({TransitionProps:u,placement:p})=>e(Ka,{...u,style:{transformOrigin:p==="bottom-start"?"left top":"left bottom"},children:e(qa,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Lr,{onClickAway:f,children:m("div",{children:[" ",e(l.Suspense,{fallback:e(ge,{width:"100%",height:"1000"}),children:e(kr,{"aria-labelledby":n,children:a})})]})})})})})]})}const Hr=Ne(J.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),ru=Ne(J.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),Vr=Ne(J.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),Gr=Ne(J.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),Yr=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Xr=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Jr=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Qr=""+new URL("splash_amber-51176566.png",import.meta.url).href,Zr=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,eo=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,to=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,ao=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,no=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,ro=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,oo=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,so=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,io=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,lo=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,co=""+new URL("splash_collei-504a299e.png",import.meta.url).href,uo=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,ho=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,po=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,mo=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,fo=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,go=""+new URL("splash_eula-1491affb.png",import.meta.url).href,Co=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,xo=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,bo=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,yo=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,vo=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,wo=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,_o=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,Ro=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,So=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,Lo=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,ko=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,$o=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,Uo=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,To=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,Mo=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,Do=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,jo=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Io=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Ao=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Bo=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,Oo=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,Wo=""+new URL("splash_lumine-51240648.png",import.meta.url).href,zo=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,No=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,Eo=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Po=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Fo=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,Ko=""+new URL("splash_navia-749d043e.png",import.meta.url).href,qo=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Ho=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Vo=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,Go=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Yo=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Xo=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,Jo=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Qo=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Zo=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,es=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,ts=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,as=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,ns=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,rs=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,os=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,ss=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,is=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,ls=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,cs=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,us=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,ds=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,hs=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,ps=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,ms=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,fs=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,gs=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,Cs=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,xs=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,bs=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,ys=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,vs={Albedo:Xr,Alhaitham:Jr,Amber:Qr,AratakiItto:Lo,Baizhu:to,Barbara:ao,Beidou:no,Bennett:ro,Candace:oo,Charlotte:so,Chevreuse:io,Chongyun:lo,Collei:co,Cyno:uo,Dehya:ho,Diluc:po,Diona:mo,Dori:fo,Eula:go,Faruzan:Co,Fischl:xo,Freminet:bo,Furina:yo,Gaming:vo,Ganyu:wo,Gorou:_o,HuTao:So,Jean:ko,KaedeharaKazuha:To,Kaeya:$o,KamisatoAyaka:Zr,KamisatoAyato:eo,Kaveh:Uo,Keqing:Mo,Kirara:Do,Klee:jo,KujouSara:Zo,KukiShinobu:Ao,Layla:Bo,Lisa:Oo,Lynette:zo,Lyney:No,Mika:Eo,Mona:Po,Nahida:Fo,Navia:Ko,Neuvillette:qo,Nilou:Ho,Ningguang:Vo,Noelle:Go,Qiqi:Yo,RaidenShogun:Xo,Razor:Jo,Rosaria:Qo,SangonomiyaKokomi:Io,Sayu:es,Shenhe:ts,ShikanoinHeizou:Ro,Sucrose:as,Tartaglia:ns,Thoma:rs,Tighnari:os,TravelerF:Wo,TravelerM:Yr,Venti:ss,Wanderer:is,Wriothesley:ls,Xiangling:cs,Xianyun:us,Xiao:ds,Xingqiu:hs,Xinyan:ps,YaeMiko:ms,Yanfei:fs,Yaoyao:gs,Yelan:Cs,Yoimiya:xs,YunJin:bs,Zhongli:ys};function ws(t,a){return vs[Ae(t,a)]??""}const _s=l.createContext({}),Rs=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,Ss=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,Ls=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,ks=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,$s=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Us=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,Ts=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,Ms=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,Ds=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,js=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,Is=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,As=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Bs=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,Os=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Ws=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,zs=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Ns=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Es=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,Ps=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,Fs=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Ks=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,qs=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Hs=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Vs=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,Gs=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Ys=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,Xs=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Js=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,Qs=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,Zs=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,ei=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,ti=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,ai=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,ni=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,ri=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,oi=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,si=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,ii=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,li=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,ci=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,ui=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,di=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,hi=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,pi=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,mi=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,fi=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,gi=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,Ci=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,xi=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,bi=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,yi=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,vi=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,wi=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,_i=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,Ri=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,Si=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,Li=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,ki=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,$i=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,Ui=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Ti=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,Mi=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,Di=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,ji=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Ii=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Ai=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Bi=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,Oi=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Wi=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,zi=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Ni=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Ei=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,Pi=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Fi=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Ki=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,qi=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Hi=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Vi=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,Gi=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Yi=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,Xi=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,Wt={Albedo:Rs,Alhaitham:Ss,Aloy:Ls,Amber:ks,AratakiItto:$s,Baizhu:Us,Barbara:Ts,Beidou:Ms,Bennett:Ds,Candace:js,Charlotte:Is,Chevreuse:As,Chongyun:Bs,Collei:Os,Cyno:Ws,Dehya:zs,Diluc:Ns,Diona:Es,Dori:Ps,Eula:Fs,Faruzan:Ks,Fischl:qs,Freminet:Hs,Furina:Vs,Gaming:Gs,Ganyu:Ys,Gorou:Xs,HuTao:Js,Jean:Qs,KaedeharaKazuha:ni,Kaeya:Zs,KamisatoAyaka:ei,KamisatoAyato:ti,Kaveh:ai,Keqing:ri,Kirara:oi,Klee:si,KujouSara:ii,KukiShinobu:li,Layla:ci,Lisa:ui,Lyney:hi,Lynette:di,Mika:pi,Mona:mi,Nahida:fi,Navia:gi,Neuvillette:Ci,Nilou:xi,Ningguang:bi,Noelle:yi,Qiqi:vi,RaidenShogun:wi,Razor:_i,Rosaria:Ri,SangonomiyaKokomi:Si,Sayu:Li,Shenhe:ki,ShikanoinHeizou:$i,Somnia:Ui,Sucrose:Ti,Tartaglia:Mi,Thoma:Di,Tighnari:ji,TravelerF:Yi,TravelerM:Xi,Venti:Ii,Wanderer:Ai,Wriothesley:Bi,Xiangling:Oi,Xianyun:Wi,Xiao:zi,Xingqiu:Ni,Xinyan:Ei,YaeMiko:Pi,Yanfei:Fi,Yaoyao:Ki,Yelan:qi,Yoimiya:Hi,YunJin:Vi,Zhongli:Gi};function Ji(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return Wt[`Traveler${a}`]??"";default:return Wt[t]??""}}function ou(){const{characterSheet:t}=l.useContext(E),{data:a}=l.useContext(Y),n={auto:a.get(I.total.auto).value,skill:a.get(I.total.skill).value,burst:a.get(I.total.burst).value},o={auto:a.get(I.total.autoBoost).value,skill:a.get(I.total.skillBoost).value,burst:a.get(I.total.burstBoost).value};return e(g,{children:e(S,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var r;return e(S,{item:!0,xs:4,children:e(zr,{badgeContent:n[s],color:o[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(g,{component:"img",src:(r=t.getTalentOfKey(s))==null?void 0:r.img,width:"100%",height:"auto"})})},s)})})})}function Qi(){const{characterSheet:t,character:{key:a}}=l.useContext(E),{data:n}=l.useContext(Y),o=ra(a),s=n.get(I.constellation).value;return e(S,{container:!0,spacing:1,children:Gt(1,6).map(r=>{var i;return e(S,{item:!0,xs:4,children:e(Ke,{onClick:()=>o({constellation:r===s?r-1:r}),children:e(g,{component:"img",src:(i=t.getTalentOfKey(`constellation${r}`))==null?void 0:i.img,sx:{...s>=r?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},r)})})}function Zi(){const{silly:t}=l.useContext(ut),{character:{key:a}}=l.useContext(E),{gender:n}=be(),{data:o}=l.useContext(Y),s=o.get(I.lvl).value,r=o.get(I.asc).value,i=ws(a,n),c=Ji(a,n);return t&&i?e(el,{src:i,level:s,ascension:r}):e(tl,{src:c,level:s,ascension:r})}function el({src:t,level:a,ascension:n}){const{characterSheet:o}=l.useContext(E);return m(g,{sx:{position:"relative"},children:[e(g,{src:t,component:"img",width:"100%",height:"auto"}),m(g,{sx:{width:"100%",height:"100%"},children:[e(g,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(ka,{})}),e(_,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(gt,{stars:o.rarity,colored:!0})}),e(Ua,{}),e($a,{level:a,ascension:n})]})]})}function tl({src:t,level:a,ascension:n}){const{characterSheet:o}=l.useContext(E);return m(g,{sx:{position:"relative"},children:[m(g,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(_,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(gt,{stars:o.rarity,colored:!0})}),e(g,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(ka,{})}),e(Ua,{}),e($a,{level:a,ascension:n})]}),e(g,{src:t,component:"img",width:"100%",height:"auto"})]})}function ka(){var n;const{characterSheet:t}=l.useContext(E),a=t.elementKey;return e(ie,{color:a,sx:{height:"auto"},label:m(_,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(mt,{ele:a}),e(g,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e(Re,{src:(n=Se.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function $a({level:t,ascension:a}){return e(_,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(q,{children:Va(t,a)})})}function Ua(){const{character:{key:t}}=l.useContext(E),a=k(),{favorite:n}=oa(t);return e(g,{sx:{position:"absolute",left:0,top:0},children:e(Yt,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(pa,{}):e(sa,{})})})}var vt={},al=Te;Object.defineProperty(vt,"__esModule",{value:!0});var Le=vt.default=void 0,nl=al(Ue()),rl=J,ol=(0,nl.default)((0,rl.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");Le=vt.default=ol;var wt={},sl=Te;Object.defineProperty(wt,"__esModule",{value:!0});var Ta=wt.default=void 0,il=sl(Ue()),ll=J,cl=(0,il.default)((0,ll.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");Ta=wt.default=cl;function Ma({characterKey:t}){const{gender:a}=be();if(!t)return null;const n=ce(t,a);return n?e(je,{placement:"right-end",title:e(_,{children:n.name}),children:e(dr,{characterKey:t,sideMargin:!0})}):null}function ul({statKey:t,disableIcon:a=!1}){return m(g,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(ft,{statKey:t,iconProps:Z}),m("span",{children:[tt.get(t),tt.unit(t)]})]})}function Da({statKey:t,disableIcon:a=!1}){return e(Fe,{color:tt.getVariant(t),children:e(ul,{statKey:t,disableIcon:a})})}function dl({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:o=!1,onClick:s,BGComponent:r=ae}){const i=st(t),c=k(),f=l.useCallback(T=>e(Ke,{onClick:s,sx:{height:"100%"},children:T}),[s]),u=dt();if(!i)return e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Se.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:p,rarity:d,level:h,mainStatKey:C,substats:b,location:v}=i,w=Math.max(Math.min(n,d*4),h),U=Ga.find(T=>i.mainStatKey.includes(T)),M=U?kt(u.palette[U].main,.6):kt(u.palette.secondary.main,.6);return e(r,{sx:{height:"100%"},children:e(ma,{condition:!!s,wrapper:f,children:m(g,{display:"flex",height:"100%",children:[m(g,{className:`grad-${d}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(jn,{art:i,children:e(g,{component:"img",src:Hn(i.setKey,p),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),m(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ie,{size:"small",label:e("strong",{children:` +${h}`}),color:vr.levelVariant(h)}),o&&e(ie,{size:"small",label:v?e(Ma,{characterKey:v&&c.chars.LocationToCharacterKey(v)}):e(ca,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(ie,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:M,p:1},icon:e(je,{placement:"top",title:e(_,{children:e(Da,{statKey:C})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(ft,{statKey:C,iconProps:{style:{padding:"4px"}}})})}),label:e(_,{sx:{mx:-.7},children:e(Fe,{color:w!==h?"warning":void 0,children:Ya(C,d,w)})})})]}),e(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:b.map((T,B)=>e(hl,{stat:T},B+T.key))})]})})})}function hl({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${ht(a,1,6)}`,o=Xa(t.key);return e(g,{display:"flex",gap:1,alignContent:"center",children:m(_,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(je,{placement:"top",title:e(_,{children:t.key&&e(Da,{statKey:t.key})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(ft,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${Ja(t.value,o)}${o}`})]})})}function pl(t){return Kt("MuiMasonry",t)}Ft("MuiMasonry",["root"]);const ml=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],fe=t=>Number(t.replace("px","")),fl={flexBasis:"100%",width:0,margin:0,padding:0},gl=t=>{const{classes:a}=t;return Vt({root:["root"]},pl,a)},Cl=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const o={};if(t.isSSR){const u={},p=fe(a.spacing(t.defaultSpacing));for(let d=1;d<=t.defaultColumns;d+=1)u[`&:nth-of-type(${t.defaultColumns}n+${d%t.defaultColumns})`]={order:d};return o.height=t.defaultHeight,o.margin=-(p/2),o["& > *"]=ee({},n["& > *"],u,{margin:p/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${p}px)`}),ee({},n,o)}const s=$t({values:t.spacing,breakpoints:a.breakpoints.values}),r=en(a);n=Ve(n,Ge({theme:a},s,u=>{let p;if(typeof u=="string"&&!Number.isNaN(Number(u))||typeof u=="number"){const d=Number(u);p=Ye(r,d)}else p=u;return ee({margin:`calc(0px - (${p} / 2))`,"& > *":{margin:`calc(${p} / 2)`}},t.maxColumnHeight&&{height:typeof p=="number"?Math.ceil(t.maxColumnHeight+fe(p)):`calc(${t.maxColumnHeight}px + ${p})`})}));const c=$t({values:t.columns,breakpoints:a.breakpoints.values});return n=Ve(n,Ge({theme:a},c,u=>{const d=`${(100/Number(u)).toFixed(2)}%`,h=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?Ye(r,Number(s)):"0px";return{"& > *":{width:`calc(${d} - ${h})`}}})),typeof s=="object"&&(n=Ve(n,Ge({theme:a},s,(u,p)=>{if(p){const d=Number(u),h=Object.keys(c).pop(),C=Ye(r,d);return{"& > *":{width:`calc(${`${(100/(typeof c=="object"?c[p]||c[h]:c)).toFixed(2)}%`} - ${C})`}}}return null}))),n},xl=$e("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(Cl),bl=l.forwardRef(function(a,n){const o=qt({props:a,name:"MuiMasonry"}),{children:s,className:r,component:i="div",columns:c=4,spacing:f=1,defaultColumns:u,defaultHeight:p,defaultSpacing:d}=o,h=Ht(o,ml),C=l.useRef(),[b,v]=l.useState(),w=!b&&p&&u!==void 0&&d!==void 0,[U,M]=l.useState(w?u-1:0),T=ee({},o,{spacing:f,columns:c,maxColumnHeight:b,defaultColumns:u,defaultHeight:p,defaultSpacing:d,isSSR:w}),B=gl(T),O=D=>{if(!C.current||!D||D.length===0)return;const x=C.current,$=C.current.firstChild,W=x.clientWidth,V=$.clientWidth;if(W===0||V===0)return;const F=window.getComputedStyle($),L=fe(F.marginLeft),j=fe(F.marginRight),R=Math.round(W/(V+L+j)),y=new Array(R).fill(0);let N=!1;x.childNodes.forEach(K=>{if(K.nodeType!==Node.ELEMENT_NODE||K.dataset.class==="line-break"||N)return;const X=window.getComputedStyle(K),de=fe(X.marginTop),he=fe(X.marginBottom),ke=fe(X.height)?Math.ceil(fe(X.height))+de+he:0;if(ke===0){N=!0;return}for(let oe=0;oe<K.childNodes.length;oe+=1){const pe=K.childNodes[oe];if(pe.tagName==="IMG"&&pe.clientHeight===0){N=!0;break}}if(!N){const oe=y.indexOf(Math.min(...y));y[oe]+=ke;const pe=oe+1;K.style.order=pe}}),N||tn.flushSync(()=>{v(Math.max(...y)),M(R>0?R-1:0)})};Qa(()=>{if(typeof ResizeObserver>"u")return;let D;const x=new ResizeObserver(()=>{D=requestAnimationFrame(O)});return C.current&&C.current.childNodes.forEach($=>{x.observe($)}),()=>{D&&window.cancelAnimationFrame(D),x&&x.disconnect()}},[c,f,s]);const A=Za(n,C),P=new Array(U).fill("").map((D,x)=>J.jsx("span",{"data-class":"line-break",style:ee({},fl,{order:x+1})},x));return J.jsxs(xl,ee({as:i,className:et(B.root,r),ref:A,ownerState:T},h,{children:[s,P]}))}),yl=bl,vl=l.createContext(void 0),ve={title:e(Fe,{color:"warning",children:"ERROR"})},wl={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(Gt(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function _l(t,a,n){if(!a)return ve;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[o,s]=a.split(":");if(o==="artifact"){const r=_a(s);return r?{title:r.name,icon:wr(s)}:ve}else if(o==="weapon"){const r=xt(s);if(!r)return ve;const i=t.get(te.weapon.asc).value;return{title:r.name,icon:ua(s,i>=2)}}}else{const o=t.get(te.charKey).value;if(!o)return ve;const s=ce(o,n.gender),r=["normal","charged","plunging"].includes(a)?"auto":a,i=s==null?void 0:s.getTalentOfKey(r);if(!i)return ve;const c=wl[a];return{icon:i.img,title:i.name,action:c}}return ve}function Rl(t){const a=t.getDisplay(),n=Object.entries(a),o=n.filter(([u])=>u==="basic"),s=n.filter(([u])=>u==="reaction"),r=n.filter(([u])=>u==="custom"),i=n.filter(([u])=>u.startsWith("weapon")),c=n.filter(([u])=>u.startsWith("artifact")),f=n.filter(([u])=>u!=="basic"&&u!=="reaction"&&!u.startsWith("weapon")&&!u.startsWith("artifact")&&u!=="custom");return[...o,...s,...r,...f,...i,...c]}function Sl(){const{data:t}=l.useContext(Y),a=l.useMemo(()=>Rl(t).filter(([,n])=>Object.values(n).some(o=>!o.isEmpty)),[t]);return e(g,{sx:{mr:-1,mb:-1},children:e(yl,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:a.map(([n,o])=>e(Ll,{displayNs:o,sectionKey:n},n))})})}function Ll({displayNs:t,sectionKey:a}){const n=l.useContext(vl),{data:o,oldData:s}=l.useContext(Y),r=k(),i=l.useMemo(()=>_l(o,a,r),[r,o,a]),c=l.useMemo(()=>le(t,(d,h)=>Vn(["display",a,h])),[t,a]);if(!i)return e(ae,{});const{title:f,icon:u,action:p}=i;return m(ae,{children:[e(lr,{avatar:u&&e(Re,{size:2,src:u}),title:f,action:p&&e(q,{children:p})}),e(Ce,{}),e(Kn,{sx:{m:0},children:Object.entries(t).map(([d,h])=>e(Pn,{node:h,oldValue:s?s.get(c[d]).value:void 0,component:Fn,emphasize:JSON.stringify(n)===JSON.stringify([a,d])},d))})]})}function kl({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:o=ae,weaponTypeKey:s="sword"}){const r=Rr(t),i=(r==null?void 0:r.key)&&xt(r.key);return!r||!i?e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Se.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e($l,{weapon:r,weaponSheet:i,onClick:n,showLocation:a,BGComponent:o})}function $l({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:o,BGComponent:s=ae}){const r=k(),{refinement:i,location:c}=t,f=l.useCallback(p=>e(Ke,{sx:{height:"100%"},onClick:o,children:p}),[o]),u=l.useMemo(()=>a&&t&&Gn([a.data,da(t)]),[a,t]);return e(s,{sx:{height:"100%"},children:e(ma,{condition:!!o,wrapper:f,children:m(g,{display:"flex",height:"100%",alignItems:"stretch",children:[m(g,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(In,{sheet:a,children:e(g,{component:"img",src:ua(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),m(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ie,{size:"small",label:e("strong",{children:Ra.getLevelString(t)}),color:"primary"}),n&&e(ie,{size:"small",label:c?e(Ma,{characterKey:r.chars.LocationToCharacterKey(c)}):e(ca,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(ie,{size:"small",color:"info",label:m("strong",{children:["R",i]})})})]}),m(g,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(zt,{node:u.get(te.weapon.main)}),e(zt,{node:u.get(te.weapon.sub)})]})]})})})}function zt({node:t}){return t.info.name?e(g,{display:"flex",gap:1,alignContent:"center",children:m(_,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(je,{placement:"top",title:e(_,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:Yn(t)})]})}):null}function Ul({artifacts:t,currentlyEquipped:a=!1}){const n=l.useMemo(()=>t.filter(o=>o).reduce((o,s)=>(o[s.setKey]?o[s.setKey].push(s.slotKey):o[s.setKey]=[s.slotKey],o),{}),[t]);return e(_e,{children:Object.entries(n).sort(([o,s],[r,i])=>i.length-s.length).map(([o,s])=>e(Tl,{setKey:o,currentlyEquipped:a,slotarr:s},o))})}function Tl({setKey:t,currentlyEquipped:a=!1,slotarr:n}){const o=_a(t),s=n.length,r=Object.keys(o.setEffects).map(i=>parseInt(i)).filter(i=>i<=s);return e(g,{children:e(pr,{artifactSheet:o,numInSet:s,children:e(q,{sx:{height:"100%"},color:a?"success":"primary",children:m(_,{children:[n.map(i=>e(Sr,{slotKey:i,iconProps:Z},i))," ",o.name??"",r.map((i,c)=>e(q,{sx:{ml:.5},color:"success",children:i},""+i+c))]})})})})}var _t={},Ml=Te;Object.defineProperty(_t,"__esModule",{value:!0});var lt=_t.default=void 0,Dl=Ml(Ue()),jl=J,Il=(0,Dl.default)((0,jl.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");lt=_t.default=Il;var Rt={},Al=Te;Object.defineProperty(Rt,"__esModule",{value:!0});var ct=Rt.default=void 0,Bl=Al(Ue()),Ol=J,Wl=(0,Bl.default)((0,Ol.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");ct=Rt.default=Wl;function zl({setKey:t,buttonGroupSx:a}){const{t:n}=H("sheet"),{teamChar:{optConfigId:o}}=l.useContext(re),{artSetExclusion:s}=Ie(o),r=(s==null?void 0:s[t])??[],i=r.includes(2),c=r.includes(4),f=k();return m(ir,{sx:a,fullWidth:!0,children:[e(z,{startIcon:i?e(Ut,{}):e(Tt,{}),onClick:()=>f.optConfigs.set(o,{artSetExclusion:Mt(s,t,2)}),color:i?"secondary":"success",endIcon:i?e(lt,{}):e(ct,{}),children:n`2set`}),e(z,{startIcon:c?e(Ut,{}):e(Tt,{}),onClick:()=>f.optConfigs.set(o,{artSetExclusion:Mt(s,t,4)}),color:c?"secondary":"success",endIcon:c?e(lt,{}):e(ct,{}),children:n`4set`})]})}function Nl({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:o}){const{teamChar:{optConfigId:s,buildType:r,buildId:i}}=l.useContext(re),{character:{key:c,equippedArtifacts:f,equippedWeapon:u}}=l.useContext(E),{mainStatAssumptionLevel:p,allowLocationsState:d}=Ie(s)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},h=k(),{data:C,oldData:b}=l.useContext(Y),v=l.useMemo(()=>({oldId:b.get(I.weapon.id).value,newId:C.get(I.weapon.id).value}),[C,b]),[w,U,M]=ue(!1),T=l.useMemo(()=>ye(se,R=>({oldId:b.get(I.art[R].id).value??"",newId:C.get(I.art[R].id).value??""})),[C,b]),[B,O]=l.useState(),A=l.useCallback(()=>O(void 0),[O]),P=i&&r==="real",D=l.useCallback(()=>{const R=P?"Do you want to equip this build to the currently active build?":"Do you want to equip this build to this character?";if(!window.confirm(R))return;if(P){h.builds.set(i,{weaponId:C.get(I.weapon.id).value,artifactIds:ye(se,K=>{var X;return(X=C.get(I.art[K].id).value)==null?void 0:X.toString()})});return}const y=h.chars.get(c);if(!y)return;se.forEach(K=>{var de;const X=(de=C.get(I.art[K].id).value)==null?void 0:de.toString();if(X)h.arts.set(X,{location:xe(c)});else{const he=y.equippedArtifacts[K];he&&h.arts.get(he)&&h.arts.set(he,{location:""})}});const N=C.get(I.weapon.id).value;N&&h.weapons.set(N,{location:xe(c)})},[c,P,i,C,h]),x=l.useMemo(()=>Object.fromEntries(se.map(R=>{var y;return[R,(y=C.get(I.art[R].id).value)==null?void 0:y.toString()]})),[C]),$=l.useMemo(()=>x&&Object.values(x).map(R=>h.arts.get(R)).filter(R=>R),[x,h.arts]),W=l.useMemo(()=>r==="tc"?ye(se,()=>"tc"):r==="equipped"?f:r==="real"?h.builds.get(i).artifactIds:ye(se,()=>""),[r,i,h,f]),V=l.useMemo(()=>r==="tc"?"tc":r==="equipped"?u:r==="real"?h.builds.get(i).weaponId??"":"",[r,i,h,u]),F=l.useMemo(()=>e(S,{item:!0,xs:1,children:e(kl,{showLocation:!0,weaponId:C.get(I.weapon.id).value,onClick:U})}),[C,U]),L=l.useMemo(()=>se.map(R=>e(S,{item:!0,xs:1,children:e(dl,{showLocation:!0,slotKey:R,artifactId:x[R],mainStatAssumptionLevel:p,onClick:()=>{const y=T[R].oldId,N=T[R].newId;O({oldId:y!==N?y:void 0,newId:N})}})},R)),[O,T,p,x]),j=se.every(R=>x[R]===W[R])&&C.get(I.weapon.id).value===V;return e(Xt,{children:m(l.Suspense,{fallback:e(ge,{variant:"rectangular",width:"100%",height:600}),children:[v&&e(El,{newOld:v,showWeapon:w,onClose:M}),B&&e(Pl,{newOld:B,mainStatAssumptionLevel:p,onClose:A,allowLocationsState:d}),m(G,{children:[m(g,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[t!==void 0&&e(q,{color:"info",children:e(_,{children:m("strong",{children:[t,j?" (Equipped)":""]})})}),e(Ul,{artifacts:$,currentlyEquipped:j}),e(g,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(z,{size:"small",color:"success",onClick:D,disabled:o||j,startIcon:e(Hr,{}),children:"Equip Build"}),a]}),m(S,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[F,L]}),e(Sl,{})]})]})})}function El({newOld:{newId:t,oldId:a},showWeapon:n,onClose:o}){const s=k(),r=a!==t,i=l.useCallback(c=>s.weapons.remove(c),[s]);return e(Me,{open:n,onClose:o,containerProps:{maxWidth:r?"md":"xs"},children:e(ae,{children:m(G,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[r&&m(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ne,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(_,{variant:"h6",textAlign:"center",color:"info",children:e(q,{children:"TC Weapon"})}):e(ze,{weaponId:a,onDelete:i})]}),r&&e(g,{display:"flex",flexGrow:1}),r&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Sa,{sx:{fontSize:40}})}),r&&e(g,{display:"flex",flexGrow:1}),m(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ne,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(ze,{weaponId:t,onDelete:i})]})]})})})}function Pl({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:o,allowLocationsState:s}){var d;const r=k(),{character:{key:i}}=l.useContext(E),c=((d=r.arts.get(t))==null?void 0:d.location)??"",f=st(t),u=st(a),p=l.useCallback(h=>r.arts.remove(h),[r]);return e(Me,{open:!!t,onClose:o,containerProps:{maxWidth:a?"md":"xs"},children:e(ae,{children:m(G,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&m(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ne,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(_,{variant:"h6",textAlign:"center",color:"info",children:e(q,{children:"TC Artifact"})}):e(We,{artifactId:a,onDelete:p,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:u==null?void 0:u.slotKey}}),a!=="tc"&&e(Nt,{id:a})]}),a&&e(g,{display:"flex",flexGrow:1}),a&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Sa,{sx:{fontSize:40}})}),a&&e(g,{display:"flex",flexGrow:1}),m(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ne,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(We,{artifactId:t,onDelete:p,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:f==null?void 0:f.slotKey}}),f&&e(Nt,{id:t}),c&&c!==xe(i)&&s!=="all"&&e(Fl,{locationKey:c}),f&&an.includes(f.setKey)&&e(zl,{setKey:f.setKey})]})]})})})}function Nt({id:t}){const{t:a}=H("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(re),o=k(),{artExclusion:s}=Ie(n),r=s.includes(t),i=l.useCallback(()=>o.optConfigs.set(n,{artExclusion:Jt(s,t)}),[t,s,o,n]);return n?e(je,{title:e(g,{children:e(_,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(z,{onClick:i,color:r?"secondary":"success",size:"small",startIcon:r?e(va,{}):e(wa,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Fl({locationKey:t}){const{t:a}=H("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(re),o=k(),s=ce(o.chars.LocationToCharacterKey(t)),{excludedLocations:r}=Ie(n)??{excludedLocations:[]},i=r.includes(t),c=l.useCallback(()=>o.optConfigs.set(n,{excludedLocations:Jt(r,t)}),[t,r,o,n]);return n?e(z,{onClick:c,color:i?"secondary":"success",size:"small",startIcon:i?e(va,{}):e(wa,{}),children:m("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}const Et=Xn(nn({dyn:{...te.art,...te.artSet}})),Kl={art:ye([...rn,...Qt],t=>Et.dyn[t]),artSet:le(te.artSet,(t,a)=>Et.dyn[a])};function su(t,a,n){const o={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},s=new Set;for(const r of t){const i=on(r.mainStatKey,r.rarity,Math.max(Math.min(a,sn[r.rarity]),r.level)),c={id:r.id,set:r.setKey,values:{[r.setKey]:1,[r.mainStatKey]:r.mainStatKey.endsWith("_")?i/100:i,...Object.fromEntries(r.substats.map(f=>[f.key,f.key.endsWith("_")?f.accurateValue/100:f.accurateValue]))}};delete c.values[""],o.values[r.slotKey].push(c),Object.keys(c.values).forEach(f=>s.add(f))}if(o.base=ye([...s],r=>0),n)for(const r of Object.values(o.values))r.push({id:"",values:{}});return o}function iu(t,a,n){var p;const{artifact:{sets:o},optimization:{target:s,minTotal:r}}=n;if(!s)return{};const i=(p=t[a])==null?void 0:p.target.data[0];if(!i)return{};Object.assign(i,ot([i,Kl]));const c=ln(i.display??{},s);if(!c)return{};const f=Object.keys(r).map(d=>i.total[d]).filter(d=>d);let u=It([c,...f],i,({path:[d]})=>d!=="dyn");return u=Jn(u,d=>{if(d.operation==="read"&&d.path[0]==="dyn"){const h=o[d.path[1]];if(h)return Be(h);if(!Qt.includes(d.path[1]))return Be(0)}return d},d=>d),u=It(u,{},d=>!1),{nodes:u}}function lu(t){const a=new Set;return Qn(t,{},n=>{const o=n.path[1];return a.add(o),o},1),a}function cu(t){const{artifact:{slots:a,substats:{stats:n,type:o,rarity:s}}}=t,r=le(n,(f,u)=>Math.ceil(n[u]/cn(u,s,o))),i=Vl(a),c=Hl(a);return{minSubLines:c,minOtherRolls:ql(Object.entries(r),i,c)}}function ql(t,a,n=4*5){const o=t.reduce((s,[r,i])=>{const c=5-(a[r]??0);return s+Math.min(i,c)},0);return n-o}function Hl(t){return Object.values(t).reduce((a,{rarity:n,level:o})=>{const{high:s,low:r}=hn[n];return a+(o>=4?s:r)},0)}function Vl(t){const a={};return Object.values(t).forEach(({statKey:n})=>{a[n]=(a[n]??0)+1},0),a}function Gl(t){const{artifact:{slots:a,substats:{stats:n},sets:o}}=t,s=le(n,(r,i)=>un(r,i));return Object.values(a).forEach(({statKey:r,rarity:i,level:c})=>s[r]=(s[r]??0)+dn(r,i,c)),{art:le(s,(r,i)=>i.endsWith("_")?Zn(r):Be(r)),artSet:le(o,r=>Be(r))}}function uu(t){const{weapon:{key:a,level:n,ascension:o,refinement:s}}=t;return{id:"",location:"",key:a,level:n,ascension:o,refinement:s,lock:!1}}function Yl(t=0,a,n){const{teamId:o,teamCharId:s}=l.useContext(re),r=k(),[i,c]=De(),f=l.useDeferredValue(i),{gender:u}=be(),{teamCharIds:p}=An(o)??{teamCharIds:[]},d=l.useMemo(()=>f&&Xl(r,o,u,s,t,a,n),[f,u,o,r,t,s,a,n]);return l.useEffect(()=>o?r.teams.follow(o,c):void 0,[o,c,r]),l.useEffect(()=>{if(!i)return()=>{};const h=p.map(C=>{const b=r.teamChars.follow(C,c),v=r.teamChars.followChar(C,c),w=r.teamChars.followBuild(C,c);return()=>{b(),v(),w()}});return()=>{h.forEach(C=>C())}},[i,r,p,c]),d}function Xl(t,a,n,o,s=0,r,i){if(!a)return;const c=t.teams.getActiveTeamChar(a);if(!c)return;const{teamData:f,teamBundle:u}=Jl(t,a,o,s,r,i)??{};if(!f||!u)return;const p=er(f,n,c.key);return pn(p,(h,C)=>{const{data:b,...v}=u[C];return{...h,...v}})}function Jl(t,a,n,o=0,s,r){if(!a)return;const i=t.teams.get(a);if(!i)return;const{teamCharIds:c,enemyOverride:f}=i,u=c.map(h=>{if(!h)return;const C=t.teamChars.get(h);if(!C)return;const{key:b,buildType:v,buildTcId:w,infusionAura:U,customMultiTargets:M,conditional:T,bonusStats:B,hitMode:O,reaction:A}=C,P=t.chars.get(b);if(!P)return;const{key:D,level:x,constellation:$,ascension:W,talent:V}=P,F=h===n,L=(()=>r&&F?r:t.teamChars.getLoadoutWeapon(h))(),j=(()=>s&&F?s:v==="tc"&&w?Gl(t.buildTcs.get(w)):Object.values(t.teamChars.getLoadoutArtifacts(h)).filter(y=>y))(),R=(()=>o&&F?o:0)();return Ql(t,F,R,{key:D,level:x,constellation:$,ascension:W,talent:V,infusionAura:U,customMultiTargets:M,conditional:T,bonusStats:B,enemyOverride:f,hitMode:O,reaction:A},L,j)}).filter(h=>h),p=Object.fromEntries(u.filter(h=>h).map(h=>[h.character.key,h]));return{teamData:le(p,({data:h})=>h),teamBundle:p}}function Ql(t,a=!1,n,o,s,r){const i=t.chars.get(o.key),c=ce(o.key,t.gender);if(!c)return;const f=xt(s.key);if(!f)return;const u=Ra.getAllDataOfType(c.weaponTypeKey),p=a?(()=>{const{display:b,...v}=f.data;return ot([v,u])})():f.data,d=ot([c.data,p,_r]),C=[...Array.isArray(r)?r.map(b=>tr(b,n)):[r],ar(o,a?d:void 0),da(s),d,nr,Bn];return{character:i,weapon:s,characterSheet:c,weaponSheet:f,data:C}}const Ze={mx:.25,px:.25};function Zl({reaction:t}){const{t:a}=H("sheet_gen"),n=t==="spread"?"dendro":"electro";return m(g,{display:"flex",alignItems:"center",children:[e(Fe,{color:t,children:a(`reaction.${t}`)}),e(q,{sx:Ze,color:"dendro",children:e(mn,{...Z})}),"+",e(q,{sx:Ze,color:"electro",children:e(Zt,{...Z})}),"+",e(q,{sx:Ze,color:n,children:e(mt,{ele:n,iconProps:Z})})]})}const Pt={"":e("span",{children:"No Team Melee Infusion"}),pyro:m("span",{children:[e(fn,{...Z})," ",e(q,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:m("span",{children:[e(gn,{...Z})," ",e(q,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:m("span",{children:[e(Cn,{...Z})," ",e(q,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:m("span",{children:[e(Zt,{...Z})," ",e(q,{children:"Somnia Burst"})," ","Parallax Paws"]})};function du(t){const{teamCharId:a,teamChar:{infusionAura:n}}=l.useContext(re),{character:{key:o}}=l.useContext(E),s=k();return xn(o)?e($r,{title:Pt[n||""],color:n||"secondary",disableElevation:!0,disabled:!a,...t,children:Object.entries(Pt).map(([r,i])=>e(La,{sx:r?{color:`${r}.main`}:void 0,selected:r===n,disabled:r===n,onClick:()=>s.teamChars.set(a,{infusionAura:r}),children:i},r))}):null}function ec(t){const{t:a}=H("page_character"),{teamCharId:n,teamChar:{reaction:o}}=l.useContext(re),s=k(),{data:r}=l.useContext(Y),i=r.get(I.charEle).value,c=r.get(rr).value,f=[...new Set([...At[i]??[],...At[c]??[],...Bt[i]??[],...Bt[c]??[]])];return m(qe,{exclusive:!0,baseColor:"secondary",value:o,onChange:(u,p)=>s.teamChars.set(n,{reaction:p}),disabled:!n,...t,children:[e(we,{value:"",disabled:!o,children:a`noReaction`}),f.map(u=>e(we,{value:u,disabled:o===u,children:[...bn].includes(u)?e(qn,{reaction:u}):e(Zl,{reaction:u})},u))]})}function tc(t){const{t:a}=H("page_character"),{teamCharId:n,teamChar:{hitMode:o="avgHit"}}=l.useContext(re),s=k();return e(qe,{exclusive:!0,baseColor:"secondary",value:o,onChange:(r,i)=>s.teamChars.set(n,{hitMode:i}),disabled:!n,...t,children:yn.map(r=>e(we,{value:r,disabled:o===r,children:a(`hitmode.${r}`)},r))})}function ja({artId:t,weaponId:a}){const{t:n}=H("page_character"),[o,s,r]=ue(!1);return m(_e,{children:[e(ea,{open:o,onClose:r,containerProps:{maxWidth:"xl"},children:e(ac,{artId:t,weaponId:a,onHide:r})}),e(Ee,{title:e(_,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(z,{color:"info",size:"small",onClick:s,children:e(mr,{})})})]})}function ac(t){var o;const a=l.useContext(re),n=l.useContext(E);return(o=a==null?void 0:a.teamChar)!=null&&o.optConfigId?e(nc,{...t}):n!=null&&n.character?e(rc,{...t}):null}function nc({artId:t,weaponId:a,onHide:n}){const o=k(),{character:{key:s}}=l.useContext(E),{teamCharId:r,teamChar:{optConfigId:i}}=l.useContext(re),{mainStatAssumptionLevel:c}=Ie(i),{data:f}=l.useContext(Y),u=l.useMemo(()=>{const h=o.arts.get(t??""),C=o.teamChars.getLoadoutArtifacts(r),b=le(C,(v,w)=>w===(h==null?void 0:h.slotKey)?h:v);return Object.values(b).filter(v=>v)},[o,r,t]),p=Yl(c,u,a?o.weapons.get(a):void 0),d=l.useMemo(()=>p&&{data:p[s].target,teamData:p,oldData:f},[s,p,f]);return d?e(Ia,{dataProviderValue:d,onHide:n}):null}function rc({artId:t,weaponId:a,onHide:n}){const o=k(),{character:{key:s,equippedArtifacts:r}}=l.useContext(E),{data:i}=l.useContext(Y),c=l.useMemo(()=>{const p=o.arts.get(t??""),d=le(r,(h,C)=>C===(p==null?void 0:p.slotKey)?p:o.arts.get(h));return Object.values(d).filter(h=>h)},[o,r,t]),f=ia(s,0,c,a?o.weapons.get(a):void 0),u=l.useMemo(()=>f&&{data:f[s].target,teamData:f,oldData:i},[s,f,i]);if(u)return e(Ia,{dataProviderValue:u,onHide:n})}function Ia({dataProviderValue:t,onHide:a}){return e(l.Suspense,{fallback:e(ge,{variant:"rectangular",width:"100%",height:600}),children:t&&e(Y.Provider,{value:t,children:e(Nl,{extraButtonsLeft:m(_e,{children:[e(tc,{size:"small"}),e(ec,{size:"small"})]}),extraButtonsRight:e(z,{size:"small",color:"error",onClick:a,children:e(Ta,{})})})})})}const oc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},sc=l.lazy(()=>ta(()=>import("./ArtifactEditor-fd40c750.js"),["./ArtifactEditor-fd40c750.js","./index-e426fdd0.js","./index-5e1015ca.css","./ArtifactRarityDropdown-566b4bdf.js","./index-2d1932b6.js","./index-0f994c71.js","./ColoredText-be62572a.js","./SqBadge-c98db679.js","./LocationAutocomplete-ee2bd6b1.js","./StarDisplay-d8d32f18.js","./DropdownButton-4430c964.js","./ArtifactStatKeyDisplay-0f57b818.js","./Artifact-868d23a9.js","./BootstrapTooltip-2c1bfebd.js","./LockOpen-def2adef.js","./SlotIcon-d75dcc9c.js","./CloseButton-6f831480.js","./ArtifactSort-218c8387.js","./InfoTooltip-bd33c68e.js","./CardActionArea-e1546a3c.js","./TextButton-461ce38a.js","./CardHeader-2941c364.js","./ChevronRight-191535ac.js"],import.meta.url)),ic=l.lazy(()=>ta(()=>import("./ArtifactFilterDisplay-99de699c.js").then(t=>t.b),["./ArtifactFilterDisplay-99de699c.js","./index-e426fdd0.js","./index-5e1015ca.css","./LockOpen-def2adef.js","./useDisplayArtifact-4b75e516.js","./totalUtils-11106e31.js","./BootstrapTooltip-2c1bfebd.js","./StarDisplay-d8d32f18.js","./DropdownButton-4430c964.js","./ColoredText-be62572a.js","./index-0f994c71.js","./SqBadge-c98db679.js","./ArtifactStatKeyDisplay-0f57b818.js","./Artifact-868d23a9.js","./LocationAutocomplete-ee2bd6b1.js","./index-2d1932b6.js","./SlotIcon-d75dcc9c.js"],import.meta.url));function Aa({onChangeId:t,slotKey:a,show:n,onClose:o}){const{t:s}=H(["page_character","artifact"]),r=k(),i=l.useCallback(L=>{t(L),o()},[t,o]),c=l.useCallback((L,j)=>({...L,...j,slotKeys:[a]}),[a]),[f,u,p]=ue(!1),[d,h]=l.useReducer(c,{...fr(),slotKeys:[a]}),[C,b]=De();l.useEffect(()=>r.arts.followAny(b),[r,b]);const v=ba(),w=oc[v],[U,M]=l.useState(0),T=l.useRef(null),B=l.useMemo(()=>gr(),[]),O=r.arts.values.filter(L=>L.slotKey===d.slotKeys[0]).length,A=l.useMemo(()=>{const L=Ct(d,B);return C&&r.arts.values.filter(L).map(j=>j.id)},[C,r,B,d]),{artifactIdsToShow:P,numPages:D,currentPageIndex:x}=l.useMemo(()=>{const L=Math.ceil(A.length/w),j=ht(U,0,L-1);return{artifactIdsToShow:A.slice(j*w,(j+1)*w),numPages:L,currentPageIndex:j}},[A,U,w]),$=A.length!==O?`${A.length}/${O}`:`${O}`,W=l.useCallback((L,j)=>{var R;(R=T.current)==null||R.scrollIntoView({behavior:"smooth"}),M(j-1)},[M,T]),V={count:D,page:x+1,onChange:W},F={numShowing:P.length,total:$,t:s,namespace:"artifact"};return e(Me,{open:n,onClose:o,containerProps:{maxWidth:"xl"},children:m(ae,{children:[e(l.Suspense,{fallback:!1,children:e(sc,{artifactIdToEdit:f?"new":"",cancelEdit:p,allowUpload:!0,allowEmpty:!0,fixedSlotKey:d.slotKeys[0]})}),m(G,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m(_,{variant:"h6",children:[a?e(Re,{src:Se.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(Pe,{onClick:o})]}),e(Ce,{}),e(G,{children:e(l.Suspense,{fallback:e(ge,{variant:"rectangular",width:"100%",height:200}),children:e(ic,{filterOption:d,filterOptionDispatch:h,filteredIds:A,disableSlotFilter:!0})})}),e(Ce,{}),m(G,{children:[e(g,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Oe,{paginationProps:V,showingTextProps:F})}),e(z,{fullWidth:!0,onClick:u,color:"info",startIcon:e(ya,{}),children:s("artifact:addNew")}),e(g,{mt:1,children:e(l.Suspense,{fallback:e(ge,{variant:"rectangular",width:"100%",height:300}),children:e(S,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:P.map(L=>e(S,{item:!0,xs:1,children:e(We,{artifactId:L,extraButtons:e(ja,{artId:L}),onClick:i})},L))})})}),D>1&&e(g,{pt:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Oe,{paginationProps:V,showingTextProps:F})})]})]})})}const lc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},cc=bt([...aa]);function St({onChangeId:t,weaponTypeKey:a,show:n,onClose:o}){const{t:s}=H(["page_character","page_weapon","weaponNames_gen"]),r=k(),[i,c]=l.useState(!1),f=l.useCallback(y=>{t(y),o()},[t,o]),[u,p]=l.useState(""),d=l.useCallback(y=>{p(r.weapons.new(vn(y)))},[r,p]),h=l.useCallback(()=>p(""),[]),[C,b]=De();l.useEffect(()=>r.weapons.followAny(b),[b,r]);const v=ba(),w=lc[v],[U,M]=l.useState(0),T=l.useRef(null),[B,O]=l.useState([5,4,3]),[A,P]=l.useState(""),D=l.useDeferredValue(A),x=l.useMemo(()=>(C&&r.weapons.values.filter(Ct({weaponType:a,rarity:B,name:D},Cr())).sort(fa(br.level??[],!1,xr())).map(y=>y.id))??[],[C,r,B,a,D]),{weaponIdsToShow:$,numPages:W,currentPageIndex:V}=l.useMemo(()=>{const y=Math.ceil(x.length/w),N=ht(U,0,y-1);return{weaponIdsToShow:x.slice(N*w,(N+1)*w),numPages:y,currentPageIndex:N}},[x,U,w]),F=`${x.length}`,L=l.useCallback((y,N)=>{var K;(K=T.current)==null||K.scrollIntoView({behavior:"smooth"}),M(N-1)},[M,T]),j={count:W,page:V+1,onChange:L},R={numShowing:$.length,total:F,t:s,namespace:"page_weapon"};return e(Me,{open:n,onClose:o,children:m(ae,{children:[e(l.Suspense,{fallback:!1,children:e(Tr,{show:i,onHide:()=>c(!1),onSelect:d,weaponTypeFilter:a})}),e(l.Suspense,{fallback:!1,children:e(ha,{weaponId:u,footer:!0,onClose:h})}),e(G,{sx:{py:1},children:m(S,{container:!0,children:[e(S,{item:!0,flexGrow:1,children:m(_,{variant:"h6",children:[a?e(Re,{src:Se.weaponTypes[a]}):null," ",s`page_character:tabEquip.swapWeapon`]})}),e(S,{item:!0,children:e(Pe,{onClick:o})})]})}),e(Ce,{}),m(G,{sx:{display:"flex",flexDirection:"column",gap:1},children:[m(S,{container:!0,spacing:1,children:[e(S,{item:!0,children:e(qe,{sx:{height:"100%"},value:B,size:"small",children:aa.map(y=>e(we,{value:y,onClick:()=>O(cc(B,y)),children:m(g,{display:"flex",children:[e("strong",{children:y}),e(ga,{})]})},y))})}),e(S,{item:!0,flexGrow:1,children:e(Ca,{autoFocus:!0,size:"small",value:A,onChange:y=>P(y.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(g,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Oe,{paginationProps:j,showingTextProps:R})}),e(z,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:e(ya,{}),children:s("page_weapon:addWeapon")}),e(S,{container:!0,spacing:1,children:$.map(y=>e(S,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(ze,{weaponId:y,onClick:f,extraButtons:e(ja,{weaponId:y})})},y))}),W>1&&e(g,{pt:1,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Oe,{paginationProps:j,showingTextProps:R})})]})]})})}const uc={xs:1,sm:2,md:3,lg:3,xl:3};function dc({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:o,setArtifact:s}){const r=k(),[i,c]=l.useState("");l.useEffect(()=>{a&&i&&i!==a&&c(a)},[i,a]);const f=l.useCallback(()=>a&&c(a),[a]),u=l.useCallback(()=>c(""),[]);return m(g,{children:[e(ha,{weaponId:i,footer:!0,onClose:u,extraButtons:e(gc,{weaponTypeKey:t,onChangeId:o})}),m(S,{item:!0,columns:uc,container:!0,spacing:1,children:[e(S,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&r.weapons.keys.includes(a)?e(ze,{weaponId:a,onEdit:f,extraButtons:e(fc,{weaponTypeKey:t,onChangeId:o})}):e(hc,{weaponTypeKey:t,onChangeId:o})}),!!n&&Object.entries(n).map(([p,d])=>e(S,{item:!0,xs:1,children:r.arts.keys.includes(d)?e(We,{artifactId:d,extraButtons:e(mc,{slotKey:p,onChangeId:h=>s(p,h)}),editorProps:{}}):e(pc,{slotKey:p,onChangeId:h=>s(p,h)})},d||p))]})]})}function hc({weaponTypeKey:t,onChangeId:a}){const[n,o,s]=ue();return m(ne,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(G,{children:m(_,{children:[e(Re,{src:Se.weaponTypes[t]})," ",t]})}),e(Ce,{}),m(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(St,{weaponTypeKey:t,show:n,onClose:s,onChangeId:a}),e(z,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:e(Le,{sx:{height:100,width:100}})})]})]})}function pc({slotKey:t,onChangeId:a}){const[n,o,s]=ue(),{t:r}=H("artifact");return m(ne,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(G,{children:m(_,{children:[e(Nr,{iconProps:Z,slotKey:t})," ",r(`slotName.${t}`)]})}),e(Ce,{}),m(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(Aa,{slotKey:t,show:n,onClose:s,onChangeId:a}),e(z,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:e(Le,{sx:{height:100,width:100}})})]})]})}function mc({slotKey:t,onChangeId:a}){const{t:n}=H("page_character"),[o,s,r]=ue();return m(_e,{children:[e(Ee,{title:e(_,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(z,{color:"info",size:"small",onClick:s,children:e(Le,{})})}),e(Aa,{slotKey:t,show:o,onClose:r,onChangeId:a})]})}function fc({weaponTypeKey:t,onChangeId:a}){const{t:n}=H("page_character"),[o,s,r]=ue();return m(_e,{children:[e(Ee,{title:e(_,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(z,{color:"info",size:"small",onClick:s,children:e(Le,{})})}),e(St,{weaponTypeKey:t,onChangeId:a,show:o,onClose:r})]})}function gc({weaponTypeKey:t,onChangeId:a}){const{t:n}=H("page_character"),[o,s,r]=ue();return m(_e,{children:[e(z,{color:"info",onClick:s,startIcon:e(Le,{}),children:n`tabEquip.swapWeapon`}),e(St,{weaponTypeKey:t,onChangeId:a,show:o,onClose:r})]})}function Cc({talentKey:t,dropDownButtonProps:a}){const{t:n}=H("sheet_gen"),{character:{talent:o,key:s}}=l.useContext(E),r=k(),{data:i}=l.useContext(Y),c=i.get(te.total[`${t}Boost`]).value,f=i.get(te.total[t]).value,u=i.get(te.asc).value;return e(qr,{fullWidth:!0,title:n("talentLvl",{level:f}),color:c?"info":"primary",...a,children:wn(1,_n[u]).map(p=>e(La,{selected:o[t]===p,disabled:o[t]===p,onClick:()=>r.chars.set(s,d=>{d.talent[t]=p}),children:n("talentLvl",{level:p+c})},p))})}function xc(){const{t}=H("ui"),a=k(),{character:n}=l.useContext(E),{key:o}=n,{gender:s}=be(),r=l.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return o.startsWith("Traveler")?m(z,{onClick:r,startIcon:s==="F"?e(Vr,{}):e(Gr,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function bc({onClose:t}){const a=k(),{character:n,character:{key:o},characterSheet:s}=l.useContext(E);return m(g,{display:"flex",flexDirection:"column",gap:1,children:[m(g,{display:"flex",gap:1,children:[e(xc,{}),!!t&&e(Pe,{onClick:t,sx:{marginLeft:"auto"}})]}),e(g,{children:m(S,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(S,{item:!0,xs:8,sm:5,md:4,lg:3,children:m(ne,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Zi,{}),e(g,{sx:{px:1},children:e(cr,{level:n.level,ascension:n.ascension,setBoth:r=>a.chars.set(o,r)})}),e(g,{sx:{px:2},children:e(On,{})}),e(_,{sx:{textAlign:"center",pb:-1},variant:"h6",children:s.constellationName}),e(Qi,{})]})}),m(S,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(g,{children:e(S,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(r=>{var i;return e(S,{item:!0,xs:1,children:e(Cc,{talentKey:r,dropDownButtonProps:{startIcon:e(Re,{src:(i=s.getTalentOfKey(r))==null?void 0:i.img,size:1.75,sideMargin:!0})}},r)})})})}),e(yc,{}),e(wc,{})]})]})})]})}function yc(){const{character:{key:t}}=l.useContext(E),{data:a}=l.useContext(Y),n=k(),o=Rn(t).weaponType,s=a.get(I.weapon.id).value,r=l.useMemo(()=>ye(se,i=>a.get(I.art[i].id).value),[a]);return e(g,{children:e(dc,{weaponTypeKey:o,weaponId:s,artifactIds:r,setWeapon:i=>{n.weapons.set(i,{location:xe(t)})},setArtifact:(i,c)=>{n.arts.set(c,{location:xe(t)})}})})}const vc={xs:1,sm:2,md:3,lg:3,xl:3};function wc(){const t=Sn(),{character:{key:a}}=l.useContext(E),n=k(),{gender:o}=be(),[s,r]=De(),i=l.useMemo(()=>{const d={};return n.teamChars.entries.map(([h,C])=>{C.key===a&&(d[h]||(d[h]=[]))}),n.teams.entries.forEach(([h,C])=>{const b=C.teamCharIds.find(v=>{var w;return((w=n.teamChars.get(v))==null?void 0:w.key)===a});b&&d[b].push(h)}),s&&d},[s,a,n]);l.useEffect(()=>n.teams.followAny(()=>r()),[n,r]),l.useEffect(()=>n.teamChars.followAny(()=>r()),[n,r]);const c=d=>{const h=n.teams.new();n.teams.set(h,C=>{C.teamCharIds[0]=d}),t(`/teams/${h}`)},f=()=>{const d=n.teams.new(),h=n.teamChars.new(a);n.teams.set(d,C=>{C.teamCharIds[0]=h}),t(`/teams/${d}`)},u=d=>{window.confirm("The loadouts and data (such as multi-opts) on this character will be deleted.")&&n.teamChars.remove(d)},p=d=>{n.teamChars.duplicate(d)};return m(g,{sx:{display:"flex",flexDirection:"column",gap:1},children:[m(_,{variant:"h6",children:["Team Loadouts with"," ",e(Ln,{characterKey:a,gender:o})]}),Object.entries(i).map(([d,h])=>{const{name:C,description:b,buildIds:v,buildTcIds:w}=n.teamChars.get(d);return m(ne,{bgt:"light",children:[e(G,{children:m(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(_,{children:C}),e(kn,{title:e(_,{children:b}),children:e(sr,{})}),m(Dt,{color:v.length?"primary":"secondary",children:[v.length," Builds"]}),m(Dt,{color:w.length?"primary":"secondary",children:[w.length," TC Builds"]}),e(z,{color:"info",onClick:()=>p(d),sx:{ml:"auto"},children:e(Wn,{})}),e(z,{color:"error",onClick:()=>u(d),children:e($n,{})})]})}),e(Ce,{}),e(G,{children:m(S,{container:!0,columns:vc,spacing:2,children:[h.map(U=>e(S,{item:!0,xs:1,children:e(zn,{teamId:U,onClick:M=>t(`/teams/${U}${M?`/${M}`:""}`),disableButtons:!0})},U)),e(S,{item:!0,xs:1,children:e(z,{fullWidth:!0,sx:{height:"100%"},onClick:()=>c(d),color:"info",startIcon:e(jt,{}),children:"Add new Team"})})]})})]},d)}),e(z,{fullWidth:!0,onClick:()=>f(),color:"info",startIcon:e(jt,{}),children:"Add new Loadout+Team"}),e(ne,{bgt:"light"})]})}function hu({characterKey:t,onClose:a}){return e(ea,{open:!!t,onClose:a,children:e(l.Suspense,{fallback:e(ge,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(_c,{characterKey:t,onClose:a},t)})})}function _c({characterKey:t,onClose:a}){const n=la(t),{gender:o}=be(),s=ce(t,o),r=ia(t),{target:i}=(r==null?void 0:r[t])??{},c=ra((n==null?void 0:n.key)??""),f=l.useMemo(()=>{if(!(!r||!i))return{data:i,teamData:r,oldData:void 0}},[i,r]),u=l.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:c}},[n,s,c]),[p,d]=l.useState(),[h,C]=l.useState(),b=l.useMemo(()=>({chartData:p,setChartData:d,graphBuilds:h,setGraphBuilds:C}),[p,h]);return l.useEffect(()=>{d(void 0),C(void 0)},[t]),e(ne,{children:e(G,{sx:{display:"flex",flexDirection:"column",gap:1},children:f&&u&&b?e(E.Provider,{value:u,children:e(Y.Provider,{value:f,children:e(_s.Provider,{value:b,children:e(bc,{onClose:a})})})}):e(ge,{variant:"rectangular",width:"100%",height:1e3})})})}function Rc(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>at.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ae(n,t.gender)}`).toString(),level:n=>{const o=t.chars.get(n);return o?o.level*(o.ascension+1):0},rarity:n=>nt.char.data[xe(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Sc(t,a){return{element:(n,o)=>o.includes(Un(n)),weaponType:(n,o)=>o.includes(nt.char.data[xe(n)].weaponType),rarity:(n,o)=>o.includes(nt.char.data[xe(n)].rarity),name:(n,o)=>o===void 0||at.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ae(n,t.gender)}`).toLowerCase().includes(o.toLowerCase())||a&&at.t(`charNames_gen:${Ae(n,t.gender)}`).toLowerCase().includes(o.toLowerCase()),new:(n,o)=>o===void 0||o===(t.chars.get(n)?"no":"yes")}}const Ba={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Lc=$e(we,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),kc=Lc,$c=bt([...pt]);function Uc({value:t,totals:a,onChange:n,...o}){const s=dt(),r=!rt(s.breakpoints.up("md")),i=!rt(s.breakpoints.up("sm"));return e(Ur,{exclusive:!0,value:t,...o,children:pt.map(c=>m(kc,{value:c,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex"},selectedColor:c,onClick:()=>n($c(t,c)),children:[e(mt,{ele:c,iconProps:{fontSize:r&&!i?"inherit":void 0}}),!i&&e(ie,{sx:{ml:.5},label:a[c],size:"small"})]},c))})}const Tc=Object.keys(Ba);function pu({show:t,onHide:a,onSelect:n,filter:o=()=>!0,newFirst:s=!1}){const{t:r}=H(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:i}=l.useContext(ut),c=k(),[f,u]=l.useState(()=>c.displayCharacter.get());l.useEffect(()=>c.displayCharacter.follow((x,$)=>u($)),[c,u]);const{gender:p}=be(),[d,h]=De();l.useEffect(()=>c.charMeta.followAny(()=>h()),[h,c]);const[C,b]=l.useState(""),v=l.useDeferredValue(C),w=l.useDeferredValue(f),U=l.useDeferredValue(d),M=l.useMemo(()=>{const{element:x,weaponType:$,sortType:W,ascending:V}=w,F=[...s?["new"]:[],...Ba[W]??[]];return U&&Xe.filter(L=>o(L,c.chars.get(L),ce(L,p))).filter(Ct({element:x,weaponType:$,name:v},Sc(c,i))).sort(fa(F,V,Rc(c,i),["new","favorite"]))},[w,s,U,v,c,i,o,p]),T=l.useMemo(()=>Ot(Mn,x=>Xe.forEach($=>{const W=ce($,c.gender).weaponTypeKey;x[W].total++,M.includes($)&&x[W].current++})),[M,c]),B=l.useMemo(()=>Ot(pt,x=>Xe.forEach($=>{const W=ce($,c.gender).elementKey;x[W].total++,M.includes($)&&x[W].current++})),[M,c]),{weaponType:O,element:A,sortType:P,ascending:D}=f;return e(Me,{open:t,onClose:()=>{b(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:m(ae,{children:[m(G,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e(yr,{sx:{height:"100%"},onChange:x=>c.displayCharacter.set({weaponType:x}),value:O,totals:T,size:"small"}),e(Uc,{sx:{height:"100%"},onChange:x=>c.displayCharacter.set({element:x}),value:A,totals:B,size:"small"}),e(g,{flexGrow:1,children:e(Ca,{autoFocus:!0,value:C,onChange:x=>b(x.target.value),label:r("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),e(hr,{sx:{height:"100%"},sortKeys:Tc,value:P,onChange:x=>c.displayCharacter.set({sortType:x}),ascending:D,onChangeAsc:x=>c.displayCharacter.set({ascending:x})}),e(Pe,{onClick:()=>{b(""),a()}})]}),e(Ce,{}),e(Y.Provider,{value:{teamData:void 0},children:e(G,{children:e(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:M.map(x=>e(S,{item:!0,xs:1,children:e(Dc,{characterKey:x,onClick:()=>{b(""),a(),n==null||n(x)}})},x))})})})]})})}const Mc=$e(({className:t,...a})=>e(Ee,{...a,classes:{popper:t}}))({[`& .${Tn.tooltip}`]:{padding:0}});function Dc({characterKey:t,onClick:a}){const{gender:n}=be(),o=ce(t,n),s=la(t),{favorite:r}=oa(t),i=k(),{silly:c}=l.useContext(ut),[f,u,p]=ue(),{level:d=1,ascension:h=0,constellation:C=0}=s??{},b=or(t,"banner",n);return e(Mc,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:f,onClose:p,onOpen:u,title:e(g,{sx:{width:300},children:e(Nn,{hideStats:!0,characterKey:t})}),children:e(g,{children:m(Xt,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(g,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(Yt,{sx:{p:.25},onClick:v=>{p(),i.charMeta.set(t,{favorite:!r})},children:r?e(pa,{}):e(sa,{})})}),e(Ke,{onClick:a,children:m(g,{display:"flex",position:"relative",className:b?void 0:`grad-${o==null?void 0:o.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${b})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(g,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(g,{component:"img",src:En(t,n,c),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),m(g,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(_,{variant:"body2",sx:{flexGrow:1},children:e(q,{color:o==null?void 0:o.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:o==null?void 0:o.name})}),s?m(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[m(g,{sx:{textShadow:"0 0 5px gray"},children:[m(_,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",d]}),m(_,{variant:"body2",component:"span",color:"text.secondary",children:["/",Dn[h]]})]}),m(_,{variant:"body2",children:["C",C]})]}):e(_,{component:"span",variant:"body2",children:e(q,{children:"NEW"})}),e(gt,{stars:(o==null?void 0:o.rarity)??1,colored:!0})]})]})})]})})})}const jc=bt([...na]);function mu({value:t,totals:a,onChange:n,...o}){const s=dt(),r=!rt(s.breakpoints.up("sm"));return e(qe,{exclusive:!0,value:t,...o,children:na.map(i=>e(we,{value:i,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex",gap:r?0:1},onClick:()=>n(jc(t,i)),children:m(g,{display:"flex",children:[e("strong",{children:i}),e(ga,{}),!r&&e(ie,{label:a[i],size:"small"})]})},i))})}export{dl as A,Nl as B,mu as C,ru as D,Uc as E,ou as F,_s as G,tc as H,Qi as I,Sl as J,cu as K,iu as L,yl as M,lu as N,vl as O,Ta as P,uu as Q,ec as R,Nr as S,Cc as T,du as U,kl as W,Sc as a,Rc as b,Ba as c,hu as d,pu as e,dc as f,$l as g,ul as h,Rl as i,_l as j,Pt as k,Zl as l,qr as m,Gl as n,Xl as o,ct as p,lt as q,zl as r,Ul as s,Da as t,Ie as u,su as v,Jl as w,Kl as x,Yl as y,Zi as z};
