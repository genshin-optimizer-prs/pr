import{u as N,e as t,h as C,b as _,as as f,ah as R,p as a,n as l,C as W,U as j,D as k,J as T,s as B,K as w,T as S,t as G,W as $}from"./index-92e89f9d.js";import{A as J}from"./index-912f58b0.js";import{d as K}from"./Close-5b4e6fd4.js";import{g as o}from"./index-2c4b6248.js";import{c as b}from"./totalUtils-c357a88d.js";import{I as P,i as U}from"./ColoredText-97c1db62.js";import{T as V,e as q}from"./StarDisplay-7dfbca12.js";import{W as O,a as Q}from"./WeaponCard-a688950a.js";import{C as X}from"./CardActionArea-c441404b.js";import"./SqBadge-ea96f8f3.js";import"./DropdownButton-6c5a8999.js";import"./SolidToggleButtonGroup-d2746d8f.js";import"./useWeapon-11f8bfcb.js";import"./ConditionalWrapper-0d95c1fe.js";function pe({show:I,ascension:v=0,onHide:p,onSelect:D,filter:g=()=>!0,weaponTypeFilter:i}){const{t:m}=N(["page_weapon","weaponNames_gen"]),[d,x]=t.useState(i?[i]:[...C]),c=_(),[A,E]=t.useState(c.displayWeapon.get());t.useEffect(()=>c.displayWeapon.follow((e,s)=>E(s)),[c]),t.useEffect(()=>{i&&x([i])},[i]);const[y,M]=t.useState(""),u=t.useDeferredValue(y),{rarity:h}=A,n=t.useMemo(()=>f.filter(e=>g(o(e))).filter(e=>d.includes(o(e).weaponType)).filter(e=>!u||m(`weaponNames_gen:${e}`).toLowerCase().includes(u.toLowerCase())).filter(e=>h.includes(o(e).rarity)).sort((e,s)=>o(s).rarity-o(e).rarity),[u,g,h,m,d]),z=t.useMemo(()=>b(C,e=>f.forEach(s=>{const r=o(s).weaponType;e[r].total++,n.includes(s)&&e[r].current++})),[n]),L=t.useMemo(()=>b(R,e=>f.forEach(s=>{const r=o(s).rarity;e[r].total++,n.includes(s)&&e[r].current++})),[n]);return a($,{open:I,onClose:p,children:l(G,{children:[l(W,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[a(O,{value:d,totals:z,onChange:x,disabled:!!i,size:"small"}),a(Q,{sx:{height:"100%"},onChange:e=>c.displayWeapon.set({rarity:e}),value:h,totals:L,size:"small"}),a(V,{autoFocus:!0,size:"small",value:y,onChange:e=>M(e.target.value),label:m("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}}),a(j,{onClick:p,sx:{ml:"auto"},children:a(K,{})})]}),a(k,{}),a(W,{children:a(T,{container:!0,spacing:1,children:n.map(e=>{var r;const s=o(e);return a(T,{item:!0,lg:3,md:4,children:a(B,{sx:{height:"100%"},children:l(X,{onClick:()=>{p(),D(e)},sx:{display:"flex"},children:[a(w,{component:"img",src:J(e,v>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),l(w,{sx:{flexGrow:1,px:1},children:[a(S,{variant:"subtitle1",children:s.name}),l(S,{sx:{display:"flex",alignItems:"baseline"},children:[a(P,{size:1.5,src:(r=U.weaponTypes)==null?void 0:r[s.weaponType]}),a(q,{stars:s.rarity,colored:!0})]})]})]})})},e)})})})]})})}export{pe as default};
