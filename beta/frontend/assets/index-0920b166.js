import{r as R,i as q,j as F,u as K,b as z,X as Q,aE as G,e as s,Q as X,aH as L,n as l,p as t,K as g,U as b,J as D,C as _,aA as N,B as f,D as V,T as Y,aI as Z,aJ as ee}from"./index-b4f1138e.js";import{s as te,u as ae,a as se,S as re,T as oe}from"./StarDisplay-4a916970.js";import{T as ne,d as ie}from"./TeamCard-46629dd0.js";import{C as le}from"./CardHeader-e39b70ef.js";import"./DropdownButton-7248413c.js";import"./ColoredText-391a745b.js";import"./index-fd58be05.js";import"./SqBadge-e71611f8.js";import"./BootstrapTooltip-40154fbe.js";import"./FieldDisplay-a9a9c713.js";import"./Groups-170e35bd.js";import"./index-d8067439.js";import"./index-ded2967d.js";import"./Artifact-9515a1ab.js";import"./SlotIcon-1d2f5ea5.js";import"./useWeapon-fb548c22.js";import"./CardActionArea-27940a9a.js";var y={},me=q;Object.defineProperty(y,"__esModule",{value:!0});var S=y.default=void 0,ce=me(R()),de=F,ue=(0,ce.default)((0,de.jsx)("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload");S=y.default=ue;function pe(){return{name:n=>n.name??"",lastEdit:n=>n.lastEdit??0}}const he={name:["name","lastEdit"],lastEdit:["lastEdit"]},ge={xs:1,sm:2,md:3,lg:4,xl:4},x={xs:5,sm:8,md:9,lg:12,xl:12};function $e(){const{t:n}=K(["page_teams","sillyWisher_charNames","charNames_gen"]),a=z(),[T,v]=Q(),w=G();s.useEffect(()=>a.teams.followAny((e,o)=>(o==="new"||o==="remove"||o==="update")&&v()),[v,a]);const j=()=>{const e=a.teams.new();w(e)},[k,M,I]=X(),[m,O]=s.useState(""),$=()=>{try{const e=JSON.parse(m);a.teams.import(e)||window.alert("Data verification failed."),I()}catch(e){window.alert(`Data Import failed. ${e}`);return}},{sortType:c,ascending:d}=L(a.displayTeam),{teamIds:r,totalTeamNum:u}=s.useMemo(()=>{const e=a.teams.keys.length,o=a.teams.keys.sort((W,H)=>te(he[c],d,pe())(a.teams.get(W),a.teams.get(H)));return T&&{teamIds:o,totalTeamNum:e}},[T,a.teams,c,d]),i=ae(),[p,C]=s.useState(x[i]);s.useEffect(()=>{r&&C(x[i])},[r,i]);const[B,A]=s.useState(),E=se(B)&&p<r.length;s.useEffect(()=>{E&&C(e=>e+x[i])},[E,i]);const h=s.useMemo(()=>r.slice(0,p),[r,p]),J=r.length!==u?`${r.length}/${u}`:`${u}`,P={numShowing:h.length,total:J,t:n,namespace:"page_character"},U={sortKeys:[...ee],value:c,onChange:e=>a.displayTeam.set({sortType:e}),ascending:d,onChangeAsc:e=>a.displayTeam.set({ascending:e})};return l(g,{my:1,display:"flex",flexDirection:"column",gap:1,children:[t(N,{children:t(_,{children:t(g,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:t(re,{showingTextProps:P,sortByButtonProps:U})})})}),l(g,{sx:{display:"flex",gap:1},children:[t(f,{fullWidth:!0,onClick:j,color:"info",startIcon:t(ie,{}),children:"Add Team"}),t(Z,{open:k,onClose:I,children:l(N,{children:[t(le,{title:"Import Team"}),t(V,{}),l(_,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(Y,{children:"Import a team in JSON form below."}),t(oe,{fullWidth:!0,label:"JSON Data",placeholder:"Paste your Team JSON here",value:m,onChange:e=>O(e.target.value),multiline:!0,rows:4}),t(f,{startIcon:t(S,{}),disabled:!m,onClick:$,children:"Import"})]})]})}),t(f,{fullWidth:!0,onClick:M,color:"info",startIcon:t(S,{}),children:"Import Team"})]}),t(s.Suspense,{fallback:t(b,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:t(D,{container:!0,spacing:1,columns:ge,children:h.map(e=>t(D,{item:!0,xs:1,children:t(ne,{teamId:e,bgt:"light",onClick:o=>w(`${e}${o?`/${o}`:""}`)})},e))})}),r.length!==h.length&&t(b,{ref:e=>{e&&A(e)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})}export{$e as default};
