import{m as z,n as I,q as e,aq as _,p as s,s as B,Q as i,h as D,I as M,aD as v,d8 as A,u as V,b as E,d as m,k as S,aP as X,cp as Y,cq as Z,bD as f,cs as ee,$ as ae,_ as ne,T as p,co as te,C as se,bg as oe,bh as re,w as ie,B as L,a3 as le,t as pe}from"./index-741fa0d4.js";import{e as ce,g as de,C as ue,m as me,v as he}from"./LocationName-02e91412.js";import{T as N,S as $,h as j}from"./SolidToggleButtonGroup-fda674a8.js";import{i as K}from"./index-3a53ace2.js";import{u as ge,W as ye}from"./Trans-bd35ba0d.js";import{L as fe,a as xe,b as be,d as we}from"./LocationAutocomplete-9a2d3a8b.js";import{C as ke}from"./CardActionArea-c934cb54.js";const ve=j([..._]);function De({value:a,totals:n,onChange:c,...d}){const h=z(),l=!I(h.breakpoints.up("sm"));return e($,{exclusive:!0,value:a,...d,children:_.map(o=>e(N,{value:o,sx:{p:l?1:void 0,minWidth:l?0:"6em",display:"flex",gap:l?0:1},onClick:()=>c(ve(a,o)),children:s(i,{display:"flex",children:[e("strong",{children:o}),e(ce,{}),e(B,{label:n[o],size:"small"})]})},o))})}const Ce=j([...D]);function Me({value:a,totals:n,onChange:c,...d}){const h=z(),l=!I(h.breakpoints.up("sm"));return e($,{exclusive:!0,value:a,...d,children:D.map(o=>{var u;return s(N,{value:o,sx:{p:l?1:void 0,minWidth:l?0:"6em",display:"flex",gap:l?0:1},onClick:()=>c(Ce(a,o)),children:[e(M,{src:(u=K.weaponTypes)==null?void 0:u[o],size:2,sideMargin:!0}),e(B,{label:n[o],size:"small"})]},o)})})}function Ae(){return{level:a=>a.level*(a.ascension+1),rarity:a=>v.weapon.data[a.key].rarity,name:a=>A.t(`weaponNames_gen:${a.key}`)}}function Ne(){return{rarity:(a,n)=>n.includes(v.weapon.data[a.key].rarity),weaponType:(a,n)=>n.includes(v.weapon.data[a.key].weaponType),name:(a,n)=>A.t(`weaponNames_gen:${a.key}`).toLowerCase().includes(n.toLowerCase())}}const $e={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function je({weaponId:a,onClick:n,onEdit:c,onDelete:d,canEquip:h=!1,extraButtons:l}){const{t:o}=V(["page_weapon","ui"]),u=E(),r=ge(a),g=r==null?void 0:r.key,y=g&&de(g),F=m.useCallback(t=>g&&S(g).weaponType===X(t).weaponType,[g]),O=m.useCallback(t=>e(ke,{onClick:()=>n==null?void 0:n(a),children:t}),[n,a]),R=m.useCallback(t=>e(i,{children:t}),[]),q=m.useCallback(t=>a&&u.weapons.set(a,{location:t}),[u,a]),x=m.useMemo(()=>y&&r&&Y([y.data,Z(r)]),[y,r]);if(!r||!y||!x)return null;const{level:G,ascension:C,refinement:H,id:b,location:w="",lock:k}=r,P=x.get(f.weapon.type).value,Q=[f.weapon.main,f.weapon.sub,f.weapon.sub2].map(t=>x.get(t)),U=ee(r.key,C>=2),W=S(r.key);return e(m.Suspense,{fallback:e(ae,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:s(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s(ue,{condition:!!n,wrapper:O,falseWrapper:R,children:[s(i,{className:`grad-${W.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!n&&e(ne,{color:"primary",onClick:()=>u.weapons.set(b,{lock:!k}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:k?e(fe,{}):e(xe,{})}),s(i,{sx:{position:"relative",zIndex:1},children:[s(i,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(M,{size:2,src:K.weaponTypes[P]}),e(p,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:e("strong",{children:e(ye,{weaponKey:r.key})})})]}),s(p,{component:"span",variant:"h5",children:["Lv. ",G]}),s(p,{component:"span",variant:"h5",color:"text.secondary",children:["/",te[C]]}),s(p,{variant:"h6",children:["Refinement ",e("strong",{children:H})]}),e(me,{stars:W.rarity,colored:!0})]}),e(i,{sx:{height:"100%",position:"absolute",right:0,top:0},children:e(i,{component:"img",src:U??"",width:"auto",height:"100%",sx:{float:"right"}})})]}),e(se,{children:Q.map(t=>{const{name:T,icon:J}=oe(t.info);return T?s(i,{sx:{display:"flex"},children:[s(p,{flexGrow:1,children:[J," ",T]}),e(p,{children:re(t)})]},JSON.stringify(t.info)):null})})]}),s(i,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[e(i,{sx:{flexGrow:1},children:h?e(be,{location:w,setLocation:q,filter:F,autoCompleteProps:{getOptionDisabled:t=>!t.key}}):e(he,{location:w})}),s(i,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!c&&e(ie,{title:e(p,{children:o`page_weapon:edit`}),placement:"top",arrow:!0,children:e(L,{color:"info",size:"small",onClick:()=>c(b),children:e(we,{})})}),!!d&&e(L,{color:"error",size:"small",onClick:()=>d(b),disabled:!!w||k,children:e(le,{})}),l]})]})]})})}export{Me as W,De as a,je as b,Ne as c,Ae as d,$e as w};
