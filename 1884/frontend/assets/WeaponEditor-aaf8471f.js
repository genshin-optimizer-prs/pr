import{aB as we,aA as De,aC as J,aD as v,e as p,aE as Ae,aF as se,du as U,j as M,aG as H,aH as Re,b3 as G,dJ as Ye,ce as qe,cV as Je,aU as Xe,d0 as be,aY as Ke,n as f,p as t,T as S,N as I,Z as oe,B as O,d1 as Qe,aW as Ze,c6 as et,V as Me,u as le,a6 as ce,bp as ge,a0 as Y,bz as W,au as $e,b5 as tt,D as X,c5 as nt,K as at,dK as C,dL as st,dM as ot,bX as ye,dN as Pe,dO as it,dP as rt,aa as lt,dQ as ct,dR as dt,a9 as ut,a8 as pt,b7 as de,b as K,bh as T,cB as j,dS as B,W as mt,C as ie,X as Oe,dT as ft,M as w,Y as Ce,t as ht,s as xt,a2 as bt,R as gt,$ as yt}from"./index-cee1839f.js";import{h as Ct}from"./LocationName-f0a6d295.js";import{E as ve,r as Te,n as vt,y as It,w as St,x as kt,u as z}from"./index-895d4e72.js";import{u as Lt}from"./useWeapon-c349dad2.js";import{d as wt}from"./Close-aeb68896.js";import{L as Dt,a as At,b as Rt}from"./ConditionalWrapper-dee069ad.js";import{D as k}from"./DataContext-0a30df24.js";import{d as Mt,a as $t}from"./InfoTooltip-c2f4aa8b.js";import{B as Ie}from"./BootstrapTooltip-782db822.js";import{d as Se,C as Pt,a as Ot,M as q,D as je}from"./DropdownButton-f1096ea3.js";import{d as Be,a as Fe}from"./CheckBoxOutlineBlank-e442faf2.js";import{B as ue}from"./index-dc93f186.js";import{g as Tt}from"./index-4d8ae373.js";import{C as jt}from"./CardHeader-550417a0.js";function Bt(e){return De("MuiListItem",e)}const Ft=we("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),P=Ft;function Nt(e){return De("MuiListItemSecondaryAction",e)}we("MuiListItemSecondaryAction",["root","disableGutters"]);const Vt=["className"],_t=e=>{const{disableGutters:n,classes:a}=e;return Re({root:["root",n&&"disableGutters"]},Nt,a)},Et=J("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.disableGutters&&n.disableGutters]}})(({ownerState:e})=>v({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),Ne=p.forwardRef(function(n,a){const s=Ae({props:n,name:"MuiListItemSecondaryAction"}),{className:l}=s,i=se(s,Vt),c=p.useContext(U),r=v({},s,{disableGutters:c.disableGutters}),u=_t(r);return M.jsx(Et,v({className:H(u.root,l),ownerState:r,ref:a},i))});Ne.muiName="ListItemSecondaryAction";const Gt=Ne,Wt=["className"],zt=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ut=(e,n)=>{const{ownerState:a}=e;return[n.root,a.dense&&n.dense,a.alignItems==="flex-start"&&n.alignItemsFlexStart,a.divider&&n.divider,!a.disableGutters&&n.gutters,!a.disablePadding&&n.padding,a.button&&n.button,a.hasSecondaryAction&&n.secondaryAction]},Ht=e=>{const{alignItems:n,button:a,classes:s,dense:l,disabled:i,disableGutters:c,disablePadding:r,divider:u,hasSecondaryAction:o,selected:m}=e;return Re({root:["root",l&&"dense",!c&&"gutters",!r&&"padding",u&&"divider",i&&"disabled",a&&"button",n==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction",m&&"selected"],container:["container"]},Bt,s)},Yt=J("div",{name:"MuiListItem",slot:"Root",overridesResolver:Ut})(({theme:e,ownerState:n})=>v({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&v({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${Ye.root}`]:{paddingRight:48}},{[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${P.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.alignItems==="flex-start"&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})),qt=J("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,n)=>n.container})({position:"relative"}),Jt=p.forwardRef(function(n,a){const s=Ae({props:n,name:"MuiListItem"}),{alignItems:l="center",autoFocus:i=!1,button:c=!1,children:r,className:u,component:o,components:m={},componentsProps:b={},ContainerComponent:x="li",ContainerProps:{className:h}={},dense:d=!1,disabled:y=!1,disableGutters:D=!1,disablePadding:Q=!1,divider:Z=!1,focusVisibleClassName:ee,secondaryAction:V,selected:te=!1,slotProps:F={},slots:g={}}=s,L=se(s.ContainerProps,Wt),He=se(s,zt),me=p.useContext(U),ne=p.useMemo(()=>({dense:d||me.dense||!1,alignItems:l,disableGutters:D}),[l,me.dense,d,D]),ae=p.useRef(null);qe(()=>{i&&ae.current&&ae.current.focus()},[i]);const $=p.Children.toArray(r),fe=$.length&&Je($[$.length-1],["ListItemSecondaryAction"]),_=v({},s,{alignItems:l,autoFocus:i,button:c,dense:ne.dense,disabled:y,disableGutters:D,disablePadding:Q,divider:Z,hasSecondaryAction:fe,selected:te}),he=Ht(_),xe=Xe(ae,a),E=g.root||m.Root||Yt,N=F.root||b.root||{},A=v({className:H(he.root,N.className,u),disabled:y},He);let R=o||"li";return c&&(A.component=o||"div",A.focusVisibleClassName=H(P.focusVisible,ee),R=Ke),fe?(R=!A.component&&!o?"div":R,x==="li"&&(R==="li"?R="div":A.component==="li"&&(A.component="div")),M.jsx(U.Provider,{value:ne,children:M.jsxs(qt,v({as:x,className:H(he.container,h),ref:xe,ownerState:_},L,{children:[M.jsx(E,v({},N,!be(E)&&{as:R,ownerState:v({},_,N.ownerState)},A,{children:$})),$.pop()]}))})):M.jsx(U.Provider,{value:ne,children:M.jsxs(E,v({},N,{as:R,ref:xe},!be(E)&&{ownerState:v({},_,N.ownerState)},A,{children:[$,V&&M.jsx(Gt,{children:V})]}))})}),Ve=Jt;function Xt({avatar:e,title:n,action:a}){return f(I,{display:"flex",gap:1,p:2,alignItems:"center",children:[e,t(S,{variant:"subtitle1",sx:{flexGrow:1},children:n}),a&&t(S,{variant:"caption",children:a})]})}function Kt({title:e,children:n,id:a="dropdownbtn",...s}){const[l,i]=p.useState(null),c=!!l,r=p.useCallback(o=>i(o.currentTarget),[i]),u=p.useCallback(()=>i(null),[i]);return f(p.Suspense,{fallback:t(O,{endIcon:t(Se,{}),...s,children:t(oe,{width:50})}),children:[t(O,{...s,id:a,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:r,endIcon:t(Se,{}),children:e}),t(et,{id:"basic-menu",anchorEl:l,open:c,placement:"bottom-start",transition:!0,onClick:u,sx:{zIndex:1500},children:({TransitionProps:o,placement:m})=>t(Qe,{...o,style:{transformOrigin:m==="bottom-start"?"left top":"left bottom"},children:t(Ze,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:t(Pt,{onClickAway:u,children:f("div",{children:[" ",t(p.Suspense,{fallback:t(oe,{width:"100%",height:"1000"}),children:t(Ot,{"aria-labelledby":a,children:n})})]})})})})})]})}const _e=p.createContext({setFormulaData:()=>{},onModalOpen:()=>{},onModalClose:()=>{}});function Mn({children:e}){const[n,a,s]=Me(),[[l,i],c]=p.useState([void 0,void 0]),r=p.useCallback((u,o)=>{u&&o?a():s(),c([u,o])},[a,s]);return t(_e.Provider,{value:{setFormulaData:r,data:l,node:i,modalOpen:n,onModalOpen:a,onModalClose:s},children:e})}const ke={melt:{cryo:"pyro",pyro:"cryo"},vaporize:{hydro:"pyro",pyro:"hydro"}},Le={mx:.25,px:.25};function Qt({reaction:e,trigger:n}){const{t:a}=le("sheet_gen");n||(n=Object.keys(ke[e])[0]);const s=ke[e][n];return s?f(I,{display:"flex",alignItems:"center",children:[t(ce,{color:"melt",children:a(`reaction.${e}`)}),t(Y,{sx:Le,color:s,children:t(ve,{ele:s,iconProps:ge})}),"+",t(Y,{sx:Le,color:n,children:t(ve,{ele:n,iconProps:ge})})]}):null}function Ee({fields:e,bgt:n="normal"}){return t(Ge,{sx:{m:0},bgt:n,children:e.map((a,s)=>t(Zt,{field:a,component:Ve},s))})}function Zt({field:e,component:n}){const{data:a,compareData:s}=p.useContext(k);if(!p.useMemo(()=>{var i;return((i=e==null?void 0:e.canShow)==null?void 0:i.call(e,a))??!0},[e,a]))return null;if("node"in e){const i=a.get(e.node);if(i.isEmpty)return null;if(s){const c=s.get(e.node),r=c.isEmpty?0:c.value;return t(re,{node:i,compareValue:r,component:n})}else return t(re,{node:i,component:n})}return t(en,{field:e,component:n})}function en({field:e,component:n}){var r;const{data:a}=p.useContext(k),s=C(e.value,a),l=C(e.variant,a),i=e.text&&t("span",{children:e.text}),c=e.textSuffix&&f("span",{children:[" ",e.textSuffix]});return f(I,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1},component:n,children:[f(S,{color:`${l}.main`,children:[i,c]}),f(S,{children:[typeof s=="number"?(r=s.toFixed)==null?void 0:r.call(s,e.fixed):s,e.unit]})]})}function re({node:e,compareValue:n,component:a,emphasize:s}){const{data:l}=p.useContext(k),{setFormulaData:i}=p.useContext(_e),c=p.useCallback(()=>i(l,e),[i,l,e]);if(e.isEmpty)return null;const{multi:r}=e.info,u=r&&f("span",{children:[r,"×"]}),o=e.value;let m=!1;const{unit:b,fixed:x,variant:h,subVariant:d}=Te(e.info);if(n!==void 0){const y=o-n,D=W(y/n,"%",x);m=f($e,{children:[t("span",{children:W(o,b,x)}),Math.abs(y)>1e-4&&t(Ie,{title:f(S,{children:["Compare to"," ",t("strong",{children:W(n,b,x)})]}),children:f(ce,{color:y>0?"success":"error",sx:{display:"flex",gap:.5,alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap"},children:[f("span",{children:["(",y>0?"+":"",W(y,b,x),")"]}),b!=="%"&&n!==0&&f("span",{children:["(",y>0?"+":"",D,")"]})]})})]})}else m=t("span",{children:vt(e)});return f(I,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1,boxShadow:s?"0px 0px 0px 2px red inset":void 0},component:a,children:[t(tn,{node:e}),f(S,{sx:{display:"flex",gap:.5,alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap"},children:[u,m]}),!!e.formula&&t(Ie,{placement:"top",title:t(S,{children:f(p.Suspense,{fallback:t(oe,{variant:"rectangular",width:300,height:30}),children:[tt.includes(h)&&f(I,{sx:{display:"inline-flex",gap:1,mr:1},children:[t(I,{children:t(Qt,{reaction:h,trigger:d})}),t(X,{orientation:"vertical",flexItem:!0})]}),t("span",{children:e.formula})]})}),children:t(Mt,{onClick:c,fontSize:"inherit",sx:{cursor:"help"}})})]})}function tn({node:e}){const{textSuffix:n,icon:a,isTeamBuff:s,variant:l,name:i}=Te(e.info);return f(S,{component:"div",sx:{display:"flex",gap:1,alignItems:"center",marginRight:"auto"},children:[!!s&&t(at,{}),a,f(ce,{color:l!=="invalid"?l:void 0,children:[i,n&&f("span",{children:[" ",n]})]})]})}const Ge=J(nt)(({theme:e,bgt:n="normal"})=>{const a=n==="light"?"contentLight":n==="dark"?"contentDark":"contentNormal";return{borderRadius:e.shape.borderRadius,overflow:"hidden",margin:0,"> .MuiListItem-root:nth-of-type(even)":{backgroundColor:e.palette[a].main},"> .MuiListItem-root:nth-of-type(odd)":{backgroundColor:e.palette[a].dark}}});function nn({level:e,ascension:n,setBoth:a,useLow:s=!1,disabled:l=!1}){const{t:i}=le("ui"),c=s?rt:ye,r=p.useCallback((o=1)=>{o=lt(o,1,s?ct:dt);const m=c.findIndex(b=>o<=b);a({level:o,ascension:m})},[a,c,s]),u=p.useCallback(()=>{const o=c.findIndex(m=>e!==90&&e===m);a(n===o?{ascension:n+1}:{ascension:o})},[a,c,n,e]);return f(ue,{sx:{bgcolor:o=>o.palette.contentNormal.main},children:[t(pt,{children:t(ut,{onChange:r,value:e,startAdornment:"Lv. ",disabled:l,inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),t(O,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(s?st:ot)(e)||l,onClick:u,children:f("strong",{children:["/ ",ye[n]]})}),t(je,{title:i("selectlevel"),sx:{flexGrow:1},disabled:l,children:[...s?Pe:it].map(([o,m])=>{const b=o===e&&m===n;return t(q,{selected:b,disabled:b,onClick:()=>a({level:o,ascension:m}),children:o===c[m]?`Lv. ${o}`:`Lv. ${o}/${c[m]}`},`${o}/${m}`)})})]})}function an({conditional:e,disabled:n=!1}){const{data:a}=p.useContext(k);return Object.keys(C(e.states,a)).length===1&&"path"in e?t(sn,{conditional:e,disabled:n}):"path"in e?t(on,{conditional:e,disabled:n}):t(rn,{conditional:e,disabled:n})}function sn({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(de),{data:l}=p.useContext(k),i=K(),c=p.useCallback(x=>{e.path[0]==="resonance"?i.teams.set(a,h=>{const d=T(h.conditional);x?j(d,e.path,x):B(d,e.path),h.conditional=d}):i.teamChars.set(s,h=>{const d=T(h.conditional);x?j(d,e.path,x):B(d,e.path),h.conditional=d})},[i,e.path,s,a]),r=l.get(e.value).value,[u,o]=Object.entries(C(e.states,l))[0],m=ze(o.name),b=pe(e.name);return f(O,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:r?"success":"primary",onClick:()=>c(r?void 0:u),disabled:n,startIcon:r?t(Be,{}):t(Fe,{}),children:[b," ",m]})}function on({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(de),{data:l}=p.useContext(k),i=K(),c=p.useCallback(x=>{e.path[0]==="resonance"?i.teams.set(a,h=>{const d=T(h.conditional);x?j(d,e.path,x):B(d,e.path),h.conditional=d}):i.teamChars.set(s,h=>{const d=T(h.conditional);x?j(d,e.path,x):B(d,e.path),h.conditional=d})},[i,e.path,s,a]),r=l.get(e.value).value,u=C(e.states,l),o=r?u[r]:void 0,m=o?ze(o.name):t(Y,{color:"secondary",children:"Not Active"}),b=pe(e.name);return f(Kt,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:r&&o?"success":"primary",title:f("span",{children:[b," ",m]}),disabled:n,children:[t(q,{onClick:()=>c(),selected:!o,disabled:!o,children:t("span",{children:"Not Active"})}),t(X,{}),Object.entries(u).map(([x,h])=>t(q,{onClick:()=>c(x),selected:r===x,disabled:r===x,children:h.name},x))]})}function rn({conditional:e,disabled:n}){const{teamId:a,teamCharId:s}=p.useContext(de),{data:l}=p.useContext(k),i=K(),c=p.useCallback((r,u)=>{r[0]==="resonance"?i.teamChars.set(a,o=>{const m=T(o.conditional);u?j(m,r,u):B(m,r),o.conditional=m}):i.teamChars.set(s,o=>{const m=T(o.conditional);u?j(m,r,u):B(m,r),o.conditional=m})},[i,s,a]);return t(ue,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(C(e.states,l)).map(([r,u])=>{const o=l.get(u.value).value,m=o===r;return t(O,{color:m?"success":"primary",disabled:n,fullWidth:!0,onClick:()=>c(u.path,o?void 0:r),size:"small",startIcon:m?t(Be,{}):t(Fe,{}),sx:{borderRadius:0},children:pe(u.name)},r)})})}function We(e){return typeof e!="string"}function ze(e){if(!e)return"";let n="primary",a=e;return e&&We(e)&&e.props.color&&(n=e.props.color,a=t("span",{children:e.props.children})),t(Y,{sx:{ml:.5},color:n,children:a})}function pe(e){if(We(e)){const n=e.props.key18,a=e.props.ns,s=e.props.values;return t(mt,{ns:a,key18:n,values:s,useBadge:!0})}return e}function ln({conditional:e,hideHeader:n=!1,hideDesc:a=!1,disabled:s=!1,bgt:l="normal"}){var r;const{data:i}=p.useContext(k);let c;if("path"in e){const u=i.get(e.value).value,o=C(e.states,i);c=u&&((r=o[u])==null?void 0:r.fields)}else{const u=C(e.states,i);c=Object.values(u).flatMap(o=>i.get(o.value).value?o.fields:[])}return f(Oe,{bgt:l,children:[!C(n,e)&&t(Ue,{header:e.header,hideDesc:a}),t(ie,{sx:{p:0,"&:last-child":{pb:0}},children:t(an,{conditional:e,disabled:s})}),c&&t(Ee,{bgt:l,fields:c})]})}function cn({sections:e,teamBuffOnly:n,hideDesc:a=!1,hideHeader:s=!1,disabled:l=!1,bgt:i="normal"}){const{data:c}=p.useContext(k);if(!e.length)return null;const r=e.map((u,o)=>u.canShow&&!c.get(u.canShow).value||n&&!u.teamBuff?null:t(dn,{section:u,hideDesc:a,hideHeader:s,disabled:l,bgt:i},o)).filter(u=>u);return r.length?t(I,{display:"flex",flexDirection:"column",gap:1,children:r}):null}function dn({section:e,hideDesc:n=!1,hideHeader:a=!1,disabled:s=!1,bgt:l="normal"}){return"fields"in e?t(un,{section:e,hideDesc:n,hideHeader:a,bgt:l}):"states"in e?t(ln,{conditional:e,hideDesc:n,hideHeader:a,disabled:s,bgt:l}):t(pn,{section:e})}function un({section:e,hideDesc:n,hideHeader:a,bgt:s="normal"}){return f(Oe,{bgt:s,children:[!C(a,e)&&e.header&&t(Ue,{header:e.header,hideDesc:n,hideDivider:e.fields.length===0}),t(Ee,{bgt:s,fields:e.fields})]})}function pn({section:e}){const{data:n}=p.useContext(k);return t("div",{children:C(e.text,n)})}function Ue({header:e,hideDesc:n,hideDivider:a}){const{data:s}=p.useContext(k),{icon:l,title:i,action:c}=e,r=C(l,s),u=!n&&C(e.description,s);return f($e,{children:[t(Xt,{avatar:r,title:n?i:f("span",{children:[i,t($t,{title:t(S,{children:u})})]}),action:c}),!a&&t(X,{})]})}function mn({refinement:e,setRefinement:n,disabled:a=!1}){const{t:s}=le("ui");return t(je,{title:s("refinement",{value:e}),disabled:a,children:ft.map(l=>t(q,{onClick:()=>n(l),selected:e===l,disabled:e===l,children:s("refinement",{value:l})},l))})}const fn=gt.lazy(()=>yt(()=>import("./WeaponSelectionModal-d0a4c0aa.js"),["./WeaponSelectionModal-d0a4c0aa.js","./index-cee1839f.js","./index-7910cf30.css","./LocationName-f0a6d295.js","./DropdownButton-f1096ea3.js","./index-dc93f186.js","./index-895d4e72.js","./Close-aeb68896.js","./index-4d8ae373.js","./totalUtils-417175f1.js","./WeaponCard-7208c151.js","./SolidToggleButtonGroup-df6c753b.js","./useWeapon-c349dad2.js","./ConditionalWrapper-dee069ad.js","./CardActionArea-6f3a6e62.js"],import.meta.url));function hn({weaponId:e,footer:n=!1,onClose:a,extraButtons:s}){const{data:l}=p.useContext(k),i=K(),c=Lt(e),{key:r="",level:u=0,refinement:o=1,ascension:m=0,lock:b,location:x="",id:h}=c??{},d=r?Tt(r):void 0,y=p.useCallback(g=>{i.weapons.set(e,g)},[e,i]),D=p.useCallback(g=>h&&i.weapons.set(h,{location:g}),[i,h]),Q=p.useCallback(g=>g.weaponTypeKey===(d==null?void 0:d.weaponType),[d]),[Z,ee,V]=Me(),te=r?It(r,m>=2):"";p.useEffect(()=>{if(!(!d||!y||d.key!==(c==null?void 0:c.key))&&d.rarity<=2&&(u>70||m>4)){const[g,L]=Pe[0];y({level:g,ascension:L})}},[d,c,y,u,m]);const F=p.useMemo(()=>d&&c&&St([d.data,kt(c)]),[d,c]);return t(bt,{open:!!e,onClose:a,containerProps:{maxWidth:"md"},children:f(xt,{children:[t(fn,{ascension:m,show:Z,onHide:V,onSelect:g=>y({key:g}),weaponTypeFilter:d&&d.weaponType}),t(ie,{children:d&&F&&f(w,{container:!0,spacing:1.5,children:[t(w,{item:!0,xs:12,sm:3,children:f(w,{container:!0,spacing:1.5,children:[t(w,{item:!0,xs:6,sm:12,children:f(I,{sx:{position:"relative",display:"flex"},children:[t(I,{component:"img",src:te,className:`grad-${d.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),t(Ce,{color:"primary",onClick:()=>h&&i.weapons.set(h,{lock:!b}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:b?t(Dt,{}):t(At,{})})]})}),t(w,{item:!0,xs:6,sm:12,children:t(S,{children:t("small",{children:d.description})})})]})}),f(w,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[f(I,{display:"flex",gap:1,flexWrap:"wrap",children:[f(ue,{children:[t(O,{color:"info",onClick:ee,children:(d==null?void 0:d.name)??"Select a Weapon"}),(d==null?void 0:d.hasRefinement)&&t(mn,{refinement:o,setRefinement:g=>y({refinement:g})}),s]}),a&&t(Ce,{onClick:a,sx:{marginLeft:"auto"},children:t(wt,{})})]}),t(I,{display:"flex",gap:1,flexWrap:"wrap",children:d&&t(nn,{level:u,ascension:m,setBoth:y,useLow:!d.hasRefinement})}),t(Ct,{stars:d.rarity}),t(S,{variant:"subtitle1",children:t("strong",{children:d.passiveName})}),t(S,{gutterBottom:!0,children:d.passiveName&&d.passiveDescription(F.get(z.weapon.refinement).value-1)}),f(I,{display:"flex",flexDirection:"column",gap:1,children:[f(ht,{children:[t(jt,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),t(X,{}),t(Ge,{children:[z.weapon.main,z.weapon.sub,z.weapon.sub2].map(g=>{const L=F.get(g);return L.isEmpty||!L.value?null:t(re,{node:L,component:Ve},JSON.stringify(L.info))})})]}),l&&d.document&&t(cn,{sections:d.document})]})]})]})}),n&&h&&t(ie,{sx:{py:1},children:t(w,{container:!0,spacing:1,children:t(w,{item:!0,flexGrow:1,children:t(Rt,{location:x,setLocation:D,filter:Q,autoCompleteProps:{getOptionDisabled:g=>!g.key}})})})})]})})}const $n=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"}));export{Qt as A,Xt as C,Kt as D,_e as F,Ve as L,tn as N,mn as R,hn as W,re as a,Ge as b,cn as c,nn as d,Mn as e,$n as f};
