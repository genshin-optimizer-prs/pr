import{b as k,at as Vt,as as Yt,au as Te,aW as X,av as ae,e as l,aw as Xt,ax as Jt,ce as Dt,ay as Ze,j as H,az as Qt,p as e,cf as Pa,cg as Fa,ch as qa,bC as Ha,F as Ga,r as we,i as _e,n as h,U as J,B as A,ci as Ka,aS as Va,cb as Ya,c as ze,ap as Ue,K as g,T as v,d as se,aB as lt,s as ct,C as P,am as be,J as $,bM as Zt,a9 as We,q as de,cj as Xa,bp as te,bN as et,l as dt,bF as Ja,aY as jt,ck as Qa,t as re,b8 as Za,b7 as en,a2 as tn,cl as an,aQ as nn,cm as At,cn as rn,co as Ge,cp as Ke,cq as Ve,bx as on,a3 as Ne,D as Ce,u as N,br as Bt,bs as It,bq as Ot,Q as ue,o as ke,k as ce,b5 as xe,aA as oe,V as Me,bt as sn,cr as ea,X as De,cs as ln,ct as cn,cu as ta,cv as dn,cw as un,cx as hn,cy as pn,bg as mn,cz as fn,aM as aa,v as Ee,_ as na,af as ra,ae as gn,bI as Cn,cA as xn,aE as oa,W as sa,b3 as bn,b4 as yn,b6 as vn,aC as zt,cB as tt,ar as at,cC as wn,m as nt,f as ut,cD as _n,cE as Ye,h as Rn,bZ as Ln,aG as ia}from"./index-4fe13316.js";import{t as ht,s as pt,v as mt,i as la,j as Sn,k as $n,C as I,H as kn,w as Un,x as Tn,u as Mn,g as Dn,y as jn,T as An,d as Wt,z as Bn}from"./TeamCard-d2522626.js";import{D as F}from"./DataContext-28f5b884.js";import{p as ne,g as Q,u as j,E as ft,S as gt,a as In,B as ca,x as da,y as On,v as zn,w as ua,n as Wn,q as Nn,r as Nt,z as En,A as Pn,C as Fn,D as qn,b as Et,c as Pt,F as Hn}from"./index-0e875223.js";import{B as je,d as Gn}from"./BootstrapTooltip-a78834ae.js";import{C as Pe}from"./CloseButton-5cb779a0.js";import{I as Re,i as Le,C as Fe,B as Kn}from"./ColoredText-0ba1230d.js";import{a as ha,C as Vn,L as Yn,b as Xn,T as ie,A as Jn,W as pa,c as Qn}from"./WeaponEditor-8d254c4a.js";import{S as E}from"./SqBadge-948281f3.js";import{b as Zn,c as ma,e as Ct,C as er,u as fa,a as ga,S as Ca,f as xt,s as xa,d as ba,T as ya,g as tr}from"./StarDisplay-dd42b94c.js";import{C as Ae}from"./CardActionArea-d58df195.js";import{F as bt,C as yt,A as va}from"./ConditionalWrapper-c34c2b77.js";import{u as rt,f as ar,A as Ie,d as nr,i as rr,b as or}from"./ArtifactSort-d82875db.js";import{b as Oe,c as sr,d as ir,w as lr,W as cr}from"./WeaponCard-7ff7b595.js";import{a as wa,d as _a}from"./CheckBoxOutlineBlank-cd370f9a.js";import{A as dr}from"./Artifact-bb96d181.js";import{g as Ra,a as ur,b as hr}from"./index-557c87a1.js";import{g as vt,W as La}from"./index-d49a0829.js";import{u as pr}from"./useWeapon-8c473ddf.js";import{S as mr}from"./SlotIcon-b78007bd.js";import{C as Sa}from"./ChevronRight-64c374d6.js";import{C as fr,a as gr,M as $a,D as Cr}from"./DropdownButton-855ce726.js";import{T as ve,S as qe,h as wt,a as xr}from"./SolidToggleButtonGroup-0732de76.js";import br from"./WeaponSelectionModal-d613589c.js";import{c as Ft}from"./totalUtils-fb4ba5bb.js";function Be(t){const a=k();return Zn(a.optConfigs,t)}function yr(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:s=!1}=t,o=ma({badgeContent:a,max:r});let i=n;n===!1&&a===0&&!s&&(i=!0);const{badgeContent:c,max:f=r}=i?o:t,d=c&&Number(c)>f?`${f}+`:c;return{badgeContent:c,invisible:i,max:f,displayValue:d}}function vr(t){return Yt("MuiBadge",t)}const wr=Vt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),fe=wr,_r=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Xe=10,Je=4,Rr=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:s,variant:o,classes:i={}}=t,c={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${X(n.vertical)}${X(n.horizontal)}`,`anchorOrigin${X(n.vertical)}${X(n.horizontal)}${X(s)}`,`overlap${X(s)}`,a!=="default"&&`color${X(a)}`]};return Qt(c,vr,i)},Lr=Te("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Sr=Te("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${X(n.anchorOrigin.vertical)}${X(n.anchorOrigin.horizontal)}${X(n.overlap)}`],n.color!=="default"&&a[`color${X(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>ae({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Xe*2,lineHeight:1,padding:"0 6px",height:Xe*2,borderRadius:Xe,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:Je,height:Je*2,minWidth:Je*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${fe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),$r=l.forwardRef(function(a,n){var r,s,o,i,c,f;const d=Xt({props:a,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:m,component:p,components:C={},componentsProps:x={},children:y,overlap:w="rectangular",color:U="default",invisible:L=!1,max:M=99,badgeContent:O,slots:T,slotProps:z,showZero:W=!1,variant:_="standard"}=d,b=Jt(d,_r),{badgeContent:D,invisible:R,max:Z,displayValue:G}=yr({max:M,invisible:L,badgeContent:O,showZero:W}),Y=ma({anchorOrigin:u,color:U,overlap:w,variant:_,badgeContent:O}),ee=R||D==null&&_!=="dot",{color:S=U,overlap:B=w,anchorOrigin:K=u,variant:q=_}=ee?Y:d,V=q!=="dot"?G:void 0,he=ae({},d,{badgeContent:D,invisible:ee,max:Z,displayValue:V,showZero:W,anchorOrigin:K,color:S,overlap:B,variant:q}),pe=Rr(he),$e=(r=(s=T==null?void 0:T.root)!=null?s:C.Root)!=null?r:Lr,le=(o=(i=T==null?void 0:T.badge)!=null?i:C.Badge)!=null?o:Sr,me=(c=z==null?void 0:z.root)!=null?c:x.root,He=(f=z==null?void 0:z.badge)!=null?f:x.badge,Na=Dt({elementType:$e,externalSlotProps:me,externalForwardedProps:b,additionalProps:{ref:n,as:p},ownerState:he,className:Ze(me==null?void 0:me.className,pe.root,m)}),Ea=Dt({elementType:le,externalSlotProps:He,ownerState:he,className:Ze(pe.badge,He==null?void 0:He.className)});return H.jsxs($e,ae({},Na,{children:[y,H.jsx(le,ae({},Ea,{children:V}))]}))}),kr=$r;function Ur({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(Ga,{...a});case"plume":return e(Ha,{...a});case"sands":return e(qa,{...a});case"goblet":return e(Fa,{...a});case"circlet":return e(Pa,{...a})}}var _t={},Tr=_e;Object.defineProperty(_t,"__esModule",{value:!0});var ot=_t.default=void 0,Mr=Tr(we()),Dr=H,jr=(0,Mr.default)((0,Dr.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");ot=_t.default=jr;function Ar({title:t,children:a,id:n="dropdownbtn",...r}){const[s,o]=l.useState(null),i=!!s,c=l.useCallback(d=>o(d.currentTarget),[o]),f=l.useCallback(()=>o(null),[o]);return h(l.Suspense,{fallback:e(A,{endIcon:e(ot,{}),...r,children:e(J,{width:50})}),children:[e(A,{...r,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:c,endIcon:e(ot,{}),children:t}),e(Ya,{id:"basic-menu",anchorEl:s,open:i,placement:"bottom-start",transition:!0,onClick:f,sx:{zIndex:1500},children:({TransitionProps:d,placement:u})=>e(Ka,{...d,style:{transformOrigin:u==="bottom-start"?"left top":"left bottom"},children:e(Va,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(fr,{onClickAway:f,children:h("div",{children:[" ",e(l.Suspense,{fallback:e(J,{width:"100%",height:"1000"}),children:e(gr,{"aria-labelledby":n,children:a})})]})})})})})]})}const Br=ze(H.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),Rt=ze(H.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Ir=ze(H.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),Or=ze(H.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),zr=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Wr=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Nr=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Er=""+new URL("splash_amber-51176566.png",import.meta.url).href,Pr=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,Fr=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,qr=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,Hr=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,Gr=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,Kr=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,Vr=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,Yr=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,Xr=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,Jr=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,Qr=""+new URL("splash_collei-504a299e.png",import.meta.url).href,Zr=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,eo=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,to=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,ao=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,no=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,ro=""+new URL("splash_eula-1491affb.png",import.meta.url).href,oo=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,so=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,io=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,lo=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,co=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,uo=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,ho=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,po=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,mo=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,fo=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,go=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,Co=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,xo=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,bo=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,yo=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,vo=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,wo=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,_o=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Ro=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Lo=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,So=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,$o=""+new URL("splash_lumine-51240648.png",import.meta.url).href,ko=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,Uo=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,To=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Mo=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Do=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,jo=""+new URL("splash_navia-749d043e.png",import.meta.url).href,Ao=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Bo=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Io=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,Oo=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,zo=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Wo=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,No=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Eo=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Po=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,Fo=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,qo=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,Ho=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,Go=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,Ko=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,Vo=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,Yo=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,Xo=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,Jo=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,Qo=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,Zo=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,es=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,ts=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,as=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,ns=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,rs=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,os=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,ss=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,is=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,ls=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,cs=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,ds={Albedo:Wr,Alhaitham:Nr,Amber:Er,AratakiItto:fo,Baizhu:qr,Barbara:Hr,Beidou:Gr,Bennett:Kr,Candace:Vr,Charlotte:Yr,Chevreuse:Xr,Chongyun:Jr,Collei:Qr,Cyno:Zr,Dehya:eo,Diluc:to,Diona:ao,Dori:no,Eula:ro,Faruzan:oo,Fischl:so,Freminet:io,Furina:lo,Gaming:co,Ganyu:uo,Gorou:ho,HuTao:mo,Jean:go,KaedeharaKazuha:bo,Kaeya:Co,KamisatoAyaka:Pr,KamisatoAyato:Fr,Kaveh:xo,Keqing:yo,Kirara:vo,Klee:wo,KujouSara:Po,KukiShinobu:Ro,Layla:Lo,Lisa:So,Lynette:ko,Lyney:Uo,Mika:To,Mona:Mo,Nahida:Do,Navia:jo,Neuvillette:Ao,Nilou:Bo,Ningguang:Io,Noelle:Oo,Qiqi:zo,RaidenShogun:Wo,Razor:No,Rosaria:Eo,SangonomiyaKokomi:_o,Sayu:Fo,Shenhe:qo,ShikanoinHeizou:po,Sucrose:Ho,Tartaglia:Go,Thoma:Ko,Tighnari:Vo,TravelerF:$o,TravelerM:zr,Venti:Yo,Wanderer:Xo,Wriothesley:Jo,Xiangling:Qo,Xianyun:Zo,Xiao:es,Xingqiu:ts,Xinyan:as,YaeMiko:ns,Yanfei:rs,Yaoyao:os,Yelan:ss,Yoimiya:is,YunJin:ls,Zhongli:cs};function us(t,a){return ds[Ue(t,a)]??""}function Lt(t){const a=k();return l.useCallback(n=>{if(!t)return;const r=a.chars.get(t);r&&a.chars.set(t,{...r,...n})},[t,a])}function ka(){const{data:t}=l.useContext(F);return h(g,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(a=>e(ha,{node:a},JSON.stringify(a.info))),t.get(ne.special).info.name&&h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(v,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(ne.special).info.icon,e(v,{children:t.get(ne.special).info.name})]})]})}function hs({characterKey:t,onClick:a,onClickHeader:n,footer:r,hideStats:s}){var U;const o=k(),i=ht(t),c=pt(t),{gender:f}=se(),d=Q(t,f),u=Lt(t),m=(U=i==null?void 0:i[t])==null?void 0:U.target,p=l.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),C=l.useCallback(L=>e(Ae,{onClick:p,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:L}),[p]),x=l.useMemo(()=>c&&d&&{character:c,characterSheet:d,characterDispatch:u},[c,d,u]),y=l.useMemo(()=>m&&i&&{data:m,teamData:i},[m,i]),{favorite:w}=mt(t);return e(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:s?300:600}),children:h(ct,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(g,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(lt,{sx:{p:.5},onClick:L=>o.charMeta.set(t,{favorite:!w}),children:w?e(bt,{}):e(Rt,{})})}),e(yt,{condition:!!a,wrapper:C,children:c&&y&&x?e(ps,{characterContextObj:x,dataContextObj:y,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:s}):e(ms,{characterKey:t})}),r]})})}function ps({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:r,onClickHeader:s,hideStats:o}){return e(I.Provider,{value:t,children:h(F.Provider,{value:a,children:[e(la,{characterKey:n,onClick:r?void 0:s,children:e(Sn,{characterKey:n})}),h(g,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:o?`${i.spacing(1)}!important`:void 0}),children:[e($n,{}),!o&&e(ka,{})]})]})})}function ms({characterKey:t}){return h(be,{children:[e(la,{characterKey:t,children:e(kn,{characterKey:t})}),e(P,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const fs=l.createContext({});var St={},gs=_e;Object.defineProperty(St,"__esModule",{value:!0});var Ua=St.default=void 0,Cs=gs(we()),xs=H,bs=(0,Cs.default)((0,xs.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");Ua=St.default=bs;const ys=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,vs=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,ws=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,_s=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,Rs=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Ls=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,Ss=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,$s=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,ks=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,Us=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,Ts=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,Ms=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Ds=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,js=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,As=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,Bs=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Is=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Os=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,zs=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,Ws=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Ns=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Es=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Ps=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Fs=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,qs=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Hs=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,Gs=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Ks=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,Vs=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,Ys=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,Xs=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,Js=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,Qs=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,Zs=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,ei=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,ti=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,ai=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,ni=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,ri=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,oi=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,si=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,ii=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,li=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,ci=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,di=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,ui=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,hi=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,pi=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,mi=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,fi=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,gi=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,Ci=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,xi=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,bi=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,yi=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,vi=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,wi=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,_i=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,Ri=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,Li=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Si=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,$i=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,ki=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,Ui=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Ti=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Mi=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Di=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,ji=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Ai=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,Bi=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Ii=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Oi=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,zi=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Wi=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Ni=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Ei=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Pi=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Fi=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,qi=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Hi=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,Gi=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,qt={Albedo:ys,Alhaitham:vs,Aloy:ws,Amber:_s,AratakiItto:Rs,Baizhu:Ls,Barbara:Ss,Beidou:$s,Bennett:ks,Candace:Us,Charlotte:Ts,Chevreuse:Ms,Chongyun:Ds,Collei:js,Cyno:As,Dehya:Bs,Diluc:Is,Diona:Os,Dori:zs,Eula:Ws,Faruzan:Ns,Fischl:Es,Freminet:Ps,Furina:Fs,Gaming:qs,Ganyu:Hs,Gorou:Gs,HuTao:Ks,Jean:Vs,KaedeharaKazuha:Zs,Kaeya:Ys,KamisatoAyaka:Xs,KamisatoAyato:Js,Kaveh:Qs,Keqing:ei,Kirara:ti,Klee:ai,KujouSara:ni,KukiShinobu:ri,Layla:oi,Lisa:si,Lyney:li,Lynette:ii,Mika:ci,Mona:di,Nahida:ui,Navia:hi,Neuvillette:pi,Nilou:mi,Ningguang:fi,Noelle:gi,Qiqi:Ci,RaidenShogun:xi,Razor:bi,Rosaria:yi,SangonomiyaKokomi:vi,Sayu:wi,Shenhe:_i,ShikanoinHeizou:Ri,Somnia:Li,Sucrose:Si,Tartaglia:$i,Thoma:ki,Tighnari:Ui,TravelerF:Hi,TravelerM:Gi,Venti:Ti,Wanderer:Mi,Wriothesley:Di,Xiangling:ji,Xianyun:Ai,Xiao:Bi,Xingqiu:Ii,Xinyan:Oi,YaeMiko:zi,Yanfei:Wi,Yaoyao:Ni,Yelan:Ei,Yoimiya:Pi,YunJin:Fi,Zhongli:qi};function Ki(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return qt[`Traveler${a}`]??"";default:return qt[t]??""}}function Jc(){const{characterSheet:t}=l.useContext(I),{data:a}=l.useContext(F),n={auto:a.get(j.total.auto).value,skill:a.get(j.total.skill).value,burst:a.get(j.total.burst).value},r={auto:a.get(j.total.autoBoost).value,skill:a.get(j.total.skillBoost).value,burst:a.get(j.total.burstBoost).value};return e(g,{children:e($,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var o;return e($,{item:!0,xs:4,children:e(kr,{badgeContent:n[s],color:r[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(g,{component:"img",src:(o=t.getTalentOfKey(s))==null?void 0:o.img,width:"100%",height:"auto"})})},s)})})})}function Vi(){const{characterSheet:t,character:{key:a}}=l.useContext(I),{data:n}=l.useContext(F),r=Lt(a),s=n.get(j.constellation).value;return e($,{container:!0,spacing:1,children:Zt(1,6).map(o=>{var i;return e($,{item:!0,xs:4,children:e(Ae,{onClick:()=>r({constellation:o===s?o-1:o}),children:e(g,{component:"img",src:(i=t.getTalentOfKey(`constellation${o}`))==null?void 0:i.img,sx:{...s>=o?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},o)})})}function Yi(){const{silly:t}=l.useContext(We),{character:{key:a}}=l.useContext(I),{gender:n}=se(),{data:r}=l.useContext(F),s=r.get(j.lvl).value,o=r.get(j.asc).value,i=us(a,n),c=Ki(a,n);return t&&i?e(Xi,{src:i,level:s,ascension:o}):e(Ji,{src:c,level:s,ascension:o})}function Xi({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(I);return h(g,{sx:{position:"relative"},children:[e(g,{src:t,component:"img",width:"100%",height:"auto"}),h(g,{sx:{width:"100%",height:"100%"},children:[e(g,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ta,{})}),e(v,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Ct,{stars:r.rarity,colored:!0})}),e(Da,{}),e(Ma,{level:a,ascension:n})]})]})}function Ji({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(I);return h(g,{sx:{position:"relative"},children:[h(g,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(v,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Ct,{stars:r.rarity,colored:!0})}),e(g,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ta,{})}),e(Da,{}),e(Ma,{level:a,ascension:n})]}),e(g,{src:t,component:"img",width:"100%",height:"auto"})]})}function Ta(){var n;const{characterSheet:t}=l.useContext(I),a=t.elementKey;return e(de,{color:a,sx:{height:"auto"},label:h(v,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(ft,{ele:a}),e(g,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e(Re,{src:(n=Le.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function Ma({level:t,ascension:a}){return e(v,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(E,{children:Xa(t,a)})})}function Da(){const{character:{key:t}}=l.useContext(I),a=k(),{favorite:n}=mt(t);return e(g,{sx:{position:"absolute",left:0,top:0},children:e(lt,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(bt,{}):e(Rt,{})})})}var $t={},Qi=_e;Object.defineProperty($t,"__esModule",{value:!0});var Se=$t.default=void 0,Zi=Qi(we()),el=H,tl=(0,Zi.default)((0,el.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");Se=$t.default=tl;var kt={},al=_e;Object.defineProperty(kt,"__esModule",{value:!0});var ja=kt.default=void 0,nl=al(we()),rl=H,ol=(0,nl.default)((0,rl.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");ja=kt.default=ol;function Aa({characterKey:t}){const{gender:a}=se();if(!t)return null;const n=Q(t,a);return n?e(je,{placement:"right-end",title:e(v,{children:n.name}),children:e(er,{characterKey:t,sideMargin:!0})}):null}function sl({statKey:t,disableIcon:a=!1}){return h(g,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(gt,{statKey:t,iconProps:te}),h("span",{children:[et.get(t),et.unit(t)]})]})}function Ba({statKey:t,disableIcon:a=!1}){return e(Fe,{color:et.getVariant(t),children:e(sl,{statKey:t,disableIcon:a})})}function il({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:s,BGComponent:o=re}){const i=rt(t),c=k(),f=l.useCallback(M=>e(Ae,{onClick:s,sx:{height:"100%"},children:M}),[s]),d=dt();if(!i)return e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Le.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:u,rarity:m,level:p,mainStatKey:C,substats:x,location:y}=i,w=Math.max(Math.min(n,m*4),p),U=Ja.find(M=>i.mainStatKey.includes(M)),L=U?jt(d.palette[U].main,.6):jt(d.palette.secondary.main,.6);return e(o,{sx:{height:"100%"},children:e(yt,{condition:!!s,wrapper:f,children:h(g,{display:"flex",height:"100%",children:[h(g,{className:`grad-${m}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(Un,{art:i,children:e(g,{component:"img",src:In(i.setKey,u),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),h(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(de,{size:"small",label:e("strong",{children:` +${p}`}),color:dr.levelVariant(p)}),r&&e(de,{size:"small",label:y?e(Aa,{characterKey:y&&c.chars.LocationToCharacterKey(y)}):e(ca,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(de,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:L,p:1},icon:e(je,{placement:"top",title:e(v,{children:e(Ba,{statKey:C})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(gt,{statKey:C,iconProps:{style:{padding:"4px"}}})})}),label:e(v,{sx:{mx:-.7},children:e(Fe,{color:w!==p?"warning":void 0,children:Qa(C,m,w)})})})]}),e(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:x.map((M,O)=>e(ll,{stat:M},O+M.key))})]})})})}function ll({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${tn(a,1,6)}`,r=Za(t.key);return e(g,{display:"flex",gap:1,alignContent:"center",children:h(v,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(je,{placement:"top",title:e(v,{children:t.key&&e(Ba,{statKey:t.key})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(gt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${en(t.value,r)}${r}`})]})})}function cl(t){return Yt("MuiMasonry",t)}Vt("MuiMasonry",["root"]);const dl=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],ge=t=>Number(t.replace("px","")),ul={flexBasis:"100%",width:0,margin:0,padding:0},hl=t=>{const{classes:a}=t;return Qt({root:["root"]},cl,a)},pl=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const d={},u=ge(a.spacing(t.defaultSpacing));for(let m=1;m<=t.defaultColumns;m+=1)d[`&:nth-of-type(${t.defaultColumns}n+${m%t.defaultColumns})`]={order:m};return r.height=t.defaultHeight,r.margin=-(u/2),r["& > *"]=ae({},n["& > *"],d,{margin:u/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${u}px)`}),ae({},n,r)}const s=At({values:t.spacing,breakpoints:a.breakpoints.values}),o=rn(a);n=Ge(n,Ke({theme:a},s,d=>{let u;if(typeof d=="string"&&!Number.isNaN(Number(d))||typeof d=="number"){const m=Number(d);u=Ve(o,m)}else u=d;return ae({margin:`calc(0px - (${u} / 2))`,"& > *":{margin:`calc(${u} / 2)`}},t.maxColumnHeight&&{height:typeof u=="number"?Math.ceil(t.maxColumnHeight+ge(u)):`calc(${t.maxColumnHeight}px + ${u})`})}));const c=At({values:t.columns,breakpoints:a.breakpoints.values});return n=Ge(n,Ke({theme:a},c,d=>{const m=`${(100/Number(d)).toFixed(2)}%`,p=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?Ve(o,Number(s)):"0px";return{"& > *":{width:`calc(${m} - ${p})`}}})),typeof s=="object"&&(n=Ge(n,Ke({theme:a},s,(d,u)=>{if(u){const m=Number(d),p=Object.keys(c).pop(),C=Ve(o,m);return{"& > *":{width:`calc(${`${(100/(typeof c=="object"?c[u]||c[p]:c)).toFixed(2)}%`} - ${C})`}}}return null}))),n},ml=Te("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(pl),fl=l.forwardRef(function(a,n){const r=Xt({props:a,name:"MuiMasonry"}),{children:s,className:o,component:i="div",columns:c=4,spacing:f=1,defaultColumns:d,defaultHeight:u,defaultSpacing:m}=r,p=Jt(r,dl),C=l.useRef(),[x,y]=l.useState(),w=!x&&u&&d!==void 0&&m!==void 0,[U,L]=l.useState(w?d-1:0),M=ae({},r,{spacing:f,columns:c,maxColumnHeight:x,defaultColumns:d,defaultHeight:u,defaultSpacing:m,isSSR:w}),O=hl(M),T=_=>{if(!C.current||!_||_.length===0)return;const b=C.current,D=C.current.firstChild,R=b.clientWidth,Z=D.clientWidth;if(R===0||Z===0)return;const G=window.getComputedStyle(D),Y=ge(G.marginLeft),ee=ge(G.marginRight),S=Math.round(R/(Z+Y+ee)),B=new Array(S).fill(0);let K=!1;b.childNodes.forEach(q=>{if(q.nodeType!==Node.ELEMENT_NODE||q.dataset.class==="line-break"||K)return;const V=window.getComputedStyle(q),he=ge(V.marginTop),pe=ge(V.marginBottom),$e=ge(V.height)?Math.ceil(ge(V.height))+he+pe:0;if($e===0){K=!0;return}for(let le=0;le<q.childNodes.length;le+=1){const me=q.childNodes[le];if(me.tagName==="IMG"&&me.clientHeight===0){K=!0;break}}if(!K){const le=B.indexOf(Math.min(...B));B[le]+=$e;const me=le+1;q.style.order=me}}),K||on.flushSync(()=>{y(Math.max(...B)),L(S>0?S-1:0)})};an(()=>{if(typeof ResizeObserver>"u")return;let _;const b=new ResizeObserver(()=>{_=requestAnimationFrame(T)});return C.current&&C.current.childNodes.forEach(D=>{b.observe(D)}),()=>{_&&window.cancelAnimationFrame(_),b&&b.disconnect()}},[c,f,s]);const z=nn(n,C),W=new Array(U).fill("").map((_,b)=>H.jsx("span",{"data-class":"line-break",style:ae({},ul,{order:b+1})},b));return H.jsxs(ml,ae({as:i,className:Ze(O.root,o),ref:z,ownerState:M},p,{children:[s,W]}))}),gl=fl,Cl=l.createContext(void 0),ye={title:e(Fe,{color:"warning",children:"ERROR"})},xl={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(Zt(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function bl(t,a,n){if(!a)return ye;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[r,s]=a.split(":");if(r==="artifact"){const o=Ra(s);return o?{title:o.name,icon:ur(s)}:ye}else if(r==="weapon"){const o=vt(s);if(!o)return ye;const i=t.get(ne.weapon.asc).value;return{title:o.name,icon:da(s,i>=2)}}}else{const r=t.get(ne.charKey).value;if(!r)return ye;const s=Q(r,n.gender),o=["normal","charged","plunging"].includes(a)?"auto":a,i=s==null?void 0:s.getTalentOfKey(o);if(!i)return ye;const c=xl[a];return{icon:i.img,title:i.name,action:c}}return ye}function yl(t){const a=t.getDisplay(),n=Object.entries(a),r=n.filter(([d])=>d==="basic"),s=n.filter(([d])=>d==="reaction"),o=n.filter(([d])=>d==="custom"),i=n.filter(([d])=>d.startsWith("weapon")),c=n.filter(([d])=>d.startsWith("artifact")),f=n.filter(([d])=>d!=="basic"&&d!=="reaction"&&!d.startsWith("weapon")&&!d.startsWith("artifact")&&d!=="custom");return[...r,...s,...o,...f,...i,...c]}function vl(){const{data:t}=l.useContext(F),a=l.useMemo(()=>yl(t).filter(([,n])=>Object.values(n).some(r=>!r.isEmpty)),[t]);return e(g,{sx:{mr:-1,mb:-1},children:e(gl,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:a.map(([n,r])=>e(wl,{displayNs:r,sectionKey:n},n))})})}function wl({displayNs:t,sectionKey:a}){const n=l.useContext(Cl),{data:r,oldData:s}=l.useContext(F),o=k(),i=l.useMemo(()=>bl(r,a,o),[o,r,a]),c=l.useMemo(()=>Ne(t,(m,p)=>On(["display",a,p])),[t,a]);if(!i)return e(re,{});const{title:f,icon:d,action:u}=i;return h(re,{children:[e(Vn,{avatar:d&&e(Re,{size:2,src:d}),title:f,action:u&&e(E,{children:u})}),e(Ce,{}),e(Xn,{sx:{m:0},children:Object.entries(t).map(([m,p])=>e(ha,{node:p,oldValue:s?s.get(c[m]).value:void 0,component:Yn,emphasize:JSON.stringify(n)===JSON.stringify([a,m])},m))})]})}function _l({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=re,weaponTypeKey:s="sword"}){const o=pr(t),i=(o==null?void 0:o.key)&&vt(o.key);return!o||!i?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Le.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e(Rl,{weapon:o,weaponSheet:i,onClick:n,showLocation:a,BGComponent:r})}function Rl({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:s=re}){const o=k(),{refinement:i,location:c}=t,f=l.useCallback(u=>e(Ae,{sx:{height:"100%"},onClick:r,children:u}),[r]),d=l.useMemo(()=>a&&t&&zn([a.data,ua(t)]),[a,t]);return e(s,{sx:{height:"100%"},children:e(yt,{condition:!!r,wrapper:f,children:h(g,{display:"flex",height:"100%",alignItems:"stretch",children:[h(g,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(Tn,{sheet:a,children:e(g,{component:"img",src:da(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),h(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(de,{size:"small",label:e("strong",{children:La.getLevelString(t)}),color:"primary"}),n&&e(de,{size:"small",label:c?e(Aa,{characterKey:o.chars.LocationToCharacterKey(c)}):e(ca,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(de,{size:"small",color:"info",label:h("strong",{children:["R",i]})})})]}),h(g,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(Ht,{node:d.get(ne.weapon.main)}),e(Ht,{node:d.get(ne.weapon.sub)})]})]})})})}function Ht({node:t}){return t.info.name?e(g,{display:"flex",gap:1,alignContent:"center",children:h(v,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(je,{placement:"top",title:e(v,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:Wn(t)})]})}):null}function Ll({artifacts:t,currentlyEquipped:a=!1}){const n=l.useMemo(()=>t.filter(r=>r).reduce((r,s)=>(r[s.setKey]?r[s.setKey].push(s.slotKey):r[s.setKey]=[s.slotKey],r),{}),[t]);return e(be,{children:Object.entries(n).sort(([r,s],[o,i])=>i.length-s.length).map(([r,s])=>e(Sl,{setKey:r,currentlyEquipped:a,slotarr:s},r))})}function Sl({setKey:t,currentlyEquipped:a=!1,slotarr:n}){const r=Ra(t),s=n.length,o=Object.keys(r.setEffects).map(i=>parseInt(i)).filter(i=>i<=s);return e(g,{children:e(ar,{artifactSheet:r,numInSet:s,children:e(E,{sx:{height:"100%"},color:a?"success":"primary",children:h(v,{children:[n.map(i=>e(mr,{slotKey:i,iconProps:te},i))," ",r.name??"",o.map((i,c)=>e(E,{sx:{ml:.5},color:"success",children:i},""+i+c))]})})})})}var Ut={},$l=_e;Object.defineProperty(Ut,"__esModule",{value:!0});var st=Ut.default=void 0,kl=$l(we()),Ul=H,Tl=(0,kl.default)((0,Ul.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");st=Ut.default=Tl;var Tt={},Ml=_e;Object.defineProperty(Tt,"__esModule",{value:!0});var it=Tt.default=void 0,Dl=Ml(we()),jl=H,Al=(0,Dl.default)((0,jl.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");it=Tt.default=Al;function Bl({setKey:t,buttonGroupSx:a}){const{t:n}=N("sheet"),{teamChar:{optConfigId:r}}=l.useContext(ie),{artSetExclusion:s}=Be(r),o=(s==null?void 0:s[t])??[],i=o.includes(2),c=o.includes(4),f=k();return h(Kn,{sx:a,fullWidth:!0,children:[e(A,{startIcon:i?e(Bt,{}):e(It,{}),onClick:()=>f.optConfigs.set(r,{artSetExclusion:Ot(s,t,2)}),color:i?"secondary":"success",endIcon:i?e(st,{}):e(it,{}),children:n`2set`}),e(A,{startIcon:c?e(Bt,{}):e(It,{}),onClick:()=>f.optConfigs.set(r,{artSetExclusion:Ot(s,t,4)}),color:c?"secondary":"success",endIcon:c?e(st,{}):e(it,{}),children:n`4set`})]})}function Il({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r}){const{teamChar:{optConfigId:s,buildType:o,buildId:i}}=l.useContext(ie),{character:{key:c,equippedArtifacts:f,equippedWeapon:d}}=l.useContext(I),{mainStatAssumptionLevel:u,allowLocationsState:m}=Be(s)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},p=k(),{data:C,oldData:x}=l.useContext(F),y=l.useMemo(()=>{var S;return{oldId:(S=x==null?void 0:x.get(j.weapon.id))==null?void 0:S.value,newId:C.get(j.weapon.id).value??""}},[C,x]),[w,U,L]=ue(!1),M=l.useMemo(()=>ke(ce,S=>{var B;return{oldId:(B=x==null?void 0:x.get(j.art[S].id))==null?void 0:B.value,newId:C.get(j.art[S].id).value??""}}),[C,x]),[O,T]=l.useState(),z=l.useCallback(()=>T(void 0),[T]),W=i&&o==="real",_=l.useCallback(()=>{const S=W?"Do you want to equip this build to the currently active build?":"Do you want to equip this build to this character?";if(!window.confirm(S))return;if(W){p.builds.set(i,{weaponId:C.get(j.weapon.id).value,artifactIds:ke(ce,q=>{var V;return(V=C.get(j.art[q].id).value)==null?void 0:V.toString()})});return}const B=p.chars.get(c);if(!B)return;ce.forEach(q=>{var he;const V=(he=C.get(j.art[q].id).value)==null?void 0:he.toString();if(V)p.arts.set(V,{location:xe(c)});else{const pe=B.equippedArtifacts[q];pe&&p.arts.get(pe)&&p.arts.set(pe,{location:""})}});const K=C.get(j.weapon.id).value;K&&p.weapons.set(K,{location:xe(c)})},[c,W,i,C,p]),b=l.useMemo(()=>Object.fromEntries(ce.map(S=>{var B;return[S,(B=C.get(j.art[S].id).value)==null?void 0:B.toString()]})),[C]),D=l.useMemo(()=>b&&Object.values(b).map(S=>p.arts.get(S)).filter(S=>S),[b,p.arts]),R=l.useMemo(()=>o==="tc"?ke(ce,()=>"tc"):o==="equipped"?f:o==="real"?p.builds.get(i).artifactIds:ke(ce,()=>""),[o,i,p,f]),Z=l.useMemo(()=>o==="tc"?"tc":o==="equipped"?d:o==="real"?p.builds.get(i).weaponId??"":"",[o,i,p,d]),G=l.useMemo(()=>e($,{item:!0,xs:1,children:e(_l,{showLocation:!0,weaponId:C.get(j.weapon.id).value,onClick:U})}),[C,U]),Y=l.useMemo(()=>ce.map(S=>e($,{item:!0,xs:1,children:e(il,{showLocation:!0,slotKey:S,artifactId:b[S],mainStatAssumptionLevel:u,onClick:()=>{const B=M[S].oldId,K=M[S].newId;T({oldId:B!==K?B:void 0,newId:K})}})},S)),[T,M,u,b]),ee=ce.every(S=>b[S]===R[S])&&C.get(j.weapon.id).value===Z;return e(ct,{children:h(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:600}),children:[y&&e(Ol,{newOld:y,showWeapon:w,onClose:L}),O&&e(zl,{newOld:O,mainStatAssumptionLevel:u,onClose:z,allowLocationsState:m}),h(P,{children:[h(g,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[t!==void 0&&e(E,{color:"info",children:e(v,{children:h("strong",{children:[t,ee?" (Equipped)":""]})})}),e(Ll,{artifacts:D,currentlyEquipped:ee}),e(g,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(A,{size:"small",color:"success",onClick:_,disabled:r||ee,startIcon:e(Br,{}),children:"Equip Build"}),a]}),h($,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[G,Y]}),e(vl,{})]})]})})}function Ol({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const s=k(),o=a!==t,i=l.useCallback(c=>s.weapons.remove(c),[s]);return e(Me,{open:n,onClose:r,containerProps:{maxWidth:o?"md":"xs"},children:e(re,{children:h(P,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[o&&h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(oe,{bgt:"light",sx:{p:1},children:e(v,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(v,{variant:"h6",textAlign:"center",color:"info",children:e(E,{children:"TC Weapon"})}):e(Oe,{weaponId:a,onDelete:i})]}),o&&e(g,{display:"flex",flexGrow:1}),o&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Sa,{sx:{fontSize:40}})}),o&&e(g,{display:"flex",flexGrow:1}),h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(oe,{bgt:"light",sx:{p:1},children:e(v,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(Oe,{weaponId:t,onDelete:i})]})]})})})}function zl({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:s}){var m;const o=k(),{character:{key:i}}=l.useContext(I),c=((m=o.arts.get(t))==null?void 0:m.location)??"",f=rt(t),d=rt(a),u=l.useCallback(p=>o.arts.remove(p),[o]);return e(Me,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(re,{children:h(P,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(oe,{bgt:"light",sx:{p:1},children:e(v,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(v,{variant:"h6",textAlign:"center",color:"info",children:e(E,{children:"TC Artifact"})}):e(Ie,{artifactId:a,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:d==null?void 0:d.slotKey}}),a!=="tc"&&e(Gt,{id:a})]}),a&&e(g,{display:"flex",flexGrow:1}),a&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Sa,{sx:{fontSize:40}})}),a&&e(g,{display:"flex",flexGrow:1}),h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(oe,{bgt:"light",sx:{p:1},children:e(v,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(Ie,{artifactId:t,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:f==null?void 0:f.slotKey}}),f&&e(Gt,{id:t}),c&&c!==xe(i)&&s!=="all"&&e(Wl,{locationKey:c}),f&&sn.includes(f.setKey)&&e(Bl,{setKey:f.setKey})]})]})})})}function Gt({id:t}){const{t:a}=N("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(ie),r=k(),{artExclusion:s}=Be(n),o=s.includes(t),i=l.useCallback(()=>r.optConfigs.set(n,{artExclusion:ea(s,t)}),[t,s,r,n]);return n?e(je,{title:e(g,{children:e(v,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(A,{onClick:i,color:o?"secondary":"success",size:"small",startIcon:o?e(wa,{}):e(_a,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Wl({locationKey:t}){const{t:a}=N("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(ie),r=k(),s=Q(r.chars.LocationToCharacterKey(t)),{excludedLocations:o}=Be(n)??{excludedLocations:[]},i=o.includes(t),c=l.useCallback(()=>r.optConfigs.set(n,{excludedLocations:ea(o,t)}),[t,o,r,n]);return n?e(A,{onClick:c,color:i?"secondary":"success",size:"small",startIcon:i?e(wa,{}):e(_a,{}),children:h("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}function Nl(t=0,a,n){const{teamId:r,teamCharId:s}=l.useContext(ie);return El(r,s,t,a,n)}function El(t,a,n=0,r,s){const o=k(),[i,c]=De(),f=l.useDeferredValue(i),{gender:d}=se(),{teamCharIds:u}=Mn(t)??{teamCharIds:[]},m=l.useMemo(()=>f&&Pl(o,t,d,a,n,r,s),[f,d,t,o,n,a,r,s]);return l.useEffect(()=>t?o.teams.follow(t,c):void 0,[t,c,o]),l.useEffect(()=>{if(!i)return()=>{};const p=u.map(C=>{const x=o.teamChars.follow(C,c),y=o.teamChars.followChar(C,c),w=o.teamChars.followBuild(C,c);return()=>{x(),y(),w()}});return()=>{p.forEach(C=>C())}},[i,o,u,c]),m}function Pl(t,a,n,r,s=0,o,i){if(!a)return;const c=t.teams.getActiveTeamChar(a);if(!c)return;const{teamData:f,teamBundle:d}=Fl(t,a,r,s,o,i)??{};if(!f||!d)return;const u=Nn(f,n,c.key);return ln(u,(p,C)=>{const{data:x,...y}=d[C];return{...p,...y}})}function Fl(t,a,n,r=0,s,o){if(!a)return;const i=t.teams.get(a);if(!i)return;const{teamCharIds:c,enemyOverride:f}=i,d=c.map(p=>{if(!p)return;const C=t.teamChars.get(p);if(!C)return;const{key:x,buildType:y,buildTcId:w,infusionAura:U,customMultiTargets:L,conditional:M,bonusStats:O,hitMode:T,reaction:z}=C,W=t.chars.get(x);if(!W)return;const{key:_,level:b,constellation:D,ascension:R,talent:Z}=W,G=p===n,Y=(()=>o&&G?o:t.teamChars.getLoadoutWeapon(p))(),ee=(()=>s&&G?s:y==="tc"&&w?Dn(t.buildTcs.get(w)):Object.values(t.teamChars.getLoadoutArtifacts(p)).filter(B=>B))(),S=(()=>r&&G?r:0)();return ql(t,G,S,{key:_,level:b,constellation:D,ascension:R,talent:Z,infusionAura:U,customMultiTargets:L,conditional:M,bonusStats:O,enemyOverride:f,hitMode:T,reaction:z},Y,ee)}).filter(p=>p),u=Object.fromEntries(d.filter(p=>p).map(p=>[p.character.key,p]));return{teamData:Ne(u,({data:p})=>p),teamBundle:u}}function ql(t,a=!1,n,r,s,o){const i=t.chars.get(r.key),c=Q(r.key,t.gender);if(!c)return;const f=vt(s.key);if(!f)return;const d=La.getAllDataOfType(c.weaponTypeKey),u=a?(()=>{const{display:x,...y}=f.data;return Nt([y,d])})():f.data,m=Nt([c.data,u,hr]),C=[...Array.isArray(o)?o.map(x=>En(x,n)):[o],Pn(r,a?m:void 0),ua(s),m,Fn,jn];return{character:i,weapon:s,characterSheet:c,weaponSheet:f,data:C}}const Qe={mx:.25,px:.25};function Hl({reaction:t}){const{t:a}=N("sheet_gen"),n=t==="spread"?"dendro":"electro";return h(g,{display:"flex",alignItems:"center",children:[e(Fe,{color:t,children:a(`reaction.${t}`)}),e(E,{sx:Qe,color:"dendro",children:e(cn,{...te})}),"+",e(E,{sx:Qe,color:"electro",children:e(ta,{...te})}),"+",e(E,{sx:Qe,color:n,children:e(ft,{ele:n,iconProps:te})})]})}const Kt={"":e("span",{children:"No Team Melee Infusion"}),pyro:h("span",{children:[e(dn,{...te})," ",e(E,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:h("span",{children:[e(un,{...te})," ",e(E,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:h("span",{children:[e(hn,{...te})," ",e(E,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:h("span",{children:[e(ta,{...te})," ",e(E,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Qc(t){const{teamCharId:a,teamChar:{infusionAura:n}}=l.useContext(ie),{character:{key:r}}=l.useContext(I),s=k();return pn(r)?e(Cr,{title:Kt[n||""],color:n||"secondary",disableElevation:!0,disabled:!a,...t,children:Object.entries(Kt).map(([o,i])=>e($a,{sx:o?{color:`${o}.main`}:void 0,selected:o===n,disabled:o===n,onClick:()=>s.teamChars.set(a,{infusionAura:o}),children:i},o))}):null}function Gl(t){const{t:a}=N("page_character"),{teamCharId:n,teamChar:{reaction:r}}=l.useContext(ie),s=k(),{data:o}=l.useContext(F),i=o.get(j.charEle).value,c=o.get(qn).value,f=[...new Set([...Et[i]??[],...Et[c]??[],...Pt[i]??[],...Pt[c]??[]])];return h(qe,{exclusive:!0,baseColor:"secondary",value:r,onChange:(d,u)=>s.teamChars.set(n,{reaction:u}),disabled:!n,...t,children:[e(ve,{value:"",disabled:!r,children:a`noReaction`}),f.map(d=>e(ve,{value:d,disabled:r===d,children:[...mn].includes(d)?e(Jn,{reaction:d}):e(Hl,{reaction:d})},d))]})}function Kl(t){const{t:a}=N("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=l.useContext(ie),s=k();return e(qe,{exclusive:!0,baseColor:"secondary",value:r,onChange:(o,i)=>s.teamChars.set(n,{hitMode:i}),disabled:!n,...t,children:fn.map(o=>e(ve,{value:o,disabled:r===o,children:a(`hitmode.${o}`)},o))})}function Ia({artId:t,weaponId:a}){const{t:n}=N("page_character"),[r,s,o]=ue(!1);return h(be,{children:[e(aa,{open:r,onClose:o,containerProps:{maxWidth:"xl"},children:e(Vl,{artId:t,weaponId:a,onHide:o})}),e(Ee,{title:e(v,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(nr,{})})})]})}function Vl(t){var r;const a=l.useContext(ie),n=l.useContext(I);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(Yl,{...t}):n!=null&&n.character?e(Xl,{...t}):null}function Yl({artId:t,weaponId:a,onHide:n}){const r=k(),{character:{key:s}}=l.useContext(I),{teamCharId:o,teamChar:{optConfigId:i}}=l.useContext(ie),{mainStatAssumptionLevel:c}=Be(i),{data:f}=l.useContext(F),d=l.useMemo(()=>{const p=r.arts.get(t??""),C=r.teamChars.getLoadoutArtifacts(o),x=Ne(C,(y,w)=>w===(p==null?void 0:p.slotKey)?p:y);return Object.values(x).filter(y=>y)},[r,o,t]),u=Nl(c,d,a?r.weapons.get(a):void 0),m=l.useMemo(()=>u&&{data:u[s].target,teamData:u,oldData:f},[s,u,f]);return m?e(Oa,{dataProviderValue:m,onHide:n}):null}function Xl({artId:t,weaponId:a,onHide:n}){const r=k(),{character:{key:s,equippedArtifacts:o}}=l.useContext(I),{data:i}=l.useContext(F),c=l.useMemo(()=>{const u=r.arts.get(t??""),m=Ne(o,(p,C)=>C===(u==null?void 0:u.slotKey)?u:r.arts.get(p));return Object.values(m).filter(p=>p)},[r,o,t]),f=ht(s,0,c,a?r.weapons.get(a):void 0),d=l.useMemo(()=>f&&{data:f[s].target,teamData:f,oldData:i},[s,f,i]);if(d)return e(Oa,{dataProviderValue:d,onHide:n})}function Oa({dataProviderValue:t,onHide:a}){return e(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:600}),children:t&&e(F.Provider,{value:t,children:e(Il,{extraButtonsLeft:h(be,{children:[e(Kl,{size:"small"}),e(Gl,{size:"small"})]}),extraButtonsRight:e(A,{size:"small",color:"error",onClick:a,children:e(ja,{})})})})})}const Jl={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Ql=l.lazy(()=>na(()=>import("./ArtifactEditor-1748cade.js"),["./ArtifactEditor-1748cade.js","./index-4fe13316.js","./index-f475e25c.css","./ArtifactRarityDropdown-7c424a61.js","./index-557c87a1.js","./index-0e875223.js","./ColoredText-0ba1230d.js","./SqBadge-948281f3.js","./ConditionalWrapper-c34c2b77.js","./StarDisplay-dd42b94c.js","./DropdownButton-855ce726.js","./ArtifactStatKeyDisplay-430a43dd.js","./Artifact-bb96d181.js","./InfoTooltip-87397f29.js","./BootstrapTooltip-a78834ae.js","./LockOpen-94417c72.js","./SlotIcon-b78007bd.js","./CloseButton-5cb779a0.js","./ArtifactSort-d82875db.js","./CardActionArea-d58df195.js","./TextButton-0743d561.js","./CardHeader-f4b9a437.js","./ChevronRight-64c374d6.js"],import.meta.url)),Zl=l.lazy(()=>na(()=>import("./ArtifactFilterDisplay-f4a2fee7.js").then(t=>t.b),["./ArtifactFilterDisplay-f4a2fee7.js","./index-4fe13316.js","./index-f475e25c.css","./LockOpen-94417c72.js","./useDisplayArtifact-43bb1a18.js","./SolidToggleButtonGroup-0732de76.js","./totalUtils-fb4ba5bb.js","./BootstrapTooltip-a78834ae.js","./StarDisplay-dd42b94c.js","./DropdownButton-855ce726.js","./ColoredText-0ba1230d.js","./index-0e875223.js","./SqBadge-948281f3.js","./ArtifactStatKeyDisplay-430a43dd.js","./Artifact-bb96d181.js","./ConditionalWrapper-c34c2b77.js","./index-557c87a1.js","./SlotIcon-b78007bd.js"],import.meta.url));function za({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:s}=N(["page_character","artifact"]),o=k(),i=l.useCallback(_=>{t(_),r()},[t,r]),c=l.useCallback((_,b)=>({..._,...b,slotKeys:[a]}),[a]),[f,d,u]=ue(!1),[m,p]=l.useReducer(c,{...rr(),slotKeys:[a]}),[C,x]=De();l.useEffect(()=>o.arts.followAny(x),[o,x]);const y=fa(),w=l.useMemo(()=>or(),[]),U=o.arts.values.filter(_=>_.slotKey===m.slotKeys[0]).length,L=l.useMemo(()=>{const _=xt(m,w);return C&&o.arts.values.filter(_).map(b=>b.id)},[C,o,w,m]),{numShow:M,setTriggerElement:O}=ga(Jl[y],L.length),T=l.useMemo(()=>L.slice(0,M),[L,M]),z=L.length!==U?`${L.length}/${U}`:`${U}`,W={numShowing:T.length,total:z,t:s,namespace:"artifact"};return e(Me,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:h(re,{children:[e(l.Suspense,{fallback:!1,children:e(Ql,{artifactIdToEdit:f?"new":"",cancelEdit:u,allowUpload:!0,allowEmpty:!0,fixedSlotKey:m.slotKeys[0]})}),h(P,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h(v,{variant:"h6",children:[a?e(Re,{src:Le.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(Pe,{onClick:r})]}),e(Ce,{}),e(P,{children:e(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:200}),children:e(Zl,{filterOption:m,filterOptionDispatch:p,filteredIds:L,disableSlotFilter:!0})})}),e(Ce,{}),h(P,{children:[e(g,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Ca,{showingTextProps:W})}),e(A,{fullWidth:!0,onClick:d,color:"info",startIcon:e(va,{}),children:s("artifact:addNew")}),e(g,{mt:1,children:e(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:300}),children:e($,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:T.map(_=>e($,{item:!0,xs:1,children:e(Ie,{artifactId:_,extraButtons:e(Ia,{artId:_}),onClick:i})},_))})})}),L.length!==T.length&&e(J,{ref:_=>{_&&O(_)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const ec={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},tc=wt([...ra]);function Mt({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:s}=N(["page_character","page_weapon","weaponNames_gen"]),o=k(),[i,c]=l.useState(!1),f=l.useCallback(R=>{t(R),r()},[t,r]),[d,u]=l.useState(""),m=l.useCallback(R=>{u(o.weapons.new(gn(R)))},[o,u]),p=l.useCallback(()=>u(""),[]),[C,x]=De();l.useEffect(()=>o.weapons.followAny(x),[x,o]);const y=fa(),[w,U]=l.useState([5,4,3]),[L,M]=l.useState(""),O=l.useDeferredValue(L),T=l.useMemo(()=>(C&&o.weapons.values.filter(xt({weaponType:a,rarity:w,name:O},sr())).sort(xa(lr.level??[],!1,ir())).map(R=>R.id))??[],[C,o,w,a,O]),{numShow:z,setTriggerElement:W}=ga(ec[y],T.length),_=l.useMemo(()=>T.slice(0,z),[T,z]),b=`${T.length}`,D={numShowing:_.length,total:b,t:s,namespace:"page_weapon"};return e(Me,{open:n,onClose:r,children:h(re,{children:[e(l.Suspense,{fallback:!1,children:e(br,{show:i,onHide:()=>c(!1),onSelect:m,weaponTypeFilter:a})}),e(l.Suspense,{fallback:!1,children:e(pa,{weaponId:d,footer:!0,onClose:p})}),e(P,{sx:{py:1},children:h($,{container:!0,children:[e($,{item:!0,flexGrow:1,children:h(v,{variant:"h6",children:[a?e(Re,{src:Le.weaponTypes[a]}):null," ",s`page_character:tabEquip.swapWeapon`]})}),e($,{item:!0,children:e(Pe,{onClick:r})})]})}),e(Ce,{}),h(P,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h($,{container:!0,spacing:1,children:[e($,{item:!0,children:e(qe,{sx:{height:"100%"},value:w,size:"small",children:ra.map(R=>e(ve,{value:R,onClick:()=>U(tc(w,R)),children:h(g,{display:"flex",children:[e("strong",{children:R}),e(ba,{})]})},R))})}),e($,{item:!0,flexGrow:1,children:e(ya,{autoFocus:!0,size:"small",value:L,onChange:R=>M(R.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(g,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ca,{showingTextProps:D})}),e(A,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:e(va,{}),children:s("page_weapon:addWeapon")}),e($,{container:!0,spacing:1,children:_.map(R=>e($,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(Oe,{weaponId:R,onClick:f,extraButtons:e(Ia,{weaponId:R})})},R))}),T.length!==_.length&&e(J,{ref:R=>{R&&W(R)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})}const ac={xs:1,sm:2,md:3,lg:3,xl:3};function nc({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:r,setArtifact:s}){const o=k(),[i,c]=l.useState("");l.useEffect(()=>{a&&i&&i!==a&&c(a)},[i,a]);const f=l.useCallback(()=>a&&c(a),[a]),d=l.useCallback(()=>c(""),[]);return h(g,{children:[e(pa,{weaponId:i,footer:!0,onClose:d,extraButtons:e(lc,{weaponTypeKey:t,onChangeId:r})}),h($,{item:!0,columns:ac,container:!0,spacing:1,children:[e($,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&o.weapons.keys.includes(a)?e(Oe,{weaponId:a,onEdit:f,extraButtons:e(ic,{weaponTypeKey:t,onChangeId:r})}):e(rc,{weaponTypeKey:t,onChangeId:r})}),!!n&&Object.entries(n).map(([u,m])=>e($,{item:!0,xs:1,children:o.arts.keys.includes(m)?e(Ie,{artifactId:m,extraButtons:e(sc,{slotKey:u,onChangeId:p=>s(u,p)}),editorProps:{}}):e(oc,{slotKey:u,onChangeId:p=>s(u,p)})},m||u))]})]})}function rc({weaponTypeKey:t,onChangeId:a}){const[n,r,s]=ue();return h(oe,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(P,{children:h(v,{children:[e(Re,{src:Le.weaponTypes[t]})," ",t]})}),e(Ce,{}),h(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(Mt,{weaponTypeKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Se,{sx:{height:100,width:100}})})]})]})}function oc({slotKey:t,onChangeId:a}){const[n,r,s]=ue(),{t:o}=N("artifact");return h(oe,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(P,{children:h(v,{children:[e(Ur,{iconProps:te,slotKey:t})," ",o(`slotName.${t}`)]})}),e(Ce,{}),h(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(za,{slotKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Se,{sx:{height:100,width:100}})})]})]})}function sc({slotKey:t,onChangeId:a}){const{t:n}=N("page_character"),[r,s,o]=ue();return h(be,{children:[e(Ee,{title:e(v,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(Se,{})})}),e(za,{slotKey:t,show:r,onClose:o,onChangeId:a})]})}function ic({weaponTypeKey:t,onChangeId:a}){const{t:n}=N("page_character"),[r,s,o]=ue();return h(be,{children:[e(Ee,{title:e(v,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(Se,{})})}),e(Mt,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function lc({weaponTypeKey:t,onChangeId:a}){const{t:n}=N("page_character"),[r,s,o]=ue();return h(be,{children:[e(A,{color:"info",onClick:s,startIcon:e(Se,{}),children:n`tabEquip.swapWeapon`}),e(Mt,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function cc({talentKey:t,dropDownButtonProps:a}){const{t:n}=N("sheet_gen"),{character:{talent:r,key:s}}=l.useContext(I),o=k(),{data:i}=l.useContext(F),c=i.get(ne.total[`${t}Boost`]).value,f=i.get(ne.total[t]).value,d=i.get(ne.asc).value;return e(Ar,{fullWidth:!0,title:n("talentLvl",{level:f}),color:c?"info":"primary",...a,children:Cn(1,xn[d]).map(u=>e($a,{selected:r[t]===u,disabled:r[t]===u,onClick:()=>o.chars.set(s,m=>{m.talent[t]=u}),children:n("talentLvl",{level:u+c})},u))})}function dc(){const{t}=N("ui"),a=k(),{character:n}=l.useContext(I),{key:r}=n,{gender:s}=se(),o=l.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return r.startsWith("Traveler")?h(A,{onClick:o,startIcon:s==="F"?e(Ir,{}):e(Or,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function uc({onClose:t}){const{t:a}=N(["page_character","sillyWisher_charNames","charNames_gen"]),n=oa(),r=k(),{character:s,character:{key:o},characterSheet:i}=l.useContext(I),{gender:c}=se(),{silly:f}=l.useContext(We),d=l.useCallback(async()=>{let u=Q(o,c).name;typeof u=="object"&&(u=a(`${f?"sillyWisher_charNames":"charNames_gen"}:${Ue(o,c)}`)),window.confirm(a("removeCharacter",{value:u}))&&(r.chars.remove(o),n("/characters"))},[r,n,o,c,f,a]);return h(g,{display:"flex",flexDirection:"column",gap:1,children:[h(g,{display:"flex",gap:1,children:[e(dc,{}),e(A,{color:"error",onClick:()=>d(),startIcon:e(sa,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(Pe,{onClick:t})]}),e(g,{children:h($,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e($,{item:!0,xs:8,sm:5,md:4,lg:3,children:h(oe,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Yi,{}),e(g,{sx:{px:1},children:e(Qn,{level:s.level,ascension:s.ascension,setBoth:u=>r.chars.set(o,u)})}),e(g,{sx:{px:2},children:e(ka,{})}),e(v,{sx:{textAlign:"center",pb:-1},variant:"h6",children:i.constellationName}),e(Vi,{})]})}),h($,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(g,{children:e($,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(u=>{var m;return e($,{item:!0,xs:1,children:e(cc,{talentKey:u,dropDownButtonProps:{startIcon:e(Re,{src:(m=i.getTalentOfKey(u))==null?void 0:m.img,size:1.75,sideMargin:!0})}},u)})})})}),e(hc,{}),e(mc,{})]})]})})]})}function hc(){const{character:{key:t}}=l.useContext(I),{data:a}=l.useContext(F),n=k(),r=bn(t).weaponType,s=a.get(j.weapon.id).value,o=l.useMemo(()=>ke(ce,i=>a.get(j.art[i].id).value),[a]);return e(g,{children:e(nc,{weaponTypeKey:r,weaponId:s,artifactIds:o,setWeapon:i=>{n.weapons.set(i,{location:xe(t)})},setArtifact:(i,c)=>{n.arts.set(c,{location:xe(t)})}})})}const pc={xs:1,sm:2,md:3,lg:3,xl:3};function mc(){const t=oa(),{character:{key:a}}=l.useContext(I),n=k(),{gender:r}=se(),[s,o]=De(),i=l.useMemo(()=>{const m={};return n.teamChars.entries.map(([p,C])=>{C.key===a&&(m[p]||(m[p]=[]))}),n.teams.entries.forEach(([p,C])=>{const x=C.teamCharIds.find(y=>{var w;return((w=n.teamChars.get(y))==null?void 0:w.key)===a});x&&m[x].push(p)}),s&&m},[s,a,n]);l.useEffect(()=>n.teams.followAny(()=>o()),[n,o]),l.useEffect(()=>n.teamChars.followAny(()=>o()),[n,o]);const c=m=>{const p=n.teams.new();n.teams.set(p,C=>{C.teamCharIds[0]=m}),t(`/teams/${p}`,{state:{openSetting:!0}})},f=()=>{const m=n.teams.new(),p=n.teamChars.new(a);n.teams.set(m,C=>{C.teamCharIds[0]=p}),t(`/teams/${m}`,{state:{openSetting:!0}})},d=m=>{window.confirm("The loadouts and data (such as multi-opts) on this character will be deleted.")&&n.teamChars.remove(m)},u=m=>{n.teamChars.duplicate(m)};return h(g,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h(v,{variant:"h6",children:["Team Loadouts with"," ",e(yn,{characterKey:a,gender:r})]}),Object.entries(i).map(([m,p])=>{const{name:C,description:x,buildIds:y,buildTcIds:w}=n.teamChars.get(m);return h(oe,{bgt:"light",children:[e(P,{children:h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(v,{children:C}),e(vn,{title:e(v,{children:x}),children:e(Gn,{})}),h(zt,{color:y.length?"primary":"secondary",children:[y.length," Builds"]}),h(zt,{color:w.length?"primary":"secondary",children:[w.length," TC Builds"]}),e(A,{color:"info",onClick:()=>u(m),sx:{ml:"auto"},children:e(Ua,{})}),e(A,{color:"error",onClick:()=>d(m),children:e(sa,{})})]})}),e(Ce,{}),e(P,{children:h($,{container:!0,columns:pc,spacing:2,children:[p.map(U=>e($,{item:!0,xs:1,children:e(An,{teamId:U,onClick:L=>t(`/teams/${U}${L?`/${L}`:""}`)})},U)),e($,{item:!0,xs:1,children:e(A,{fullWidth:!0,sx:{height:"100%"},onClick:()=>c(m),color:"info",startIcon:e(Wt,{}),children:"Add new Team"})})]})})]},m)}),e(A,{fullWidth:!0,onClick:()=>f(),color:"info",startIcon:e(Wt,{}),children:"Add new Loadout+Team"}),e(oe,{bgt:"light"})]})}function Zc({characterKey:t,onClose:a}){return e(aa,{open:!!t,onClose:a,children:e(l.Suspense,{fallback:e(J,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(fc,{characterKey:t,onClose:a},t)})})}function fc({characterKey:t,onClose:a}){const n=pt(t),{gender:r}=se(),s=Q(t,r),o=ht(t),{target:i}=(o==null?void 0:o[t])??{},c=Lt((n==null?void 0:n.key)??""),f=l.useMemo(()=>{if(!(!o||!i))return{data:i,teamData:o,oldData:void 0}},[i,o]),d=l.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:c}},[n,s,c]),[u,m]=l.useState(),[p,C]=l.useState(),x=l.useMemo(()=>({chartData:u,setChartData:m,graphBuilds:p,setGraphBuilds:C}),[u,p]);return l.useEffect(()=>{m(void 0),C(void 0)},[t]),e(oe,{children:e(P,{sx:{display:"flex",flexDirection:"column",gap:1},children:f&&d&&x?e(I.Provider,{value:d,children:e(F.Provider,{value:f,children:e(fs.Provider,{value:x,children:e(uc,{onClose:a})})})}):e(J,{variant:"rectangular",width:"100%",height:1e3})})})}function gc(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>tt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ue(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>at.char.data[xe(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Cc(t,a){return{element:(n,r)=>r.includes(wn(n)),weaponType:(n,r)=>r.includes(at.char.data[xe(n)].weaponType),rarity:(n,r)=>r.includes(at.char.data[xe(n)].rarity),name:(n,r)=>r===void 0||tt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ue(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&tt.t(`charNames_gen:${Ue(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const Wa={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},xc=Te(ve,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),bc=xc,yc=wt([...ut]);function vc({value:t,totals:a,onChange:n,...r}){const s=dt(),o=!nt(s.breakpoints.up("md")),i=!nt(s.breakpoints.up("sm"));return e(xr,{exclusive:!0,value:t,...r,children:ut.map(c=>h(bc,{value:c,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex"},selectedColor:c,onClick:()=>n(yc(t,c)),children:[e(ft,{ele:c,iconProps:{fontSize:o&&!i?"inherit":void 0}}),!i&&e(de,{sx:{ml:.5},label:a[c],size:"small"})]},c))})}const wc=Object.keys(Wa);function ed({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:s=!1}){const{t:o}=N(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:i}=l.useContext(We),c=k(),[f,d]=l.useState(()=>c.displayCharacter.get());l.useEffect(()=>c.displayCharacter.follow((b,D)=>d(D)),[c,d]);const{gender:u}=se(),[m,p]=De();l.useEffect(()=>c.charMeta.followAny(()=>p()),[p,c]);const[C,x]=l.useState(""),y=l.useDeferredValue(C),w=l.useDeferredValue(f),U=l.useDeferredValue(m),L=l.useMemo(()=>{const{element:b,weaponType:D,sortType:R,ascending:Z}=w,G=[...s?["new"]:[],...Wa[R]??[]];return U&&Ye.filter(Y=>r(Y,c.chars.get(Y),Q(Y,u))).filter(xt({element:b,weaponType:D,name:y},Cc(c,i))).sort(xa(G,Z,gc(c,i),["new","favorite"]))},[w,s,U,y,c,i,r,u]),M=l.useMemo(()=>Ft(Rn,b=>Ye.forEach(D=>{const R=Q(D,c.gender).weaponTypeKey;b[R].total++,L.includes(D)&&b[R].current++})),[L,c]),O=l.useMemo(()=>Ft(ut,b=>Ye.forEach(D=>{const R=Q(D,c.gender).elementKey;b[R].total++,L.includes(D)&&b[R].current++})),[L,c]),{weaponType:T,element:z,sortType:W,ascending:_}=f;return e(Me,{open:t,onClose:()=>{x(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:h(re,{children:[h(P,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e(cr,{sx:{height:"100%"},onChange:b=>c.displayCharacter.set({weaponType:b}),value:T,totals:M,size:"small"}),e(vc,{sx:{height:"100%"},onChange:b=>c.displayCharacter.set({element:b}),value:z,totals:O,size:"small"}),e(g,{flexGrow:1,children:e(ya,{autoFocus:!0,value:C,onChange:b=>x(b.target.value),label:o("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),e(tr,{sx:{height:"100%"},sortKeys:wc,value:W,onChange:b=>c.displayCharacter.set({sortType:b}),ascending:_,onChangeAsc:b=>c.displayCharacter.set({ascending:b})}),e(Pe,{onClick:()=>{x(""),a()}})]}),e(Ce,{}),e(F.Provider,{value:{teamData:void 0},children:e(P,{children:e($,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:L.map(b=>e($,{item:!0,xs:1,children:e(Rc,{characterKey:b,onClick:()=>{x(""),a(),n==null||n(b)}})},b))})})})]})})}const _c=Te(({className:t,...a})=>e(Ee,{...a,classes:{popper:t}}))({[`& .${_n.tooltip}`]:{padding:0}});function Rc({characterKey:t,onClick:a}){const{gender:n}=se(),r=Q(t,n),s=pt(t),{favorite:o}=mt(t),i=k(),{silly:c}=l.useContext(We),[f,d,u]=ue(),{level:m=1,ascension:p=0,constellation:C=0}=s??{},x=Hn(t,"banner",n);return e(_c,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:f,onClose:u,onOpen:d,title:e(g,{sx:{width:300},children:e(hs,{hideStats:!0,characterKey:t})}),children:e(g,{children:h(ct,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(g,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(lt,{sx:{p:.25},onClick:y=>{u(),i.charMeta.set(t,{favorite:!o})},children:o?e(bt,{}):e(Rt,{})})}),e(Ae,{onClick:a,children:h(g,{display:"flex",position:"relative",className:x?void 0:`grad-${r==null?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${x})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(g,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(g,{component:"img",src:Bn(t,n,c),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),h(g,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(v,{variant:"body2",sx:{flexGrow:1},children:e(E,{color:r==null?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:r==null?void 0:r.name})}),s?h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h(g,{sx:{textShadow:"0 0 5px gray"},children:[h(v,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",m]}),h(v,{variant:"body2",component:"span",color:"text.secondary",children:["/",Ln[p]]})]}),h(v,{variant:"body2",children:["C",C]})]}):e(v,{component:"span",variant:"body2",children:e(E,{children:"NEW"})}),e(Ct,{stars:(r==null?void 0:r.rarity)??1,colored:!0})]})]})})]})})})}const Lc=wt([...ia]);function td({value:t,totals:a,onChange:n,...r}){const s=dt(),o=!nt(s.breakpoints.up("sm"));return e(qe,{exclusive:!0,value:t,...r,children:ia.map(i=>e(ve,{value:i,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex",gap:o?0:1},onClick:()=>n(Lc(t,i)),children:h(g,{display:"flex",children:[e("strong",{children:i}),e(ba,{}),!o&&e(de,{label:a[i],size:"small"})]})},i))})}export{il as A,Il as B,td as C,Ar as D,vc as E,Vi as F,fs as G,Kl as H,vl as I,Lt as J,ja as K,Qc as L,gl as M,El as N,Cl as O,Gl as R,Ur as S,cc as T,_l as W,hs as a,Cc as b,Wa as c,gc as d,Zc as e,ed as f,Ua as g,nc as h,Rl as i,sl as j,yl as k,bl as l,Kt as m,Hl as n,Pl as o,it as p,st as q,Bl as r,Ll as s,Ba as t,Be as u,Fl as v,ka as w,Nl as x,Yi as y,Jc as z};
