import{u as G,e as s,h as T,b as R,aq as g,af as _,p as a,n as c,C as x,J as i,D as W,s as j,K as S,T as b,t as B,V}from"./index-6504abc5.js";import{w as $}from"./index-6a433e31.js";import{g as o}from"./index-9875ebf5.js";import{c as v}from"./totalUtils-1ebcc95d.js";import{C as D}from"./CloseButton-dde9d63b.js";import{I as q,i as J}from"./ColoredText-bb4e8adf.js";import{T as K,e as P}from"./StarDisplay-de4e8106.js";import{W as O}from"./WeaponCard-bcedc027.js";import{W as Q}from"./WeaponToggle-b6ccdb03.js";import{C as U}from"./CardActionArea-33e7e997.js";import"./SqBadge-0fcf147b.js";import"./DropdownButton-22e5a5e5.js";import"./SolidToggleButtonGroup-9b5962e2.js";import"./useWeapon-b3cbdf20.js";import"./LocationAutocomplete-5e88df04.js";import"./Autocomplete-3da829ad.js";function me({show:I,ascension:E=0,onHide:p,onSelect:M,filter:y=()=>!0,weaponTypeFilter:n}){const{t:d}=G(["page_weapon","weaponNames_gen"]),[u,C]=s.useState(n?[n]:[...T]),m=R(),[z,A]=s.useState(m.displayWeapon.get());s.useEffect(()=>m.displayWeapon.follow((e,t)=>A(t)),[m]),s.useEffect(()=>{n&&C([n])},[n]);const[w,L]=s.useState(""),h=s.useDeferredValue(w),{rarity:f}=z,l=s.useMemo(()=>g.filter(e=>y(o(e))).filter(e=>u.includes(o(e).weaponType)).filter(e=>!h||d(`weaponNames_gen:${e}`).toLowerCase().includes(h.toLowerCase())).filter(e=>f.includes(o(e).rarity)).sort((e,t)=>o(t).rarity-o(e).rarity),[h,y,f,d,u]),N=s.useMemo(()=>v(T,e=>g.forEach(t=>{const r=o(t).weaponType;e[r].total++,l.includes(t)&&e[r].current++})),[l]),k=s.useMemo(()=>v(_,e=>g.forEach(t=>{const r=o(t).rarity;e[r].total++,l.includes(t)&&e[r].current++})),[l]);return a(V,{open:I,onClose:p,children:c(B,{children:[a(x,{sx:{py:1},children:c(i,{container:!0,spacing:1,children:[a(i,{item:!0,children:a(Q,{value:u,totals:N,onChange:C,disabled:!!n,size:"small"})}),a(i,{item:!0,children:a(O,{sx:{height:"100%"},onChange:e=>m.displayWeapon.set({rarity:e}),value:f,totals:k,size:"small"})}),a(i,{item:!0,flexGrow:1,children:a(K,{autoFocus:!0,size:"small",value:w,onChange:e=>L(e.target.value),label:d("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),a(i,{item:!0,children:a(D,{onClick:p})})]})}),a(W,{}),a(x,{children:a(i,{container:!0,spacing:1,children:l.map(e=>{var r;const t=o(e);return a(i,{item:!0,lg:3,md:4,children:a(j,{sx:{height:"100%"},children:c(U,{onClick:()=>{p(),M(e)},sx:{display:"flex"},children:[a(S,{component:"img",src:$(e,E>=2),sx:{width:100,height:"auto"},className:` grad-${t.rarity}star`}),c(S,{sx:{flexGrow:1,px:1},children:[a(b,{variant:"subtitle1",children:t.name}),c(b,{sx:{display:"flex",alignItems:"baseline"},children:[a(q,{size:1.5,src:(r=J.weaponTypes)==null?void 0:r[t.weaponType]}),a(P,{stars:t.rarity,colored:!0})]})]})]})})},e)})})}),a(W,{}),a(x,{sx:{py:1},children:a(D,{large:!0,onClick:p})})]})})}export{me as default};
