import{b as P,as as Vt,at as Lt,au as Be,av as N,e as l,aw as Ut,cM as Jt,cN as Xt,ax as Qt,l as Yt,cb as Zt,j as T,ay as Kt,az as en,cO as Pe,p as e,cP as tn,cQ as nn,cR as an,cS as on,cT as sn,cU as rn,cV as cn,cW as ln,cX as dn,cY as un,by as pn,bx as hn,bA as ke,cq as be,cZ as fn,cs as _e,c_ as te,cp as Ie,co as ne,cr as fe,c$ as Ee,u as Ye,b5 as qe,b4 as mn,n as r,a_ as _,T as m,r as se,i as re,bO as Ze,c as gn,f as Re,d0 as xn,a3 as vn,X as yn,d as Q,cn as Cn,d1 as Sn,bI as Dn,cf as wn,a0 as bn,K as h,U as xe,t as ae,J as G,k as Ke,am as ve,a9 as et,b0 as je,b1 as tt,q as J,bX as nt,aC as at,aB as me,s as _n,C as In,bD as En,bf as Rn,B as $n,b3 as Ve,D as De,aA as zn,W as Mn}from"./index-4aeafe39.js";import{B as ge,a as Le}from"./BootstrapTooltip-10216255.js";import{u as Ne,d as Bn,b as kn,L as jn,p as Nn,F as Wn,C as $e}from"./StarDisplay-9719c2f8.js";import{E as ot,s as st,J as S,K as z,L as M,M as v,C as A,p as f,N as ie,O as ce,P as Tn,Q as An,T as rt,R as X,V as ze,q as Fn,g as ye,r as Ue,D as Hn,W as On,w as it,G as Gn,S as ct,a as Pn,v as qn,u as Je,x as Vn,n as Ln,I as lt}from"./index-2e6c50dc.js";import{A as dt}from"./Artifact-1c0f17d9.js";import{S as L}from"./SqBadge-468e1b5c.js";import{b as Un,g as Jn}from"./index-5dc4490f.js";import{S as Xn}from"./SlotIcon-ef3c8060.js";import{i as We,I as Qn}from"./ColoredText-93cf156d.js";import{D as le,a as Yn}from"./FieldDisplay-c1f87645.js";import{g as ut,W as pt}from"./index-34aa308f.js";import{u as Zn}from"./useWeapon-047a5724.js";import{C as oe}from"./CardActionArea-b23caab8.js";function ht(t){const n=P();return Ne(n.charMeta,t)}function ft(t){const n=P();return Ne(n.chars,t)}function Kn(t){const n=P();return Ne(n.teams,t)}function ea(t){return Vt("MuiCollapse",t)}Lt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ta=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],na=t=>{const{orientation:n,classes:a}=t,o={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return en(o,ea,a)},aa=Be("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>N({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&N({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),oa=Be("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>N({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),sa=Be("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>N({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),mt=l.forwardRef(function(n,a){const o=Ut({props:n,name:"MuiCollapse"}),{addEndListener:s,children:c,className:i,collapsedSize:d="0px",component:g,easing:u,in:x,onEnter:D,onEntered:E,onEntering:w,onExit:$,onExited:B,onExiting:I,orientation:W="vertical",style:j,timeout:R=Jt.standard,TransitionComponent:de=Xt}=o,Y=Qt(o,ta),q=N({},o,{orientation:W,collapsedSize:d}),O=na(q),y=Yt(),F=l.useRef(),V=l.useRef(null),Ce=l.useRef(),ue=typeof d=="number"?`${d}px`:d,Z=W==="horizontal",K=Z?"width":"height";l.useEffect(()=>()=>{clearTimeout(F.current)},[]);const pe=l.useRef(null),Tt=Zt(a,pe),U=p=>k=>{if(p){const H=pe.current;k===void 0?p(H):p(H,k)}},Se=()=>V.current?V.current[Z?"clientWidth":"clientHeight"]:0,At=U((p,k)=>{V.current&&Z&&(V.current.style.position="absolute"),p.style[K]=ue,D&&D(p,k)}),Ft=U((p,k)=>{const H=Se();V.current&&Z&&(V.current.style.position="");const{duration:ee,easing:he}=Pe({style:j,timeout:R,easing:u},{mode:"enter"});if(R==="auto"){const Ge=y.transitions.getAutoHeightDuration(H);p.style.transitionDuration=`${Ge}ms`,Ce.current=Ge}else p.style.transitionDuration=typeof ee=="string"?ee:`${ee}ms`;p.style[K]=`${H}px`,p.style.transitionTimingFunction=he,w&&w(p,k)}),Ht=U((p,k)=>{p.style[K]="auto",E&&E(p,k)}),Ot=U(p=>{p.style[K]=`${Se()}px`,$&&$(p)}),Gt=U(B),Pt=U(p=>{const k=Se(),{duration:H,easing:ee}=Pe({style:j,timeout:R,easing:u},{mode:"exit"});if(R==="auto"){const he=y.transitions.getAutoHeightDuration(k);p.style.transitionDuration=`${he}ms`,Ce.current=he}else p.style.transitionDuration=typeof H=="string"?H:`${H}ms`;p.style[K]=ue,p.style.transitionTimingFunction=ee,I&&I(p)}),qt=p=>{R==="auto"&&(F.current=setTimeout(p,Ce.current||0)),s&&s(pe.current,p)};return T.jsx(de,N({in:x,onEnter:At,onEntered:Ht,onEntering:Ft,onExit:Ot,onExited:Gt,onExiting:Pt,addEndListener:qt,nodeRef:pe,timeout:R==="auto"?null:R},Y,{children:(p,k)=>T.jsx(aa,N({as:g,className:Kt(O.root,i,{entered:O.entered,exited:!x&&ue==="0px"&&O.hidden}[p]),style:N({[Z?"minWidth":"minHeight"]:ue},j),ownerState:N({},q,{state:p}),ref:Tt},k,{children:T.jsx(oa,{ownerState:N({},q,{state:p}),className:O.wrapper,ref:V,children:T.jsx(sa,{ownerState:N({},q,{state:p}),className:O.wrapperInner,children:c})})}))}))});mt.muiSupportAuto=!0;const ra=mt;function ia({statKey:t,iconProps:n={}}){switch(t){case"hp":case"hp_":case"base_hp":return e(hn,{...n});case"atk":case"atk_":case"base_atk":return e(pn,{...n});case"def":case"def_":case"base_def":return e(un,{...n});case"eleMas":return e(dn,{...n});case"critRate_":return e(ln,{...n});case"critDMG_":return e(cn,{...n});case"enerRech_":return e(rn,{...n});case"incHeal_":return e(sn,{...n});case"heal_":return e(on,{...n});case"cdRed_":return e(an,{...n});case"shield_":return e(nn,{...n});case"stamina":return e(tn,{...n})}const a=t.split("_")[0];return ke.includes(a)?e(ca,{ele:a,iconProps:n}):null}function ca({ele:t,iconProps:n={}}){switch(t){case"anemo":return e(Ee,{...n});case"cryo":return e(fe,{...n});case"dendro":return e(ne,{...n});case"electro":return e(Ie,{...n});case"geo":return e(te,{...n});case"hydro":return e(_e,{...n});case"physical":return e(fn,{...n});case"pyro":return e(be,{...n})}}function la({statKey:t,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:c}=Ye("statKey_gen"),i=qe(t),d=mn(n,qe(t));return r(m,{color:a?`${a}.main`:void 0,...s,children:[e(ia,{statKey:t,iconProps:_})," ",c(t)," ",e("strong",{children:`${o}${d}${i}`})]},t)}function da({condition:t,wrapper:n,falseWrapper:a,children:o}){return t?n(o):a?a(o):o}var Te={},ua=re;Object.defineProperty(Te,"__esModule",{value:!0});var gt=Te.default=void 0,pa=ua(se()),ha=T,fa=(0,pa.default)((0,ha.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");gt=Te.default=fa;const xt=({stars:t=1,colored:n=!1,inline:a=!1})=>e(Ze,{color:n?"warning":void 0,children:[...Array(t).keys()].map((o,s)=>e(Bn,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},s))}),ma=gn(T.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");var Ae={},ga=re;Object.defineProperty(Ae,"__esModule",{value:!0});var xa=Ae.default=void 0,va=ga(se()),ya=T,Ca=(0,va.default)((0,ya.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");xa=Ae.default=Ca;const vt=l.createContext({});function Sa({iconProps:t}){const[n,a]=l.useState(0);return l.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),e(ot,{ele:Re[n%Re.length],iconProps:t})}const C=t=>e(rt,{ns:"elementalResonance_gen",key18:t}),Me=t=>e(rt,{ns:"elementalResonance",key18:t}),b=st(...Re.map(t=>S[t])),yt=xn(ke,t=>[`${t}_res_`,z(f.charKey,v(S.ele,4,A(.15)),M.info(`${t}_res_`))]),Da={name:C("ProtectiveCanopy.name"),desc:C("ProtectiveCanopy.desc"),icon:r("span",{children:[e(Sa,{iconProps:_})," x4"]}),canShow:t=>t.get(S.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(yt).map(([t,n])=>({node:n}))}]},[wa,ba]=z(f.charKey,v(b,4,v(S.pyro,2,A(.25))),M.info("atk_")),_a={name:C("FerventFlames.name"),desc:C("FerventFlames.desc"),icon:r("span",{children:[e(be,{..._})," ",e(be,{..._})]}),canShow:t=>t.get(S.pyro).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:X("effectDuration.cryo"),value:-40,unit:"%"},{node:wa}]}]},[Ia,Ea]=z(f.charKey,v(b,4,v(S.hydro,2,A(.25))),M.info("hp_")),Ra={name:C("SoothingWater.name"),desc:C("SoothingWater.desc"),icon:r("span",{children:[e(_e,{..._})," ",e(_e,{..._})]}),canShow:t=>t.get(S.hydro).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:X("effectDuration.pyro"),value:-40,unit:"%"},{node:Ia}]}]},Ct=["resonance","ShatteringIce"],St=ie(Ct),[$a,za]=z(f.charKey,v(b,4,v(S.cryo,2,ce(St,"on",A(.15)))),M.info("critRate_")),Ma={name:C("ShatteringIce.name"),desc:C("ShatteringIce.desc"),icon:r("span",{children:[e(fe,{..._})," ",e(fe,{..._})]}),canShow:t=>t.get(S.cryo).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:X("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:Ct,value:St,name:X("enemyAffected.frozenOrCryo"),header:{title:C("ShatteringIce.name"),icon:e(fe,{})},states:{on:{fields:[{node:$a}]}}}]},Ba={name:C("HighVoltage.name"),desc:C("HighVoltage.desc"),icon:r("span",{children:[e(Ie,{..._})," ",e(Ie,{..._})]}),canShow:t=>t.get(S.electro).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:X("effectDuration.hydro"),value:-40,unit:"%"}]}]},[ka,ja]=z(f.charKey,v(b,4,v(S.anemo,2,A(-.15))),M.info("staminaDec_")),[Na,Wa]=z(f.charKey,v(b,4,v(S.anemo,2,A(.1))),M.info("moveSPD_")),[Ta,Aa]=z(f.charKey,v(b,4,v(S.anemo,2,A(-.05))),M.info("cdRed_")),Fa={name:C("ImpetuousWinds.name"),desc:C("ImpetuousWinds.desc"),icon:r("span",{children:[e(Ee,{..._})," ",e(Ee,{..._})]}),canShow:t=>t.get(S.anemo).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,fields:[{node:ka},{node:Na},{node:Ta}]}]},Dt=["resonance","EnduringRock"],wt=ie(Dt),bt=["resonance","EnduringRockHit"],_t=ie(bt),[Ha,Oa]=z(f.charKey,v(b,4,v(S.geo,2,A(.15))),M.info("shield_")),[Ga,Pa]=z(f.charKey,v(b,4,v(S.geo,2,ce(wt,"on",A(.15)))),M.info("all_dmg_")),[qa,Va]=z(f.charKey,v(b,4,v(S.geo,2,ce(_t,"on",A(-.2)))),M.info("geo_enemyRes_")),La={name:C("EnduringRock.name"),desc:C("EnduringRock.desc"),icon:r("span",{children:[e(te,{..._})," ",e(te,{..._})]}),canShow:t=>t.get(S.geo).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,text:C("EnduringRock.desc"),fields:[{node:Ha}]},{teamBuff:!0,path:Dt,value:wt,header:{title:C("EnduringRock.name"),icon:e(te,{})},name:X("protectedByShield"),states:{on:{fields:[{node:Ga}]}}},{teamBuff:!0,path:bt,value:_t,header:{title:C("EnduringRock.name"),icon:e(te,{})},name:Me("EnduringRock.hitCond"),states:{on:{fields:[{node:qa},{text:ze("duration"),value:15,unit:"s"}]}}}]},It=["resonance","SprawlingCanopy2ele"],Et=ie(It),Rt=["resonance","SprawlingCanopy3ele"],$t=ie(Rt),[Ua,Ja]=z(f.charKey,v(b,4,v(S.dendro,2,50)),M.info("eleMas")),[Xa,Qa]=z(f.charKey,v(b,4,v(S.dendro,2,ce(Et,"on",30))),M.info("eleMas")),[Ya,Za]=z(f.charKey,v(b,4,v(S.dendro,2,ce($t,"on",20))),M.info("eleMas")),Ka={name:C("SprawlingGreenery.name"),desc:C("SprawlingGreenery.desc"),icon:r("span",{children:[e(ne,{..._})," ",e(ne,{..._})]}),canShow:t=>t.get(S.dendro).value>=2&&t.get(b).value>=4,sections:[{teamBuff:!0,text:C("SprawlingGreenery.desc"),fields:[{node:Ua}]},{teamBuff:!0,path:It,value:Et,header:{title:C("SprawlingGreenery.name"),icon:e(ne,{})},name:Me("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:Xa},{text:ze("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:Rt,value:$t,header:{title:C("SprawlingGreenery.name"),icon:e(ne,{})},name:Me("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:Ya},{text:ze("duration"),value:6,unit:"s"}]}}}]},Lo=[Da,_a,Ra,Ma,Ba,Fa,La,Ka],eo=Tn({teamBuff:{premod:{...vn(yt,([t,n])=>n),atk_:ba,hp_:Ea,staminaDec_:ja,moveSPD_:Wa,cdRed_:Aa,shield_:Oa,all_dmg_:Pa,geo_enemyRes_:Va,eleMas:An(st(Ja,Qa,Za),{pivot:!0})},total:{critRate_:za}}});function to(t,n=0,a,o){const s=P(),[c,i]=yn(),d=l.useDeferredValue(c),{gender:g}=Q(),u=l.useMemo(()=>d&&ao(s,t,n,g,a,o),[d,g,t,s,n,a,o]);return l.useEffect(()=>t?s.chars.follow(t,i):void 0,[t,i,s]),u}class no{constructor(n){this.data={},n.chars.followAny(a=>{this.removeData(a)})}getData(n){return this.data[n]}cacheData(n,a){this.data[n]=a}removeData(n){delete this.data[n]}}const we=new Map,Xe=t=>{if(we.has(t))return we.get(t);const n=new no(t);return we.set(t,n),n};function ao(t,n,a=0,o,s,c){if(!n)return;if(!a&&!s&&!c){const x=Xe(t).getData(n);if(x)return x}const{teamData:i,teamBundle:d}=oo(t,n,a,s,c)??{};if(!i||!d)return;const g=Fn(i,o,n),u=Cn(g,(x,D)=>{const{data:E,...w}=d[D];return{...x,...w}});return!a&&!s&&!c&&Xe(t).cacheData(n,u),u}function oo(t,n,a=0,o,s){if(!n)return;const c=t.chars.get(n);if(!c)return;const i=so(t,!0,a,c,s||(t.weapons.get(c.equippedWeapon)??Sn()),o??Object.values(c.equippedArtifacts).map(u=>t.arts.get(u)).filter(u=>u));if(!i)return;const d={[n]:i};return{teamData:{[n]:i.data},teamBundle:d}}function so(t,n=!1,a,o,s,c){const i=ye(o.key,t.gender);if(!i)return;const d=ut(s.key);if(!d)return;const g=pt.getAllDataOfType(i.weaponTypeKey),u=n?(()=>{const{display:w,...$}=d.data;return Ue([$,g])})():d.data,x=Ue([i.data,u,Un]),E=[...Array.isArray(c)?c.map(w=>Hn(w,a)):[c],On(o),it(s),x,Gn,eo];return{character:o,weapon:s,characterSheet:i,weaponSheet:d,data:E}}function ro(t){const n=P();return l.useCallback(a=>{if(!t)return;const o=n.chars.get(t);o&&n.chars.set(t,{...o,...a})},[t,n])}function io({art:t,children:n}){const a=e(h,{children:e(xe,{variant:"rectangular",width:100,height:100})}),o=e(l.Suspense,{fallback:a,children:e(co,{art:t})});return e(ge,{placement:"top",title:o,disableInteractive:!0,children:n})}function co({art:t}){const{t:n}=Ye("statKey_gen"),a=Jn(t.setKey),{slotKey:o,level:s,rarity:c,mainStatKey:i,substats:d}=t,g=a.getSlotName(o),u=Dn.getVariant(i);return r(h,{p:1,children:[r(m,{variant:"h6",children:[e(Xn,{slotKey:o,iconProps:_})," ",g]}),r(m,{variant:"subtitle1",color:`${u}.main`,children:[e(ct,{statKey:i,iconProps:_})," ",n(i)," ",wn(i,c,s)]}),r(m,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(kn,{stars:c}),r(L,{color:dt.levelVariant(s),children:["+",s]})," "]}),e(h,{py:1,children:d.map(({value:x,key:D,rolls:E})=>!!(x&&D)&&e(la,{statKey:D,value:x,color:`roll${bn(E.length,1,6)}`,prefix:"+"},D))}),e(m,{color:"success.main",children:a.name}),e(jn,{color:"secondary.main",location:t.location})]})}function zt({artifactObj:t,slotKey:n}){if(!t)return e(ae,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e(h,{sx:{width:"100%",pb:"100%",position:"relative"},children:e(h,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:We.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=t,i=ke.find(d=>t.mainStatKey.includes(d))??"secondary";return e(io,{art:t,children:r(ae,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[e(h,{component:"img",className:`grad-${o}star`,src:Pn(t.setKey,t.slotKey),maxWidth:"100%",maxHeight:"100%"}),e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(L,{sx:{p:.5},color:dt.levelVariant(s),children:r("strong",{children:["+",s]})})})}),e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e(L,{color:i,sx:{p:.5},children:e(ct,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function lo({sheet:t,addlText:n,children:a}){const o=r(l.Suspense,{fallback:e(xe,{variant:"text",width:100}),children:[r(m,{children:[e(Qn,{src:We.weaponTypes[t.weaponType],size:1.5})," ",t.name]}),n]});return e(ge,{placement:"top",title:o,disableInteractive:!0,children:a})}function Mt({weaponId:t}){const n=Zn(t),a=(n==null?void 0:n.key)&&ut(n.key),o=l.useMemo(()=>a&&n&&qn([a.data,it(n)]),[a,n]);if(!n||!a||!o)return null;const s=r(h,{children:[e(Qe,{node:o.get(Je.weapon.main)}),e(Qe,{node:o.get(Je.weapon.sub)})]});return r(ae,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[e(h,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:e(lo,{sheet:a,addlText:s,children:e(h,{component:"img",src:Vn(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(L,{color:"primary",children:pt.getLevelString(n)})})}),a.hasRefinement&&e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(L,{color:"secondary",children:["R",n.refinement]})})})]})}function Qe({node:t}){return r(m,{children:[t.info.icon," ",Ln(t)]})}function uo({hideWeapon:t=!1}){var a;const{data:n}=l.useContext(le);return e(h,{children:r(G,{container:!0,columns:t?5:6,spacing:.5,children:[!t&&e(G,{item:!0,xs:1,height:"100%",children:e(Mt,{weaponId:((a=n.get(f.weapon.id).value)==null?void 0:a.toString())??""})}),e(po,{})]})})}function po(){const t=P(),{data:n}=l.useContext(le),a=Ke.map(o=>{var s;return[o,t.arts.get(((s=n.get(f.art[o].id).value)==null?void 0:s.toString())??"")]});return e(ve,{children:a.map(([o,s])=>e(G,{item:!0,xs:1,children:e(zt,{artifactObj:s,slotKey:o})},o))})}function Bt(t,n,a){const o=Nn(t,n),s=lt(t,"icon",n);return a&&o?o:s||""}function kt({children:t,characterKey:n,onClick:a}){const{gender:o}=Q(),{silly:s}=l.useContext(et),c=je(n),i=l.useCallback(g=>e(oe,{onClick:a,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[a]),d=lt(n,"banner",o);return e(da,{condition:!!a,wrapper:i,children:r(h,{display:"flex",position:"relative",className:d?void 0:`grad-${c.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${d})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(h,{flexShrink:1,component:"img",src:Bt(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),e(h,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:t})]})})}function ho({characterKey:t}){const{gender:n}=Q(),{data:a}=l.useContext(le),o=a.get(f.charEle).value,s=a.get(f.lvl).value,c=a.get(f.constellation).value,i=a.get(f.asc).value,d=a.get(f.total.autoBoost).value,g=a.get(f.total.skillBoost).value,u=a.get(f.total.burstBoost).value,x=a.get(f.total.auto).value,D=a.get(f.total.skill).value,E=a.get(f.total.burst).value,w=je(t);return r(ve,{children:[e(J,{label:e(m,{variant:"subtitle1",children:e(tt,{characterKey:t,gender:n})}),size:"small",color:o,sx:{opacity:.85}}),r(h,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[r(h,{children:[r(m,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),r(m,{component:"span",variant:"h6",color:"text.secondary",children:["/",nt[i]]})]}),e(m,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:e(at,{color:`roll${c<3?3:c}`,children:e(Ze,{color:"white",children:r("strong",{children:["C",c]})})})})]}),r(h,{display:"flex",gap:1,sx:{opacity:.85},children:[e(J,{size:"small",color:d?"info":"secondary",label:e("strong",{children:x})}),e(J,{size:"small",color:g?"info":"secondary",label:e("strong",{children:D})}),e(J,{size:"small",color:u?"info":"secondary",label:e("strong",{children:E})})]}),e(m,{variant:"h6",lineHeight:1,children:e(xt,{stars:w.rarity,colored:!0,inline:!0})})]})}function fo({characterKey:t}){const{gender:n}=Q(),a=je(t),o=ye(t,n);return r(ve,{children:[e(J,{label:e(m,{variant:"subtitle1",children:e(tt,{characterKey:t,gender:n})}),size:"small",color:o.elementKey,sx:{opacity:.85}}),e(h,{mt:1,children:e(m,{variant:"h4",children:e(at,{children:"NEW"})})}),e(m,{mt:1.5,children:e(xt,{stars:a.rarity,colored:!0})})]})}function mo(){const{data:t}=l.useContext(le);return r(h,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(n=>e(Yn,{node:n},JSON.stringify(n.info))),t.get(f.special).info.name&&r(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(m,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(f.special).info.icon,e(m,{children:t.get(f.special).info.name})]})]})}function go({characterKey:t,onClick:n,onClickHeader:a,footer:o,hideStats:s}){var W;const c=P(),i=to(t),d=ft(t),{gender:g}=Q(),u=ye(t,g),x=ro(t),D=(W=i==null?void 0:i[t])==null?void 0:W.target,E=l.useCallback(()=>t&&(n==null?void 0:n(t)),[t,n]),w=l.useCallback(j=>e(oe,{onClick:E,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:j}),[E]),$=l.useMemo(()=>d&&u&&{character:d,characterSheet:u,characterDispatch:x},[d,u,x]),B=l.useMemo(()=>D&&i&&{data:D,teamData:i},[D,i]),{favorite:I}=ht(t);return e(l.Suspense,{fallback:e(xe,{variant:"rectangular",width:"100%",height:s?300:600}),children:r(_n,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(h,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(me,{sx:{p:.5},onClick:j=>c.charMeta.set(t,{favorite:!I}),children:I?e(Wn,{}):e(ma,{})})}),e($e,{condition:!!n,wrapper:w,children:d&&B&&$?e(xo,{characterContextObj:$,dataContextObj:B,characterKey:t,onClick:n,onClickHeader:()=>a==null?void 0:a(t),hideStats:s}):e(vo,{characterKey:t})}),o]})})}function xo({characterContextObj:t,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,hideStats:c}){return e(vt.Provider,{value:t,children:r(le.Provider,{value:n,children:[e(kt,{characterKey:a,onClick:o?void 0:s,children:e(ho,{characterKey:a})}),r(h,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${i.spacing(1)}!important`:void 0}),children:[e(uo,{}),!c&&e(mo,{})]})]})})}function vo({characterKey:t}){return r(ve,{children:[e(kt,{characterKey:t,children:e(fo,{characterKey:t})}),e(In,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}var Fe={},yo=re;Object.defineProperty(Fe,"__esModule",{value:!0});var jt=Fe.default=void 0,Co=yo(se()),So=T,Do=(0,Co.default)((0,So.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");jt=Fe.default=Do;var He={},wo=re;Object.defineProperty(He,"__esModule",{value:!0});var Nt=He.default=void 0,bo=wo(se()),_o=T,Io=(0,bo.default)((0,_o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");Nt=He.default=Io;var Oe={},Eo=re;Object.defineProperty(Oe,"__esModule",{value:!0});var Wt=Oe.default=void 0,Ro=Eo(se()),$o=T,zo=(0,Ro.default)((0,$o.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");Wt=Oe.default=zo;function Mo({characterKey:t,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:c=!1}){const i=ft(t),{favorite:d}=ht(t),{gender:g}=Q(),{silly:u}=l.useContext(et),x=ye(t,g),D=l.useCallback(()=>n==null?void 0:n(t),[t,n]),E=l.useCallback(R=>e(oe,{onClick:D,onMouseDown:a,onMouseEnter:o,children:R}),[D,a,o]),[w,$]=l.useState(!1),B=l.useCallback(()=>!c&&$(!0),[c]),I=l.useCallback(()=>$(!1),[]);l.useEffect(()=>{c&&$(!1)},[c]);const W=l.useCallback(R=>e(ge,{placement:"top",open:w&&!c,onClose:I,onOpen:B,title:e(l.Suspense,{fallback:e(xe,{width:300,height:400}),children:r(m,{children:[x.elementKey&&e(ot,{ele:x.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${x.elementKey}.main`}}})," ",x.name]})}),children:R}),[x.elementKey,x.name,c,I,B,w]),j=l.useCallback(R=>e(ge,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:w&&!c,onClose:I,onOpen:B,title:e(h,{sx:{width:300,m:-1},children:e(go,{hideStats:!0,characterKey:t})}),children:R}),[t,c,I,B,w]);return e($e,{condition:s,wrapper:W,falseWrapper:j,children:e(ae,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:r($e,{condition:!!n||!!a||!!o,wrapper:E,children:[e(h,{display:"flex",className:`grad-${x.rarity}star`,children:e(h,{component:"img",src:Bt(t,g,u),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:e("strong",{children:r(L,{color:"primary",children:[i.level,"/",nt[i.ascension]]})})}),e(h,{sx:{position:"absolute",top:0,right:0},children:d?e(gt,{fontSize:"small"}):e(Wt,{fontSize:"small"})}),i&&e(m,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(L,{color:"secondary",children:["C",i.constellation]})})})]})})})}function Bo({index:t}){return e(ae,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:e(h,{component:"img",src:We.team[`team${t+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function Uo({teamId:t,onClick:n,bgt:a,disableButtons:o=!1,showMore:s=!1}){var q,O;const c=Kn(t),{name:i,description:d,teamCharIds:g}=c,u=P(),x=()=>{u.teams.remove(t)},D=()=>{const y=u.teams.export(t),F=JSON.stringify(y);navigator.clipboard.writeText(F).then(()=>alert("Copied team data to clipboard.")).catch(console.error)},E=()=>u.teams.duplicate(t),[w,$]=l.useState(!1),B=(q=l.useContext(vt).character)==null?void 0:q.key,I=!!B&&g.filter(y=>!!y).find(y=>{var F;return((F=u.teamChars.get(y))==null?void 0:F.key)===B}),W=!!I&&u.teamChars.getLoadoutArtifacts(I),j=!!I&&u.teamChars.getLoadoutWeapon(I),R=!!W&&Ke.map(y=>[y,W[y]]),de=!!I&&((O=u.teamChars.get(I))==null?void 0:O.buildId),Y=!!de&&u.builds.get(de);return r(zn,{bgt:a,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r(h,{sx:{height:"100%",p:1,display:"flex",flexDirection:"column",gap:1},children:[r(m,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e("span",{children:i})," ",e(Ve,{title:e(m,{children:d}),children:e(Le,{})}),s&&e(me,{onClick:()=>$(!w),sx:{marginLeft:"auto",transform:w?"rotate(180deg)":"rotate(0deg)"},children:e(Nt,{})})]}),e(h,{sx:{marginTop:"auto"},children:e(G,{container:!0,columns:4,spacing:1,children:En(0,3).map(y=>e(G,{item:!0,xs:1,height:"100%",children:g[y]?e(oe,{onClick:()=>n(u.teamChars.get(g[y]).key),children:e(Mo,{characterKey:u.teamChars.get(g[y]).key})}):e(oe,{onClick:()=>n(),children:e(Bo,{index:y})})},y))})})]}),!o&&r(h,{sx:{display:"flex",gap:1,marginTop:"auto",p:1},children:[e($n,{color:"info",variant:"text",sx:{flexGrow:1},startIcon:e(Rn,{}),disabled:g.every(y=>!y),onClick:D,children:"Export"}),e(De,{orientation:"vertical"}),e(me,{color:"info",disabled:g.every(y=>!y),onClick:E,children:e(jt,{})}),e(De,{orientation:"vertical"}),e(me,{color:"error",size:"small",onClick:x,children:e(Mn,{})})]}),!!j&&!!R&&e(ra,{in:w,timeout:"auto",unmountOnExit:!0,children:r(h,{p:1,paddingTop:0,children:[Y?r(m,{sx:{display:"flex",gap:1,alignItems:"center",paddingBottom:1},children:[e("span",{children:Y.name})," ",e(Ve,{title:e(m,{children:Y.description}),children:e(Le,{})})]}):e(De,{orientation:"horizontal",sx:{paddingBottom:1},children:e(J,{label:"Default",size:"small"})}),r(G,{container:!0,columns:3,spacing:1,children:[e(G,{item:!0,xs:1,height:"100%",children:e(Mt,{weaponId:j.id??""})}),R.map(([y,F])=>e(G,{item:!0,xs:1,children:e(zt,{artifactObj:F,slotKey:y})},y))]})]})})]})}export{zt as A,go as C,ca as E,ma as F,ia as S,Uo as T,Mt as W,ra as a,jt as b,vt as c,xa as d,Nt as e,Mo as f,kt as g,ho as h,uo as i,mo as j,ft as k,Kn as l,ht as m,io as n,lo as o,eo as p,to as q,Lo as r,Bt as s,ro as u};
