import{l as D,m as N,p as e,af as T,n as s,q as $,K as r,ar as v,cw as W,u as F,b as K,e as p,U as O,aB as R,T as c,cd as G,C as U,v as H,B as C,W as q,s as J}from"./index-158f0932.js";import{d as P,a as Q,b as V,L as E}from"./StarDisplay-bfc91ae8.js";import{T as X,S as Y,h as Z}from"./totalUtils-138decb2.js";import{t as ee,f as ae,j as h,w as te,v as ne}from"./index-50fce377.js";import{u as se}from"./useWeapon-e802802b.js";import{L as oe,a as re,b as ie,d as le}from"./LocationAutocomplete-406eb2ee.js";import{I as ce,i as pe}from"./ColoredText-5d4f1526.js";import{g as de}from"./index-8ec923a2.js";import{C as me}from"./CardActionArea-dc07d6b2.js";const ue=Z([...T]);function Te({value:a,totals:n,onChange:m,...u}){const g=D(),d=!N(g.breakpoints.up("sm"));return e(Y,{exclusive:!0,value:a,...u,children:T.map(l=>e(X,{value:l,sx:{p:d?1:void 0,minWidth:d?0:"6em",display:"flex",gap:d?0:1},onClick:()=>m(ue(a,l)),children:s(r,{display:"flex",children:[e("strong",{children:l}),e(P,{}),e($,{label:n[l],size:"small"})]})},l))})}function We(){return{level:a=>a.level*(a.ascension+1),rarity:a=>v.weapon.data[a.key].rarity,name:a=>W.t(`weaponNames_gen:${a.key}`)}}function Le(){return{rarity:(a,n)=>n.includes(v.weapon.data[a.key].rarity),weaponType:(a,n)=>n.includes(v.weapon.data[a.key].weaponType),name:(a,n)=>W.t(`weaponNames_gen:${a.key}`).toLowerCase().includes(n.toLowerCase())}}const Se={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function Be({weaponId:a,onClick:n,onEdit:m,onDelete:u,canEquip:g=!1,extraButtons:d}){const{t:l}=F(["page_weapon","ui"]),f=K(),i=se(a),o=i!=null&&i.key?de(i.key):void 0,L=p.useCallback(t=>t.weaponTypeKey===(o==null?void 0:o.weaponType),[o]),S=p.useCallback(t=>e(me,{onClick:()=>n==null?void 0:n(a),children:t}),[n,a]),B=p.useCallback(t=>e(r,{children:t}),[]),I=p.useCallback(t=>a&&f.weapons.set(a,{location:t}),[f,a]),y=p.useMemo(()=>o&&i&&ee([o.data,ae(i)]),[o,i]);if(!i||!o||!y)return null;const{level:_,ascension:k,refinement:j,id:x,location:b="",lock:w}=i,z=y.get(h.weapon.type).value,A=[h.weapon.main,h.weapon.sub,h.weapon.sub2].map(t=>y.get(t)),M=te(i.key,k>=2);return e(p.Suspense,{fallback:e(O,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:s(J,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s(Q,{condition:!!n,wrapper:S,falseWrapper:B,children:[s(r,{className:`grad-${o.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!n&&e(R,{color:"primary",onClick:()=>f.weapons.set(x,{lock:!w}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:w?e(oe,{}):e(re,{})}),s(r,{sx:{position:"relative",zIndex:1},children:[s(r,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(ce,{size:2,src:pe.weaponTypes[z]}),e(c,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:e("strong",{children:o.name})})]}),s(c,{component:"span",variant:"h5",children:["Lv. ",_]}),s(c,{component:"span",variant:"h5",color:"text.secondary",children:["/",G[k]]}),s(c,{variant:"h6",children:["Refinement ",e("strong",{children:j})]}),e(V,{stars:o.rarity,colored:!0})]}),e(r,{sx:{height:"100%",position:"absolute",right:0,top:0},children:e(r,{component:"img",src:M??"",width:"auto",height:"100%",sx:{float:"right"}})})]}),e(U,{children:A.map(t=>t.info.name?s(r,{sx:{display:"flex"},children:[s(c,{flexGrow:1,children:[t.info.icon," ",t.info.name]}),e(c,{children:ne(t)})]},JSON.stringify(t.info)):null)})]}),s(r,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[e(r,{sx:{flexGrow:1},children:g?e(ie,{location:b,setLocation:I,filter:L,autoCompleteProps:{getOptionDisabled:t=>!t.key}}):e(E,{location:b})}),s(r,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!m&&e(H,{title:e(c,{children:l`page_weapon:edit`}),placement:"top",arrow:!0,children:e(C,{color:"info",size:"small",onClick:()=>m(x),children:e(le,{})})}),!!u&&e(C,{color:"error",size:"small",onClick:()=>u(x),disabled:!!b||w,children:e(q,{})}),d]})]})]})})}export{Te as W,Be as a,Le as b,We as c,Se as w};
