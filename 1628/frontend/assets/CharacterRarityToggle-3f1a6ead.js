import{b as I,as as gt,at as Ct,au as be,av as F,e as c,aw as xt,cc as nn,cd as rn,ax as yt,l as Pe,cb as ta,j as G,ay as ze,az as bt,ce as Ot,aO as re,cf as zt,r as Ue,i as Me,n as f,p as e,U as ye,B as V,cg as on,aK as sn,c8 as ln,c as vt,ap as ke,J as S,K as C,bH as aa,a9 as Fe,d as ge,T,q as le,ch as cn,aB as wt,a_ as me,bI as rt,bA as un,aQ as Et,ci as dn,t as de,b5 as ot,b4 as na,a0 as _t,cj as hn,ck as Wt,cl as pn,cm as Je,cn as Qe,co as Ze,bt as mn,a3 as fe,D as Re,am as Ke,u as ee,bn as Nt,bo as Pt,bm as Ft,Q as qe,o as _e,k as pe,b2 as Se,C as Z,s as ra,aA as Q,V as je,bp as fn,cp as oa,ba as gn,c6 as Cn,$ as sa,bJ as xn,bL as yn,b6 as bn,bM as vn,bW as wn,bV as _n,bN as Rn,X as De,cq as Sn,cr as Ln,cs as ia,ct as $n,cu as Tn,cv as kn,cw as Un,bd as Mn,cx as jn,aI as la,v as ca,_ as ua,af as da,ae as Dn,bD as In,cy as An,aC as Ee,ab as Bn,b3 as ha,aE as pa,W as ma,b1 as On,cz as st,ar as it,cA as zn,m as lt,f as Rt,cB as En,cC as et,h as Wn,bX as Nn,aG as fa}from"./index-bd0d44d1.js";import{b as H,u as ga,k as Ca,F as xa,l as Pn,m as ya,j as Fn,n as Kn,o as ba,W as qn,A as Hn,S as Vn,a as Gn,T as Yn,d as Kt,i as va,C as Xn,p as Jn}from"./TeamCard-278a3dac.js";import{D as te,a as Qn,L as Zn,b as er,A as tr}from"./FieldDisplay-1cd69a85.js";import{u as P,E as St,g as ce,S as Lt,a as wa,B as _a,p as ue,x as $t,y as ar,v as nr,w as Ra,n as rr,z as or,r as ct,o as qt,m as sr,A as ir,C as lr,i as We,q as cr,D as ur,F as dr,G as hr,H as pr,b as Ht,c as Vt,I as mr}from"./index-d4062b01.js";import{B as Ie,a as Sa}from"./BootstrapTooltip-3f084ef9.js";import{C as He}from"./CloseButton-44029339.js";import{I as $e,i as Ae,C as Ve,B as fr}from"./ColoredText-1d36ac1a.js";import{C as gr,T as he,W as Cr,L as xr}from"./WeaponEditor-c00728a3.js";import{S as Y}from"./SqBadge-5e801cf8.js";import{u as La,b as Tt,F as $a,a as yr,C as Ta,f as kt,s as ka,d as Ua,T as Ma,S as br}from"./StarDisplay-71a8a483.js";import{b as ja,u as Da,P as Ne,A as Ia}from"./LocationAutocomplete-84c26960.js";import{C as Ge}from"./CardActionArea-099a4d47.js";import{u as ut,f as vr,A as dt,d as wr,i as _r,b as Rr}from"./ArtifactSort-d1387b55.js";import{g as Ye,W as Aa}from"./index-990c8d2e.js";import{a as Ba,d as Oa}from"./CheckBoxOutlineBlank-0c34730e.js";import{A as Sr}from"./Artifact-0df64a78.js";import{g as za,a as Lr,b as $r}from"./index-40c71a54.js";import{u as Tr}from"./useWeapon-944c974b.js";import{b as ht,c as kr,d as Ur,w as Mr,W as jr}from"./WeaponCard-2f963d30.js";import{S as Ea}from"./SlotIcon-f6c43546.js";import{C as Wa,a as Dr}from"./ChevronRight-861719ec.js";import{C as Ir,a as Ar,M as Na,D as Br}from"./DropdownButton-28cdca81.js";import{T as Le,S as Xe,h as Ut,a as Or,c as Gt}from"./totalUtils-78a1840e.js";import zr from"./WeaponSelectionModal-789ece4e.js";function Er(t){const a=I();return La(a.buildTcs,t)}function Be(t){const a=I();return La(a.optConfigs,t)}function Wr(t){return gt("MuiCollapse",t)}Ct("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Nr=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Pr=t=>{const{orientation:a,classes:n}=t,r={root:["root",`${a}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${a}`],wrapperInner:["wrapperInner",`${a}`]};return bt(r,Wr,n)},Fr=be("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,a[n.orientation],n.state==="entered"&&a.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&a.hidden]}})(({theme:t,ownerState:a})=>F({height:0,overflow:"hidden",transition:t.transitions.create("height")},a.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},a.state==="entered"&&F({height:"auto",overflow:"visible"},a.orientation==="horizontal"&&{width:"auto"}),a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&{visibility:"hidden"})),Kr=be("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,a)=>a.wrapper})(({ownerState:t})=>F({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),qr=be("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,a)=>a.wrapperInner})(({ownerState:t})=>F({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Pa=c.forwardRef(function(a,n){const r=xt({props:a,name:"MuiCollapse"}),{addEndListener:s,children:o,className:i,collapsedSize:l="0px",component:m,easing:u,in:h,onEnter:d,onEntered:p,onEntering:g,onExit:y,onExited:_,onExiting:v,orientation:U="vertical",style:M,timeout:k=nn.standard,TransitionComponent:E=rn}=r,W=yt(r,Nr),D=F({},r,{orientation:U,collapsedSize:l}),O=Pr(D),A=Pe(),x=c.useRef(),$=c.useRef(null),B=c.useRef(),K=typeof l=="number"?`${l}px`:l,z=U==="horizontal",L=z?"width":"height";c.useEffect(()=>()=>{clearTimeout(x.current)},[]);const j=c.useRef(null),w=ta(n,j),b=R=>J=>{if(R){const ne=j.current;J===void 0?R(ne):R(ne,J)}},N=()=>$.current?$.current[z?"clientWidth":"clientHeight"]:0,q=b((R,J)=>{$.current&&z&&($.current.style.position="absolute"),R.style[L]=K,d&&d(R,J)}),X=b((R,J)=>{const ne=N();$.current&&z&&($.current.style.position="");const{duration:Te,easing:Oe}=Ot({style:M,timeout:k,easing:u},{mode:"enter"});if(k==="auto"){const Bt=A.transitions.getAutoHeightDuration(ne);R.style.transitionDuration=`${Bt}ms`,B.current=Bt}else R.style.transitionDuration=typeof Te=="string"?Te:`${Te}ms`;R.style[L]=`${ne}px`,R.style.transitionTimingFunction=Oe,g&&g(R,J)}),oe=b((R,J)=>{R.style[L]="auto",p&&p(R,J)}),se=b(R=>{R.style[L]=`${N()}px`,y&&y(R)}),ve=b(_),ae=b(R=>{const J=N(),{duration:ne,easing:Te}=Ot({style:M,timeout:k,easing:u},{mode:"exit"});if(k==="auto"){const Oe=A.transitions.getAutoHeightDuration(J);R.style.transitionDuration=`${Oe}ms`,B.current=Oe}else R.style.transitionDuration=typeof ne=="string"?ne:`${ne}ms`;R.style[L]=K,R.style.transitionTimingFunction=Te,v&&v(R)}),ie=R=>{k==="auto"&&(x.current=setTimeout(R,B.current||0)),s&&s(j.current,R)};return G.jsx(E,F({in:h,onEnter:q,onEntered:oe,onEntering:X,onExit:se,onExited:ve,onExiting:ae,addEndListener:ie,nodeRef:j,timeout:k==="auto"?null:k},W,{children:(R,J)=>G.jsx(Fr,F({as:m,className:ze(O.root,i,{entered:O.entered,exited:!h&&K==="0px"&&O.hidden}[R]),style:F({[z?"minWidth":"minHeight"]:K},M),ownerState:F({},D,{state:R}),ref:w},J,{children:G.jsx(Kr,{ownerState:F({},D,{state:R}),className:O.wrapper,ref:$,children:G.jsx(qr,{ownerState:F({},D,{state:R}),className:O.wrapperInner,children:o})})}))}))});Pa.muiSupportAuto=!0;const Fa=Pa;function Hr(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:s=!1}=t,o=ja({badgeContent:a,max:r});let i=n;n===!1&&a===0&&!s&&(i=!0);const{badgeContent:l,max:m=r}=i?o:t,u=l&&Number(l)>m?`${m}+`:l;return{badgeContent:l,invisible:i,max:m,displayValue:u}}function Vr(t){return gt("MuiBadge",t)}const Gr=Ct("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Ce=Gr,Yr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],tt=10,at=4,Xr=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:s,variant:o,classes:i={}}=t,l={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${re(n.vertical)}${re(n.horizontal)}`,`anchorOrigin${re(n.vertical)}${re(n.horizontal)}${re(s)}`,`overlap${re(s)}`,a!=="default"&&`color${re(a)}`]};return bt(l,Vr,i)},Jr=be("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Qr=be("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${re(n.anchorOrigin.vertical)}${re(n.anchorOrigin.horizontal)}${re(n.overlap)}`],n.color!=="default"&&a[`color${re(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>F({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:tt*2,lineHeight:1,padding:"0 6px",height:tt*2,borderRadius:tt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:at,height:at*2,minWidth:at*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Ce.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),Zr=c.forwardRef(function(a,n){var r,s,o,i,l,m;const u=xt({props:a,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:d,component:p,components:g={},componentsProps:y={},children:_,overlap:v="rectangular",color:U="default",invisible:M=!1,max:k=99,badgeContent:E,slots:W,slotProps:D,showZero:O=!1,variant:A="standard"}=u,x=yt(u,Yr),{badgeContent:$,invisible:B,max:K,displayValue:z}=Hr({max:k,invisible:M,badgeContent:E,showZero:O}),L=ja({anchorOrigin:h,color:U,overlap:v,variant:A,badgeContent:E}),j=B||$==null&&A!=="dot",{color:w=U,overlap:b=v,anchorOrigin:N=h,variant:q=A}=j?L:u,X=q!=="dot"?z:void 0,oe=F({},u,{badgeContent:$,invisible:j,max:K,displayValue:X,showZero:O,anchorOrigin:N,color:w,overlap:b,variant:q}),se=Xr(oe),ve=(r=(s=W==null?void 0:W.root)!=null?s:g.Root)!=null?r:Jr,ae=(o=(i=W==null?void 0:W.badge)!=null?i:g.Badge)!=null?o:Qr,ie=(l=D==null?void 0:D.root)!=null?l:y.root,R=(m=D==null?void 0:D.badge)!=null?m:y.badge,J=zt({elementType:ve,externalSlotProps:ie,externalForwardedProps:x,additionalProps:{ref:n,as:p},ownerState:oe,className:ze(ie==null?void 0:ie.className,se.root,d)}),ne=zt({elementType:ae,externalSlotProps:R,ownerState:oe,className:ze(se.badge,R==null?void 0:R.className)});return G.jsxs(ve,F({},J,{children:[_,G.jsx(ae,F({},ne,{children:X}))]}))}),eo=Zr;var Mt={},to=Me;Object.defineProperty(Mt,"__esModule",{value:!0});var pt=Mt.default=void 0,ao=to(Ue()),no=G,ro=(0,ao.default)((0,no.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");pt=Mt.default=ro;function oo({title:t,children:a,id:n="dropdownbtn",...r}){const[s,o]=c.useState(null),i=!!s,l=c.useCallback(u=>o(u.currentTarget),[o]),m=c.useCallback(()=>o(null),[o]);return f(c.Suspense,{fallback:e(V,{endIcon:e(pt,{}),...r,children:e(ye,{width:50})}),children:[e(V,{...r,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:l,endIcon:e(pt,{}),children:t}),e(ln,{id:"basic-menu",anchorEl:s,open:i,placement:"bottom-start",transition:!0,onClick:m,sx:{zIndex:1500},children:({TransitionProps:u,placement:h})=>e(on,{...u,style:{transformOrigin:h==="bottom-start"?"left top":"left bottom"},children:e(sn,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Ir,{onClickAway:m,children:f("div",{children:[" ",e(c.Suspense,{fallback:e(ye,{width:"100%",height:"1000"}),children:e(Ar,{"aria-labelledby":n,children:a})})]})})})})})]})}const so=vt(G.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),io=vt(G.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),lo=vt(G.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),co=""+new URL("splash_aether-7358d244.png",import.meta.url).href,uo=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,ho=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,po=""+new URL("splash_amber-51176566.png",import.meta.url).href,mo=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,fo=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,go=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,Co=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,xo=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,yo=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,bo=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,vo=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,wo=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,_o=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,Ro=""+new URL("splash_collei-504a299e.png",import.meta.url).href,So=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,Lo=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,$o=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,To=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,ko=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,Uo=""+new URL("splash_eula-1491affb.png",import.meta.url).href,Mo=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,jo=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,Do=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,Io=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,Ao=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,Bo=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,Oo=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,zo=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,Eo=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,Wo=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,No=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,Po=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,Fo=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,Ko=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,qo=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,Ho=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,Vo=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Go=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Yo=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Xo=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,Jo=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,Qo=""+new URL("splash_lumine-51240648.png",import.meta.url).href,Zo=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,es=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,ts=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,as=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,ns=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,rs=""+new URL("splash_navia-749d043e.png",import.meta.url).href,os=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,ss=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,is=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,ls=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,cs=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,us=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,ds=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,hs=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,ps=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,ms=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,fs=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,gs=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,Cs=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,xs=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,ys=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,bs=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,vs=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,ws=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,_s=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,Rs=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,Ss=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,Ls=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,$s=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,Ts=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,ks=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,Us=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,Ms=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,js=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,Ds=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,Is=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,As={Albedo:uo,Alhaitham:ho,Amber:po,AratakiItto:Wo,Baizhu:go,Barbara:Co,Beidou:xo,Bennett:yo,Candace:bo,Charlotte:vo,Chevreuse:wo,Chongyun:_o,Collei:Ro,Cyno:So,Dehya:Lo,Diluc:$o,Diona:To,Dori:ko,Eula:Uo,Faruzan:Mo,Fischl:jo,Freminet:Do,Furina:Io,Gaming:Ao,Ganyu:Bo,Gorou:Oo,HuTao:Eo,Jean:No,KaedeharaKazuha:Ko,Kaeya:Po,KamisatoAyaka:mo,KamisatoAyato:fo,Kaveh:Fo,Keqing:qo,Kirara:Ho,Klee:Vo,KujouSara:ps,KukiShinobu:Yo,Layla:Xo,Lisa:Jo,Lynette:Zo,Lyney:es,Mika:ts,Mona:as,Nahida:ns,Navia:rs,Neuvillette:os,Nilou:ss,Ningguang:is,Noelle:ls,Qiqi:cs,RaidenShogun:us,Razor:ds,Rosaria:hs,SangonomiyaKokomi:Go,Sayu:ms,Shenhe:fs,ShikanoinHeizou:zo,Sucrose:gs,Tartaglia:Cs,Thoma:xs,Tighnari:ys,TravelerF:Qo,TravelerM:co,Venti:bs,Wanderer:vs,Wriothesley:ws,Xiangling:_s,Xianyun:Rs,Xiao:Ss,Xingqiu:Ls,Xinyan:$s,YaeMiko:Ts,Yanfei:ks,Yaoyao:Us,Yelan:Ms,Yoimiya:js,YunJin:Ds,Zhongli:Is};function Bs(t,a){return As[ke(t,a)]??""}const Os=c.createContext({}),zs=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,Es=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,Ws=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,Ns=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,Ps=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Fs=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,Ks=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,qs=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,Hs=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,Vs=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,Gs=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,Ys=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Xs=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,Js=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Qs=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,Zs=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,ei=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,ti=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,ai=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,ni=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,ri=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,oi=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,si=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,ii=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,li=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,ci=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,ui=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,di=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,hi=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,pi=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,mi=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,fi=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,gi=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,Ci=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,xi=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,yi=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,bi=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,vi=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,wi=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,_i=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,Ri=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,Si=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,Li=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,$i=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,Ti=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,ki=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,Ui=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,Mi=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,ji=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,Di=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,Ii=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,Ai=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,Bi=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,Oi=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,zi=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,Ei=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,Wi=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,Ni=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,Pi=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,Fi=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Ki=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,qi=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,Hi=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,Vi=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Gi=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Yi=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Xi=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,Ji=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Qi=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,Zi=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,el=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,tl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,al=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,nl=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,rl=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,ol=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,sl=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,il=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,ll=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,cl=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,ul=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,Yt={Albedo:zs,Alhaitham:Es,Aloy:Ws,Amber:Ns,AratakiItto:Ps,Baizhu:Fs,Barbara:Ks,Beidou:qs,Bennett:Hs,Candace:Vs,Charlotte:Gs,Chevreuse:Ys,Chongyun:Xs,Collei:Js,Cyno:Qs,Dehya:Zs,Diluc:ei,Diona:ti,Dori:ai,Eula:ni,Faruzan:ri,Fischl:oi,Freminet:si,Furina:ii,Gaming:li,Ganyu:ci,Gorou:ui,HuTao:di,Jean:hi,KaedeharaKazuha:Ci,Kaeya:pi,KamisatoAyaka:mi,KamisatoAyato:fi,Kaveh:gi,Keqing:xi,Kirara:yi,Klee:bi,KujouSara:vi,KukiShinobu:wi,Layla:_i,Lisa:Ri,Lyney:Li,Lynette:Si,Mika:$i,Mona:Ti,Nahida:ki,Navia:Ui,Neuvillette:Mi,Nilou:ji,Ningguang:Di,Noelle:Ii,Qiqi:Ai,RaidenShogun:Bi,Razor:Oi,Rosaria:zi,SangonomiyaKokomi:Ei,Sayu:Wi,Shenhe:Ni,ShikanoinHeizou:Pi,Somnia:Fi,Sucrose:Ki,Tartaglia:qi,Thoma:Hi,Tighnari:Vi,TravelerF:cl,TravelerM:ul,Venti:Gi,Wanderer:Yi,Wriothesley:Xi,Xiangling:Ji,Xianyun:Qi,Xiao:Zi,Xingqiu:el,Xinyan:tl,YaeMiko:al,Yanfei:nl,Yaoyao:rl,Yelan:ol,Yoimiya:sl,YunJin:il,Zhongli:ll};function dl(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return Yt[`Traveler${a}`]??"";default:return Yt[t]??""}}function du(){const{characterSheet:t}=c.useContext(H),{data:a}=c.useContext(te),n={auto:a.get(P.total.auto).value,skill:a.get(P.total.skill).value,burst:a.get(P.total.burst).value},r={auto:a.get(P.total.autoBoost).value,skill:a.get(P.total.skillBoost).value,burst:a.get(P.total.burstBoost).value};return e(C,{children:e(S,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var o;return e(S,{item:!0,xs:4,children:e(eo,{badgeContent:n[s],color:r[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(C,{component:"img",src:(o=t.getTalentOfKey(s))==null?void 0:o.img,width:"100%",height:"auto"})})},s)})})})}function hl(){const{characterSheet:t,character:{key:a}}=c.useContext(H),{data:n}=c.useContext(te),r=ga(a),s=n.get(P.constellation).value;return e(S,{container:!0,spacing:1,children:aa(1,6).map(o=>{var i;return e(S,{item:!0,xs:4,children:e(Ge,{onClick:()=>r({constellation:o===s?o-1:o}),children:e(C,{component:"img",src:(i=t.getTalentOfKey(`constellation${o}`))==null?void 0:i.img,sx:{...s>=o?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},o)})})}function pl(){const{silly:t}=c.useContext(Fe),{character:{key:a}}=c.useContext(H),{gender:n}=ge(),{data:r}=c.useContext(te),s=r.get(P.lvl).value,o=r.get(P.asc).value,i=Bs(a,n),l=dl(a,n);return t&&i?e(ml,{src:i,level:s,ascension:o}):e(fl,{src:l,level:s,ascension:o})}function ml({src:t,level:a,ascension:n}){const{characterSheet:r}=c.useContext(H);return f(C,{sx:{position:"relative"},children:[e(C,{src:t,component:"img",width:"100%",height:"auto"}),f(C,{sx:{width:"100%",height:"100%"},children:[e(C,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ka,{})}),e(T,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Tt,{stars:r.rarity,colored:!0})}),e(Ha,{}),e(qa,{level:a,ascension:n})]})]})}function fl({src:t,level:a,ascension:n}){const{characterSheet:r}=c.useContext(H);return f(C,{sx:{position:"relative"},children:[f(C,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(T,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Tt,{stars:r.rarity,colored:!0})}),e(C,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ka,{})}),e(Ha,{}),e(qa,{level:a,ascension:n})]}),e(C,{src:t,component:"img",width:"100%",height:"auto"})]})}function Ka(){var n;const{characterSheet:t}=c.useContext(H),a=t.elementKey;return e(le,{color:a,sx:{height:"auto"},label:f(T,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(St,{ele:a}),e(C,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e($e,{src:(n=Ae.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function qa({level:t,ascension:a}){return e(T,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(Y,{children:cn(t,a)})})}function Ha(){const{character:{key:t}}=c.useContext(H),a=I(),{favorite:n}=Ca(t);return e(C,{sx:{position:"absolute",left:0,top:0},children:e(wt,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e($a,{}):e(xa,{})})})}var jt={},gl=Me;Object.defineProperty(jt,"__esModule",{value:!0});var Va=jt.default=void 0,Cl=gl(Ue()),xl=G,yl=(0,Cl.default)((0,xl.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");Va=jt.default=yl;function Ga({characterKey:t}){const{gender:a}=ge();if(!t)return null;const n=ce(t,a);return n?e(Ie,{placement:"right-end",title:e(T,{children:n.name}),children:e(yr,{characterKey:t,sideMargin:!0})}):null}function Ya({statKey:t,disableIcon:a=!1}){return f(C,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Lt,{statKey:t,iconProps:me}),f("span",{children:[rt.get(t),rt.unit(t)]})]})}function Xa({statKey:t,disableIcon:a=!1}){return e(Ve,{color:rt.getVariant(t),children:e(Ya,{statKey:t,disableIcon:a})})}function bl({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:s,BGComponent:o=de}){const i=ut(t),l=I(),m=c.useCallback(k=>e(Ge,{onClick:s,sx:{height:"100%"},children:k}),[s]),u=Pe();if(!i)return e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(C,{component:"img",src:Ae.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:h,rarity:d,level:p,mainStatKey:g,substats:y,location:_}=i,v=Math.max(Math.min(n,d*4),p),U=un.find(k=>i.mainStatKey.includes(k)),M=U?Et(u.palette[U].main,.6):Et(u.palette.secondary.main,.6);return e(o,{sx:{height:"100%"},children:e(Ta,{condition:!!s,wrapper:m,children:f(C,{display:"flex",height:"100%",children:[f(C,{className:`grad-${d}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(Pn,{art:i,children:e(C,{component:"img",src:wa(i.setKey,h),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),f(C,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(le,{size:"small",label:e("strong",{children:` +${p}`}),color:Sr.levelVariant(p)}),r&&e(le,{size:"small",label:_?e(Ga,{characterKey:_&&l.chars.LocationToCharacterKey(_)}):e(_a,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(le,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:M,p:1},icon:e(Ie,{placement:"top",title:e(T,{children:e(Xa,{statKey:g})}),disableInteractive:!0,children:e(C,{lineHeight:0,children:e(Lt,{statKey:g,iconProps:{style:{padding:"4px"}}})})}),label:e(T,{sx:{mx:-.7},children:e(Ve,{color:v!==p?"warning":void 0,children:dn(g,d,v)})})})]}),e(C,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:y.map((k,E)=>e(vl,{stat:k},E+k.key))})]})})})}function vl({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${_t(a,1,6)}`,r=ot(t.key);return e(C,{display:"flex",gap:1,alignContent:"center",children:f(T,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(Ie,{placement:"top",title:e(T,{children:t.key&&e(Xa,{statKey:t.key})}),disableInteractive:!0,children:e(C,{lineHeight:0,children:e(Lt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${na(t.value,r)}${r}`})]})})}function wl(t){return gt("MuiMasonry",t)}Ct("MuiMasonry",["root"]);const _l=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],xe=t=>Number(t.replace("px","")),Rl={flexBasis:"100%",width:0,margin:0,padding:0},Sl=t=>{const{classes:a}=t;return bt({root:["root"]},wl,a)},Ll=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const u={},h=xe(a.spacing(t.defaultSpacing));for(let d=1;d<=t.defaultColumns;d+=1)u[`&:nth-of-type(${t.defaultColumns}n+${d%t.defaultColumns})`]={order:d};return r.height=t.defaultHeight,r.margin=-(h/2),r["& > *"]=F({},n["& > *"],u,{margin:h/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${h}px)`}),F({},n,r)}const s=Wt({values:t.spacing,breakpoints:a.breakpoints.values}),o=pn(a);n=Je(n,Qe({theme:a},s,u=>{let h;if(typeof u=="string"&&!Number.isNaN(Number(u))||typeof u=="number"){const d=Number(u);h=Ze(o,d)}else h=u;return F({margin:`calc(0px - (${h} / 2))`,"& > *":{margin:`calc(${h} / 2)`}},t.maxColumnHeight&&{height:typeof h=="number"?Math.ceil(t.maxColumnHeight+xe(h)):`calc(${t.maxColumnHeight}px + ${h})`})}));const l=Wt({values:t.columns,breakpoints:a.breakpoints.values});return n=Je(n,Qe({theme:a},l,u=>{const d=`${(100/Number(u)).toFixed(2)}%`,p=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?Ze(o,Number(s)):"0px";return{"& > *":{width:`calc(${d} - ${p})`}}})),typeof s=="object"&&(n=Je(n,Qe({theme:a},s,(u,h)=>{if(h){const d=Number(u),p=Object.keys(l).pop(),g=Ze(o,d);return{"& > *":{width:`calc(${`${(100/(typeof l=="object"?l[h]||l[p]:l)).toFixed(2)}%`} - ${g})`}}}return null}))),n},$l=be("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(Ll),Tl=c.forwardRef(function(a,n){const r=xt({props:a,name:"MuiMasonry"}),{children:s,className:o,component:i="div",columns:l=4,spacing:m=1,defaultColumns:u,defaultHeight:h,defaultSpacing:d}=r,p=yt(r,_l),g=c.useRef(),[y,_]=c.useState(),v=!y&&h&&u!==void 0&&d!==void 0,[U,M]=c.useState(v?u-1:0),k=F({},r,{spacing:m,columns:l,maxColumnHeight:y,defaultColumns:u,defaultHeight:h,defaultSpacing:d,isSSR:v}),E=Sl(k),W=A=>{if(!g.current||!A||A.length===0)return;const x=g.current,$=g.current.firstChild,B=x.clientWidth,K=$.clientWidth;if(B===0||K===0)return;const z=window.getComputedStyle($),L=xe(z.marginLeft),j=xe(z.marginRight),w=Math.round(B/(K+L+j)),b=new Array(w).fill(0);let N=!1;x.childNodes.forEach(q=>{if(q.nodeType!==Node.ELEMENT_NODE||q.dataset.class==="line-break"||N)return;const X=window.getComputedStyle(q),oe=xe(X.marginTop),se=xe(X.marginBottom),ve=xe(X.height)?Math.ceil(xe(X.height))+oe+se:0;if(ve===0){N=!0;return}for(let ae=0;ae<q.childNodes.length;ae+=1){const ie=q.childNodes[ae];if(ie.tagName==="IMG"&&ie.clientHeight===0){N=!0;break}}if(!N){const ae=b.indexOf(Math.min(...b));b[ae]+=ve;const ie=ae+1;q.style.order=ie}}),N||mn.flushSync(()=>{_(Math.max(...b)),M(w>0?w-1:0)})};hn(()=>{if(typeof ResizeObserver>"u")return;let A;const x=new ResizeObserver(()=>{A=requestAnimationFrame(W)});return g.current&&g.current.childNodes.forEach($=>{x.observe($)}),()=>{A&&window.cancelAnimationFrame(A),x&&x.disconnect()}},[l,m,s]);const D=ta(n,g),O=new Array(U).fill("").map((A,x)=>G.jsx("span",{"data-class":"line-break",style:F({},Rl,{order:x+1})},x));return G.jsxs($l,F({as:i,className:ze(E.root,o),ref:D,ownerState:k},p,{children:[s,O]}))}),kl=Tl,Ul=c.createContext(void 0),we={title:e(Ve,{color:"warning",children:"ERROR"})},Ml={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(aa(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function jl(t,a,n){if(!a)return we;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[r,s]=a.split(":");if(r==="artifact"){const o=za(s);return o?{title:o.name,icon:Lr(s)}:we}else if(r==="weapon"){const o=Ye(s);if(!o)return we;const i=t.get(ue.weapon.asc).value;return{title:o.name,icon:$t(s,i>=2)}}}else{const r=t.get(ue.charKey).value;if(!r)return we;const s=ce(r,n.gender),o=["normal","charged","plunging"].includes(a)?"auto":a,i=s==null?void 0:s.getTalentOfKey(o);if(!i)return we;const l=Ml[a];return{icon:i.img,title:i.name,action:l}}return we}function Dl(t){const a=t.getDisplay(),n=Object.entries(a),r=n.filter(([u])=>u==="basic"),s=n.filter(([u])=>u==="reaction"),o=n.filter(([u])=>u==="custom"),i=n.filter(([u])=>u.startsWith("weapon")),l=n.filter(([u])=>u.startsWith("artifact")),m=n.filter(([u])=>u!=="basic"&&u!=="reaction"&&!u.startsWith("weapon")&&!u.startsWith("artifact")&&u!=="custom");return[...r,...s,...o,...m,...i,...l]}function Il(){const{data:t}=c.useContext(te),a=c.useMemo(()=>Dl(t).filter(([,n])=>Object.values(n).some(r=>!r.isEmpty)),[t]);return e(C,{sx:{mr:-1,mb:-1},children:e(kl,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:a.map(([n,r])=>e(Al,{displayNs:r,sectionKey:n},n))})})}function Al({displayNs:t,sectionKey:a}){const n=c.useContext(Ul),{data:r,oldData:s}=c.useContext(te),o=I(),i=c.useMemo(()=>jl(r,a,o),[o,r,a]),l=c.useMemo(()=>fe(t,(d,p)=>ar(["display",a,p])),[t,a]);if(!i)return e(de,{});const{title:m,icon:u,action:h}=i;return f(de,{children:[e(gr,{avatar:u&&e($e,{size:2,src:u}),title:m,action:h&&e(Y,{children:h})}),e(Re,{}),e(er,{sx:{m:0},children:Object.entries(t).map(([d,p])=>e(Qn,{node:p,oldValue:s?s.get(l[d]).value:void 0,component:Zn,emphasize:JSON.stringify(n)===JSON.stringify([a,d])},d))})]})}function Bl({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=de,weaponTypeKey:s="sword"}){const o=Tr(t),i=(o==null?void 0:o.key)&&Ye(o.key);return!o||!i?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(C,{component:"img",src:Ae.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e(Ol,{weapon:o,weaponSheet:i,onClick:n,showLocation:a,BGComponent:r})}function Ol({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:s=de}){const o=I(),{refinement:i,location:l}=t,m=c.useCallback(h=>e(Ge,{sx:{height:"100%"},onClick:r,children:h}),[r]),u=c.useMemo(()=>a&&t&&nr([a.data,Ra(t)]),[a,t]);return e(s,{sx:{height:"100%"},children:e(Ta,{condition:!!r,wrapper:m,children:f(C,{display:"flex",height:"100%",alignItems:"stretch",children:[f(C,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(ya,{sheet:a,children:e(C,{component:"img",src:$t(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),f(C,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(le,{size:"small",label:e("strong",{children:Aa.getLevelString(t)}),color:"primary"}),n&&e(le,{size:"small",label:l?e(Ga,{characterKey:o.chars.LocationToCharacterKey(l)}):e(_a,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(C,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(le,{size:"small",color:"info",label:f("strong",{children:["R",i]})})})]}),f(C,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(Xt,{node:u.get(ue.weapon.main)}),e(Xt,{node:u.get(ue.weapon.sub)})]})]})})})}function Xt({node:t}){return t.info.name?e(C,{display:"flex",gap:1,alignContent:"center",children:f(T,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(Ie,{placement:"top",title:e(T,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:rr(t)})]})}):null}function zl({artifacts:t,currentlyEquipped:a=!1}){const n=c.useMemo(()=>t.filter(r=>r).reduce((r,s)=>(r[s.setKey]?r[s.setKey].push(s.slotKey):r[s.setKey]=[s.slotKey],r),{}),[t]);return e(Ke,{children:Object.entries(n).sort(([r,s],[o,i])=>i.length-s.length).map(([r,s])=>e(El,{setKey:r,currentlyEquipped:a,slotarr:s},r))})}function El({setKey:t,currentlyEquipped:a=!1,slotarr:n}){const r=za(t),s=n.length,o=Object.keys(r.setEffects).map(i=>parseInt(i)).filter(i=>i<=s);return e(C,{children:e(vr,{artifactSheet:r,numInSet:s,children:e(Y,{sx:{height:"100%"},color:a?"success":"primary",children:f(T,{children:[n.map(i=>e(Ea,{slotKey:i,iconProps:me},i))," ",r.name??"",o.map((i,l)=>e(Y,{sx:{ml:.5},color:"success",children:i},""+i+l))]})})})})}var Dt={},Wl=Me;Object.defineProperty(Dt,"__esModule",{value:!0});var mt=Dt.default=void 0,Nl=Wl(Ue()),Pl=G,Fl=(0,Nl.default)((0,Pl.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");mt=Dt.default=Fl;var It={},Kl=Me;Object.defineProperty(It,"__esModule",{value:!0});var ft=It.default=void 0,ql=Kl(Ue()),Hl=G,Vl=(0,ql.default)((0,Hl.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");ft=It.default=Vl;function Gl({setKey:t,buttonGroupSx:a}){const{t:n}=ee("sheet"),{teamChar:{optConfigId:r}}=c.useContext(he),{artSetExclusion:s}=Be(r),o=(s==null?void 0:s[t])??[],i=o.includes(2),l=o.includes(4),m=I();return f(fr,{sx:a,fullWidth:!0,children:[e(V,{startIcon:i?e(Nt,{}):e(Pt,{}),onClick:()=>m.optConfigs.set(r,{artSetExclusion:Ft(s,t,2)}),color:i?"secondary":"success",endIcon:i?e(mt,{}):e(ft,{}),children:n`2set`}),e(V,{startIcon:l?e(Nt,{}):e(Pt,{}),onClick:()=>m.optConfigs.set(r,{artSetExclusion:Ft(s,t,4)}),color:l?"secondary":"success",endIcon:l?e(mt,{}):e(ft,{}),children:n`4set`})]})}function Yl({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r}){const{teamChar:{optConfigId:s,buildType:o,buildId:i}}=c.useContext(he),{character:{key:l,equippedArtifacts:m,equippedWeapon:u}}=c.useContext(H),{mainStatAssumptionLevel:h,allowLocationsState:d}=Be(s)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},p=I(),{data:g,oldData:y}=c.useContext(te),_=c.useMemo(()=>{var w;return{oldId:(w=y==null?void 0:y.get(P.weapon.id))==null?void 0:w.value,newId:g.get(P.weapon.id).value??""}},[g,y]),[v,U,M]=qe(!1),k=c.useMemo(()=>_e(pe,w=>{var b;return{oldId:(b=y==null?void 0:y.get(P.art[w].id))==null?void 0:b.value,newId:g.get(P.art[w].id).value??""}}),[g,y]),[E,W]=c.useState(),D=c.useCallback(()=>W(void 0),[W]),O=i&&o==="real",A=c.useCallback(()=>{const w=O?"Do you want to equip this build to the currently active build?":"Do you want to equip this build to this character?";if(!window.confirm(w))return;if(O){p.builds.set(i,{weaponId:g.get(P.weapon.id).value,artifactIds:_e(pe,q=>{var X;return(X=g.get(P.art[q].id).value)==null?void 0:X.toString()})});return}const b=p.chars.get(l);if(!b)return;pe.forEach(q=>{var oe;const X=(oe=g.get(P.art[q].id).value)==null?void 0:oe.toString();if(X)p.arts.set(X,{location:Se(l)});else{const se=b.equippedArtifacts[q];se&&p.arts.get(se)&&p.arts.set(se,{location:""})}});const N=g.get(P.weapon.id).value;N&&p.weapons.set(N,{location:Se(l)})},[l,O,i,g,p]),x=c.useMemo(()=>Object.fromEntries(pe.map(w=>{var b;return[w,(b=g.get(P.art[w].id).value)==null?void 0:b.toString()]})),[g]),$=c.useMemo(()=>x&&Object.values(x).map(w=>p.arts.get(w)).filter(w=>w),[x,p.arts]),B=c.useMemo(()=>o==="tc"?_e(pe,()=>"tc"):o==="equipped"?m:o==="real"?p.builds.get(i).artifactIds:_e(pe,()=>""),[o,i,p,m]),K=c.useMemo(()=>o==="tc"?"tc":o==="equipped"?u:o==="real"?p.builds.get(i).weaponId??"":"",[o,i,p,u]),z=c.useMemo(()=>e(S,{item:!0,xs:1,children:e(Bl,{showLocation:!0,weaponId:g.get(P.weapon.id).value,onClick:U})}),[g,U]),L=c.useMemo(()=>pe.map(w=>e(S,{item:!0,xs:1,children:e(bl,{showLocation:!0,slotKey:w,artifactId:x[w],mainStatAssumptionLevel:h,onClick:()=>{const b=k[w].oldId,N=k[w].newId;W({oldId:b!==N?b:void 0,newId:N})}})},w)),[W,k,h,x]),j=pe.every(w=>x[w]===B[w])&&g.get(P.weapon.id).value===K;return e(ra,{children:f(c.Suspense,{fallback:e(ye,{variant:"rectangular",width:"100%",height:600}),children:[_&&e(Xl,{newOld:_,showWeapon:v,onClose:M}),E&&e(Jl,{newOld:E,mainStatAssumptionLevel:h,onClose:D,allowLocationsState:d}),f(Z,{children:[f(C,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[t!==void 0&&e(Y,{color:"info",children:e(T,{children:f("strong",{children:[t,j?" (Equipped)":""]})})}),e(zl,{artifacts:$,currentlyEquipped:j}),e(C,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(V,{size:"small",color:"success",onClick:A,disabled:r||j,startIcon:e(so,{}),children:"Equip Build"}),a]}),f(S,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[z,L]}),e(Il,{})]})]})})}function Xl({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const s=I(),o=a!==t,i=c.useCallback(l=>s.weapons.remove(l),[s]);return e(je,{open:n,onClose:r,containerProps:{maxWidth:o?"md":"xs"},children:e(de,{children:f(Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[o&&f(C,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(Q,{bgt:"light",sx:{p:1},children:e(T,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(T,{variant:"h6",textAlign:"center",color:"info",children:e(Y,{children:"TC Weapon"})}):e(ht,{weaponId:a,onDelete:i})]}),o&&e(C,{display:"flex",flexGrow:1}),o&&e(C,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Wa,{sx:{fontSize:40}})}),o&&e(C,{display:"flex",flexGrow:1}),f(C,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(Q,{bgt:"light",sx:{p:1},children:e(T,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(ht,{weaponId:t,onDelete:i})]})]})})})}function Jl({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:s}){var d;const o=I(),{character:{key:i}}=c.useContext(H),l=((d=o.arts.get(t))==null?void 0:d.location)??"",m=ut(t),u=ut(a),h=c.useCallback(p=>o.arts.remove(p),[o]);return e(je,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(de,{children:f(Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&f(C,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(Q,{bgt:"light",sx:{p:1},children:e(T,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(T,{variant:"h6",textAlign:"center",color:"info",children:e(Y,{children:"TC Artifact"})}):e(dt,{artifactId:a,onDelete:h,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:u==null?void 0:u.slotKey}}),a!=="tc"&&e(Jt,{id:a})]}),a&&e(C,{display:"flex",flexGrow:1}),a&&e(C,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Wa,{sx:{fontSize:40}})}),a&&e(C,{display:"flex",flexGrow:1}),f(C,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(Q,{bgt:"light",sx:{p:1},children:e(T,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(dt,{artifactId:t,onDelete:h,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:m==null?void 0:m.slotKey}}),m&&e(Jt,{id:t}),l&&l!==Se(i)&&s!=="all"&&e(Ql,{locationKey:l}),m&&fn.includes(m.setKey)&&e(Gl,{setKey:m.setKey})]})]})})})}function Jt({id:t}){const{t:a}=ee("page_character_optimize"),{teamChar:{optConfigId:n}}=c.useContext(he),r=I(),{artExclusion:s}=Be(n),o=s.includes(t),i=c.useCallback(()=>r.optConfigs.set(n,{artExclusion:oa(s,t)}),[t,s,r,n]);return n?e(Ie,{title:e(C,{children:e(T,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(V,{onClick:i,color:o?"secondary":"success",size:"small",startIcon:o?e(Ba,{}):e(Oa,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Ql({locationKey:t}){const{t:a}=ee("page_character_optimize"),{teamChar:{optConfigId:n}}=c.useContext(he),r=I(),s=ce(r.chars.LocationToCharacterKey(t)),{excludedLocations:o}=Be(n)??{excludedLocations:[]},i=o.includes(t),l=c.useCallback(()=>r.optConfigs.set(n,{excludedLocations:oa(o,t)}),[t,o,r,n]);return n?e(V,{onClick:l,color:i?"secondary":"success",size:"small",startIcon:i?e(Ba,{}):e(Oa,{}),children:f("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}const Qt=or(gn({dyn:{...ue.art,...ue.artSet}})),Zl={art:_e([...Cn,...sa],t=>Qt.dyn[t]),artSet:fe(ue.artSet,(t,a)=>Qt.dyn[a])};function hu(t,a,n){const r={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},s=new Set;for(const o of t){const i=xn(o.mainStatKey,o.rarity,Math.max(Math.min(a,yn[o.rarity]),o.level)),l={id:o.id,set:o.setKey,values:{[o.setKey]:1,[o.mainStatKey]:o.mainStatKey.endsWith("_")?i/100:i,...Object.fromEntries(o.substats.map(m=>[m.key,m.key.endsWith("_")?m.accurateValue/100:m.accurateValue]))}};delete l.values[""],r.values[o.slotKey].push(l),Object.keys(l.values).forEach(m=>s.add(m))}if(r.base=_e([...s],o=>0),n)for(const o of Object.values(r.values))o.push({id:"",values:{}});return r}function pu(t,a,n){var h;const{artifact:{sets:r},optimization:{target:s,minTotal:o}}=n;if(!s)return{};const i=(h=t[a])==null?void 0:h.target.data[0];if(!i)return{};Object.assign(i,ct([i,Zl]));const l=bn(i.display??{},s);if(!l)return{};const m=Object.keys(o).map(d=>i.total[d]).filter(d=>d);let u=qt([l,...m],i,({path:[d]})=>d!=="dyn");return u=sr(u,d=>{if(d.operation==="read"&&d.path[0]==="dyn"){const p=r[d.path[1]];if(p)return We(p);if(!sa.includes(d.path[1]))return We(0)}return d},d=>d),u=qt(u,{},d=>!1),{nodes:u}}function mu(t){const a=new Set;return ir(t,{},n=>{const r=n.path[1];return a.add(r),r},1),a}function fu(t){const{artifact:{slots:a,substats:{stats:n,type:r,rarity:s}}}=t,o=fe(n,(m,u)=>Math.ceil(n[u]/vn(u,s,r))),i=ac(a),l=tc(a);return{minSubLines:l,minOtherRolls:ec(Object.entries(o),i,l)}}function ec(t,a,n=4*5){const r=t.reduce((s,[o,i])=>{const l=5-(a[o]??0);return s+Math.min(i,l)},0);return n-r}function tc(t){return Object.values(t).reduce((a,{rarity:n,level:r})=>{const{high:s,low:o}=Rn[n];return a+(r>=4?s:o)},0)}function ac(t){const a={};return Object.values(t).forEach(({statKey:n})=>{a[n]=(a[n]??0)+1},0),a}function nc(t){const{artifact:{slots:a,substats:{stats:n},sets:r}}=t,s=fe(n,(o,i)=>wn(o,i));return Object.values(a).forEach(({statKey:o,rarity:i,level:l})=>s[o]=(s[o]??0)+_n(o,i,l)),{art:fe(s,(o,i)=>i.endsWith("_")?lr(o):We(o)),artSet:fe(r,o=>We(o))}}function gu(t){const{weapon:{key:a,level:n,ascension:r,refinement:s}}=t;return{id:"",location:"",key:a,level:n,ascension:r,refinement:s,lock:!1}}function rc(t=0,a,n){const{teamId:r,teamCharId:s}=c.useContext(he),o=I(),[i,l]=De(),m=c.useDeferredValue(i),{gender:u}=ge(),{teamCharIds:h}=Fn(r)??{teamCharIds:[]},d=c.useMemo(()=>m&&oc(o,r,u,s,t,a,n),[m,u,r,o,t,s,a,n]);return c.useEffect(()=>r?o.teams.follow(r,l):void 0,[r,l,o]),c.useEffect(()=>{if(!i)return()=>{};const p=h.map(g=>{const y=o.teamChars.follow(g,l),_=o.teamChars.followChar(g,l),v=o.teamChars.followBuild(g,l);return()=>{y(),_(),v()}});return()=>{p.forEach(g=>g())}},[i,o,h,l]),d}function oc(t,a,n,r,s=0,o,i){if(!a)return;const l=t.teams.getActiveTeamChar(a);if(!l)return;const{teamData:m,teamBundle:u}=sc(t,a,r,s,o,i)??{};if(!m||!u)return;const h=cr(m,n,l.key);return Sn(h,(p,g)=>{const{data:y,..._}=u[g];return{...p,..._}})}function sc(t,a,n,r=0,s,o){if(!a)return;const i=t.teams.get(a);if(!i)return;const{teamCharIds:l,enemyOverride:m}=i,u=l.map(p=>{if(!p)return;const g=t.teamChars.get(p);if(!g)return;const{key:y,buildType:_,buildTcId:v,infusionAura:U,customMultiTargets:M,conditional:k,bonusStats:E,hitMode:W,reaction:D}=g,O=t.chars.get(y);if(!O)return;const{key:A,level:x,constellation:$,ascension:B,talent:K}=O,z=p===n,L=(()=>o&&z?o:t.teamChars.getLoadoutWeapon(p))(),j=(()=>s&&z?s:_==="tc"&&v?nc(t.buildTcs.get(v)):Object.values(t.teamChars.getLoadoutArtifacts(p)).filter(b=>b))(),w=(()=>r&&z?r:0)();return ic(t,z,w,{key:A,level:x,constellation:$,ascension:B,talent:K,infusionAura:U,customMultiTargets:M,conditional:k,bonusStats:E,enemyOverride:m,hitMode:W,reaction:D},L,j)}).filter(p=>p),h=Object.fromEntries(u.filter(p=>p).map(p=>[p.character.key,p]));return{teamData:fe(h,({data:p})=>p),teamBundle:h}}function ic(t,a=!1,n,r,s,o){const i=t.chars.get(r.key),l=ce(r.key,t.gender);if(!l)return;const m=Ye(s.key);if(!m)return;const u=Aa.getAllDataOfType(l.weaponTypeKey),h=a?(()=>{const{display:y,..._}=m.data;return ct([_,u])})():m.data,d=ct([l.data,h,$r]),g=[...Array.isArray(o)?o.map(y=>ur(y,n)):[o],dr(r,a?d:void 0),Ra(s),d,hr,Kn];return{character:i,weapon:s,characterSheet:l,weaponSheet:m,data:g}}const nt={mx:.25,px:.25};function lc({reaction:t}){const{t:a}=ee("sheet_gen"),n=t==="spread"?"dendro":"electro";return f(C,{display:"flex",alignItems:"center",children:[e(Ve,{color:t,children:a(`reaction.${t}`)}),e(Y,{sx:nt,color:"dendro",children:e(Ln,{...me})}),"+",e(Y,{sx:nt,color:"electro",children:e(ia,{...me})}),"+",e(Y,{sx:nt,color:n,children:e(St,{ele:n,iconProps:me})})]})}const Zt={"":e("span",{children:"No Team Melee Infusion"}),pyro:f("span",{children:[e($n,{...me})," ",e(Y,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:f("span",{children:[e(Tn,{...me})," ",e(Y,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:f("span",{children:[e(kn,{...me})," ",e(Y,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:f("span",{children:[e(ia,{...me})," ",e(Y,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Cu(t){const{teamCharId:a,teamChar:{infusionAura:n}}=c.useContext(he),{character:{key:r}}=c.useContext(H),s=I();return Un(r)?e(Br,{title:Zt[n||""],color:n||"secondary",disableElevation:!0,disabled:!a,...t,children:Object.entries(Zt).map(([o,i])=>e(Na,{sx:o?{color:`${o}.main`}:void 0,selected:o===n,disabled:o===n,onClick:()=>s.teamChars.set(a,{infusionAura:o}),children:i},o))}):null}function cc(t){const{t:a}=ee("page_character"),{teamCharId:n,teamChar:{reaction:r}}=c.useContext(he),s=I(),{data:o}=c.useContext(te),i=o.get(P.charEle).value,l=o.get(pr).value,m=[...new Set([...Ht[i]??[],...Ht[l]??[],...Vt[i]??[],...Vt[l]??[]])];return f(Xe,{exclusive:!0,baseColor:"secondary",value:r,onChange:(u,h)=>s.teamChars.set(n,{reaction:h}),disabled:!n,...t,children:[e(Le,{value:"",disabled:!r,children:a`noReaction`}),m.map(u=>e(Le,{value:u,disabled:r===u,children:[...Mn].includes(u)?e(tr,{reaction:u}):e(lc,{reaction:u})},u))]})}function uc(t){const{t:a}=ee("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=c.useContext(he),s=I();return e(Xe,{exclusive:!0,baseColor:"secondary",value:r,onChange:(o,i)=>s.teamChars.set(n,{hitMode:i}),disabled:!n,...t,children:jn.map(o=>e(Le,{value:o,disabled:r===o,children:a(`hitmode.${o}`)},o))})}function Ja({artId:t,weaponId:a}){const{t:n}=ee("page_character"),[r,s,o]=qe(!1);return f(Ke,{children:[e(la,{open:r,onClose:o,containerProps:{maxWidth:"xl"},children:e(dc,{artId:t,weaponId:a,onHide:o})}),e(ca,{title:e(T,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(V,{color:"info",size:"small",onClick:s,children:e(wr,{})})})]})}function dc(t){var r;const a=c.useContext(he),n=c.useContext(H);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(hc,{...t}):n!=null&&n.character?e(pc,{...t}):null}function hc({artId:t,weaponId:a,onHide:n}){const r=I(),{character:{key:s}}=c.useContext(H),{teamCharId:o,teamChar:{optConfigId:i}}=c.useContext(he),{mainStatAssumptionLevel:l}=Be(i),{data:m}=c.useContext(te),u=c.useMemo(()=>{const p=r.arts.get(t??""),g=r.teamChars.getLoadoutArtifacts(o),y=fe(g,(_,v)=>v===(p==null?void 0:p.slotKey)?p:_);return Object.values(y).filter(_=>_)},[r,o,t]),h=rc(l,u,a?r.weapons.get(a):void 0),d=c.useMemo(()=>h&&{data:h[s].target,teamData:h,oldData:m},[s,h,m]);return d?e(Qa,{dataProviderValue:d,onHide:n}):null}function pc({artId:t,weaponId:a,onHide:n}){const r=I(),{character:{key:s,equippedArtifacts:o}}=c.useContext(H),{data:i}=c.useContext(te),l=c.useMemo(()=>{const h=r.arts.get(t??""),d=fe(o,(p,g)=>g===(h==null?void 0:h.slotKey)?h:r.arts.get(p));return Object.values(d).filter(p=>p)},[r,o,t]),m=ba(s,0,l,a?r.weapons.get(a):void 0),u=c.useMemo(()=>m&&{data:m[s].target,teamData:m,oldData:i},[s,m,i]);if(u)return e(Qa,{dataProviderValue:u,onHide:n})}function Qa({dataProviderValue:t,onHide:a}){return e(c.Suspense,{fallback:e(ye,{variant:"rectangular",width:"100%",height:600}),children:t&&e(te.Provider,{value:t,children:e(Yl,{extraButtonsLeft:f(Ke,{children:[e(uc,{size:"small"}),e(cc,{size:"small"})]}),extraButtonsRight:e(V,{size:"small",color:"error",onClick:a,children:e(Va,{})})})})})}const mc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},fc=c.lazy(()=>ua(()=>import("./ArtifactEditor-0831f438.js"),["./ArtifactEditor-0831f438.js","./index-bd0d44d1.js","./index-795832ed.css","./ChevronRight-861719ec.js","./index-d4062b01.js","./ColoredText-1d36ac1a.js","./SqBadge-5e801cf8.js","./BootstrapTooltip-3f084ef9.js","./LockOpen-6834ccfe.js","./ArtifactRarityDropdown-215e0ab6.js","./index-40c71a54.js","./LocationAutocomplete-84c26960.js","./StarDisplay-71a8a483.js","./DropdownButton-28cdca81.js","./ArtifactStatKeyDisplay-33ee0bc0.js","./Artifact-0df64a78.js","./SlotIcon-f6c43546.js","./CloseButton-44029339.js","./ArtifactSort-d1387b55.js","./InfoTooltip-66a48995.js","./CardActionArea-099a4d47.js","./TextButton-38a277d8.js","./CardHeader-c055bae8.js"],import.meta.url)),gc=c.lazy(()=>ua(()=>import("./ArtifactFilterDisplay-e28f3865.js").then(t=>t.b),["./ArtifactFilterDisplay-e28f3865.js","./index-bd0d44d1.js","./index-795832ed.css","./LockOpen-6834ccfe.js","./useDisplayArtifact-42dc0737.js","./totalUtils-78a1840e.js","./BootstrapTooltip-3f084ef9.js","./StarDisplay-71a8a483.js","./DropdownButton-28cdca81.js","./ColoredText-1d36ac1a.js","./index-d4062b01.js","./SqBadge-5e801cf8.js","./ArtifactStatKeyDisplay-33ee0bc0.js","./Artifact-0df64a78.js","./LocationAutocomplete-84c26960.js","./index-40c71a54.js","./SlotIcon-f6c43546.js"],import.meta.url));function xu({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:s}=ee(["page_character","artifact"]),o=I(),i=c.useCallback(L=>{t(L),r()},[t,r]),l=c.useCallback((L,j)=>({...L,...j,slotKeys:[a]}),[a]),[m,u,h]=qe(!1),[d,p]=c.useReducer(l,{..._r(),slotKeys:[a]}),[g,y]=De();c.useEffect(()=>o.arts.followAny(y),[o,y]);const _=Da(),v=mc[_],[U,M]=c.useState(0),k=c.useRef(null),E=c.useMemo(()=>Rr(),[]),W=o.arts.values.filter(L=>L.slotKey===d.slotKeys[0]).length,D=c.useMemo(()=>{const L=kt(d,E);return g&&o.arts.values.filter(L).map(j=>j.id)},[g,o,E,d]),{artifactIdsToShow:O,numPages:A,currentPageIndex:x}=c.useMemo(()=>{const L=Math.ceil(D.length/v),j=_t(U,0,L-1);return{artifactIdsToShow:D.slice(j*v,(j+1)*v),numPages:L,currentPageIndex:j}},[D,U,v]),$=D.length!==W?`${D.length}/${W}`:`${W}`,B=c.useCallback((L,j)=>{var w;(w=k.current)==null||w.scrollIntoView({behavior:"smooth"}),M(j-1)},[M,k]),K={count:A,page:x+1,onChange:B},z={numShowing:O.length,total:$,t:s,namespace:"artifact"};return e(je,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:f(de,{children:[e(c.Suspense,{fallback:!1,children:e(fc,{artifactIdToEdit:m?"new":"",cancelEdit:h,allowUpload:!0,allowEmpty:!0,fixedSlotKey:d.slotKeys[0]})}),f(Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f(T,{variant:"h6",children:[a?e($e,{src:Ae.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(He,{onClick:r})]}),e(Re,{}),e(Z,{children:e(c.Suspense,{fallback:e(ye,{variant:"rectangular",width:"100%",height:200}),children:e(gc,{filterOption:d,filterOptionDispatch:p,filteredIds:D,disableSlotFilter:!0})})}),e(Re,{}),f(Z,{children:[e(C,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Ne,{paginationProps:K,showingTextProps:z})}),e(V,{fullWidth:!0,onClick:u,color:"info",startIcon:e(Ia,{}),children:s("artifact:addNew")}),e(C,{mt:1,children:e(c.Suspense,{fallback:e(ye,{variant:"rectangular",width:"100%",height:300}),children:e(S,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:O.map(L=>e(S,{item:!0,xs:1,children:e(dt,{artifactId:L,extraButtons:e(Ja,{artId:L}),onClick:i})},L))})})}),A>1&&e(C,{pt:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ne,{paginationProps:K,showingTextProps:z})})]})]})})}const Cc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},xc=Ut([...da]);function yu({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:s}=ee(["page_character","page_weapon","weaponNames_gen"]),o=I(),[i,l]=c.useState(!1),m=c.useCallback(b=>{t(b),r()},[t,r]),[u,h]=c.useState(""),d=c.useCallback(b=>{h(o.weapons.new(Dn(b)))},[o,h]),p=c.useCallback(()=>h(""),[]),[g,y]=De();c.useEffect(()=>o.weapons.followAny(y),[y,o]);const _=Da(),v=Cc[_],[U,M]=c.useState(0),k=c.useRef(null),[E,W]=c.useState([5,4,3]),[D,O]=c.useState(""),A=c.useDeferredValue(D),x=c.useMemo(()=>(g&&o.weapons.values.filter(kt({weaponType:a,rarity:E,name:A},kr())).sort(ka(Mr.level??[],!1,Ur())).map(b=>b.id))??[],[g,o,E,a,A]),{weaponIdsToShow:$,numPages:B,currentPageIndex:K}=c.useMemo(()=>{const b=Math.ceil(x.length/v),N=_t(U,0,b-1);return{weaponIdsToShow:x.slice(N*v,(N+1)*v),numPages:b,currentPageIndex:N}},[x,U,v]),z=`${x.length}`,L=c.useCallback((b,N)=>{var q;(q=k.current)==null||q.scrollIntoView({behavior:"smooth"}),M(N-1)},[M,k]),j={count:B,page:K+1,onChange:L},w={numShowing:$.length,total:z,t:s,namespace:"page_weapon"};return e(je,{open:n,onClose:r,children:f(de,{children:[e(c.Suspense,{fallback:!1,children:e(zr,{show:i,onHide:()=>l(!1),onSelect:d,weaponTypeFilter:a})}),e(c.Suspense,{fallback:!1,children:e(Cr,{weaponId:u,footer:!0,onClose:p})}),e(Z,{sx:{py:1},children:f(S,{container:!0,children:[e(S,{item:!0,flexGrow:1,children:f(T,{variant:"h6",children:[a?e($e,{src:Ae.weaponTypes[a]}):null," ",s`page_character:tabEquip.swapWeapon`]})}),e(S,{item:!0,children:e(He,{onClick:r})})]})}),e(Re,{}),f(Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[f(S,{container:!0,spacing:1,children:[e(S,{item:!0,children:e(Xe,{sx:{height:"100%"},value:E,size:"small",children:da.map(b=>e(Le,{value:b,onClick:()=>W(xc(E,b)),children:f(C,{display:"flex",children:[e("strong",{children:b}),e(Ua,{})]})},b))})}),e(S,{item:!0,flexGrow:1,children:e(Ma,{autoFocus:!0,size:"small",value:D,onChange:b=>O(b.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(C,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ne,{paginationProps:j,showingTextProps:w})}),e(V,{fullWidth:!0,onClick:()=>l(!0),color:"info",startIcon:e(Ia,{}),children:s("page_weapon:addWeapon")}),e(S,{container:!0,spacing:1,children:$.map(b=>e(S,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(ht,{weaponId:b,onClick:m,extraButtons:e(Ja,{weaponId:b})})},b))}),B>1&&e(C,{pt:1,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ne,{paginationProps:j,showingTextProps:w})})]})]})})}function yc({talentKey:t,dropDownButtonProps:a}){const{t:n}=ee("sheet_gen"),{character:{talent:r,key:s}}=c.useContext(H),o=I(),{data:i}=c.useContext(te),l=i.get(ue.total[`${t}Boost`]).value,m=i.get(ue.total[t]).value,u=i.get(ue.asc).value;return e(oo,{fullWidth:!0,title:n("talentLvl",{level:m}),color:l?"info":"primary",...a,children:In(1,An[u]).map(h=>e(Na,{selected:r[t]===h,disabled:r[t]===h,onClick:()=>o.chars.set(s,d=>{d.talent[t]=h}),children:n("talentLvl",{level:h+l})},h))})}var At={},bc=Me;Object.defineProperty(At,"__esModule",{value:!0});var Za=At.default=void 0,vc=bc(Ue()),wc=G,_c=(0,vc.default)((0,wc.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");Za=At.default=_c;function Rc({activeCharId:t}){const a=I(),n=a.teamChars.getLoadoutArtifacts(t),{id:r}=a.teamChars.getLoadoutWeapon(t),s=!!n&&pe.map(d=>[d,n[d]]),{buildType:o,buildId:i,buildTcId:l}=a.teamChars.get(t),m=o==="equipped",u=o==="real"&&a.builds.get(i),h=o==="tc"&&a.buildTcs.get(l);return f(Ke,{children:[!!m&&e(Sc,{weaponId:r,artifacts:s}),!!u&&e(en,{...u,weaponId:r,artifacts:s}),!!h&&e(Lc,{buildTcId:l})]})}function Sc({weaponId:t,artifacts:a}){return e(en,{name:"Default",weaponId:t,artifacts:a})}function en({name:t,description:a,weaponId:n,artifacts:r}){const[s,o]=c.useState(!1);return f(Q,{bgt:"dark",sx:{display:"flex",flexDirection:"column",p:1,ml:2,mt:1,width:"100%"},children:[e(tn,{name:t,description:a,showMore:!0,onClick:()=>o(!s),expanded:s}),e(Fa,{in:s,timeout:"auto",children:f(S,{container:!0,columns:6,spacing:1,children:[e(S,{item:!0,xs:2,sm:1,height:"100%",children:e(qn,{weaponId:n??""})}),r.map(([i,l])=>e(S,{item:!0,xs:2,sm:1,children:e(Hn,{artifactObj:l,slotKey:i})},i))]})})]})}function Lc({buildTcId:t}){const{weapon:a,artifact:{slots:n,substats:{stats:r},sets:s},name:o,description:i}=Er(t),l=Ye(a.key),m=Object.entries(r),[u,h]=c.useState(!1);return f(Q,{bgt:"dark",sx:{p:1,ml:2,mt:1,width:"100%"},children:[e(tn,{name:o,description:i,showMore:!0,onClick:()=>h(!u),expanded:u}),e(Fa,{in:u,timeout:"auto",children:f(S,{container:!0,columns:3,spacing:1,direction:"row",justifyContent:"center",children:[e(S,{item:!0,container:!0,xs:3,md:1,columns:3,children:f(Q,{sx:{p:1,gap:1,display:"flex",flexDirection:"column",alignItems:"stretch"},children:[e(C,{sx:{display:"flex",flexDirection:"row",gap:1,justifyContent:"space-between"},children:e(S,{item:!0,xs:3,md:1,className:`grad-${l.rarity}star`,sx:{display:"flex",borderRadius:3},children:e(ya,{sheet:l,children:e(C,{component:"img",src:$t(a.key,a.ascension>=2),sx:{maxWidth:"100%"}})})})}),e(S,{item:!0,xs:3,children:!!Object.keys(s).length&&Object.entries(s).map(([d,p])=>f(C,{sx:{p:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",gap:1},children:[e($e,{size:2,src:wa(d,"flower")}),e("span",{children:e(Dr,{setKey:d})}),f(Ee,{children:["x",p]})]},d))})]})}),e(S,{item:!0,container:!0,xs:3,md:1,columns:3,children:e(Q,{sx:{p:1,gap:2,flexGrow:1,display:"flex",flexDirection:"column"},children:Object.entries(n).map(([d,{level:p,statKey:g}])=>f(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Ea,{slotKey:d}),f(Ee,{children:["+",p<10?0:"",p]}),e(Ya,{statKey:g})]},d))})}),e(S,{item:!0,container:!0,xs:3,md:1,columns:3,children:e(Q,{sx:{p:1,gap:1,display:"flex",flexDirection:"row",flexWrap:"wrap"},children:m.map(([d,p],g)=>e(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},avatar:e(Bn,{children:e(Vn,{statKey:d})}),label:f("span",{children:[na(p,ot(d)),ot(d)]})},g))})})]})})]})}function tn({name:t,description:a,showMore:n=!1,expanded:r=!1,onClick:s}){return f(T,{sx:{gap:1,px:1,display:"flex",alignItems:"center",width:"100%"},children:[e("span",{children:t})," ",!!a&&e(ha,{title:e(T,{children:a}),children:e(Sa,{})}),n&&e(wt,{onClick:s,sx:{marginLeft:"auto",transform:r?"rotate(180deg)":"rotate(0deg)"},children:e(Za,{})})]})}function $c(){const{t}=ee("ui"),a=I(),{character:n}=c.useContext(H),{key:r}=n,{gender:s}=ge(),o=c.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return r.startsWith("Traveler")?f(V,{onClick:o,startIcon:s==="F"?e(io,{}):e(lo,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function Tc({onClose:t}){const{t:a}=ee(["page_character","sillyWisher_charNames","charNames_gen"]),n=pa(),r=I(),{character:s,character:{key:o},characterSheet:i}=c.useContext(H),{gender:l}=ge(),{silly:m}=c.useContext(Fe),u=c.useCallback(async()=>{let h=ce(o,l).name;typeof h=="object"&&(h=a(`${m?"sillyWisher_charNames":"charNames_gen"}:${ke(o,l)}`)),window.confirm(a("removeCharacter",{value:h}))&&(r.chars.remove(o),n("/characters"))},[r,n,o,l,m,a]);return f(C,{display:"flex",flexDirection:"column",gap:1,children:[f(C,{display:"flex",gap:1,children:[e($c,{}),e(V,{color:"error",onClick:()=>u(),startIcon:e(ma,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(He,{onClick:t})]}),e(C,{children:f(S,{container:!0,spacing:1,justifyContent:"center",alignItems:"flex-start",children:[e(S,{item:!0,xs:8,sm:5,md:4,lg:3,children:f(Q,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(pl,{}),e(C,{sx:{px:1},children:e(xr,{level:s.level,ascension:s.ascension,setBoth:h=>r.chars.set(o,h)})}),e(T,{sx:{textAlign:"center",pb:-1},variant:"h6",children:i.constellationName}),e(hl,{})]})}),f(S,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(C,{children:e(S,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(h=>{var d;return e(S,{item:!0,xs:1,children:e(yc,{talentKey:h,dropDownButtonProps:{startIcon:e($e,{src:(d=i.getTalentOfKey(h))==null?void 0:d.img,size:1.75,sideMargin:!0})}},h)})})})}),e(kc,{})]})]})})]})}const ea={xs:1,sm:2,md:3,lg:3,xl:3};function kc(){const t=pa(),{character:{key:a}}=c.useContext(H),n=I(),{gender:r}=ge(),[s,o]=De(),i=c.useMemo(()=>{const d={};return n.teamChars.entries.map(([p,g])=>{g.key===a&&(d[p]||(d[p]=[]))}),n.teams.entries.forEach(([p,g])=>{const y=g.teamCharIds.find(_=>{var v;return((v=n.teamChars.get(_))==null?void 0:v.key)===a});y&&d[y].push(p)}),s&&d},[s,a,n]);c.useEffect(()=>n.teams.followAny(()=>o()),[n,o]),c.useEffect(()=>n.teamChars.followAny(()=>o()),[n,o]);const l=d=>{const p=n.teams.new();n.teams.set(p,g=>{g.teamCharIds[0]=d}),t(`/teams/${p}`)},m=()=>{const d=n.teams.new(),p=n.teamChars.new(a);n.teams.set(d,g=>{g.teamCharIds[0]=p}),t(`/teams/${d}`)},u=d=>{window.confirm("The loadouts and data (such as multi-opts) on this character will be deleted.")&&n.teamChars.remove(d)},h=d=>{n.teamChars.duplicate(d)};return f(C,{sx:{display:"flex",flexDirection:"column",gap:1},children:[f(T,{variant:"h6",children:["Team Loadouts with"," ",e(On,{characterKey:a,gender:r})]}),Object.entries(i).map(([d,p])=>{const{name:g,description:y,buildIds:_,buildTcIds:v}=n.teamChars.get(d);return f(Q,{bgt:"light",children:[e(Z,{children:f(C,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(T,{children:g}),e(ha,{title:e(T,{children:y}),children:e(Sa,{})}),f(Ee,{color:_.length?"primary":"secondary",children:[_.length," Builds"]}),f(Ee,{color:v.length?"primary":"secondary",children:[v.length," TC Builds"]}),e(V,{color:"info",onClick:()=>h(d),sx:{ml:"auto"},children:e(Gn,{})}),e(V,{color:"error",onClick:()=>u(d),children:e(ma,{})})]})}),e(Re,{}),e(Z,{children:f(S,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",columns:ea,spacing:2,children:[e(Rc,{activeCharId:d}),p.map(U=>e(S,{item:!0,xs:1,children:e(Yn,{teamId:U,onClick:M=>t(`/teams/${U}${M?`/${M}`:""}`),disableButtons:!0})},U)),e(S,{item:!0,...ea,children:e(V,{fullWidth:!0,sx:{height:"100%"},onClick:()=>l(d),color:"info",startIcon:e(Kt,{}),children:"Add new Team"})})]})})]},d)}),e(V,{fullWidth:!0,onClick:()=>m(),color:"info",startIcon:e(Kt,{}),children:"Add new Loadout+Team"}),e(Q,{bgt:"light"})]})}function bu({characterKey:t,onClose:a}){return e(la,{open:!!t,onClose:a,children:e(c.Suspense,{fallback:e(ye,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Uc,{characterKey:t,onClose:a},t)})})}function Uc({characterKey:t,onClose:a}){const n=va(t),{gender:r}=ge(),s=ce(t,r),o=ba(t),{target:i}=(o==null?void 0:o[t])??{},l=ga((n==null?void 0:n.key)??""),m=c.useMemo(()=>{if(!(!o||!i))return{data:i,teamData:o,oldData:void 0}},[i,o]),u=c.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:l}},[n,s,l]),[h,d]=c.useState(),[p,g]=c.useState(),y=c.useMemo(()=>({chartData:h,setChartData:d,graphBuilds:p,setGraphBuilds:g}),[h,p]);return c.useEffect(()=>{d(void 0),g(void 0)},[t]),e(Q,{children:e(Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:m&&u&&y?e(H.Provider,{value:u,children:e(te.Provider,{value:m,children:e(Os.Provider,{value:y,children:e(Tc,{onClose:a})})})}):e(ye,{variant:"rectangular",width:"100%",height:1e3})})})}function Mc(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>st.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${ke(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>it.char.data[Se(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function jc(t,a){return{element:(n,r)=>r.includes(zn(n)),weaponType:(n,r)=>r.includes(it.char.data[Se(n)].weaponType),rarity:(n,r)=>r.includes(it.char.data[Se(n)].rarity),name:(n,r)=>r===void 0||st.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${ke(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&st.t(`charNames_gen:${ke(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const an={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Dc=be(Le,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),Ic=Dc,Ac=Ut([...Rt]);function Bc({value:t,totals:a,onChange:n,...r}){const s=Pe(),o=!lt(s.breakpoints.up("md")),i=!lt(s.breakpoints.up("sm"));return e(Or,{exclusive:!0,value:t,...r,children:Rt.map(l=>f(Ic,{value:l,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex"},selectedColor:l,onClick:()=>n(Ac(t,l)),children:[e(St,{ele:l,iconProps:{fontSize:o&&!i?"inherit":void 0}}),!i&&e(le,{sx:{ml:.5},label:a[l],size:"small"})]},l))})}const Oc=Object.keys(an);function vu({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:s=!1}){const{t:o}=ee(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:i}=c.useContext(Fe),l=I(),[m,u]=c.useState(()=>l.displayCharacter.get());c.useEffect(()=>l.displayCharacter.follow((x,$)=>u($)),[l,u]);const{gender:h}=ge(),[d,p]=De();c.useEffect(()=>l.charMeta.followAny(()=>p()),[p,l]);const[g,y]=c.useState(""),_=c.useDeferredValue(g),v=c.useDeferredValue(m),U=c.useDeferredValue(d),M=c.useMemo(()=>{const{element:x,weaponType:$,sortType:B,ascending:K}=v,z=[...s?["new"]:[],...an[B]??[]];return U&&et.filter(L=>r(L,l.chars.get(L),ce(L,h))).filter(kt({element:x,weaponType:$,name:_},jc(l,i))).sort(ka(z,K,Mc(l,i),["new","favorite"]))},[v,s,U,_,l,i,r,h]),k=c.useMemo(()=>Gt(Wn,x=>et.forEach($=>{const B=ce($,l.gender).weaponTypeKey;x[B].total++,M.includes($)&&x[B].current++})),[M,l]),E=c.useMemo(()=>Gt(Rt,x=>et.forEach($=>{const B=ce($,l.gender).elementKey;x[B].total++,M.includes($)&&x[B].current++})),[M,l]),{weaponType:W,element:D,sortType:O,ascending:A}=m;return e(je,{open:t,onClose:()=>{y(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:f(de,{children:[f(Z,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e(jr,{sx:{height:"100%"},onChange:x=>l.displayCharacter.set({weaponType:x}),value:W,totals:k,size:"small"}),e(Bc,{sx:{height:"100%"},onChange:x=>l.displayCharacter.set({element:x}),value:D,totals:E,size:"small"}),e(C,{flexGrow:1,children:e(Ma,{autoFocus:!0,value:g,onChange:x=>y(x.target.value),label:o("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),e(br,{sx:{height:"100%"},sortKeys:Oc,value:O,onChange:x=>l.displayCharacter.set({sortType:x}),ascending:A,onChangeAsc:x=>l.displayCharacter.set({ascending:x})}),e(He,{onClick:()=>{y(""),a()}})]}),e(Re,{}),e(te.Provider,{value:{teamData:void 0},children:e(Z,{children:e(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:M.map(x=>e(S,{item:!0,xs:1,children:e(Ec,{characterKey:x,onClick:()=>{y(""),a(),n==null||n(x)}})},x))})})})]})})}const zc=be(({className:t,...a})=>e(ca,{...a,classes:{popper:t}}))({[`& .${En.tooltip}`]:{padding:0}});function Ec({characterKey:t,onClick:a}){const{gender:n}=ge(),r=ce(t,n),s=va(t),{favorite:o}=Ca(t),i=I(),{silly:l}=c.useContext(Fe),[m,u,h]=qe(),{level:d=1,ascension:p=0,constellation:g=0}=s??{},y=mr(t,"banner",n);return e(zc,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:m,onClose:h,onOpen:u,title:e(C,{sx:{width:300},children:e(Xn,{hideStats:!0,characterKey:t})}),children:e(C,{children:f(ra,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(C,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(wt,{sx:{p:.25},onClick:_=>{h(),i.charMeta.set(t,{favorite:!o})},children:o?e($a,{}):e(xa,{})})}),e(Ge,{onClick:a,children:f(C,{display:"flex",position:"relative",className:y?void 0:`grad-${r==null?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${y})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(C,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(C,{component:"img",src:Jn(t,n,l),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),f(C,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(T,{variant:"body2",sx:{flexGrow:1},children:e(Y,{color:r==null?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:r==null?void 0:r.name})}),s?f(C,{sx:{display:"flex",gap:1,alignItems:"center"},children:[f(C,{sx:{textShadow:"0 0 5px gray"},children:[f(T,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",d]}),f(T,{variant:"body2",component:"span",color:"text.secondary",children:["/",Nn[p]]})]}),f(T,{variant:"body2",children:["C",g]})]}):e(T,{component:"span",variant:"body2",children:e(Y,{children:"NEW"})}),e(Tt,{stars:(r==null?void 0:r.rarity)??1,colored:!0})]})]})})]})})})}const Wc=Ut([...fa]);function wu({value:t,totals:a,onChange:n,...r}){const s=Pe(),o=!lt(s.breakpoints.up("sm"));return e(Xe,{exclusive:!0,value:t,...r,children:fa.map(i=>e(Le,{value:i,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex",gap:o?0:1},onClick:()=>n(Wc(t,i)),children:f(C,{display:"flex",children:[e("strong",{children:i}),e(Ua,{}),!o&&e(le,{label:a[i],size:"small"})]})},i))})}export{xu as A,Yl as B,wu as C,oo as D,Bc as E,rc as F,Os as G,uc as H,pl as I,du as J,hl as K,Il as L,kl as M,fu as N,Ul as O,pu as P,mu as Q,cc as R,Ya as S,yc as T,Va as U,gu as V,yu as W,Cu as X,jc as a,Mc as b,an as c,bu as d,vu as e,Fa as f,Bl as g,bl as h,Ol as i,Dl as j,jl as k,Za as l,Zt as m,lc as n,nc as o,oc as p,Be as q,ft as r,mt as s,Gl as t,Er as u,zl as v,Xa as w,hu as x,sc as y,Zl as z};
