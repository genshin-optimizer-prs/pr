"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[238,571,262],{83660:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(107),i=a(23119),r=a(39857),l=a(52903);function s(){return(0,l.BX)(n.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are",(0,l.tZ)(i.Z,{color:"warning.main",component:r.rU,to:"/scanner",children:"automatic scanners"}),"that can speed up the import process!"]})}},45390:(e,t,a)=>{a.d(t,{Z:()=>Z});var n=a(31981),i=a(16736),r=a(67550),l=a(62197),s=a(69614),o=a(39099),c=a(24264),d=a(12366),u=a(2218),h=a(52903);function Z({artifactObj:e,slotKey:t}){if(!e)return(0,h.tZ)(c.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:(0,h.tZ)(r.Z,{sx:{width:"100%",pb:"100%",position:"relative"},children:(0,h.tZ)(r.Z,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:i.CL.slot[t]})})});const{mainStatKey:a,rarity:Z,level:p}=e,m=n.fR.find((t=>e.mainStatKey.includes(t))),f=null!=m?m:"secondary";return(0,h.tZ)(u.Z,{art:e,children:(0,h.BX)(c.Z,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[(0,h.tZ)(r.Z,{component:"img",className:`grad-${Z}star`,src:(0,i.Hp)(e.setKey,e.slotKey),maxWidth:"100%",maxHeight:"100%"}),(0,h.tZ)(l.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:(0,h.tZ)("strong",{children:(0,h.tZ)(d.Z,{sx:{p:.5},color:s.Z.levelVariant(p),children:(0,h.BX)("strong",{children:["+",p]})})})}),(0,h.tZ)(l.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:(0,h.tZ)(d.Z,{color:f,sx:{p:.5},children:(0,h.tZ)(o.C,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}},22537:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var n=a(31981),i=a(12761),r=a(51460),l=a(75927),s=a(93994),o=a(87051),c=a(41075),d=a(92794),u=a(66198),h=a(67550),Z=a(83249),p=a(2784),m=a(11141),f=a(34156),g=a(61851),b=a(2313),x=a(45269),y=a(58489),v=a(36674),C=a(51290),w=a(69614),k=a(25576),S=a(39099),B=a(75958),X=a(52903);function _({mainStatKeys:e,setMainStatKeys:t,totals:a}){const{t:i}=(0,m.$G)("artifact"),{t:r}=(0,m.$G)("statKey_gen"),l=(0,p.useMemo)((()=>n.rW.map((e=>({key:e,label:`${r(e)}${(0,w.V)(e)}`,variant:k.ZP.getVariant(e)})))),[r]),s=(0,p.useCallback)((e=>(0,X.tZ)(S.C,{statKey:e,iconProps:{sx:{ml:1,color:k.ZP.getVariant(e)}}})),[]),o=(0,p.useCallback)((e=>(0,X.tZ)("strong",{children:a[e]})),[a]),c=(0,p.useCallback)((e=>(0,X.tZ)(u.Z,{size:"small",label:a[e]})),[a]);return(0,X.tZ)(B.c,{options:l,valueKeys:e,onChange:t,toImg:s,toExLabel:o,toExItemLabel:c,label:i("autocompleteLabels.mainStats")})}var K=a(80422),j=a(38951),E=a(4121),T=a(51576),P=a(79410),O=a(86873);function D({artSetKeys:e,setArtSetKeys:t,totals:a}){const{t:n}=(0,m.$G)(["artifact","artifactNames_gen"]),i=(0,p.useCallback)((e=>(0,X.tZ)(P.Z,{src:(0,T.jU)(e),size:3})),[]),r=(0,p.useCallback)((e=>(0,X.tZ)("strong",{children:a[e]})),[a]),l=(0,p.useCallback)((e=>(0,X.tZ)(u.Z,{size:"small",label:a[e]})),[a]),s=(0,p.useMemo)((()=>Object.entries(E.WO).flatMap((([e,t])=>t.map((t=>({key:t,grouper:+e,label:n(`artifactNames_gen:${t}`)}))))).sort(O.Z)),[n]);return(0,X.tZ)(B.c,{options:s,valueKeys:e,label:n("artifact:autocompleteLabels.sets"),toImg:i,toExLabel:r,toExItemLabel:l,onChange:t,groupBy:e=>{var t,a;return null!=(t=null==(a=e.grouper)?void 0:a.toString())?t:""},renderGroup:e=>e.group&&(0,X.BX)(K.Z,{component:h.Z,children:[(0,X.BX)(j.Z,{sx:{top:"-1em"},children:[e.group," ",(0,X.tZ)(v.q,{stars:+e.group,inline:!0})]},`${e.group}Header`),e.children]},e.group)})}function M({substatKeys:e,setSubstatKeys:t,totals:a}){const{t:i}=(0,m.$G)("artifact"),{t:r}=(0,m.$G)("statKey_gen"),l=(0,p.useMemo)((()=>n._m.map((e=>({key:e,label:`${r(e)}${(0,w.V)(e)}`})))),[r]),s=(0,p.useCallback)((e=>(0,X.tZ)(S.C,{statKey:e,iconProps:{sx:{ml:1}}})),[]),o=(0,p.useCallback)((e=>(0,X.tZ)("strong",{children:a[e]})),[a]),c=(0,p.useCallback)((e=>(0,X.tZ)(u.Z,{size:"small",label:a[e]})),[a]);return(0,X.tZ)(B.c,{options:l,toImg:s,toExLabel:o,toExItemLabel:c,valueKeys:e,onChange:t,label:i("autocompleteLabels.substats")})}var I=a(79906),A=a(23657),L=a(31637),R=a(55893),z=a(80680);let G,$=e=>e;function N({locations:e,setLocations:t,totals:a,disabled:i}){const{t:r}=(0,m.$G)(["artifact","sillyWisher_charNames","charNames_gen"]),{database:l}=(0,p.useContext)(f.t),{gender:s}=(0,R.Z)(),{silly:o}=(0,p.useContext)(A.E),c=(0,p.useCallback)(((e,t)=>r(`${t?"sillyWisher_charNames":"charNames_gen"}:${(0,n.Cs)(l.chars.LocationToCharacterKey(e),s)}`)),[l,s,r]),d=(0,p.useCallback)((e=>(0,X.tZ)(z.Z,{characterKey:l.chars.LocationToCharacterKey(e)})),[l]),h=(0,p.useCallback)((e=>(0,X.tZ)("strong",{children:a[e]})),[a]),Z=(0,p.useCallback)((e=>(0,X.tZ)(u.Z,{size:"small",label:a[e]})),[a]),g=(0,p.useCallback)((e=>"Traveler"===e?n.vF.some((e=>l.charMeta.get(e).favorite)):!!e&&l.charMeta.get(e).favorite),[l]),b=(0,p.useCallback)((e=>{var t;return null!=(t=(0,L.m)(l.chars.LocationToCharacterKey(e),s).elementKey)?t:void 0}),[l,s]),x=(0,p.useMemo)((()=>n.vp.filter((e=>l.chars.get(l.chars.LocationToCharacterKey(e)))).map((e=>({key:e,label:c(e,o),favorite:g(e),color:b(e),alternateNames:[c(e,!1)]}))).sort(((e,t)=>e.favorite&&!t.favorite?-1:!e.favorite&&t.favorite?1:e.label.localeCompare(t.label)))),[l.chars,g,b,o,c]);return(0,X.tZ)(p.Suspense,{fallback:(0,X.tZ)(I.Z,{variant:"text",width:100}),children:(0,X.tZ)(B.c,{disabled:i,options:x,valueKeys:e,onChange:e=>t(e),toImg:d,toExLabel:h,toExItemLabel:Z,label:r(G||(G=$`artifact:filterLocation.location`)),chipProps:{variant:"outlined"}})})}var W=a(92096),q=a(36081),H=a(89977);function F({levelLow:e,levelHigh:t,setLow:a,setHigh:n,setBoth:r,dark:l=!1,disabled:s=!1}){const[o,c]=(0,p.useState)(e),[d,u]=(0,p.useState)(t),h=(0,p.useCallback)(((e,t)=>{if("number"==typeof t)throw new TypeError;const[a,n]=t;c(a),u(n)}),[c,u]);return(0,p.useEffect)((()=>c(e)),[c,e]),(0,p.useEffect)((()=>u(t)),[u,t]),(0,X.BX)(W.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:l?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[(0,X.tZ)(H.ZP,{value:o,onChange:e=>a((0,i.re)(null!=e?e:0,0,t)),sx:{px:1,pl:2,width:100,borderRadius:"4px 0 0 4px"},inputProps:{sx:{textAlign:"right"}},startAdornment:"RV: ",disabled:s}),(0,X.tZ)(q.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact RV Range",value:[o,d],onChange:h,onChangeCommitted:(e,t)=>r(t[0],t[1]),valueLabelDisplay:"auto",min:0,max:900,disabled:s}),(0,X.tZ)(H.ZP,{value:d,onChange:t=>n((0,i.re)(null!=t?t:0,e,900)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:s})]})}var V=a(79199);let U,Y,J,Q=e=>e;const ee=["locked","unlocked"],te=(0,g.X)([...n.$W]),ae=(0,g.X)([...n.Ex]),ne=(0,g.X)([...ee]),ie=(0,g.X)([1,2,3,4]);function re({filterOption:e,filterOptionDispatch:t,filteredIds:a,disableSlotFilter:g=!1}){const{t:w}=(0,m.$G)(["artifact","ui"]),k=(0,p.useMemo)((()=>(0,i.K8)(a,(e=>!0))),[a]),{artSetKeys:S=[],mainStatKeys:B=[],rarity:K=[],slotKeys:j=[],levelLow:E=0,levelHigh:T=20,substats:P=[],locations:O,showEquipped:I,showInventory:A,locked:L=[...ee],rvLow:R=0,rvHigh:z=900,lines:G=[]}=e,{database:$}=(0,p.useContext)(f.t),{rarityTotal:W,slotTotal:q,lockedTotal:H,linesTotal:re,equippedTotal:le,setTotal:se,mainStatTotal:oe,subStatTotal:ce,locationTotal:de}=(0,p.useMemo)((()=>{const e={rarityTotal:n.$W,slotTotal:n.Ex,lockedTotal:["locked","unlocked"],linesTotal:[0,1,2,3,4],equippedTotal:["equipped","unequipped"],setTotal:n.Gt,mainStatTotal:n.rW,subStatTotal:n._m,locationTotal:[...n.vp,""]};return(0,b.A)(e,(e=>Object.entries($.arts.data).forEach((([t,a])=>{const{rarity:n,slotKey:i,location:r,setKey:l,mainStatKey:s,substats:o}=a,c=a.lock?"locked":"unlocked",d=a.substats.filter((e=>e.value)).length,u=r?"equipped":"unequipped";e.rarityTotal[n].total++,e.slotTotal[i].total++,e.lockedTotal[c].total++,e.linesTotal[d].total++,e.equippedTotal[u].total++,e.setTotal[l].total++,e.mainStatTotal[s].total++,o.forEach((a=>{const n=a.key;n&&(e.subStatTotal[n].total++,k[t]&&e.subStatTotal[n].current++)})),e.locationTotal[r].total++,k[t]&&(e.rarityTotal[n].current++,e.slotTotal[i].current++,e.lockedTotal[c].current++,e.linesTotal[d].current++,e.equippedTotal[u].current++,e.setTotal[l].current++,e.mainStatTotal[s].current++,e.locationTotal[r].current++)}))))}),[$,k]);return(0,X.BX)(c.ZP,{container:!0,spacing:1,children:[(0,X.BX)(c.ZP,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[(0,X.tZ)(y.Z,{fullWidth:!0,value:K,size:"small",children:n.$W.map((e=>(0,X.BX)(d.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:e,onClick:()=>t({rarity:te(K,e)}),children:[(0,X.tZ)(v.q,{stars:e,inline:!0}),(0,X.tZ)(u.Z,{label:W[e],size:"small"})]},e)))}),(0,X.tZ)(y.Z,{fullWidth:!0,value:j,size:"small",disabled:g,children:n.Ex.map((e=>(0,X.BX)(d.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:e,onClick:()=>t({slotKeys:ae(j,e)}),children:[(0,X.tZ)(V.Z,{slotKey:e}),(0,X.tZ)(u.Z,{label:q[e],size:"small"})]},e)))}),(0,X.tZ)(y.Z,{fullWidth:!0,value:L,size:"small",children:ee.map(((e,a)=>(0,X.BX)(d.Z,{value:e,sx:{display:"flex",gap:1},onClick:()=>t({locked:ne(L,e)}),children:[a?(0,X.tZ)(s.Z,{}):(0,X.tZ)(l.Z,{}),(0,X.tZ)(m.cC,{i18nKey:`ui:${e}`,t:w}),(0,X.tZ)(u.Z,{label:H[a?"unlocked":"locked"],size:"small"})]},e)))}),(0,X.tZ)(y.Z,{fullWidth:!0,value:G,size:"small",children:[1,2,3,4].map((e=>(0,X.BX)(d.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:e,onClick:()=>t({lines:ie(G,e)}),children:[(0,X.tZ)(h.Z,{whiteSpace:"nowrap",children:w("sub",{count:e})}),(0,X.tZ)(u.Z,{label:re[e],size:"small"})]},e)))}),(0,X.BX)(Z.Z,{startIcon:(0,X.tZ)(o.Z,{}),color:I?"success":"secondary",onClick:()=>t({showEquipped:!I}),children:[w(U||(U=Q`equippedArt`))," ",(0,X.tZ)(u.Z,{sx:{ml:1},label:le.equipped,size:"small"})]}),(0,X.BX)(Z.Z,{startIcon:(0,X.tZ)(r.Z,{}),color:A?"success":"secondary",onClick:()=>t({showInventory:!A}),children:[w(Y||(Y=Q`artInInv`))," ",(0,X.tZ)(u.Z,{sx:{ml:1},label:le.unequipped,size:"small"})]}),(0,X.tZ)(C.Z,{showLevelText:!0,levelLow:E,levelHigh:T,setLow:e=>t({levelLow:e}),setHigh:e=>t({levelHigh:e}),setBoth:(e,a)=>t({levelLow:e,levelHigh:a})}),(0,X.tZ)(F,{showLevelText:!0,levelLow:R,levelHigh:z,setLow:e=>t({rvLow:e}),setHigh:e=>t({rvHigh:e}),setBoth:(e,a)=>t({rvLow:e,rvHigh:a})})]}),(0,X.BX)(c.ZP,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[(0,X.tZ)(D,{totals:se,artSetKeys:S,setArtSetKeys:e=>t({artSetKeys:e})}),(0,X.tZ)(_,{totals:oe,mainStatKeys:B,setMainStatKeys:e=>t({mainStatKeys:e})}),(0,X.tZ)(M,{totals:ce,substatKeys:P,setSubstatKeys:e=>t({substats:e})}),(0,X.tZ)(p.Suspense,{fallback:null,children:(0,X.tZ)(x.Z,{title:I?w(J||(J=Q`locationsTooltip`)):"",placement:"top",children:(0,X.tZ)("span",{children:(0,X.tZ)(N,{totals:de,locations:I?[]:O,setLocations:e=>t({locations:e}),disabled:I})})})})]})]})}},51290:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(92096),i=a(36081),r=a(2784),l=a(12761),s=a(89977),o=a(52903);function c({levelLow:e,levelHigh:t,setLow:a,setHigh:c,setBoth:d,dark:u=!1,disabled:h=!1,showLevelText:Z=!1}){const[p,m]=(0,r.useState)(e),[f,g]=(0,r.useState)(t),b=(0,r.useCallback)(((e,t)=>{if("number"==typeof t)throw new TypeError;const[a,n]=t;m(a),g(n)}),[m,g]);return(0,r.useEffect)((()=>m(e)),[m,e]),(0,r.useEffect)((()=>g(t)),[g,t]),(0,o.BX)(n.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:u?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[(0,o.tZ)(s.ZP,{value:p,onChange:e=>a((0,l.re)(null!=e?e:0,0,t)),sx:{px:1,pl:Z?2:void 0,width:Z?100:50,borderRadius:"4px 0 0 4px"},inputProps:{sx:{textAlign:Z?"right":"center"}},startAdornment:Z?"Level: ":void 0,disabled:h}),(0,o.tZ)(i.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact Level Range",value:[p,f],onChange:b,onChangeCommitted:(e,t)=>d(t[0],t[1]),valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:h}),(0,o.tZ)(s.ZP,{value:f,onChange:t=>c((0,l.re)(null!=t?t:0,e,20)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:h})]})}},47712:(e,t,a)=>{a.d(t,{Z:()=>g});var n=a(98283),i=a(80422),r=a(67550),l=a(38951),s=a(2784),o=a(11141),c=a(4121),d=a(51576),u=a(75958),h=a(79410),Z=a(36674),p=a(86873),m=a(52903);const f=["artSetKey","setArtSetKey","label"];function g(e){let{artSetKey:t,setArtSetKey:a,label:g=""}=e,b=(0,n.Z)(e,f);const{t:x}=(0,o.$G)(["artifact","artifactNames_gen"]);g=g||x("artifact:autocompleteLabels.set");const y=(0,s.useMemo)((()=>Object.entries(c.WO).flatMap((([e,t])=>t.map((t=>({key:t,label:x(`artifactNames_gen:${t}`),grouper:+e}))))).sort(p.Z)),[x]),v=(0,s.useCallback)((e=>e?(0,m.tZ)(h.Z,{src:(0,d.jU)(e),size:2}):void 0),[]),C=(0,s.useCallback)((e=>a(null!=e?e:"")),[a]);return(0,m.tZ)(u._,Object.assign({options:y,valueKey:t,onChange:C,toImg:v,label:g,groupBy:e=>{var t,a;return null!=(t=null==(a=e.grouper)?void 0:a.toString())?t:""},renderGroup:e=>e.group&&(0,m.BX)(i.Z,{component:r.Z,children:[(0,m.BX)(l.Z,{sx:{top:"-1em"},children:[e.group," ",(0,m.tZ)(Z.q,{stars:+e.group,inline:!0})]},`${e.group}Header`),e.children]},e.group)},b))}},5051:(e,t,a)=>{a.d(t,{A:()=>p,Z:()=>Z});var n=a(79906),i=a(33927),r=a(67550),l=a(62197),s=a(2784),o=a(11141),c=a(45269),d=a(12366),u=a(1665),h=a(52903);function Z({children:e,artifactSheet:t,numInSet:a=5}){return(0,h.tZ)(c.Z,{placement:"top",title:(0,h.tZ)(p,{artifactSheet:t,numInSet:a}),disableInteractive:!0,children:e})}function p({artifactSheet:e,numInSet:t=5}){return(0,h.tZ)(s.Suspense,{fallback:(0,h.tZ)(n.Z,{variant:"rectangular",width:100,height:100}),children:(0,h.tZ)(m,{artifactSheet:e,numInSet:t})})}function m({artifactSheet:e,numInSet:t=5}){const{t:a}=(0,o.$G)("sheet");return(0,h.tZ)(i.Z,{spacing:2,sx:{p:1},children:Object.keys(e.setEffects).map((n=>(0,h.BX)(r.Z,{sx:{opacity:parseInt(n)<=t?1:.5},children:[(0,h.tZ)(l.Z,{children:(0,h.tZ)(d.Z,{color:"success",children:a(`${n}set`)})}),(0,h.tZ)(l.Z,{children:(0,h.tZ)(u.v,{ns:`artifact_${e.key}_gen`,key18:`setEffects.${n}`})})]},n)))})}},6480:(e,t,a)=>{a.d(t,{Rl:()=>Z,w0:()=>u});var n=a(17885),i=a(67550),r=a(11141),l=a(69614),s=a(25576),o=a(39099),c=a(86569),d=a(52903);function u({statKey:e}){const{t}=(0,r.$G)("statKey_gen");return(0,d.BX)("span",{children:[t(e),(0,l.V)(e)]})}function h({statKey:e,disableIcon:t=!1}){return(0,d.BX)(i.Z,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!t&&(0,d.tZ)(o.C,{statKey:e,iconProps:n.mX}),(0,d.tZ)(u,{statKey:e})]})}function Z({statKey:e,disableIcon:t=!1}){return(0,d.tZ)(c.Z,{color:s.ZP.getVariant(e),children:(0,d.tZ)(h,{statKey:e,disableIcon:t})})}},2218:(e,t,a)=>{a.d(t,{Z:()=>v});var n=a(74155),i=a(17885),r=a(12761),l=a(67550),s=a(79906),o=a(62197),c=a(2784),d=a(11141),u=a(4121),h=a(69614),Z=a(25576),p=a(39099),m=a(45269),f=a(41653),g=a(12366),b=a(36674),x=a(79199),y=a(52903);function v({art:e,children:t}){const a=(0,y.tZ)(l.Z,{children:(0,y.tZ)(s.Z,{variant:"rectangular",width:100,height:100})}),n=(0,y.tZ)(c.Suspense,{fallback:a,children:(0,y.tZ)(C,{art:e})});return(0,y.tZ)(m.Z,{placement:"top",title:n,disableInteractive:!0,children:t})}function C({art:e}){const{t}=(0,d.$G)("statKey_gen"),a=(0,u.Sk)(e.setKey),{slotKey:s,level:c,rarity:m,mainStatKey:v,substats:C}=e,w=a.getSlotName(s),k=Z.ZP.getVariant(v);return(0,y.BX)(l.Z,{p:1,children:[(0,y.BX)(o.Z,{variant:"h6",children:[(0,y.tZ)(x.Z,{slotKey:s,iconProps:i.mX})," ",w]}),(0,y.BX)(o.Z,{variant:"subtitle1",color:`${k}.main`,children:[(0,y.tZ)(p.C,{statKey:v,iconProps:i.mX})," ",t(v)," ",(0,n.R1)(v,m,c)]}),(0,y.BX)(o.Z,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.tZ)(b.q,{stars:m}),(0,y.BX)(g.Z,{color:h.Z.levelVariant(c),children:["+",c]})," "]}),(0,y.tZ)(l.Z,{py:1,children:C.map((e=>!!e.value&&(0,y.BX)(o.Z,{color:`roll${(0,r.re)(e.rolls.length,1,6)}.main`,children:[(0,y.tZ)(p.C,{statKey:e.key,iconProps:i.mX})," ",t(e.key)," ",(0,y.tZ)("strong",{children:`+${(0,n.Jj)(e.value,(0,r.bf)(e.key))}${(0,r.bf)(e.key)}`})]},e.key)))}),(0,y.tZ)(o.Z,{color:"success.main",children:a.name}),(0,y.tZ)(f.Z,{color:"secondary.main",location:e.location})]})}},79199:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(49284),i=a(52903);function r({slotKey:e,iconProps:t={}}){switch(e){case"flower":return(0,i.tZ)(n.pv,Object.assign({},t));case"plume":return(0,i.tZ)(n.QA,Object.assign({},t));case"sands":return(0,i.tZ)(n.M6,Object.assign({},t));case"goblet":return(0,i.tZ)(n.NN,Object.assign({},t));case"circlet":return(0,i.tZ)(n.qM,Object.assign({},t))}}},71179:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(31981),i=a(67550),r=a(92794),l=a(39099),s=a(17885),o=a(61851),c=a(58489),d=a(6480),u=a(52903);const h=(0,o.X)([...n._m]),Z=n._m.slice(0,6),p=n._m.slice(6);function m({selectedKeys:e,onChange:t}){const a=e.filter((e=>Z.includes(e))),n=e.filter((e=>p.includes(e)));return(0,u.BX)(i.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,u.tZ)(c.Z,{value:a,sx:{flexGrow:1},children:Z.map((a=>(0,u.tZ)(r.Z,{sx:{flexGrow:1},size:"small",value:a,onClick:()=>t(h(e,a)),children:(0,u.BX)(i.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,u.tZ)(l.C,{statKey:a,iconProps:s.mX}),(0,u.tZ)(d.w0,{statKey:a})]})},a)))}),(0,u.tZ)(c.Z,{value:n,sx:{flexGrow:1},children:p.map((a=>(0,u.tZ)(r.Z,{sx:{flexGrow:1},size:"small",value:a,onClick:()=>t(h(e,a)),children:(0,u.BX)(i.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,u.tZ)(l.C,{statKey:a,iconProps:s.mX}),(0,u.tZ)(d.w0,{statKey:a})]})},a)))})]})}},86873:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(31809);function i(e,t){if(e.grouper>t.grouper)return-1;if(e.grouper<t.grouper)return 1;const a=n.Z.t(`artifactNames_gen:${e.key}`),i=n.Z.t(`artifactNames_gen:${t.key}`);return a<i?-1:a>i?1:0}},4453:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(67550),i=a(62197),r=a(52903);function l({avatar:e,title:t,action:a}){return(0,r.BX)(n.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[e,(0,r.tZ)(i.Z,{variant:"subtitle1",sx:{flexGrow:1},children:t}),a&&(0,r.tZ)(i.Z,{variant:"caption",children:a})]})}},11615:(e,t,a)=>{a.d(t,{Z:()=>U});var n=a(31981),i=a(16736),r=a(74155),l=a(12761),s=a(16068),o=a(66147),c=a(75213),d=a(79906),u=a(67550),h=a(85801),Z=a(7671),p=a(41075),m=a(66198),f=a(62197),g=a(2784),b=a(13230),x=a(99487),y=a(23657),v=a(31637),C=a(34156),w=a(41319),k=a(56302),S=a(76260),B=a(15132),X=a(55893),_=a(22134),K=a(87227),j=a(45390),E=a(87833),T=a(86569),P=a(26437),O=a(39282),D=a(12366),M=a(36674),I=a(13499),A=a(51784),L=a(2754),R=a(15030),z=a(30311),G=a(24264),$=a(61340),N=a(52903);function W({weaponId:e}){const t=(0,z.Z)(e),a=(null==t?void 0:t.key)&&(0,I.ub)(t.key),n=(0,g.useMemo)((()=>a&&t&&(0,L.mP)([a.data,(0,L.v0)(t)])),[a,t]);if(!t||!a||!n)return null;const r=(0,N.BX)(u.Z,{children:[(0,N.tZ)(q,{node:n.get(w.ri.weapon.main)}),(0,N.tZ)(q,{node:n.get(w.ri.weapon.sub)})]});return(0,N.BX)(G.Z,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[(0,N.tZ)(u.Z,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:(0,N.tZ)($.Z,{sheet:a,addlText:r,children:(0,N.tZ)(u.Z,{component:"img",src:(0,i.Aq)(t.key,t.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),(0,N.tZ)(f.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:(0,N.tZ)("strong",{children:(0,N.tZ)(D.Z,{color:"primary",children:A.Z.getLevelString(t)})})}),a.hasRefinement&&(0,N.tZ)(f.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:(0,N.tZ)("strong",{children:(0,N.BX)(D.Z,{color:"secondary",children:["R",t.refinement]})})})]})}function q({node:e}){return(0,N.BX)(f.Z,{children:[e.info.icon," ",(0,R.p)(e)]})}function H({weaponId:e}){const t=(0,z.Z)(e),a=(null==t?void 0:t.key)&&(0,I.ub)(t.key),n=(0,g.useMemo)((()=>a&&t&&(0,L.mP)([a.data,(0,L.v0)(t)])),[a,t]);return t&&a&&n?(0,N.tZ)(G.Z,{children:(0,N.BX)(u.Z,{display:"flex",children:[(0,N.tZ)(u.Z,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:(0,N.tZ)(u.Z,{component:"img",src:(0,i.Aq)(t.key,t.ascension>=2),width:"100%",height:"auto",sx:{mt:"auto"}})}),(0,N.BX)(u.Z,{flexGrow:1,sx:{p:1},children:[(0,N.tZ)(f.Z,{variant:"body2",gutterBottom:!0,children:(0,N.tZ)("strong",{children:null==a?void 0:a.name})}),(0,N.BX)(f.Z,{variant:"subtitle1",sx:{display:"flex",gap:1},gutterBottom:!0,children:[(0,N.BX)(D.Z,{color:"primary",children:["Lv. ",A.Z.getLevelString(t)]}),a.hasRefinement&&(0,N.BX)(D.Z,{color:"info",children:["R",t.refinement]})]}),(0,N.BX)(f.Z,{variant:"subtitle1",sx:{display:"flex",gap:1},children:[(0,N.tZ)(F,{node:n.get(w.ri.weapon.main)}),(0,N.tZ)(F,{node:n.get(w.ri.weapon.sub)})]})]})]})}):null}function F({node:e}){return(0,N.BX)(D.Z,{color:"secondary",children:[e.info.icon," ",(0,R.p)(e)]})}var V=a(91218);function U({characterKey:e,artifactChildren:t,weaponChildren:a,characterChildren:n,onClick:i,onClickHeader:r,onClickTeammate:l,footer:Z,hideStats:p,isTeammateCard:m}){var f;const{database:b}=(0,g.useContext)(C.t),x=(0,_.Z)(e),y=(0,k.Z)(e),{gender:w}=(0,X.Z)(),K=(0,v.m)(e,w),j=(0,S.Z)(e),T=null==x||null==(f=x[e])?void 0:f.target,O=(0,g.useCallback)((()=>e&&(null==i?void 0:i(e))),[e,i]),D=(0,g.useCallback)((e=>(0,N.tZ)(c.Z,{onClick:O,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})),[O]),M=(0,g.useMemo)((()=>y&&K&&{character:y,characterSheet:K,characterDispatch:j}),[y,K,j]),I=(0,g.useMemo)((()=>T&&x&&{data:T,teamData:x}),[T,x]),{favorite:A}=(0,B.Z)(e);return(0,N.tZ)(g.Suspense,{fallback:(0,N.tZ)(d.Z,{variant:"rectangular",width:"100%",height:p?300:600}),children:(0,N.BX)(E.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,N.tZ)(u.Z,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:(0,N.tZ)(h.Z,{sx:{p:.5},onClick:t=>b.charMeta.set(e,{favorite:!A}),children:A?(0,N.tZ)(s.Z,{}):(0,N.tZ)(o.Z,{})})}),(0,N.tZ)(P.Z,{condition:!!i,wrapper:D,children:y&&I&&M?(0,N.tZ)(Y,{characterContextObj:M,dataContextObj:I,characterKey:e,onClick:i,onClickHeader:r,isTeammateCard:m,character:y,onClickTeammate:l,hideStats:p,weaponChildren:a,artifactChildren:t,characterChildren:n}):(0,N.tZ)(J,{characterKey:e})}),Z]})})}function Y({characterContextObj:e,dataContextObj:t,characterKey:a,onClick:n,onClickHeader:i,isTeammateCard:r,character:s,onClickTeammate:o,hideStats:c,weaponChildren:d,artifactChildren:u,characterChildren:h}){return(0,N.tZ)(b.K.Provider,{value:e,children:(0,N.BX)(x.R.Provider,{value:t,children:[(0,N.tZ)(Q,{characterKey:a,onClick:n?void 0:i,children:(0,N.tZ)(ee,{})}),(0,N.BX)(Z.Z,{sx:e=>({width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${e.spacing(1)}!important`:void 0}),children:[(0,N.tZ)(ae,{}),!r&&(0,N.BX)(p.ZP,{container:!0,columns:4,spacing:.75,children:[(0,N.tZ)(p.ZP,{item:!0,xs:1,height:"100%",children:(0,N.tZ)(W,{weaponId:s.equippedWeapon})}),(0,l.w6)(0,2).map((e=>(0,N.tZ)(p.ZP,{item:!0,xs:1,height:"100%",children:s.team[e]?(0,N.tZ)(V.Z,{simpleTooltip:c,characterKey:s.team[e],onClick:n?void 0:o}):(0,N.tZ)(V.D,{index:e})},e)))]}),r&&(0,N.tZ)(H,{weaponId:s.equippedWeapon}),!r&&!c&&(0,N.tZ)(ne,{}),d,u,h]})]})})}function J({characterKey:e}){return(0,N.BX)(N.HY,{children:[(0,N.tZ)(Q,{characterKey:e,children:(0,N.tZ)(te,{characterKey:e})}),(0,N.tZ)(Z.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}function Q({children:e,characterKey:t,onClick:a}){const{gender:n}=(0,X.Z)(),{silly:r}=(0,g.useContext)(y.E),l=(0,v.m)(t,n),s=(0,g.useCallback)((e=>(0,N.tZ)(c.Z,{onClick:()=>t&&(null==a?void 0:a(t)),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})),[a,t]),o=(0,i.Li)(t,"banner",n);return l?(0,N.tZ)(P.Z,{condition:!!a,wrapper:s,children:(0,N.BX)(u.Z,{display:"flex",position:"relative",className:o?void 0:`grad-${l.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${o})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,N.tZ)(u.Z,{flexShrink:1,component:"img",src:(0,K.i)(t,n,r),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),(0,N.tZ)(u.Z,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:e})]})}):null}function ee(){const{characterSheet:e}=(0,g.useContext)(b.K),{data:t}=(0,g.useContext)(x.R),a=t.get(w.ri.charEle).value,n=t.get(w.ri.lvl).value,i=t.get(w.ri.constellation).value,l=t.get(w.ri.asc).value,s=t.get(w.ri.total.autoBoost).value,o=t.get(w.ri.total.skillBoost).value,c=t.get(w.ri.total.burstBoost).value,d=t.get(w.ri.total.auto).value,h=t.get(w.ri.total.skill).value,Z=t.get(w.ri.total.burst).value;return(0,N.BX)(N.HY,{children:[(0,N.tZ)(m.Z,{label:(0,N.tZ)(f.Z,{variant:"subtitle1",children:e.name}),size:"small",color:a,sx:{opacity:.85}}),(0,N.BX)(u.Z,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[(0,N.BX)(u.Z,{children:[(0,N.BX)(f.Z,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",n]}),(0,N.BX)(f.Z,{component:"span",variant:"h6",color:"text.secondary",children:["/",r.SJ[l]]})]}),(0,N.tZ)(f.Z,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:(0,N.tZ)(D.Z,{color:`roll${i<3?3:i}`,children:(0,N.tZ)(T.Z,{color:"white",children:(0,N.BX)("strong",{children:["C",i]})})})})]}),(0,N.BX)(u.Z,{display:"flex",gap:1,sx:{opacity:.85},children:[(0,N.tZ)(m.Z,{size:"small",color:s?"info":"secondary",label:(0,N.tZ)("strong",{children:d})}),(0,N.tZ)(m.Z,{size:"small",color:o?"info":"secondary",label:(0,N.tZ)("strong",{children:h})}),(0,N.tZ)(m.Z,{size:"small",color:c?"info":"secondary",label:(0,N.tZ)("strong",{children:Z})})]}),(0,N.tZ)(f.Z,{variant:"h6",lineHeight:1,children:(0,N.tZ)(M.q,{stars:e.rarity,colored:!0,inline:!0})})]})}function te({characterKey:e}){const{gender:t}=(0,X.Z)(),a=(0,v.m)(e,t);return a?(0,N.BX)(N.HY,{children:[(0,N.tZ)(m.Z,{label:(0,N.tZ)(f.Z,{variant:"subtitle1",children:a.name}),size:"small",color:a.elementKey,sx:{opacity:.85}}),(0,N.tZ)(u.Z,{mt:1,children:(0,N.tZ)(f.Z,{variant:"h4",children:(0,N.tZ)(D.Z,{children:"NEW"})})}),(0,N.tZ)(f.Z,{mt:1.5,children:(0,N.tZ)(M.q,{stars:a.rarity,colored:!0})})]}):null}function ae(){const{database:e}=(0,g.useContext)(C.t),{data:t}=(0,g.useContext)(x.R),a=(0,g.useMemo)((()=>n.Ex.map((a=>{var n,i;return[a,e.arts.get(null!=(n=null==(i=t.get(w.ri.art[a].id).value)?void 0:i.toString())?n:"")]}))),[t,e]);return(0,N.tZ)(p.ZP,{direction:"row",container:!0,spacing:.75,columns:5,children:a.map((([e,t])=>(0,N.tZ)(p.ZP,{item:!0,xs:1,children:(0,N.tZ)(j.Z,{artifactObj:t,slotKey:e})},e)))})}function ne(){const{data:e}=(0,g.useContext)(x.R);return(0,N.BX)(u.Z,{sx:{width:"100%"},children:[Object.values(e.getDisplay().basic).map((e=>(0,N.tZ)(O.JW,{node:e},JSON.stringify(e.info)))),e.get(w.ri.special).info.name&&(0,N.BX)(u.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,N.tZ)(f.Z,{flexGrow:1,children:(0,N.tZ)("strong",{children:"Specialized:"})}),e.get(w.ri.special).info.icon,(0,N.tZ)(f.Z,{children:e.get(w.ri.special).info.name})]})]})}},91218:(e,t,a)=>{a.d(t,{D:()=>B,Z:()=>S});var n=a(16736),i=a(74155),r=a(46433),l=a(1574),s=a(75213),o=a(79906),c=a(62197),d=a(67550),u=a(2784),h=a(23657),Z=a(31637),p=a(39099),m=a(56302),f=a(15132),g=a(55893),b=a(87227),x=a(45269),y=a(24264),v=a(26437),C=a(12366),w=a(11615),k=a(52903);function S({characterKey:e,onClick:t,onMouseDown:a,onMouseEnter:n,simpleTooltip:S=!1,disableTooltip:B=!1}){const X=(0,m.Z)(e),{favorite:_}=(0,f.Z)(e),{gender:K}=(0,g.Z)(),{silly:j}=(0,u.useContext)(h.E),E=(0,Z.m)(e,K),T=(0,u.useCallback)((()=>null==t?void 0:t(e)),[e,t]),P=(0,u.useCallback)((e=>(0,k.tZ)(s.Z,{onClick:T,onMouseDown:a,onMouseEnter:n,children:e})),[T,a,n]),[O,D]=(0,u.useState)(!1),M=(0,u.useCallback)((()=>!B&&D(!0)),[B]),I=(0,u.useCallback)((()=>D(!1)),[]);(0,u.useEffect)((()=>{B&&D(!1)}),[B]);const A=(0,u.useCallback)((e=>(0,k.tZ)(x.Z,{placement:"top",open:O&&!B,onClose:I,onOpen:M,title:(0,k.tZ)(u.Suspense,{fallback:(0,k.tZ)(o.Z,{width:300,height:400}),children:(0,k.BX)(c.Z,{children:[E.elementKey&&(0,k.tZ)(p.Z,{ele:E.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${E.elementKey}.main`}}})," ",E.name]})}),children:e})),[E.elementKey,E.name,B,I,M,O]),L=(0,u.useCallback)((t=>(0,k.tZ)(x.Z,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:O&&!B,onClose:I,onOpen:M,title:(0,k.tZ)(d.Z,{sx:{width:300,m:-1},children:(0,k.tZ)(w.Z,{hideStats:!0,characterKey:e})}),children:t})),[e,B,I,M,O]);return(0,k.tZ)(v.Z,{condition:S,wrapper:A,falseWrapper:L,children:(0,k.tZ)(y.Z,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:(0,k.BX)(v.Z,{condition:!!t||!!a||!!n,wrapper:P,children:[(0,k.tZ)(d.Z,{display:"flex",className:`grad-${E.rarity}star`,children:(0,k.tZ)(d.Z,{component:"img",src:(0,b.i)(e,K,j),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),X&&(0,k.tZ)(c.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:(0,k.tZ)("strong",{children:(0,k.BX)(C.Z,{color:"primary",children:[X.level,"/",i.SJ[X.ascension]]})})}),(0,k.tZ)(d.Z,{sx:{position:"absolute",top:0,right:0},children:_?(0,k.tZ)(r.Z,{fontSize:"small"}):(0,k.tZ)(l.Z,{fontSize:"small"})}),X&&(0,k.tZ)(c.Z,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:(0,k.tZ)("strong",{children:(0,k.BX)(C.Z,{color:"secondary",children:["C",X.constellation]})})})]})})})}function B({index:e}){return(0,k.tZ)(y.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:(0,k.tZ)(d.Z,{component:"img",src:n.CL.team[`team${e+2}`],sx:{width:"75%",height:"auto",opacity:.7}})})}},50090:(e,t,a)=>{a.d(t,{W:()=>x});var n=a(31981),i=a(66615),r=a(67550),l=a(79906),s=a(2784),o=a(11141),c=a(23657),d=a(31637),u=a(34156),h=a(55893),Z=a(75958),p=a(80680),m=a(72550),f=a(52903);let g,b=e=>e;function x({location:e,setLocation:t,filter:a=(()=>!0),autoCompleteProps:x={}}){const{t:y}=(0,o.$G)(["ui","artifact","sillyWisher_charNames","charNames_gen"]),{silly:v}=(0,s.useContext)(c.E),{database:C}=(0,s.useContext)(u.t),{gender:w}=(0,h.Z)(),k=(0,s.useCallback)((e=>t=>y(`${e?"sillyWisher_charNames":"charNames_gen"}:${(0,n.Cs)(C.chars.LocationToCharacterKey(t),w)}`)),[C,w,y]),[S,B]=(0,m.NW)();(0,s.useEffect)((()=>C.arts.followAny((()=>B()))),[C,B]);const X=(0,s.useMemo)((()=>S&&C.chars.keys.map((e=>(0,n.V7)(e)))),[S,C]),_=(0,s.useCallback)((e=>""===e?(0,f.tZ)(i.Z,{}):(0,f.tZ)(r.Z,{sx:{opacity:X.includes(e)?void 0:.7},children:(0,f.tZ)(p.Z,{characterKey:C.chars.LocationToCharacterKey(e)})})),[C,X]),K=(0,s.useCallback)((e=>"Traveler"===e?n.vF.some((e=>C.charMeta.get(e).favorite)):!!e&&C.charMeta.get(e).favorite),[C]),j=(0,s.useMemo)((()=>[{key:"",label:y(g||(g=b`artifact:filterLocation.inventory`))},...Array.from(new Set(n.vp.filter((e=>a((0,d.m)(C.chars.LocationToCharacterKey(e),w)))))).map((e=>({key:e,label:k(v)(e),favorite:K(e),alternateNames:v?[k(!v)(e)]:void 0,color:X.includes(e)?void 0:"secondary"}))).sort(((e,t)=>e.favorite&&!t.favorite?-1:!e.favorite&&t.favorite?1:!e.color&&t.color?-1:e.color&&!t.color?1:e.label.localeCompare(t.label)))]),[y,C.chars,w,X,a,k,v,K]);return(0,f.tZ)(s.Suspense,{fallback:(0,f.tZ)(l.Z,{variant:"text",width:100}),children:(0,f.tZ)(Z._,Object.assign({size:"small",options:j,valueKey:e,onChange:e=>t(null!=e?e:""),toImg:_},x))})}},41653:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(98283),i=a(66615),r=a(62197),l=a(67550),s=a(2784),o=a(11141),c=a(31637),d=a(34156),u=a(55893),h=a(80680),Z=a(52903);const p=["location"];function m(e){let{location:t}=e,a=(0,n.Z)(e,p);const{t:m}=(0,o.$G)("ui"),{database:f}=(0,s.useContext)(d.t),{gender:g}=(0,u.Z)(),b=(0,s.useMemo)((()=>t?(0,c.m)(f.chars.LocationToCharacterKey(t),g):void 0),[t,g,f]);return(0,Z.tZ)(r.Z,Object.assign({component:"span"},a,{children:t&&null!=b&&b.name?(0,Z.BX)(l.Z,{children:[(0,Z.tZ)(h.Z,{characterKey:f.chars.LocationToCharacterKey(t)}),(0,Z.tZ)(l.Z,{sx:{pl:1},component:"span",children:b.name})]}):(0,Z.BX)("span",{children:[(0,Z.tZ)(i.Z,{sx:{verticalAlign:"text-bottom"}})," ",m("inventory")]})}))}},26437:(e,t,a)=>{function n({condition:e,wrapper:t,falseWrapper:a,children:n}){return e?t(n):a?a(n):n}a.d(t,{Z:()=>n})},14836:(e,t,a)=>{a.d(t,{X:()=>I,Z:()=>P});var n=a(67550),i=a(62197),r=a(56961),l=a(2784),s=a(99487),o=a(11845),c=a(24264),d=a(4453),u=a(7671),h=a(39282),Z=a(12761),p=a(5658),m=a(27216),f=a(83249),g=a(94380),b=a(80551),x=a(13230),y=a(23485),v=a(12366),C=a(1665),w=a(52903);function k({conditional:e,disabled:t=!1}){const{data:a}=(0,l.useContext)(s.R);return 1===Object.keys((0,Z.mY)(e.states,a)).length&&"path"in e?(0,w.tZ)(S,{conditional:e,disabled:t}):"path"in e?(0,w.tZ)(B,{conditional:e,disabled:t}):(0,w.tZ)(X,{conditional:e,disabled:t})}function S({conditional:e,disabled:t}){const{character:a,characterDispatch:n}=(0,l.useContext)(x.K),{data:i}=(0,l.useContext)(s.R),r=(0,l.useCallback)((t=>{const i=(0,Z.I8)(a.conditional);t?(0,Z.SR)(i,e.path,t):(0,Z.uH)(i,e.path),n({conditional:i})}),[e,a,n]),o=i.get(e.value).value,[c,d]=Object.entries((0,Z.mY)(e.states,i))[0],u=K(d.name),h=j(e.name);return(0,w.BX)(f.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:o?"success":"primary",onClick:()=>r(o?void 0:c),disabled:t,startIcon:o?(0,w.tZ)(p.Z,{}):(0,w.tZ)(m.Z,{}),children:[h," ",u]})}function B({conditional:e,disabled:t}){const{character:a,characterDispatch:n}=(0,l.useContext)(x.K),{data:i}=(0,l.useContext)(s.R),o=(0,l.useCallback)((t=>{const i=(0,Z.I8)(a.conditional);t?(0,Z.SR)(i,e.path,t):(0,Z.uH)(i,e.path),n({conditional:i})}),[e,a,n]),c=i.get(e.value).value,d=(0,Z.mY)(e.states,i),u=c?d[c]:void 0,h=u?K(u.name):(0,w.tZ)(v.Z,{color:"secondary",children:"Not Active"}),p=j(e.name);return(0,w.BX)(y.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:c&&u?"success":"primary",title:(0,w.BX)("span",{children:[p," ",h]}),disabled:t,children:[(0,w.tZ)(g.Z,{onClick:()=>o(),selected:!u,disabled:!u,children:(0,w.tZ)("span",{children:"Not Active"})}),(0,w.tZ)(r.Z,{}),Object.entries(d).map((([e,t])=>(0,w.tZ)(g.Z,{onClick:()=>o(e),selected:c===e,disabled:c===e,children:t.name},e)))]})}function X({conditional:e,disabled:t}){const{character:a,characterDispatch:n}=(0,l.useContext)(x.K),{data:i}=(0,l.useContext)(s.R),r=(0,l.useCallback)(((e,t)=>{const i=(0,Z.I8)(a.conditional);t?(0,Z.SR)(i,e,t):(0,Z.uH)(i,e),n({conditional:i})}),[a,n]);return(0,w.tZ)(b.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries((0,Z.mY)(e.states,i)).map((([e,a])=>{const n=i.get(a.value).value,l=n===e;return(0,w.tZ)(f.Z,{color:l?"success":"primary",disabled:t,fullWidth:!0,onClick:()=>r(a.path,n?void 0:e),size:"small",startIcon:l?(0,w.tZ)(p.Z,{}):(0,w.tZ)(m.Z,{}),sx:{borderRadius:0},children:j(a.name)},e)}))})}function _(e){return"string"!=typeof e}function K(e){if(!e)return"";let t="primary",a=e;return e&&_(e)&&e.props.color&&(t=e.props.color,a=(0,w.tZ)("span",{children:e.props.children})),(0,w.tZ)(v.Z,{sx:{ml:.5},color:t,children:a})}function j(e){if(_(e)){const t=e.props.key18,a=e.props.ns,n=e.props.values;return(0,w.tZ)(C.v,{ns:a,key18:t,values:n,useBadge:!0})}return e}function E({conditional:e,hideHeader:t=!1,hideDesc:a=!1}){const{data:n}=(0,l.useContext)(s.R);let i;if("path"in e){var r;const t=n.get(e.value).value,a=(0,o.mY)(e.states,n);i=t&&(null==(r=a[t])?void 0:r.fields)}else{const t=(0,o.mY)(e.states,n);i=Object.values(t).flatMap((e=>n.get(e.value).value?e.fields:[]))}return(0,w.BX)(c.Z,{children:[!(0,o.mY)(t,e)&&(0,w.tZ)(I,{header:e.header,hideDesc:a}),(0,w.tZ)(u.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,w.tZ)(k,{conditional:e})}),i&&(0,w.tZ)(h.ZP,{fields:i})]})}var T=a(12702);function P({sections:e,teamBuffOnly:t,hideDesc:a=!1,hideHeader:i=!1}){const{data:r}=(0,l.useContext)(s.R);if(!e.length)return null;const o=e.map(((e,n)=>e.canShow&&!r.get(e.canShow).value||t&&!e.teamBuff?null:(0,w.tZ)(O,{section:e,hideDesc:a,hideHeader:i},n))).filter((e=>e));return o.length?(0,w.tZ)(n.Z,{display:"flex",flexDirection:"column",gap:1,children:o}):null}function O({section:e,hideDesc:t=!1,hideHeader:a=!1}){return"fields"in e?(0,w.tZ)(D,{section:e,hideDesc:t,hideHeader:a}):"states"in e?(0,w.tZ)(E,{conditional:e,hideDesc:t,hideHeader:a}):(0,w.tZ)(M,{section:e})}function D({section:e,hideDesc:t,hideHeader:a}){return(0,w.BX)(c.Z,{children:[!(0,o.mY)(a,e)&&e.header&&(0,w.tZ)(I,{header:e.header,hideDesc:t,hideDivider:0===e.fields.length}),(0,w.tZ)(h.ZP,{fields:e.fields})]})}function M({section:e}){const{data:t}=(0,l.useContext)(s.R);return(0,w.tZ)("div",{children:(0,o.mY)(e.text,t)})}function I({header:e,hideDesc:t,hideDivider:a}){const{data:n}=(0,l.useContext)(s.R),{icon:c,title:u,action:h}=e,Z=(0,o.mY)(c,n),p=!t&&(0,o.mY)(e.description,n),m=t?u:(0,w.BX)("span",{children:[u,(0,w.tZ)(T.L,{title:(0,w.tZ)(i.Z,{children:p})})]});return(0,w.BX)(w.HY,{children:[(0,w.tZ)(d.Z,{avatar:Z,title:m,action:h}),!a&&(0,w.tZ)(r.Z,{})]})}},80680:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(16736),i=a(55290),r=a(65992),l=a(2784),s=a(23657),o=a(55893),c=a(52903);const d=(0,r.ZP)("img",{name:"ImgIcon",slot:"Root",shouldForwardProp:e=>!["size","sideMargin"].includes(e)})((({size:e=3,sideMargin:t=!1})=>({display:"inline-block",width:`${e}em`,height:`${e}em`,marginTop:.85*(1-e)+"em",marginBottom:.15*(1-e)+"em",marginLeft:t?void 0:.3*(1-e)+"em",marginRight:t?void 0:.3*(1-e)+"em",verticalAlign:"text-bottom"}))),u=(0,r.ZP)("img",{name:"ImgIcon",slot:"Root",shouldForwardProp:e=>!["size","sideMargin"].includes(e)})((({size:e=2,sideMargin:t=!1})=>({display:"inline-block",width:`${e}em`,height:`${e}em`,marginTop:.5*(1-e)+"em",marginBottom:.5*(1-e)+"em",marginLeft:t?void 0:.5*(1-e)+"em",marginRight:t?void 0:.5*(1-e)+"em",verticalAlign:"text-bottom"})));function h({characterKey:e,sideMargin:t=!1}){const{gender:a}=(0,o.Z)(),{silly:r}=(0,l.useContext)(s.E),h=(0,i.t)(e,a),Z=(0,n.Li)(e,"iconSide",a);return r&&h?(0,c.tZ)(u,{src:h,sideMargin:t}):(0,c.tZ)(d,{src:Z,sideMargin:t})}},86512:(e,t,a)=>{a.d(t,{Z:()=>Z});var n=a(74155),i=a(12761),r=a(80551),l=a(83249),s=a(94380),o=a(2784),c=a(11141),d=a(89977),u=a(23485),h=a(52903);function Z({level:e,ascension:t,setBoth:a,useLow:Z=!1}){const{t:p}=(0,c.$G)("ui"),m=Z?n.sU:n.SJ,f=(0,o.useCallback)(((e=1)=>{e=(0,i.re)(e,1,Z?n.d8:n.Qq);const t=m.findIndex((t=>e<=t));a({level:e,ascension:t})}),[a,m,Z]),g=(0,o.useCallback)((()=>{const n=m.findIndex((t=>90!==e&&e===t));a(t===n?{ascension:t+1}:{ascension:n})}),[a,m,t,e]);return(0,h.BX)(r.Z,{sx:{bgcolor:e=>e.palette.contentNormal.main},children:[(0,h.tZ)(d.CC,{children:(0,h.tZ)(d.ZP,{onChange:f,value:e,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),(0,h.tZ)(l.Z,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(Z?n.nB:n.ek)(e),onClick:g,children:(0,h.BX)("strong",{children:["/ ",n.SJ[t]]})}),(0,h.tZ)(u.Z,{title:p("selectlevel"),sx:{flexGrow:1},children:[...Z?n.vF:n.D4].map((([n,i])=>{const r=n===e&&i===t;return(0,h.tZ)(s.Z,{selected:r,disabled:r,onClick:()=>a({level:n,ascension:i}),children:n===m[i]?`Lv. ${n}`:`Lv. ${n}/${m[i]}`},`${n}/${i}`)}))})]})}},96580:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(12366),i=a(12761),r=a(52903);function l({value:e,max:t=1,valid:a}){const[l,s]="number"==typeof e?[`roll${(0,i.re)(Math.floor(e/t*10)-4,1,6)}`,e.toFixed()+"%"]:["secondary",e];return(0,r.tZ)(n.Z,{color:a?l:"error",children:s})}},23128:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(31981),i=a(94380),r=a(11141),l=a(23485),s=a(52903);function o({refinement:e,setRefinement:t}){const{t:a}=(0,r.$G)("ui");return(0,s.tZ)(l.Z,{title:a("refinement",{value:e}),children:n.Lb.map((n=>(0,s.tZ)(i.Z,{onClick:()=>t(n),selected:e===n,disabled:e===n,children:a("refinement",{value:n})},n)))})}},36674:(e,t,a)=>{a.d(t,{q:()=>l});var n=a(78437),i=a(86569),r=a(52903);const l=({stars:e=1,colored:t=!1,inline:a=!1})=>(0,r.tZ)(i.Z,{color:t?"warning":void 0,children:[...Array(e).keys()].map(((e,t)=>(0,r.tZ)(n.Z,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},t)))})},13900:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(98283),i=a(65992),r=a(83249),l=a(52903);const s=["children","disabled"],o=(0,i.ZP)(r.Z)((({theme:e})=>({"&.Mui-disabled":{backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary}})));function c(e){let{children:t}=e,a=(0,n.Z)(e,s);return(0,l.tZ)(o,Object.assign({},a,{disabled:!0,children:t}))}},42090:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(98283),i=a(31981),r=a(78437),l=a(47746),s=a(86432),o=a(92794),c=a(67550),d=a(66198),u=a(61851),h=a(58489),Z=a(52903);const p=["value","totals","onChange"],m=(0,u.X)([...i.ZI]);function f(e){let{value:t,totals:a,onChange:u}=e,f=(0,n.Z)(e,p);const g=(0,l.Z)(),b=!(0,s.Z)(g.breakpoints.up("sm"));return(0,Z.tZ)(h.Z,Object.assign({exclusive:!0,value:t},f,{children:i.ZI.map((e=>(0,Z.tZ)(o.Z,{value:e,sx:{p:b?1:void 0,minWidth:b?0:"6em",display:"flex",gap:b?0:1},onClick:()=>u(m(t,e)),children:(0,Z.BX)(c.Z,{display:"flex",children:[(0,Z.tZ)("strong",{children:e}),(0,Z.tZ)(r.Z,{}),!b&&(0,Z.tZ)(d.Z,{label:a[e],size:"small"})]})},e)))}))}},89279:(e,t,a)=>{a.d(t,{Z:()=>g});var n=a(98283),i=a(31981),r=a(47746),l=a(86432),s=a(25674),o=a(66198),c=a(39099),d=a(61851),u=a(65992),h=a(92794);const Z=(0,u.ZP)(h.Z,{shouldForwardProp:e=>"baseColor"!==e&&"selectedColor"!==e})((({theme:e,baseColor:t="secondary",selectedColor:a="success"})=>({"&":{backgroundColor:e.palette[t].main,color:e.palette[t].contrastText},"&:hover":{backgroundColor:e.palette[t].dark},"&.Mui-selected":{backgroundColor:e.palette[a].main,color:e.palette[a].contrastText},"&.Mui-selected:hover":{backgroundColor:e.palette[a].dark},"&.Mui-disabled":{backgroundColor:e.palette[t].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:e.palette[a].dark}})));var p=a(52903);const m=["value","totals","onChange"],f=(0,d.X)([...i.UB]);function g(e){let{value:t,totals:a,onChange:d}=e,u=(0,n.Z)(e,m);const h=(0,r.Z)(),g=!(0,l.Z)(h.breakpoints.up("md")),b=!(0,l.Z)(h.breakpoints.up("sm"));return(0,p.tZ)(s.Z,Object.assign({exclusive:!0,value:t},u,{children:i.UB.map((e=>(0,p.BX)(Z,{value:e,sx:{p:g?1:void 0,minWidth:g?0:"6em",display:"flex"},selectedColor:e,onClick:()=>d(f(t,e)),children:[(0,p.tZ)(c.Z,{ele:e,iconProps:{fontSize:g&&!b?"inherit":void 0}}),!b&&(0,p.tZ)(o.Z,{sx:{ml:.5},label:a[e],size:"small"})]},e)))}))}},90844:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(98283),i=a(31981),r=a(78437),l=a(47746),s=a(86432),o=a(92794),c=a(67550),d=a(66198),u=a(61851),h=a(58489),Z=a(52903);const p=["value","totals","onChange"],m=(0,u.X)([...i.U1]);function f(e){let{value:t,totals:a,onChange:u}=e,f=(0,n.Z)(e,p);const g=(0,l.Z)(),b=!(0,s.Z)(g.breakpoints.up("sm"));return(0,Z.tZ)(h.Z,Object.assign({exclusive:!0,value:t},f,{children:i.U1.map((e=>(0,Z.tZ)(o.Z,{value:e,sx:{p:b?1:void 0,minWidth:b?0:"6em",display:"flex",gap:b?0:1},onClick:()=>u(m(t,e)),children:(0,Z.BX)(c.Z,{display:"flex",children:[(0,Z.tZ)("strong",{children:e}),(0,Z.tZ)(r.Z,{}),(0,Z.tZ)(d.Z,{label:a[e],size:"small"})]})},e)))}))}},28265:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(98283),i=a(31981),r=a(16736),l=a(47746),s=a(86432),o=a(92794),c=a(66198),d=a(61851),u=a(79410),h=a(58489),Z=a(52903);const p=["value","totals","onChange"],m=(0,d.X)([...i.yd]);function f(e){let{value:t,totals:a,onChange:d}=e,f=(0,n.Z)(e,p);const g=(0,l.Z)(),b=!(0,s.Z)(g.breakpoints.up("sm"));return(0,Z.tZ)(h.Z,Object.assign({exclusive:!0,value:t},f,{children:i.yd.map((e=>{var n;return(0,Z.BX)(o.Z,{value:e,sx:{p:b?1:void 0,minWidth:b?0:"6em",display:"flex",gap:b?0:1},onClick:()=>d(m(t,e)),children:[(0,Z.tZ)(u.Z,{src:null==(n=r.CL.weaponTypes)?void 0:n[e],size:2,sideMargin:!0}),(0,Z.tZ)(c.Z,{label:a[e],size:"small"})]},e)}))}))}},61340:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(16736),i=a(79906),r=a(62197),l=a(2784),s=a(45269),o=a(79410),c=a(52903);function d({sheet:e,addlText:t,children:a}){const d=(0,c.BX)(l.Suspense,{fallback:(0,c.tZ)(i.Z,{variant:"text",width:100}),children:[(0,c.BX)(r.Z,{children:[(0,c.tZ)(o.Z,{src:n.CL.weaponTypes[e.weaponType],size:1.5})," ",e.name]}),t]});return(0,c.tZ)(s.Z,{placement:"top",title:d,disableInteractive:!0,children:a})}},18571:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(31981),i=a(16736),r=a(7671),l=a(41075),s=a(13780),o=a(56961),c=a(75213),d=a(67550),u=a(62197),h=a(2784),Z=a(11141),p=a(13499),m=a(34156),f=a(2313),g=a(24264),b=a(87833),x=a(23690),y=a(79410),v=a(69698),C=a(36674),w=a(90844),k=a(28265),S=a(52903);function B({show:e,ascension:t=0,onHide:a,onSelect:B,filter:X=(()=>!0),weaponTypeFilter:_}){const{t:K}=(0,Z.$G)(["page_weapon","weaponNames_gen"]),[j,E]=(0,h.useState)(_?[_]:[...n.yd]),{database:T}=(0,h.useContext)(m.t),[P,O]=(0,h.useState)(T.displayWeapon.get());(0,h.useEffect)((()=>T.displayWeapon.follow(((e,t)=>O(t)))),[T]),(0,h.useEffect)((()=>_&&E([_])),[_]);const[D,M]=(0,h.useState)(""),I=(0,h.useDeferredValue)(D),{rarity:A}=P,L=(0,h.useMemo)((()=>n.fG.filter((e=>X((0,p.ub)(e)))).filter((e=>j.includes((0,p.ub)(e).weaponType))).filter((e=>!I||K(`weaponNames_gen:${e}`).toLowerCase().includes(I.toLowerCase()))).filter((e=>A.includes((0,p.ub)(e).rarity))).sort(((e,t)=>(0,p.ub)(t).rarity-(0,p.ub)(e).rarity))),[I,X,A,K,j]),R=(0,h.useMemo)((()=>(0,f.W)(n.yd,(e=>n.fG.forEach((t=>{const a=(0,p.ub)(t).weaponType;e[a].total++,L.includes(t)&&e[a].current++}))))),[L]),z=(0,h.useMemo)((()=>(0,f.W)(n.U1,(e=>n.fG.forEach((t=>{const a=(0,p.ub)(t).rarity;e[a].total++,L.includes(t)&&e[a].current++}))))),[L]);return(0,S.tZ)(v.Z,{open:e,onClose:a,children:(0,S.BX)(g.Z,{children:[(0,S.tZ)(r.Z,{sx:{py:1},children:(0,S.BX)(l.ZP,{container:!0,spacing:1,children:[(0,S.tZ)(l.ZP,{item:!0,children:(0,S.tZ)(k.Z,{value:j,totals:R,onChange:E,disabled:!!_,size:"small"})}),(0,S.tZ)(l.ZP,{item:!0,children:(0,S.tZ)(w.Z,{sx:{height:"100%"},onChange:e=>T.displayWeapon.set({rarity:e}),value:A,totals:z,size:"small"})}),(0,S.tZ)(l.ZP,{item:!0,flexGrow:1,children:(0,S.tZ)(s.Z,{autoFocus:!0,size:"small",value:D,onChange:e=>M(e.target.value),label:K("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,S.tZ)(l.ZP,{item:!0,children:(0,S.tZ)(x.Z,{onClick:a})})]})}),(0,S.tZ)(o.Z,{}),(0,S.tZ)(r.Z,{children:(0,S.tZ)(l.ZP,{container:!0,spacing:1,children:L.map((e=>{var n;const r=(0,p.ub)(e);return(0,S.tZ)(l.ZP,{item:!0,lg:3,md:4,children:(0,S.tZ)(b.Z,{sx:{height:"100%"},children:(0,S.BX)(c.Z,{onClick:()=>{a(),B(e)},sx:{display:"flex"},children:[(0,S.tZ)(d.Z,{component:"img",src:(0,i.Aq)(e,t>=2),sx:{width:100,height:"auto"},className:` grad-${r.rarity}star`}),(0,S.BX)(d.Z,{sx:{flexGrow:1,px:1},children:[(0,S.tZ)(u.Z,{variant:"subtitle1",children:r.name}),(0,S.BX)(u.Z,{sx:{display:"flex",alignItems:"baseline"},children:[(0,S.tZ)(y.Z,{size:1.5,src:null==(n=i.CL.weaponTypes)?void 0:n[r.weaponType]}),(0,S.tZ)(C.q,{stars:r.rarity,colored:!0})]})]})]})})},e)}))})}),(0,S.tZ)(o.Z,{}),(0,S.tZ)(r.Z,{sx:{py:1},children:(0,S.tZ)(x.Z,{large:!0,onClick:a})})]})})}},87923:(e,t,a)=>{a.d(t,{Y:()=>U,J:()=>V});var n=a(31981),i=a(49284),r=a(17885),l=a(12761),s=a(2784),o=a(39099),c=a(52903);var d=a(1665),u=a(41319),h=a(2754),Z=a(6094),p=a(25576),m=a(51638);const f=e=>(0,c.tZ)(d.v,{ns:"elementalResonance_gen",key18:e}),g=e=>(0,c.tZ)(d.v,{ns:"elementalResonance",key18:e}),b=(0,Z.Sm)(...n.UB.map((e=>u.uK[e]))),x=(0,l.G8)(n.fR,(e=>[`${e}_res_`,(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(u.uK.ele,4,(0,Z.aQ)(.15)))])),y={name:f("ProtectiveCanopy.name"),desc:f("ProtectiveCanopy.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)((function({iconProps:e}){const[t,a]=(0,s.useState)(0);return(0,s.useEffect)((()=>{const e=setInterval((()=>a((e=>e+1))),1e3);return()=>clearInterval(e)}),[]),(0,c.tZ)(o.Z,{ele:n.UB[t%n.UB.length],iconProps:e})}),{iconProps:r.mX})," x4"]}),canShow:e=>4===n.UB.filter((t=>e.get(u.uK[t]).value>=1)).length,sections:[{teamBuff:!0,fields:Object.values(x).map((e=>({node:e})))}]},v=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.pyro,2,(0,Z.aQ)(.25)))),C={name:f("FerventFlames.name"),desc:f("FerventFlames.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.I4,Object.assign({},r.mX))," ",(0,c.tZ)(i.I4,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.pyro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:(0,m.st)("effectDuration.cryo"),value:-40,unit:"%"},{node:v}]}]},w=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.hydro,2,(0,Z.aQ)(.25)))),k={name:f("SoothingWater.name"),desc:f("SoothingWater.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.px,Object.assign({},r.mX))," ",(0,c.tZ)(i.px,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.hydro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:(0,m.st)("effectDuration.pyro"),value:-40,unit:"%"},{node:w}]}]},S=["resonance","ShatteringIce"],B=(0,m.v9)(S),X=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.cryo,2,(0,Z.Dg)(B,"on",(0,Z.aQ)(.15))))),_={name:f("ShatteringIce.name"),desc:f("ShatteringIce.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.DK,Object.assign({},r.mX))," ",(0,c.tZ)(i.DK,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.cryo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:(0,m.st)("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:S,value:B,name:(0,m.st)("enemyAffected.frozenOrCryo"),header:{title:f("ShatteringIce.name"),icon:(0,c.tZ)(i.DK,{})},states:{on:{fields:[{node:X}]}}}]},K={name:f("HighVoltage.name"),desc:f("HighVoltage.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.Bn,Object.assign({},r.mX))," ",(0,c.tZ)(i.Bn,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.electro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:(0,m.st)("effectDuration.hydro"),value:-40,unit:"%"}]}]},j=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.anemo,2,(0,Z.aQ)(-.15)))),E=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.anemo,2,(0,Z.aQ)(.1)))),T=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.anemo,2,(0,Z.aQ)(-.05)))),P={name:f("ImpetuousWinds.name"),desc:f("ImpetuousWinds.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.Cx,Object.assign({},r.mX))," ",(0,c.tZ)(i.Cx,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.anemo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{node:j},{node:E},{node:T}]}]},O=["resonance","EnduringRock"],D=(0,m.v9)(O),M=["resonance","EnduringRockHit"],I=(0,m.v9)(M),A=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.geo,2,(0,Z.aQ)(.15)))),L=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.geo,2,(0,Z.Dg)(D,"on",(0,Z.aQ)(.15))))),R=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.geo,2,(0,Z.Dg)(I,"on",(0,Z.aQ)(-.2))))),z={name:f("EnduringRock.name"),desc:f("EnduringRock.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.jj,Object.assign({},r.mX))," ",(0,c.tZ)(i.jj,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.geo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:f("EnduringRock.desc"),fields:[{node:A}]},{teamBuff:!0,path:O,value:D,header:{title:f("EnduringRock.name"),icon:(0,c.tZ)(i.jj,{})},name:(0,m.st)("protectedByShield"),states:{on:{fields:[{node:L}]}}},{teamBuff:!0,path:M,value:I,header:{title:f("EnduringRock.name"),icon:(0,c.tZ)(i.jj,{})},name:g("EnduringRock.hitCond"),states:{on:{fields:[{node:R},{text:(0,m.el)("duration"),value:15,unit:"s"}]}}}]},G=["resonance","SprawlingCanopy2ele"],$=(0,m.v9)(G),N=["resonance","SprawlingCanopy3ele"],W=(0,m.v9)(N),q=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.dendro,2,50,Object.assign({},p.ZP.info("eleMas"),{isTeamBuff:!0})))),H=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.dendro,2,(0,Z.Dg)($,"on",30,Object.assign({},p.ZP.info("eleMas"),{isTeamBuff:!0}))))),F=(0,Z.Dg)(u.qH.activeCharKey,u.qH.charKey,(0,Z.ew)(b,4,(0,Z.ew)(u.uK.dendro,2,(0,Z.Dg)(W,"on",20,Object.assign({},p.ZP.info("eleMas"),{isTeamBuff:!0}))))),V=[y,C,k,_,K,P,z,{name:f("SprawlingGreenery.name"),desc:f("SprawlingGreenery.desc"),icon:(0,c.BX)("span",{children:[(0,c.tZ)(i.oZ,Object.assign({},r.mX))," ",(0,c.tZ)(i.oZ,Object.assign({},r.mX))]}),canShow:e=>e.get(u.uK.dendro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:f("SprawlingGreenery.desc"),fields:[{node:q}]},{teamBuff:!0,path:G,value:$,header:{title:f("SprawlingGreenery.name"),icon:(0,c.tZ)(i.oZ,{})},name:g("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:H},{text:(0,m.el)("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:N,value:W,header:{title:f("SprawlingGreenery.name"),icon:(0,c.tZ)(i.oZ,{})},name:g("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:F},{text:(0,m.el)("duration"),value:6,unit:"s"}]}}}]}],U=(0,h.d1)({teamBuff:{premod:Object.assign({},x,{atk_:v,hp_:w,staminaDec_:j,moveSPD_:E,cdRed_:T,shield_:A,all_dmg_:L,geo_enemyRes_:R,eleMas:(0,Z.ce)((0,Z.Sm)(q,H,F),{pivot:!0})}),total:{critRate_:X}}})},30706:(e,t,a)=>{a.d(t,{N:()=>F,Z:()=>q});var n=a(31981),i=a(16736),r=a(74155),l=a(12761),s=a(54278),o=a(40535),c=a(22698),d=a(29754),u=a(75213),h=a(67550),Z=a(79906),p=a(62197),m=a(85801),f=a(66198),g=a(7671),b=a(83249),x=a(2784),y=a(11141),v=a(5051),C=a(79199),w=a(45269),k=a(87833),S=a(50090),B=a(41653),X=a(86569),_=a(26437),K=a(12702),j=a(96580),E=a(36674),T=a(4121),P=a(69614),O=a(34156),D=a(25576),M=a(39099),I=a(70582),A=a(17885),L=a(52903);let R,z,G,$=e=>e;const N=(0,x.lazy)((()=>Promise.all([a.e(99),a.e(146),a.e(327)]).then(a.bind(a,65304)))),W=new Set(n._m);function q({artifactId:e,artifactObj:t,onClick:a,onDelete:l,mainStatAssumptionLevel:D=0,effFilter:A=W,editorProps:q,canEquip:F=!1,extraButtons:V}){var U,Y;const{t:J}=(0,y.$G)(["artifact","ui"]),{t:Q}=(0,y.$G)("statKey_gen"),{database:ee}=(0,x.useContext)(O.t),te=(0,I.Z)(e),ae=null==(U=null!=t?t:te)?void 0:U.setKey,ne=ae&&(0,T.Sk)(ae),ie=(0,x.useCallback)((t=>e&&ee.arts.set(e,{location:t})),[ee,e]),re=!t,[le,se]=(0,x.useState)(!1),oe=(0,x.useCallback)((()=>se(!1)),[se]),ce=(0,x.useCallback)((()=>re&&se(!0)),[re,se]),de=(0,x.useCallback)((t=>(0,L.tZ)(u.Z,{onClick:()=>e&&(null==a?void 0:a(e)),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:t})),[a,e]),ue=(0,x.useCallback)((e=>(0,L.tZ)(h.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})),[]),he=null!=t?t:te,{currentEfficiency:Ze,maxEfficiency:pe,currentEfficiency_:me,maxEfficiency_:fe}=(0,x.useMemo)((()=>{if(!he)return{currentEfficiency:0,maxEfficiency:0,currentEfficiency_:0,maxEfficiency_:0};const{currentEfficiency:e,maxEfficiency:t}=P.Z.getArtifactEfficiency(he,A),{currentEfficiency:a,maxEfficiency:i}=P.Z.getArtifactEfficiency(he,new Set(n._m));return{currentEfficiency:e,maxEfficiency:t,currentEfficiency_:a,maxEfficiency_:i}}),[he,A]);if(!he)return null;const{id:ge,lock:be,slotKey:xe,setKey:ye,rarity:ve,level:Ce,mainStatKey:we,substats:ke,location:Se=""}=he,Be=Math.max(Math.min(D,4*ve),Ce),Xe=0!==pe,_e=null==ne?void 0:ne.getSlotName(xe),Ke=null==ne?void 0:ne.getSlotDesc(xe),je=Ke&&(0,L.tZ)(K.Z,{title:(0,L.BX)(h.Z,{children:[(0,L.tZ)(x.Suspense,{fallback:(0,L.tZ)(Z.Z,{variant:"text",width:100}),children:(0,L.tZ)(p.Z,{variant:"h6",children:_e})}),(0,L.tZ)(p.Z,{children:Ke})]})}),Ee=n.fR.find((e=>we.startsWith(e)));return(0,L.BX)(x.Suspense,{fallback:(0,L.tZ)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[q&&(0,L.tZ)(x.Suspense,{fallback:!1,children:(0,L.tZ)(N,Object.assign({artifactIdToEdit:le?e:"",cancelEdit:oe},q))}),(0,L.BX)(k.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,L.BX)(_.Z,{condition:!!a,wrapper:de,falseWrapper:ue,children:[(0,L.BX)(h.Z,{className:`grad-${ve}star`,sx:{position:"relative",width:"100%"},children:[!a&&(0,L.tZ)(m.Z,{color:"primary",disabled:!re,onClick:()=>ee.arts.set(ge,{lock:!be}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:be?(0,L.tZ)(s.Z,{}):(0,L.tZ)(o.Z,{})}),(0,L.BX)(h.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,L.BX)(h.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:.4,mb:1},children:[(0,L.tZ)(f.Z,{size:"small",label:(0,L.tZ)("strong",{children:` +${Ce}`}),color:P.Z.levelVariant(Ce)}),!_e&&(0,L.tZ)(Z.Z,{variant:"text",width:100}),_e&&(0,L.tZ)(p.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1.5},children:(0,L.tZ)("strong",{children:_e})}),je||(0,L.tZ)(Z.Z,{width:10})]}),(0,L.BX)(p.Z,{color:"text.secondary",variant:"body2",sx:{display:"flex",gap:.5,alignItems:"center"},children:[(0,L.tZ)(C.Z,{iconProps:{fontSize:"inherit"},slotKey:xe}),J(`slotName.${xe}`)]}),(0,L.BX)(p.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,L.tZ)(M.C,{statKey:we,iconProps:{sx:{color:`${Ee}.main`}}}),(0,L.tZ)("span",{children:Q(we)})]}),(0,L.tZ)(p.Z,{variant:"h5",children:(0,L.tZ)("strong",{children:(0,L.tZ)(X.Z,{color:Be!==Ce?"warning":void 0,children:(0,r.R1)(we,ve,Be)})})}),(0,L.tZ)(E.q,{stars:ve,colored:!0})]}),(0,L.tZ)(h.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,L.tZ)(h.Z,{component:"img",src:(0,i.Hp)(ye,xe),width:"auto",height:"110%",sx:{float:"right",marginBottom:"-5%",marginTop:"-5%",marginRight:"-5%"}})})]}),(0,L.BX)(g.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:"0!important",width:"100%"},children:[ke.map((e=>!!e.value&&(0,L.tZ)(H,{stat:e,effFilter:A,rarity:ve},e.key))),(0,L.BX)(p.Z,{variant:"caption",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,L.tZ)(X.Z,{color:"secondary",sx:{flexGrow:1},children:J(R||(R=$`artifact:editor.curSubEff`))}),(0,L.tZ)(j.Z,{value:Ze,max:900,valid:Xe}),Ze!==me&&(0,L.tZ)("span",{children:"/"}),Ze!==me&&(0,L.tZ)(j.Z,{value:me,max:900,valid:Xe})]}),Ze!==pe&&(0,L.BX)(p.Z,{variant:"caption",sx:{display:"flex",gap:1},children:[(0,L.tZ)(X.Z,{color:"secondary",sx:{flexGrow:1},children:J(z||(z=$`artifact:editor.maxSubEff`))}),(0,L.tZ)(j.Z,{value:pe,max:900,valid:Xe}),pe!==fe&&(0,L.tZ)("span",{children:"/"}),pe!==fe&&(0,L.tZ)(j.Z,{value:fe,max:900,valid:Xe})]}),(0,L.tZ)(h.Z,{flexGrow:1}),void 0!==he.probability&&he.probability>=0&&(0,L.BX)("strong",{children:["Probability: ",(100*he.probability).toFixed(2),"%"]}),(0,L.BX)(p.Z,{color:"success.main",children:[null!=(Y=null==ne?void 0:ne.name)?Y:"Artifact Set"," ",ne&&(0,L.tZ)(K.L,{title:(0,L.tZ)(v.A,{artifactSheet:ne})})]})]})]}),(0,L.BX)(h.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[(0,L.tZ)(h.Z,{sx:{flexGrow:1},children:re&&F?(0,L.tZ)(S.W,{location:Se,setLocation:ie}):(0,L.tZ)(B.Z,{location:Se})}),(0,L.BX)(h.Z,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[re&&q&&(0,L.tZ)(w.Z,{title:(0,L.tZ)(p.Z,{children:J(G||(G=$`artifact:edit`))}),placement:"top",arrow:!0,children:(0,L.tZ)(b.Z,{color:"info",size:"small",onClick:ce,children:(0,L.tZ)(d.Z,{})})}),re&&!!l&&(0,L.tZ)(w.Z,{title:be?J("artifact:cantDeleteLock"):"",placement:"top",children:(0,L.tZ)("span",{children:(0,L.tZ)(b.Z,{color:"error",size:"small",onClick:()=>l(ge),disabled:be,children:(0,L.tZ)(c.Z,{})})})}),V]})]})]})]})}function H({stat:e,effFilter:t,rarity:a}){var n,i,s;const{t:o}=(0,y.$G)("statKey_gen"),c=null!=(n=null==(i=e.rolls)?void 0:i.length)?n:0,d=e.key?(0,r.U9)(e.key):0,u=(0,x.useMemo)((()=>e.key?(0,r.ME)(e.key,a):[]),[e.key,a]),Z=7-u.length,m=`roll${(0,l.re)(c,1,6)}`,f=null!=(s=e.efficiency)?s:0,g=e.key&&t.has(e.key),b=(0,l.V2)(.5+f/500*.5),v=D.ZP.unit(e.key),C=(0,x.useMemo)((()=>(0,L.tZ)(h.Z,{display:"flex",gap:.25,height:"1.3em",sx:{opacity:g?1:.3},children:[...e.rolls].sort().map(((e,t)=>(0,L.tZ)(F,{value:100*e/d,color:`roll${(0,l.re)(Z+u.indexOf(e),1,6)}.main`},`${t}${e}`)))})),[g,e.rolls,d,u,Z]);return(0,L.BX)(h.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,L.BX)(p.Z,{sx:{flexGrow:1},color:c?`${m}.main`:"error.main",component:"span",children:[(0,L.tZ)(M.C,{statKey:e.key,iconProps:A.mX})," ",o(e.key),`+${(0,r.Jj)(e.value,D.ZP.unit(e.key))}${v}`]}),C,(0,L.BX)(p.Z,{sx:{opacity:b,minWidth:40,textAlign:"right"},children:[f.toFixed(),"%"]})]})}function F({color:e="red",value:t=50}){return(0,L.tZ)(h.Z,{sx:{width:7,height:"100%",bgcolor:e,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,L.tZ)(h.Z,{sx:{width:10,height:100-(0,l.re)(t,0,100)+"%",bgcolor:"gray"}})})}},76627:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Oo});var n=a(31981),i=a(72550),r=a(96e3),l=a(85439),s=a(36380),o=a(61391),c=a(60319),d=a(68826),u=a(32782),h=a(67550),Z=a(79906),p=a(7671),m=a(38484),f=a(78287),g=a(83249),b=a(2784),x=a(11141),y=a(73557),v=a(39857),C=a(24264),w=a(87833),k=a(23690),S=a(14084),B=a(86512),X=a(12366),_=a(13230),K=a(99487),j=a(48650);const E=(0,b.createContext)({});var T=a(23657),P=a(31637),O=a(34156),D=a(56302),M=a(76260),I=a(55893),A=a(22134),L=a(6982),R=a(68220),z=a(80680),G=a(2180),$=a(52903);const N=b.lazy((()=>a.e(514).then(a.bind(a,37629))));function W(){var e;const{t}=(0,x.$G)("page_character"),{characterSheet:a,character:{key:n}}=(0,b.useContext)(_.K),[i,r]=(0,b.useState)(!1),l=(0,G.Z)();return(0,$.BX)($.HY,{children:[(0,$.tZ)(b.Suspense,{fallback:!1,children:(0,$.tZ)(N,{show:i,onHide:()=>r(!1),onSelect:l})}),(0,$.tZ)(g.Z,{color:"info",onClick:()=>r(!0),startIcon:(0,$.tZ)(z.Z,{characterKey:n}),children:null!=(e=null==a?void 0:a.name)?e:t("selectCharacter")})]})}var q=a(84485),H=a(42523),F=a(56961),V=a(23570),U=a(2995),Y=a(62197),J=a(35322),Q=a(34048),ee=a(4453),te=a(86569),ae=a(79410),ne=a(69698),ie=a(75636),re=a(15030);function le(){const{modalOpen:e}=(0,b.useContext)(j.M),{setFormulaData:t}=(0,b.useContext)(j.M),a=(0,b.useCallback)((()=>null==t?void 0:t(void 0,void 0)),[t]);return(0,$.tZ)(ne.Z,{open:!!e,onClose:a,children:(0,$.BX)(C.Z,{children:[(0,$.tZ)(H.Z,{title:"Formulas & Calculations",action:(0,$.tZ)(k.Z,{onClick:a})}),(0,$.tZ)(p.Z,{sx:{pt:0},children:(0,$.tZ)(se,{})})]})})}function se(){const{data:e}=(0,b.useContext)(K.R),{data:t}=(0,b.useContext)(j.M),a=(0,ie.U)(null!=t?t:e);return(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,$.tZ)(h.Z,{sx:{mr:-1,mb:-1},children:a.map((([e,t])=>(0,$.tZ)(oe,{displayNs:t,sectionKey:e},e)))})})}function oe({sectionKey:e,displayNs:t}){const{data:a}=(0,b.useContext)(K.R),{database:n}=(0,b.useContext)(O.t),{data:i}=(0,b.useContext)(j.M),r=(0,b.useMemo)((()=>(0,ie.f)(null!=i?i:a,e,n)),[n,i,a,e]);if(!r)return null;if(Object.entries(t).every((([e,t])=>t.isEmpty)))return null;const{title:l,icon:s,action:o}=r;return(0,$.BX)(w.Z,{sx:{mb:1},children:[(0,$.tZ)(ee.Z,{avatar:s&&(0,$.tZ)(ae.Z,{size:2,src:s}),title:l,action:o&&(0,$.tZ)(X.Z,{children:o})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{children:Object.entries(t).map((([e,t])=>!t.isEmpty&&(0,$.tZ)(ce,{node:t},e)))})]})}function ce({node:e}){const{node:t}=(0,b.useContext)(j.M),[a,i]=(0,b.useState)(!1),r=(0,b.useCallback)(((e,t)=>i(t)),[]),l=(0,b.useRef)();return(0,b.useEffect)((()=>{e===t&&setTimeout((()=>{var e;return null==l||null==(e=l.current)||null==e.scrollIntoView?void 0:e.scrollIntoView({behavior:"smooth"})}),300)}),[l,e,t]),(0,$.BX)(V.Z,{sx:{bgcolor:"contentNormal.main"},expanded:e===t||a,onChange:r,ref:l,children:[(0,$.BX)(U.Z,{expandIcon:(0,$.tZ)(q.Z,{}),children:[(0,$.BX)(Y.Z,{children:[(0,$.tZ)(te.Z,{color:e.info.variant,children:e.info.name})," ",(0,$.tZ)("strong",{children:(0,re.p)(e)})]}),n.Mk.includes(e.info.variant)&&(0,$.tZ)(h.Z,{sx:{display:"inline-block",ml:"auto",mr:2},children:(0,$.tZ)(Q.Z,{reaction:e.info.variant,trigger:e.info.subVariant})})]}),(0,$.tZ)(J.Z,{children:e.formulas.map(((e,t)=>(0,$.tZ)(Y.Z,{component:"div",children:e},t)))})]})}var de=a(33927),ue=a(41075),he=a(107),Ze=a(15873),pe=a(17885),me=a(32510),fe=a(5658),ge=a(27216),be=a(66198),xe=a(41033),ye=a(41319),ve=a(25576),Ce=a(39099),we=a(98283),ke=a(65992),Se=a(85801);const Be=["expand"],Xe=(0,ke.ZP)((e=>{const t=(0,we.Z)(e,Be);return(0,$.tZ)(Se.Z,Object.assign({},t))}))((({theme:e,expand:t})=>({transform:t?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})})));var _e=a(80551),Ke=a(89977),je=a(13900);const Ee=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],Te=(0,ke.ZP)(_e.Z)({display:"flex"});function Pe(e){let{name:t,children:a,value:n,placeholder:i,defaultValue:r=0,onValueChange:l,percent:s=!1,disabled:o=!1,onReset:c}=e,d=(0,we.Z)(e,Ee);return(0,$.BX)(Te,Object.assign({},d,{children:[a,(0,$.tZ)(je.Z,{sx:{px:1},children:t}),(0,$.tZ)(Ke.CC,{sx:{flexBasis:"10em",flexGrow:1},children:(0,$.tZ)(Ke.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:s,placeholder:i,value:n,onChange:l,disabled:o,endAdornment:s?"%":void 0})}),(0,$.tZ)(g.Z,{sx:{flexShrink:2},size:"small",color:"error",onClick:()=>c?c():l(r),disabled:o||n===r,children:(0,$.tZ)(me.Z,{})})]}))}let Oe,De=e=>e;function Me(){const{t:e}=(0,x.$G)("ui"),{characterDispatch:t}=(0,b.useContext)(_.K),{data:a}=(0,b.useContext)(K.R),[i,r]=(0,b.useState)(!1),l=(0,b.useCallback)((()=>r(!i)),[r,i]),s=a.get(ye.ri.enemy.level),o=a.get(ye.ri.enemy.defRed),c=a.get(ye.ri.enemy.defIgn),d=(0,b.useCallback)((()=>t({enemyOverride:{}})),[t]);return(0,$.BX)(w.Z,{children:[(0,$.BX)(p.Z,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[(0,$.tZ)(be.Z,{size:"small",color:"success",label:(0,$.BX)("span",{children:[s.info.name," ",(0,$.tZ)("strong",{children:s.value})]})}),n.fR.map((e=>(0,$.tZ)(Y.Z,{children:(0,$.tZ)(Ie,{element:e})},e))),(0,$.BX)(Y.Z,{children:["DEF Red. ",(0,re.p)(o)]}),(0,$.BX)(Y.Z,{children:["DEF Ignore ",(0,re.p)(c)]}),(0,$.BX)(h.Z,{flexGrow:1,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,$.tZ)(g.Z,{size:"small",color:"error",onClick:d,startIcon:(0,$.tZ)(me.Z,{}),children:e(Oe||(Oe=De`reset`))}),(0,$.tZ)(Xe,{expand:i,onClick:l,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{marginLeft:0},children:(0,$.tZ)(q.Z,{})})]})]}),(0,$.tZ)(xe.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,$.tZ)(p.Z,{sx:{pt:0},children:(0,$.tZ)(Ae,{})})})]})}function Ie({element:e}){const{data:t}=(0,b.useContext)(K.R),a=t.get(ye.ri.enemy[`${e}_res_`]),n=!isFinite(a.value),i=(0,$.tZ)(Ce.Z,{ele:e,iconProps:pe.mX}),r=n?(0,$.BX)("span",{children:[i," \u221e"]}):(0,$.BX)("span",{children:[i," ",(0,$.tZ)("strong",{children:(0,re.p)(a)})]});return(0,$.tZ)(te.Z,{color:e,children:r})}function Ae({bsProps:e={xs:12,md:6}}){var t,a,i;const{character:{enemyOverride:r},characterDispatch:l}=(0,b.useContext)(_.K),{data:s}=(0,b.useContext)(K.R),o=null!=(t=r.enemyLevel)?t:s.get(ye.ri.lvl).value,c=null!=(a=r.enemyDefIgn_)?a:0,d=null!=(i=r.enemyDefRed_)?i:0;return(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,Object.assign({item:!0},e,{children:(0,$.tZ)(g.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,$.tZ)(ue.ZP,Object.assign({item:!0},e,{children:(0,$.tZ)(Pe,{sx:{bgcolor:e=>e.palette.contentLight.main,width:"100%"},name:(0,$.tZ)("b",{children:ve.ZP.get("enemyLevel")}),value:o,placeholder:ve.ZP.getStr("enemyLevel"),defaultValue:s.get(ye.ri.lvl).value,onValueChange:e=>l({type:"enemyOverride",statKey:"enemyLevel",value:e}),onReset:()=>l({type:"enemyOverride",statKey:"enemyLevel",value:void 0})})})),n.fR.map((t=>{const a=`${t}_enemyRes_`,n=r[a],i=n===Number.MAX_VALUE;return(0,$.tZ)(ue.ZP,Object.assign({item:!0},e,{children:(0,$.tZ)(Pe,{sx:{bgcolor:e=>e.palette.contentLight.main,width:"100%"},name:(0,$.tZ)(te.Z,{color:t,children:(0,$.tZ)("b",{children:ve.ZP.get(a)})}),value:void 0!==n?i?1/0:n:10,placeholder:i?"\u221e ":ve.ZP.getStr(a),defaultValue:10,onValueChange:e=>l({type:"enemyOverride",statKey:a,value:e}),disabled:i,percent:!0,children:(0,$.tZ)(g.Z,{color:t,onClick:()=>l({type:"enemyOverride",statKey:a,value:i?10:Number.MAX_VALUE}),startIcon:i?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),children:"Immunity"})})}),t)})),(0,$.tZ)(ue.ZP,Object.assign({item:!0},e,{children:(0,$.tZ)(Pe,{sx:{bgcolor:e=>e.palette.contentLight.main,width:"100%"},name:(0,$.tZ)("b",{children:ve.ZP.get("enemyDefIgn_")}),value:c,placeholder:ve.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:e=>l({type:"enemyOverride",statKey:"enemyDefIgn_",value:e}),percent:!0})})),(0,$.tZ)(ue.ZP,Object.assign({item:!0},e,{children:(0,$.tZ)(Pe,{sx:{bgcolor:e=>e.palette.contentLight.main,width:"100%"},name:(0,$.tZ)("b",{children:ve.ZP.get("enemyDefRed_")}),value:d,placeholder:ve.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:e=>l({type:"enemyOverride",statKey:"enemyDefRed_",value:e}),percent:!0})})),(0,$.tZ)(ue.ZP,{item:!0,xs:12,children:(0,$.tZ)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var Le=a(39282),Re=a(68330);let ze,Ge=e=>e;const $e={xs:1,md:2,lg:3};function Ne({open:e,onClose:t}){const{t:a}=(0,x.$G)("page_character");return(0,$.tZ)(ne.Z,{open:e,onClose:t,children:(0,$.BX)(C.Z,{children:[(0,$.tZ)(H.Z,{title:a(ze||(ze=Ge`addStats.title`)),action:(0,$.tZ)(k.Z,{onClick:t})}),(0,$.tZ)(p.Z,{sx:{pt:0},children:(0,$.BX)(de.Z,{spacing:1,children:[(0,$.tZ)(He,{}),(0,$.tZ)(Me,{}),(0,$.tZ)(et,{})]})})]})})}const We=[...ye.lR],qe=(e,t)=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:e},t);function He(){const{t:e}=(0,x.$G)("page_character"),{character:{bonusStats:t},characterDispatch:a}=(0,b.useContext)(_.K),n=(0,b.useCallback)((e=>a({bonusStats:e})),[a]);return(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{sx:{display:"flex"},children:(0,$.BX)(ue.ZP,{container:!0,columns:$e,sx:{pt:1},spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:12,children:(0,$.tZ)(he.Z,{severity:"info",variant:"filled",children:(0,$.BX)(x.cC,{i18nKey:"addStats.info",t:e,children:["You can use these fields to add buffs/debuffs not directly supported in GO, such as food buffs, abyss cards, or Superconduct. Please refer to the",(0,$.tZ)("a",{href:"https://genshin-impact.fandom.com/wiki/Genshin_Impact_Wiki",children:"Genshin Impact Wiki"}),"for specific values."]})})}),(0,$.tZ)(Re.Z,{statKeys:We,statFilters:t,setStatFilters:n,wrapperFunc:qe})]})})})}const Fe=["eleMas","critRate_","critDMG_","enerRech_","heal_"],Ve=["hp","atk","def",...Fe].map((e=>ye.ri.total[e])),Ue=["atk_","atk","hp_","hp","def_","def",...Fe],Ye=[...ve.hX,...ve.Sx,"stamina","incHeal_","shield_","cdRed_"],Je=ye.lR.filter((e=>!Ue.includes(e)&&!Ye.includes(e)));function Qe({nodes:e,extra:t}){const{data:a,oldData:n}=(0,b.useContext)(K.R);return(0,$.BX)(Le.lD,{children:[e.map((e=>{var t;return(0,$.tZ)(Le.JW,{component:Ze.ZP,node:a.get(e),oldValue:null==n||null==(t=n.get(e))?void 0:t.value},JSON.stringify(e.info))})),t]})}function et(){const{characterSheet:e}=(0,b.useContext)(_.K),{data:t}=(0,b.useContext)(K.R),a=t.get(ye.ri.special),n=e.elementKey,i=e.isMelee(),r=(0,b.useMemo)((()=>Ye.filter((e=>!e.includes(n)&&(i&&e.includes("physical"),!0))).map((e=>ye.ri.total[e])).filter((e=>!!t.get(e).value))),[t,n,i]),l=(0,b.useMemo)((()=>Je.map((e=>ye.ri.total[e])).filter((e=>t.get(e).value))),[t]);return(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.BX)(ue.ZP,{container:!0,columns:$e,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tt,{title:"Main Stats",children:(0,$.tZ)(Qe,{nodes:Ve,extra:a&&(0,$.BX)(Ze.ZP,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,$.BX)("span",{children:[(0,$.tZ)("b",{children:"Special:"})," ",(0,$.BX)(te.Z,{color:a.info.variant,children:[a.info.icon," ",a.info.name]})]}),(0,$.tZ)("span",{children:(0,re.p)(a)})]})})})}),(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tt,{title:"Other Stats",children:(0,$.tZ)(Qe,{nodes:r})})}),!!l.length&&(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tt,{title:"Misc Stats",children:(0,$.tZ)(Qe,{nodes:l})})})]})})})}function tt({title:e,children:t}){return(0,$.BX)(C.Z,{children:[(0,$.tZ)(p.Z,{sx:{py:1},children:(0,$.tZ)(h.Z,{display:"flex",justifyContent:"space-between",children:(0,$.tZ)(Y.Z,{variant:"subtitle1",children:e})})}),t]})}var at=a(12761),nt=a(36269),it=a(46342),rt=a(62469),lt=a(85162),st=a(94380),ot=a(92794),ct=a(51290),dt=a(45269),ut=a(11615),ht=a(23485),Zt=a(12702),pt=a(23119);function mt(){const{t:e}=(0,x.$G)("page_character_optimize");return(0,$.tZ)(he.Z,{severity:"warning",variant:"filled",children:(0,$.BX)(x.cC,{t:e,i18nKey:"noArtis",children:["Oops! It looks like you haven't added any artifacts to GO yet! You should go to the",(0,$.tZ)(pt.Z,{component:v.rU,to:"/artifacts",children:"Artifacts"}),"page and add some!"]})})}var ft=a(58489);const gt=(0,b.createContext)(void 0);var bt=a(64212),xt=a(13810),yt=a(2754),vt=a(93290);var Ct=a(64985),wt=a(6094);function kt(e,t,a=!1){const i=new Set,r=new Set;function l(e,t){return t?i.add(e):e.operands.forEach((e=>i.has(e)&&r.add(e))),e}const s=new Set;if(e=(0,Ct.uW)(e,(e=>e),(e=>{const{operation:t}=e;switch(t){case"read":return s.add(e.path[1]),l(e,!0);case"add":{const t=e.operands.filter((e=>i.has(e))),a=e.operands.filter((e=>!i.has(e)));if(0===a.length)return l(e,!0);if(t.length<=1)return l(e,!1);const n=l((0,wt.Sm)(...t),!0);return l((0,wt.Sm)(n,...a),!1)}case"mul":{const t=e.operands.filter((e=>"const"!==e.operation));return l(e,0===t.length||1===t.length&&i.has(t[0]))}case"const":return l(e,!0);case"res":case"threshold":case"sum_frac":case"max":case"min":return l(e,!1);default:(0,at.UT)(t)}})),e.filter((e=>i.has(e))).forEach((e=>r.add(e))),[...r].every((({operation:e})=>"read"===e||"const"===e))&&Object.keys(t.base).length===s.size)return{nodes:e,arts:t};let o=-1;function c(){for(;s.has(""+ ++o););return`${o}`}const d=[...r].filter((e=>"const"!==e.operation)),u=new Map(d.map((e=>[e,a||"read"!==e.operation||"dyn"!==e.path[0]?(0,wt.Cj)(c()):e])));function h(e){const t=(0,vt.CG)([...u.keys()],{dyn:(0,at.vU)(e,(e=>(0,wt.a9)(e)))},(e=>!0));return Object.fromEntries([...u.values()].map(((e,a)=>[e.path[1],t[a].value])))}const Z={nodes:e=(0,Ct.uW)(e,(e=>{var t;return null!=(t=u.get(e))?t:e}),(e=>e)),arts:{base:h(t.base),values:(0,at.K8)(n.Ex,(e=>t.values[e].map((({id:e,set:t,values:a})=>({id:e,set:t,values:h(a)})))))}},p=Object.entries(h({}));for(const n of Object.values(Z.arts.values))for(const{values:e}of n)for(const[t,a]of p)e[t]-=a;return Z}function St(e,t,a){var i;let r=!1;const l=!(null!=(i=a.rainbow)&&i.length),s=Object.keys(e.base),o=new Set(Object.entries(a).filter((([e,t])=>t.length)).map((([e])=>e))),c=new Set(Object.entries(a).filter((([e,t])=>t.includes(2)&&!t.includes(4))).map((([e])=>e))),d=(0,at.K8)(n.Ex,(a=>{const n=e.values[a],i=n.filter((e=>{let a=0;return n.every((n=>{const i=s.every((t=>{var a,i;return(null!=(a=n.values[t])?a:0)>=(null!=(i=e.values[t])?i:0)})),r=s.some((t=>{var a,i;return(null!=(a=n.values[t])?a:0)>(null!=(i=e.values[t])?i:0)})),d=i&&(r||n.id>e.id),u=l&&!o.has(n.set)&&!c.has(e.set)||e.set===n.set;return d&&u&&a++,a<t}))}));return i.length!==n.length&&(r=!0),i}));return r?{base:e.base,values:d}:e}function Bt(e,t,a){const i=Object.fromEntries(Object.entries(t.base).map((([e,t])=>[e,{min:t,max:t}]))),r={arts:t};for(;;){const t=(0,at.K8)(n.Ex,(e=>Kt(r.arts.values[e]))),l=(0,at.K8)(n.Ex,(e=>_t(Object.entries(t).map((t=>t[0]===e?i:t[1])).filter((e=>e)))));let s=!1;const o=(0,at.K8)(n.Ex,(t=>{const n=r.arts.values[t].filter((n=>{const i=_t([Kt([n]),l[t]]),r=jt(e,i);return e.every(((e,t)=>{var n;return r.get(e).max>=(null!=(n=a[t])?n:-1/0)}))}));return n.length!==r.arts.values[t].length&&(s=!0),n}));if(!s)break;r.arts={base:r.arts.base,values:o}}return r.arts}function Xt(e,t){const a=jt(e,_t([Object.fromEntries(Object.entries(t.base).map((([e,t])=>[e,{min:t,max:t}]))),...Object.values(t.values).map((e=>Kt(e)))]));return(0,Ct.uW)(e,(e=>{{const{min:t,max:n}=a.get(e);if(t===n)return(0,wt.a9)(t)}const{operation:t}=e,n=e.operands.map((e=>a.get(e)));switch(t){case"threshold":{const[t,a,i,r]=n;if(t.min>=a.max)return e.operands[2];if(t.max<a.min)return e.operands[3];if(i.max===i.min&&r.max===r.min&&i.min===r.min&&isFinite(i.min))return(0,wt.a9)(i.max);break}case"min":{const t=e.operands.filter(((e,t)=>{const a=n[t];return n.every((e=>a.min<=e.max))}));if(t.length<n.length)return(0,wt.VV)(...t);break}case"max":{const t=e.operands.filter(((e,t)=>{const a=n[t];return n.every((e=>a.max>=e.min))}));if(t.length<n.length)return(0,wt.Fp)(...t);break}}return e}),(e=>e))}function _t(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,a])=>{t[e]?(t[e].min+=a.min,t[e].max+=a.max):t[e]=Object.assign({},a)}))})),t}function Kt(e){const t={};return e.length&&(Object.keys(e[0].values).filter((t=>e.every((e=>e.values[t])))).forEach((a=>t[a]={min:e[0].values[a],max:e[0].values[a]})),e.forEach((({values:e})=>{for(const[a,n]of Object.entries(e))t[a]?(t[a].max<n&&(t[a].max=n),t[a].min>n&&(t[a].min=n)):t[a]={min:0,max:n}}))),t}function jt(e,t){const a=new Map;return(0,Ct.aD)(e,(e=>{}),(e=>{var n;const{operation:i}=e,r=e.operands.map((e=>a.get(e)));let l;switch(i){case"read":if("dyn"!==e.path[0])throw new Error(`Found non-dyn path ${e.path} while computing range`);l=null!=(n=t[e.path[1]])?n:{min:0,max:0};break;case"const":l=Et([e.value]);break;case"add":case"min":case"max":l={min:vt.aj[i](r.map((e=>e.min))),max:vt.aj[i](r.map((e=>e.max)))};break;case"res":l={min:vt.aj[i]([r[0].max]),max:vt.aj[i]([r[0].min])};break;case"mul":l=r.reduce(((e,t)=>Et([e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max])));break;case"threshold":l=r[0].min>=r[1].max?r[2]:r[0].max<r[1].min?r[3]:Et([],[r[2],r[3]]);break;case"sum_frac":{const[e,t]=r,a={min:e.min+t.min,max:e.max+t.max};l=a.min<=0&&a.max>=0?e.min<=0&&e.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Et([e.min/a.min,e.min/a.max,e.max/a.min,e.max/a.max]);break}default:(0,at.UT)(i)}a.set(e,l)})),a}function Et(e,t=[]){const a=Math.max(...e,...t.map((e=>e.max)));return{min:Math.min(...e,...t.map((e=>e.min))),max:a}}function Tt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Tt=function(e){this.s=e,this.n=e.next},Tt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new Tt(e)}class WorkerCoordinator{constructor(e,t,a){this.prio=void 0,this.commands=void 0,this.workers=void 0,this.workDone=new Map,this._workers=void 0,this.cancel=void 0,this.cancelled=void 0,this.callback=void 0,this.notifyNonEmpty=void 0,this.commands=t.map((e=>new at.uZ)),this.prio=new Map(t.map(((e,t)=>[e,t]))),this.callback=a,e.forEach((e=>{e.onmessage=t=>this.onMessage(t.data,e),e.onerror=e=>this.onError(e)})),this._workers=e,this.workers=e.map((e=>Promise.resolve(e))),this.cancel=()=>{},this.cancelled=new Promise(((e,t)=>this.cancel=t)),this.cancelled.catch((t=>e.forEach((e=>e.terminate()))))}async execute(e){var t=this;const a=async function(){var a,n=!1,i=!1;try{for(var r,l=function(e){var t,a,n,i=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(a&&null!=(t=e[a]))return t.call(e);if(n&&null!=(t=e[n]))return new Tt(t.call(e));a="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}(e);n=!(r=await l.next()).done;n=!1){const e=r.value;t.add(e)}}catch(s){i=!0,a=s}finally{try{n&&null!=l.return&&await l.return()}finally{if(i)throw a}}}();for(;;){var n;const e=null==(n=this.commands.find((e=>e.length)))?void 0:n.pop();if(void 0===e){const e=await Promise.race([new Promise((e=>this.notifyNonEmpty=()=>e(!0))),Promise.all([...this.workers,a]).then((e=>!1)),this.cancelled]);if(this.notifyNonEmpty=void 0,e)continue;break}const{i:t,w:i}=await Promise.race([...this.workers.map(((e,t)=>e.then((e=>({i:t,w:e}))))),this.cancelled]);this.workers[t]=new Promise((e=>this.workDone.set(i,(()=>e(i))))),i.postMessage(e)}}onError(e){this.cancel(new Error(`Worker Error: ${e.message}`))}onMessage(e,t){void 0!==e.command?this.add(e):"done"===e.resultType?this.workDone.get(t)():this.callback(e,t)}add(e){var t;const a=this.prio.get(e.command);this.commands[a].push(e),null==(t=this.notifyNonEmpty)||t.call(this)}broadcast(e){this._workers.forEach((t=>t.postMessage(e)))}notifiedBroadcast(e){this.workers=this.workers.map((e=>e.then((e=>new Promise((t=>{this.workDone.set(e,(()=>t(e)))})))))),this._workers.forEach((t=>t.postMessage(e)))}}class GOSolver extends WorkerCoordinator{constructor(e,t,n){super(Array(n).fill(NaN).map((e=>new Worker(new URL(a.p+a.u(710),a.b)))),["iterate","split","count"],((e,t)=>{switch(e.resultType){case"interim":this.interim(e,t);break;case"finalize":this.finalizedResults.push(e);break;case"count":this.status.total=e.count;break;case"err":this.onError(e)}})),this.maxIterateSize=32e6,this.status=void 0,this.exclusion=void 0,this.topN=void 0,this.buildValues=void 0,this.finalizedResults=[];const{exclusion:i,topN:r}=e;this.status=t,this.exclusion=i,this.topN=r,this.status.total=NaN,this.buildValues=Array(r).fill({w:void 0,val:-1/0}),this.notifiedBroadcast(this.preprocess(e))}async solve(){const{exclusion:e,maxIterateSize:t}=this;return this.finalizedResults=[],await this.execute([{command:"count",exclusion:e,maxIterateSize:t}]),this.notifiedBroadcast({command:"finalize"}),await this.execute([]),this.finalizedResults}preprocess({plotBase:e,optimizationTarget:t,arts:a,topN:n,exclusion:i,constraints:r}){let l=[...(r=r.filter((e=>e.min>-1/0))).map((e=>e.value)),t];const s=[...r.map((e=>e.min)),-1/0];e&&(l.push(e),s.push(-1/0)),l=function(e,t){const a={};for(const[n,i]of Object.entries(t))i.includes(4)&&(a[n]=i.includes(2)?1:3);return(0,Ct.uW)(e,(e=>e),(e=>{if("threshold"!==e.operation)return e;const[n,i,r,l]=e.operands;if("read"===n.operation&&"const"===i.operation){const e=n.path[n.path.length-1],s=i.value;if(e in a){if(a[e]<s)return l;if(2===s&&t[e].includes(2))return(0,wt.Lj)(n,4,r,l)}}return e}))}(l,i),l=(0,vt.tL)(l,{},(e=>!1)),({nodes:l,arts:a}=function(e,t,a,n,i,r){let l=r;const s={pruneNodeRange:!0},o={pruneNodeRange:!0},c={reaffine:!0},d={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0};let u=0;for(;Object.values(l).some((e=>e))&&u++<20;){if(l.pruneOrder){delete l.pruneOrder;const e=St(a,n,i);a!==e&&(a=e,l=Object.assign({},l,s))}if(l.pruneArtRange){delete l.pruneArtRange;const n=Bt(e,a,t);a!==n&&(a=n,l=Object.assign({},l,o))}if(l.pruneNodeRange){delete l.pruneNodeRange;const t=Xt(e,a);e!==t&&(e=t,l=Object.assign({},l,c))}if(l.reaffine){delete l.reaffine;const{nodes:t,arts:n}=kt(e,a);e===t&&a===n||(e=t,a=n,l=Object.assign({},l,d))}}return{nodes:e,arts:a}}(l,s,a,n,i,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0})),l=(0,vt.tL)(l,{},(e=>!1)),e&&(e=l.pop());return{command:"setup",arts:a,optTarget:l.pop(),plotBase:e,topN:n,constraints:l.map(((e,t)=>({value:e,min:s[t]})))}}interim(e,t){if(this.status.tested+=e.tested,this.status.failed+=e.failed,this.status.skipped+=e.skipped,e.buildValues){var a,n;const{topN:i}=this,r=null!=(a=this.buildValues[i-1].val)?a:-1/0;this.buildValues.filter((({w:e})=>e!==t)),this.buildValues.push(...e.buildValues.map((e=>({w:t,val:e})))),this.buildValues.sort(((e,t)=>t.val-e.val)).splice(i);const l=null!=(n=this.buildValues[i-1].val)?n:-1/0;r!==l&&this.broadcast({command:"threshold",threshold:l})}}}var Pt=a(2313),Ot=a(13264),Dt=a(96511),Mt=a(13780),It=a(79199),At=a(91218),Lt=a(89279),Rt=a(28265),zt=a(42090),Gt=a(64303);function $t(e){const{database:t}=(0,b.useContext)(O.t),[a,n]=(0,b.useState)((()=>t.buildSettings.get(e)));(0,b.useEffect)((()=>n(t.buildSettings.get(e))),[t,e]),(0,b.useEffect)((()=>t.buildSettings.follow(e,((e,t,a)=>"update"===t&&n(a)))),[e,n,t]);return{buildSetting:a,buildSettingDispatch:(0,b.useCallback)((a=>e&&t.buildSettings.set(e,a)),[e,t])}}let Nt,Wt,qt,Ht,Ft=e=>e;var Vt=function(e){return e[e.ToggleToAllow=0]="ToggleToAllow",e[e.ToggleToExclude=1]="ToggleToExclude",e}(Vt||{});function Ut({disabled:e=!1,allowListTotal:t}){const{t:a}=(0,x.$G)("page_character_optimize"),{t:r}=(0,x.$G)("page_character"),{character:{key:l}}=(0,b.useContext)(_.K),{silly:s}=(0,b.useContext)(T.E),{buildSetting:{excludedLocations:o,allowLocationsState:c},buildSettingDispatch:d}=$t(l),{database:u}=(0,b.useContext)(O.t),[Z,m,f]=(0,i.aV)(!1),[y,v]=(0,i.NW)(),S=(0,b.useDeferredValue)(y),[B,K]=(0,b.useState)(""),j=(0,b.useDeferredValue)(B),[E,D]=(0,b.useState)([...n.UB]),M=(0,b.useDeferredValue)(E),[I,A]=(0,b.useState)([...n.yd]),L=(0,b.useDeferredValue)(I),[R,z]=(0,b.useState)([...n.ZI]),G=(0,b.useDeferredValue)(R),N=(0,b.useMemo)((()=>S&&Object.fromEntries(Array.from(new Set(Object.entries(u.chars.data).filter((([e])=>e!==l)).filter((([e])=>(0,at.CZ)({element:M,weaponType:L,rarity:G,name:j},(0,Gt.zU)(u,s))(e))))))),[S,u,l,M,L,G,j,s]),W=Object.entries(N).sort((([e,t],[a,n])=>{const[i,r]=[-1,1],l=u.charMeta.get(e).favorite,s=u.charMeta.get(a).favorite;if(l&&!s)return i;if(s&&!l)return r;const o=Object.values(t.equippedArtifacts).filter((e=>e)).length,c=Object.values(n.equippedArtifacts).filter((e=>e)).length;return o>c?i:c>o?r:e.localeCompare(a)})).map((([e])=>(0,n.V7)(e))),{elementTotals:q,weaponTypeTotals:H,characterRarityTotals:V,locListTotals:U}=(0,b.useMemo)((()=>{const e={elementTotals:[...n.UB],weaponTypeTotals:[...n.yd],characterRarityTotals:[...n.ZI],locListTotals:["allowed","excluded"]};return(0,Pt.A)(e,(e=>Object.entries(u.chars.data).filter((([e])=>e!==l)).forEach((([t])=>{const a=(0,P.m)(t,u.gender),i=a.elementKey;e.elementTotals[i].total++,N[t]&&e.elementTotals[i].current++;const r=a.weaponTypeKey;e.weaponTypeTotals[r].total++,N[t]&&e.weaponTypeTotals[r].current++;const l=a.rarity;e.characterRarityTotals[l].total++,N[t]&&e.characterRarityTotals[l].current++;const s=(0,n.V7)(t);W.includes(s)&&(e.locListTotals.allowed.total++,e.locListTotals.excluded.total++,o.includes(s)?e.locListTotals.excluded.current++:e.locListTotals.allowed.current++)}))))}),[N,l,u.chars.data,u.gender,o,W]);(0,b.useEffect)((()=>u.charMeta.followAny((e=>v()))),[v,u]),(0,b.useEffect)((()=>u.chars.followAny((e=>v()))),[v,u]);const[J,Q]=(0,b.useState)(!1),ee=(0,b.useCallback)((()=>d({excludedLocations:o.filter((e=>!W.includes(e))),allowLocationsState:"customList"})),[d,o,W]),te=(0,b.useCallback)((()=>d({excludedLocations:Array.from(new Set(o.concat(W))),allowLocationsState:"customList"})),[d,o,W]),ae=(0,b.useCallback)(((e,t)=>d({allowLocationsState:t})),[d]),ie=(0,b.useCallback)((e=>{const t=[...e],a=t.filter((e=>!o.includes(e))).concat(o.filter((e=>!t.includes(e))));d({excludedLocations:a,allowLocationsState:"customList"})}),[o,d]),re=(0,b.useCallback)((()=>Q(!0)),[]),le=u.chars.keys.length-1,se=le-o.length,oe="all"===c?le:"customList"===c?se===le?se:`${se}/${le}`:0,ce="all"===c?"success":"customList"===c?"info":"secondary";return(0,$.BX)(h.Z,{display:"flex",gap:1,children:[(0,$.tZ)(ne.Z,{open:Z,onClose:f,containerProps:{maxWidth:"xl"},draggable:!1,onMouseUp:re,children:(0,$.BX)(C.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.BX)(h.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,$.tZ)(Y.Z,{variant:"h6",children:a(Nt||(Nt=Ft`excludeChar.title`))}),(0,$.tZ)(Zt.Z,{title:(0,$.tZ)(Y.Z,{children:a(Wt||(Wt=Ft`excludeChar.tooltip`))})}),(0,$.tZ)(h.Z,{flexGrow:1}),(0,$.tZ)(k.Z,{onClick:f,size:"small"})]})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{sx:{pb:0},children:(0,$.BX)(de.Z,{gap:1,children:[(0,$.BX)(h.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,$.tZ)(ft.Z,{exclusive:!0,baseColor:"secondary",size:"small",value:c,onChange:ae,children:xt.Cz.map((t=>(0,$.tZ)(ot.Z,{value:t,disabled:c===t||e,children:a(`excludeChar.states.${t}`)},t)))}),(0,$.tZ)(Mt.Z,{autoFocus:!0,value:B,onChange:e=>K(e.target.value),label:r("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})]}),(0,$.BX)(h.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,$.tZ)(Rt.Z,{sx:{height:"100%"},onChange:A,value:L,totals:H,size:"small"}),(0,$.tZ)(Lt.Z,{sx:{height:"100%"},onChange:D,value:M,totals:q,size:"small"}),(0,$.tZ)(zt.Z,{sx:{height:"100%"},onChange:z,value:G,totals:V,size:"small"})]})]})}),(0,$.BX)(p.Z,{sx:{opacity:"customList"===c?1:.6},children:[(0,$.BX)(ue.ZP,{container:!0,pb:1,gap:1,flexWrap:"nowrap",children:[(0,$.tZ)(ue.ZP,{item:!0,xs:6,children:(0,$.BX)(g.Z,{color:"success",fullWidth:!0,onClick:ee,children:[a(qt||(qt=Ft`excludeChar.modal.allow_all`)),(0,$.tZ)(X.Z,{sx:{ml:1},children:(0,$.tZ)("strong",{children:U.allowed})})]})}),(0,$.tZ)(ue.ZP,{item:!0,xs:6,children:(0,$.BX)(g.Z,{fullWidth:!0,color:"error",onClick:te,children:[a(Ht||(Ht=Ft`excludeChar.modal.disallow_All`)),(0,$.tZ)(X.Z,{sx:{ml:1},children:(0,$.tZ)("strong",{children:U.excluded})})]})})]}),(0,$.tZ)(Yt,{locList:W,excludedLocations:o,mouseUpDetected:J,setMouseUpDetected:Q,toggleList:ie})]})]})}),(0,$.BX)(w.Z,{sx:{display:"flex",width:"100%"},children:[(0,$.tZ)(p.Z,{sx:{flexGrow:1},children:(0,$.BX)(de.Z,{spacing:1,children:[(0,$.tZ)(Y.Z,{children:(0,$.tZ)("strong",{children:a("excludeChar.title")})}),(0,$.BX)(Y.Z,{children:[a("excludeChar.usingState")," ",(0,$.tZ)(X.Z,{color:ce,children:a(`excludeChar.states.${c}`)})]}),(0,$.BX)(Y.Z,{children:[a("excludeChar.chars")," ",(0,$.BX)(X.Z,{color:"success",children:[oe," ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX)),a("artSetConfig.allowed")]})]}),(0,$.BX)(Y.Z,{children:[a("excludeChar.artis")," ",(0,$.BX)(X.Z,{color:"success",children:[t," ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX)),a("artSetConfig.allowed")]})]})]})}),(0,$.tZ)(g.Z,{sx:{borderRadius:0,flexShrink:1,minWidth:40},onClick:m,disabled:e,color:"info",children:(0,$.tZ)(Ot.Z,{})})]})]})}function Yt({locList:e,excludedLocations:t,mouseUpDetected:a,setMouseUpDetected:n,toggleList:i}){const[r,l]=(0,b.useState)(new Set),[s,o]=(0,b.useState)();return(0,b.useEffect)((()=>{a&&(n(!1),r.size>0&&(i(r),l(new Set),o(void 0)))}),[r,l,n,a,i]),(0,$.tZ)(ue.ZP,{container:!0,spacing:1,columns:{xs:6,sm:7,md:10,lg:12,xl:16},children:e.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(Jt,{locKey:e,charList:r,charListMode:s,setCharList:l,setCharListMode:o,selected:!t.includes(e)})},e)))})}function Jt({locKey:e,selected:t,charList:a,charListMode:i,setCharList:r,setCharListMode:l}){const{database:s}=(0,b.useContext)(O.t),o=s.chars.get(s.chars.LocationToCharacterKey(e)),c=(0,b.useCallback)((n=>1===n.buttons&&(i===Vt.ToggleToAllow&&!t||i===Vt.ToggleToExclude&&t)&&r(new Set([...a]).add(e))),[i,t,r,a,e]),d=(0,b.useCallback)((()=>{const n=t?Vt.ToggleToExclude:Vt.ToggleToAllow;l(n),r(new Set([...a]).add(e))}),[t,l,r,a,e]),u=(0,b.useMemo)((()=>0!==a.size),[a.size]),Z=t&&!(i===Vt.ToggleToExclude&&a.has(e))||i===Vt.ToggleToAllow&&a.has(e),p={opacity:Z?void 0:.6,borderColor:Z?"rgb(100,200,100)":"rgb(200,100,100)",borderWidth:"3px",borderStyle:"solid",borderRadius:"8px"},m=(0,b.useMemo)((()=>(0,$.tZ)(h.Z,{fontSize:"0.85em",display:"flex",justifyContent:"space-between",p:.3,children:n.Ex.map((e=>(0,$.tZ)(It.Z,{slotKey:e,iconProps:{fontSize:"inherit",sx:{opacity:null!=o&&o.equippedArtifacts[e]?void 0:.5}}},e)))})),[null==o?void 0:o.equippedArtifacts]);return(0,$.BX)(w.Z,{sx:p,children:[(0,$.tZ)(At.Z,{characterKey:s.chars.LocationToCharacterKey(e),onMouseDown:d,onMouseEnter:c,disableTooltip:u}),m]})}var Qt=a(38114),ea=a(78437),ta=a(4121),aa=a(14836);function na({setKey:e,setNumKey:t,hideHeader:a=!1,conditionalsOnly:n=!1}){var i;const r=(0,ta.Sk)(e),l=n?null==(i=r.setEffectDocument(t))?void 0:i.filter((e=>"states"in e)):r.setEffectDocument(t);return(0,$.tZ)(h.Z,{display:"flex",flexDirection:"column",children:l?(0,$.tZ)(aa.Z,{sections:l,hideHeader:a}):null})}var ia=a(1665),ra=a(51576);let la,sa,oa=e=>e;function ca({setKey:e,buttonGroupSx:t}){var a;const{t:n}=(0,x.$G)("sheet"),{character:{key:i}}=(0,b.useContext)(_.K),{buildSetting:{artSetExclusion:r},buildSettingDispatch:l}=$t(i),s=null!=(a=null==r?void 0:r[e])?a:[],o=s.includes(2),c=s.includes(4);return(0,$.BX)(_e.Z,{sx:t,fullWidth:!0,children:[(0,$.tZ)(g.Z,{startIcon:o?(0,$.tZ)(ge.Z,{}):(0,$.tZ)(fe.Z,{}),onClick:()=>l({artSetExclusion:(0,xt.sL)(r,e,2)}),color:o?"secondary":"success",endIcon:o?(0,$.tZ)(Qt.Z,{}):(0,$.tZ)(Dt.Z,{}),children:n(la||(la=oa`2set`))}),(0,$.tZ)(g.Z,{startIcon:c?(0,$.tZ)(ge.Z,{}):(0,$.tZ)(fe.Z,{}),onClick:()=>l({artSetExclusion:(0,xt.sL)(r,e,4)}),color:c?"secondary":"success",endIcon:c?(0,$.tZ)(Qt.Z,{}):(0,$.tZ)(Dt.Z,{}),children:n(sa||(sa=oa`4set`))})]})}let da,ua,ha,Za,pa,ma,fa,ga,ba,xa,ya,va,Ca,wa,ka=e=>e;function Sa({disabled:e}){var t,a;const{t:r}=(0,x.$G)(["page_character_optimize","sheet"]),l=(0,b.useContext)(K.R),{database:s}=(0,b.useContext)(O.t),{character:{key:o,conditional:c},characterDispatch:d}=(0,b.useContext)(_.K),{buildSetting:{artSetExclusion:u},buildSettingDispatch:Z}=$t(o),[m,f]=(0,b.useState)(!1),y=(0,b.useCallback)((()=>f(!0)),[f]),v=(0,b.useCallback)((()=>f(!1)),[f]),[S,B]=(0,i.NW)();(0,b.useEffect)((()=>s.arts.followAny(B)),[s,B]);const j=(0,b.useMemo)((()=>Object.entries(ta.WO).reverse().flatMap((([,e])=>e)).filter((e=>!e.includes("Prayers")))),[]),{artKeys:E,artSlotCount:T}=(0,b.useMemo)((()=>{const e=(0,at.K8)(j,(e=>(0,at.K8)(n.Ex,(e=>0))));s.arts.values.forEach((t=>e[t.setKey]&&e[t.setKey][t.slotKey]++));const t=[...j].sort(((t,a)=>+(_a(e[t])<2)-+(_a(e[a])<2)));return S&&{artKeys:t,artSlotCount:e}}),[S,s,j]),P=!(null!=(t=u.rainbow)&&t.includes(2)),D=!(null!=(a=u.rainbow)&&a.includes(4)),{allowTotals:M}=(0,b.useMemo)((()=>(0,Pt.A)({allowTotals:["2","4"]},(e=>j.forEach((t=>{var a,n;e.allowTotals[2].total++,null!=(a=u[t])&&a.includes(2)||e.allowTotals[2].current++,e.allowTotals[4].total++,null!=(n=u[t])&&n.includes(4)||e.allowTotals[4].current++}))))),[j,u]),I=(0,b.useMemo)((()=>Object.keys(c).filter((e=>{var t;return n.Gt.includes(e)&&!!Object.keys(null!=(t=c[e])?t:{}).length})).length),[c]),A=(0,b.useMemo)((()=>Object.assign({},l,{data:new re.w(Object.assign({},l.data.data[0],{artSet:(0,at.K8)(n.Gt,(e=>(0,wt.a9)(4)))}),void 0)})),[l]),L=(0,b.useCallback)((()=>{const e=Object.fromEntries(Object.entries(c).filter((([e])=>!n.Gt.includes(e))));d({conditional:e})}),[c,d]),R=(0,b.useCallback)(((e,t=!0)=>{const a=(0,at.I8)(u);j.forEach((n=>{var i;t?a[n]=[...null!=(i=a[n])?i:[],e]:a[n]&&(a[n]=a[n].filter((t=>t!==e)))})),Z({artSetExclusion:a})}),[j,u,Z]);return(0,$.BX)($.HY,{children:[(0,$.BX)(w.Z,{sx:{display:"flex",width:"100%"},children:[(0,$.BX)(p.Z,{sx:{flexGrow:1},children:[(0,$.tZ)(Y.Z,{children:(0,$.tZ)("strong",{children:r(da||(da=ka`artSetConfig.title`))})}),(0,$.BX)(de.Z,{spacing:1,children:[(0,$.BX)(Y.Z,{children:[r(ua||(ua=ka`artSetConfig.setEffCond`))," ",(0,$.BX)(X.Z,{color:I?"success":"warning",children:[I," ",r("artSetConfig.enabled")]})]}),(0,$.BX)(Y.Z,{children:[r(ha||(ha=ka`sheet:2set`))," ",(0,$.BX)(X.Z,{color:"success",children:[M[2]," ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX))," ",r("artSetConfig.allowed")]})]}),(0,$.BX)(Y.Z,{children:[r(Za||(Za=ka`sheet:4set`))," ",(0,$.BX)(X.Z,{color:"success",children:[M[4]," ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX))," ",r("artSetConfig.allowed")]})]}),(0,$.BX)(Y.Z,{children:[r(pa||(pa=ka`artSetConfig.2rainbow`))," ",(0,$.BX)(X.Z,{color:P?"success":"secondary",children:[P?(0,$.tZ)(Dt.Z,Object.assign({},pe.mX)):(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," ",P?r("artSetConfig.allowed"):"Excluded"]})]}),(0,$.BX)(Y.Z,{children:[r(ma||(ma=ka`artSetConfig.4rainbow`))," ",(0,$.BX)(X.Z,{color:D?"success":"secondary",children:[D?(0,$.tZ)(Dt.Z,Object.assign({},pe.mX)):(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," ",D?r("artSetConfig.allowed"):"Excluded"]})]})]})]}),(0,$.tZ)(g.Z,{onClick:y,disabled:e,color:"info",sx:{borderRadius:0,flexShrink:1,minWidth:40},children:(0,$.tZ)(Ot.Z,{})})]}),(0,$.tZ)(ne.Z,{open:m,onClose:v,children:(0,$.BX)(C.Z,{children:[(0,$.BX)(p.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,$.tZ)(Y.Z,{variant:"h6",children:r(fa||(fa=ka`artSetConfig.title`))}),(0,$.tZ)(k.Z,{onClick:v})]}),(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{children:[(0,$.tZ)(w.Z,{sx:{mb:1},children:(0,$.BX)(p.Z,{children:[(0,$.BX)(h.Z,{display:"flex",gap:1,children:[(0,$.tZ)(Y.Z,{children:(0,$.tZ)("strong",{children:r(ga||(ga=ka`artSetConfig.modal.setCond.title`))})}),(0,$.tZ)(Y.Z,{sx:{flexGrow:1},children:(0,$.BX)(X.Z,{color:I?"success":"warning",children:[I," ",r("artSetConfig.selected")]})}),(0,$.tZ)(g.Z,{size:"small",onClick:L,color:"error",startIcon:(0,$.tZ)(me.Z,{}),children:r(ba||(ba=ka`artSetConfig.modal.setCond.reset`))})]}),(0,$.tZ)(Y.Z,{children:r(xa||(xa=ka`artSetConfig.modal.setCond.text`))})]})}),(0,$.tZ)(w.Z,{sx:{mb:1},children:(0,$.BX)(p.Z,{children:[(0,$.tZ)(Y.Z,{sx:{flexGrow:1},children:(0,$.tZ)("strong",{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,$.BX)(te.Z,{color:"success",children:["Allowed",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX))]})," / ",(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Excluded",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))]})]})})}),(0,$.tZ)(Y.Z,{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,$.tZ)("strong",{children:"A"})," is on-set, and ",(0,$.tZ)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,$.tZ)(Y.Z,{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.2set",children:[(0,$.tZ)("strong",{children:(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Excluding",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," 2-Set"]})}),"would exclude 2-Set builds:",(0,$.BX)("strong",{children:[(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]}),"and",(0,$.BX)("strong",{children:[(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,$.tZ)(Y.Z,{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.4set",children:[(0,$.tZ)("strong",{children:(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Excluding",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," 4-Set"]})}),"would exclude 4-Set builds:",(0,$.BX)("strong",{children:[(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]}),"and",(0,$.tZ)("strong",{children:(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,$.tZ)(Y.Z,{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.2rain",children:[(0,$.tZ)("strong",{children:(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Excluding",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," 3-Rainbow"]})}),"would exclude 2-Set + 3-Rainbow builds:",(0,$.BX)("strong",{children:["AA",(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"RRR"})]}),"and",(0,$.BX)("strong",{children:["AAA",(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,$.tZ)(Y.Z,{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.modal.ArtSetFilter.4rain",children:[(0,$.tZ)("strong",{children:(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Excluding",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))," 5-Rainbow"]})}),"would exclude full 5-Rainbow builds:",(0,$.tZ)("strong",{children:(0,$.tZ)(te.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,$.BX)(ue.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(Ba,{allowTotal:M[2],setNum:2,setAllExclusion:R})}),(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(Ba,{allowTotal:M[4],setNum:4,setAllExclusion:R})}),(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(w.Z,{children:(0,$.BX)(p.Z,{children:[(0,$.tZ)(Y.Z,{gutterBottom:!0,children:(0,$.tZ)("strong",{children:(0,$.BX)(x.cC,{t:r,i18nKey:"artSetConfig.alExRainbow",children:[(0,$.BX)(te.Z,{color:"success",children:["Allow ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX))]})," / ",(0,$.BX)(te.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,$.tZ)(Qt.Z,Object.assign({},pe.mX))]})," Rainbow Builds"]})})}),(0,$.BX)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.tZ)(g.Z,{fullWidth:!0,onClick:()=>Z({artSetExclusion:(0,xt.sL)(u,"rainbow",2)}),color:P?"success":"secondary",startIcon:P?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),endIcon:P?(0,$.tZ)(Dt.Z,{}):(0,$.tZ)(Qt.Z,{}),children:r(ya||(ya=ka`artSetConfig.2rainbow`))}),(0,$.tZ)(g.Z,{fullWidth:!0,onClick:()=>Z({artSetExclusion:(0,xt.sL)(u,"rainbow",4)}),color:D?"success":"secondary",startIcon:D?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),endIcon:D?(0,$.tZ)(Dt.Z,{}):(0,$.tZ)(Qt.Z,{}),children:r(va||(va=ka`artSetConfig.4rainbow`))})]})]})})})]}),(0,$.tZ)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:E.map((e=>(0,$.tZ)(Xa,{setKey:e,fakeDataContextObj:A,slotCount:T[e]},e)))})]}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{sx:{py:1},children:(0,$.tZ)(k.Z,{large:!0,onClick:v})})]})})]})}function Ba({allowTotal:e,setNum:t,setAllExclusion:a}){const{t:n}=(0,x.$G)(["page_character_optimize","sheet"]);return(0,$.tZ)(w.Z,{children:(0,$.BX)(p.Z,{children:[(0,$.BX)(Y.Z,{gutterBottom:!0,children:[(0,$.tZ)("strong",{children:n(`sheet:${t}set`)})," ",(0,$.BX)(X.Z,{color:"success",children:[e," ",(0,$.tZ)(Dt.Z,Object.assign({},pe.mX))," ",n("artSetConfig.allowed")]})]}),(0,$.BX)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.tZ)(g.Z,{fullWidth:!0,disabled:"0"!==e.charAt(0)&&-1===e.indexOf("/"),onClick:()=>a(t,!1),color:"success",startIcon:(0,$.tZ)(Dt.Z,{}),children:n(`artSetConfig.allowAll${t}set`)}),(0,$.tZ)(g.Z,{fullWidth:!0,disabled:"0"===e.charAt(0),onClick:()=>a(t,!0),color:"secondary",startIcon:(0,$.tZ)(Qt.Z,{}),children:n(`artSetConfig.excludeAll${t}set`)})]})]})})}function Xa({setKey:e,fakeDataContextObj:t,slotCount:a}){var n,i;const{t:r}=(0,x.$G)("sheet"),{character:{key:l}}=(0,b.useContext)(_.K),{buildSetting:s}=$t(l),{artSetExclusion:o}=s,c=null!=(n=null==o?void 0:o[e])?n:[],d=!c.includes(4),u=_a(a),Z=(0,ta.Sk)(e),m=(0,b.useMemo)((()=>d?Object.keys(Z.setEffects).filter((e=>{var t;return null==(t=Z.setEffects[e])?void 0:t.document.some((e=>"states"in e))})):[]),[Z.setEffects,d]);return(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.BX)(w.Z,{sx:{height:"100%",opacity:u<2?"50%":void 0},children:[(0,$.BX)(h.Z,{className:`grad-${Z.rarity[0]}star`,width:"100%",sx:{display:"flex"},children:[(0,$.tZ)(h.Z,{component:"img",src:(0,ra.jU)(e),sx:{height:100,width:"auto",mx:-1}}),(0,$.BX)(h.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,$.tZ)(Y.Z,{variant:"h6",children:null!=(i=Z.name)?i:""}),(0,$.tZ)(h.Z,{children:(0,$.BX)(Y.Z,{variant:"subtitle1",children:[Z.rarity.map(((e,t)=>(0,$.BX)(h.Z,{component:"span",sx:{display:"inline-flex",alignItems:"center"},children:[e," ",(0,$.tZ)(ea.Z,{fontSize:"inherit"})," ",t<Z.rarity.length-1?"/ ":null]},e)))," ",(0,$.tZ)(Zt.L,{title:(0,$.BX)(h.Z,{children:[(0,$.tZ)(Y.Z,{children:(0,$.tZ)(X.Z,{color:"success",children:r(Ca||(Ca=ka`2set`))})}),(0,$.tZ)(Y.Z,{children:(0,$.tZ)(ia.v,{ns:`artifact_${e}_gen`,key18:"setEffects.2"})}),(0,$.BX)(h.Z,{paddingTop:2,sx:{opacity:c.includes(4)?.6:1},children:[(0,$.tZ)(Y.Z,{children:(0,$.tZ)(X.Z,{color:"success",children:r(wa||(wa=ka`4set`))})}),(0,$.tZ)(Y.Z,{children:(0,$.tZ)(ia.v,{ns:`artifact_${e}_gen`,key18:"setEffects.4"})})]})]})})]})}),(0,$.tZ)(h.Z,{sx:{display:"flex",gap:1},children:Object.entries(a).map((([e,t])=>(0,$.tZ)(Y.Z,{sx:{flexGrow:1},variant:"subtitle2",children:(0,$.BX)(X.Z,{sx:{width:"100%"},color:t?"primary":"secondary",children:[(0,$.tZ)(It.Z,{slotKey:e,iconProps:pe.mX})," ",t]})},e)))})]})]}),xt.Uu.includes(e)&&(0,$.tZ)(ca,{setKey:e,buttonGroupSx:{".MuiButton-root":{borderRadius:0}}}),!!m.length&&(0,$.tZ)(K.R.Provider,{value:t,children:(0,$.tZ)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:m.map((t=>(0,$.tZ)(na,{setKey:e,setNumKey:parseInt(t),hideHeader:!0,conditionalsOnly:!0},t)))})})]})},e)}function _a(e){return Object.values(e).reduce(((e,t)=>e+(t?1:0)),0)}const Ka=[0,4,8,12,16,20];function ja({mainStatAssumptionLevel:e=0,setmainStatAssumptionLevel:t,disabled:a}){const{t:n}=(0,x.$G)("page_character_optimize");return(0,$.tZ)(ht.Z,{fullWidth:!0,color:e?"success":"primary",disabled:a,title:e?n("mainStat.assumptionLvl.lvl",{lvl:e}):n("mainStat.assumptionLvl.no"),children:Ka.map((e=>(0,$.tZ)(st.Z,{onClick:()=>t(e),children:e?n("mainStat.assumptionLvl.lvl",{lvl:e}):n("mainStat.assumptionLvl.no")},e)))})}let Ea,Ta=e=>e;function Pa(){const{t:e}=(0,x.$G)("page_character_optimize"),{character:{bonusStats:t}}=(0,b.useContext)(_.K),{data:a}=(0,b.useContext)(K.R),n=Object.keys(t);if(!n.length)return null;const i=n.map((e=>a.get(ye.ri.customBonus[e])));return(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.tZ)(Y.Z,{sx:{fontWeight:"bold"},children:e(Ea||(Ea=Ta`bonusStats.title`))})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{children:i.map((e=>(0,$.tZ)(Le.JW,{node:e},JSON.stringify(e.info))))})]})}var Oa=a(38162);const Da=(0,ke.ZP)("strong")({fontFamily:"monospace"}),Ma=(0,ke.ZP)(Oa.Z)((()=>({height:10,borderRadius:5})));function Ia({status:{type:e,tested:t,failed:a,skipped:n,total:i,startTime:r,finishTime:l},characterName:s}){const o=isFinite(i),c="inactive"!==e,d=i-n,u=(0,$.tZ)(Da,{children:t.toLocaleString()}),h=(0,$.tZ)(Da,{children:d.toLocaleString()}),Z=!!n&&(0,$.BX)("span",{children:["(",(0,$.tZ)("b",{children:(0,$.tZ)(Da,{children:n.toLocaleString()})})," skipped)"]}),p=(0,$.tZ)(Da,{children:(0,at.e6)(Math.round((null!=l?l:performance.now())-(null!=r?r:NaN)))});let m,f="",g="";if(c)m=100*t/d,f=(0,$.BX)(Y.Z,{children:["Generating and testing ",u,o?(0,$.BX)($.HY,{children:["/",h]}):void 0," build configurations against the criteria for ",(0,$.tZ)("b",{children:s}),". ",Z]}),g=(0,$.BX)(Y.Z,{children:["Time elapsed: ",p]});else{if(!(t+n))return null;m=100,f=(0,$.BX)(Y.Z,{children:["Generated and tested ",u," Build configurations against the criteria for ",(0,$.tZ)("b",{children:s}),". ",Z]}),g=(0,$.BX)(Y.Z,{children:["Total duration: ",p]})}return(0,$.BX)(he.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[f,g,void 0!==m&&(0,$.BX)(ue.ZP,{container:!0,spacing:1,alignItems:"center",children:[o&&(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(Y.Z,{children:`${m.toFixed(1)}%`})}),(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,children:(0,$.tZ)(Ma,{variant:o?"determinate":"indeterminate",value:m,color:"primary"})})]})]})}var Aa=a(74064),La=a(73673),Ra=a(99074),za=a(22499),Ga=a(16736),$a=a(74155),Na=a(66615),Wa=a(75213),qa=a(47746),Ha=a(47591),Fa=a(69614),Va=a(70582);function Ua({characterKey:e}){const{gender:t}=(0,I.Z)();if(!e)return null;const a=(0,P.m)(e,t);return a?(0,$.tZ)(dt.Z,{placement:"right-end",title:(0,$.tZ)(Y.Z,{children:a.name}),children:(0,$.tZ)(z.Z,{characterKey:e,sideMargin:!0})}):null}var Ya=a(26437);function Ja({statKey:e,disableIcon:t=!1}){return(0,$.BX)(h.Z,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!t&&(0,$.tZ)(Ce.C,{statKey:e,iconProps:pe.mX}),(0,$.BX)("span",{children:[ve.ZP.get(e),ve.ZP.unit(e)]})]})}function Qa({statKey:e,disableIcon:t=!1}){return(0,$.tZ)(te.Z,{color:ve.ZP.getVariant(e),children:(0,$.tZ)(Ja,{statKey:e,disableIcon:t})})}var en=a(2218);function tn({artifactId:e,slotKey:t,mainStatAssumptionLevel:a=0,showLocation:i=!1,onClick:r,BGComponent:l=C.Z}){const s=(0,Va.Z)(e),{database:o}=(0,b.useContext)(O.t),c=(0,b.useCallback)((e=>(0,$.tZ)(Wa.Z,{onClick:r,sx:{height:"100%"},children:e})),[r]),d=(0,qa.Z)();if(!s)return(0,$.tZ)(l,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,$.tZ)(h.Z,{component:"img",src:Ga.CL.slot[t],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:u,rarity:Z,level:p,mainStatKey:m,substats:f,location:g}=s,x=Math.max(Math.min(a,4*Z),p),y=n.fR.find((e=>s.mainStatKey.includes(e))),v=y?(0,Ha.Fq)(d.palette[y].main,.6):(0,Ha.Fq)(d.palette.secondary.main,.6);return(0,$.tZ)(l,{sx:{height:"100%"},children:(0,$.tZ)(Ya.Z,{condition:!!r,wrapper:c,children:(0,$.BX)(h.Z,{display:"flex",height:"100%",children:[(0,$.BX)(h.Z,{className:`grad-${Z}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,$.tZ)(en.Z,{art:s,children:(0,$.tZ)(h.Z,{component:"img",src:(0,Ga.Hp)(s.setKey,u),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,$.BX)(h.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,$.tZ)(be.Z,{size:"small",label:(0,$.tZ)("strong",{children:` +${p}`}),color:Fa.Z.levelVariant(p)}),i&&(0,$.tZ)(be.Z,{size:"small",label:g?(0,$.tZ)(Ua,{characterKey:g&&o.chars.LocationToCharacterKey(g)}):(0,$.tZ)(Na.Z,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,$.tZ)(be.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:v,p:1},icon:(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:(0,$.tZ)(Qa,{statKey:m})}),disableInteractive:!0,children:(0,$.tZ)(h.Z,{lineHeight:0,children:(0,$.tZ)(Ce.C,{statKey:m,iconProps:{style:{padding:"4px"}}})})}),label:(0,$.tZ)(Y.Z,{sx:{mx:-.7},children:(0,$.tZ)(te.Z,{color:x!==p?"warning":void 0,children:(0,$a.R1)(m,Z,x)})})})]}),(0,$.tZ)(h.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:f.map(((e,t)=>(0,$.tZ)(an,{stat:e},t+e.key)))})]})})})}function an({stat:e}){var t,a;if(!e.value)return null;const n=null!=(t=null==(a=e.rolls)?void 0:a.length)?t:0,i=`roll${(0,at.re)(n,1,6)}`,r=(0,at.bf)(e.key);return(0,$.tZ)(h.Z,{display:"flex",gap:1,alignContent:"center",children:(0,$.BX)(Y.Z,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:n?`${i}.main`:"error.main",component:"span",children:[(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:e.key&&(0,$.tZ)(Qa,{statKey:e.key})}),disableInteractive:!0,children:(0,$.tZ)(h.Z,{lineHeight:0,children:(0,$.tZ)(Ce.C,{statKey:e.key,iconProps:{fontSize:"inherit"}})})}),(0,$.tZ)("span",{children:`${(0,$a.Jj)(e.value,r)}${r}`})]})})}var nn=a(60342);function rn(){const{data:e}=(0,b.useContext)(K.R),t=(0,b.useMemo)((()=>(0,ie.U)(e).filter((([,e])=>Object.values(e).some((e=>!e.isEmpty))))),[e]);return(0,$.tZ)(h.Z,{sx:{mr:-1,mb:-1},children:(0,$.tZ)(nn.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:t.map((([e,t])=>(0,$.tZ)(ln,{displayNs:t,sectionKey:e},e)))})})}function ln({displayNs:e,sectionKey:t}){const a=(0,b.useContext)(gt),{data:n,oldData:i}=(0,b.useContext)(K.R),{database:r}=(0,b.useContext)(O.t),l=(0,b.useMemo)((()=>(0,ie.f)(n,t,r)),[r,n,t]),s=(0,b.useMemo)((()=>(0,at.vU)(e,((e,a)=>(0,wt.UF)(["display",t,a])))),[e,t]);if(!l)return(0,$.tZ)(C.Z,{});const{title:o,icon:c,action:d}=l;return(0,$.BX)(C.Z,{children:[(0,$.tZ)(ee.Z,{avatar:c&&(0,$.tZ)(ae.Z,{size:2,src:c}),title:o,action:d&&(0,$.tZ)(X.Z,{children:d})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(Le.lD,{sx:{m:0},children:Object.entries(e).map((([e,n])=>(0,$.tZ)(Le.JW,{node:n,oldValue:i?i.get(s[e]).value:void 0,component:Ze.ZP,emphasize:JSON.stringify(a)===JSON.stringify([t,e])},e)))})]})}var sn=a(13499),on=a(51784),cn=a(30311),dn=a(61340);function un({weaponId:e,showLocation:t=!1,onClick:a,BGComponent:n=C.Z}){const{database:i}=(0,b.useContext)(O.t),r=(0,cn.Z)(e),l=(null==r?void 0:r.key)&&(0,sn.ub)(r.key),s=(0,b.useCallback)((e=>(0,$.tZ)(Wa.Z,{sx:{height:"100%"},onClick:a,children:e})),[a]),o=(0,b.useMemo)((()=>l&&r&&(0,yt.mP)([l.data,(0,yt.v0)(r)])),[l,r]);if(!r||!l||!o)return(0,$.tZ)(n,{sx:{height:"100%"},children:(0,$.tZ)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});const{refinement:c,location:d}=r;return(0,$.tZ)(n,{sx:{height:"100%"},children:(0,$.tZ)(Ya.Z,{condition:!!a,wrapper:s,children:(0,$.BX)(h.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,$.BX)(h.Z,{className:`grad-${l.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,$.tZ)(dn.Z,{sheet:l,children:(0,$.tZ)(h.Z,{component:"img",src:(0,Ga.Aq)(r.key,r.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,$.BX)(h.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,$.tZ)(be.Z,{size:"small",label:(0,$.tZ)("strong",{children:on.Z.getLevelString(r)}),color:"primary"}),t&&(0,$.tZ)(be.Z,{size:"small",label:d?(0,$.tZ)(Ua,{characterKey:i.chars.LocationToCharacterKey(d)}):(0,$.tZ)(Na.Z,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,$.tZ)(h.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:l.hasRefinement&&(0,$.tZ)(be.Z,{size:"small",color:"info",label:(0,$.BX)("strong",{children:["R",c]})})})]}),(0,$.BX)(h.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,$.tZ)(hn,{node:o.get(ye.qH.weapon.main)}),(0,$.tZ)(hn,{node:o.get(ye.qH.weapon.sub)})]})]})})})}function hn({node:e}){return e.info.name?(0,$.tZ)(h.Z,{display:"flex",gap:1,alignContent:"center",children:(0,$.BX)(Y.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:e.info.name}),disableInteractive:!0,children:(0,$.tZ)("span",{children:e.info.icon})}),(0,$.tZ)("span",{children:(0,re.p)(e)})]})}):null}var Zn=a(30706),pn=a(5051);function mn({artifacts:e,currentlyEquipped:t=!1}){const a=(0,b.useMemo)((()=>e.filter((e=>e)).reduce(((e,t)=>(e[t.setKey]?e[t.setKey].push(t.slotKey):e[t.setKey]=[t.slotKey],e)),{})),[e]);return(0,$.tZ)($.HY,{children:Object.entries(a).sort((([e,t],[a,n])=>n.length-t.length)).map((([e,a])=>(0,$.tZ)(fn,{setKey:e,currentlyEquipped:t,slotarr:a},e)))})}function fn({setKey:e,currentlyEquipped:t=!1,slotarr:a}){var n;const i=(0,ta.Sk)(e),r=a.length,l=Object.keys(i.setEffects).map((e=>parseInt(e))).filter((e=>e<=r));return(0,$.tZ)(h.Z,{children:(0,$.tZ)(pn.Z,{artifactSheet:i,numInSet:r,children:(0,$.tZ)(X.Z,{sx:{height:"100%"},color:t?"success":"primary",children:(0,$.BX)(Y.Z,{children:[a.map((e=>(0,$.tZ)(It.Z,{slotKey:e,iconProps:pe.mX},e)))," ",null!=(n=i.name)?n:"",l.map(((e,t)=>(0,$.tZ)(X.Z,{sx:{ml:.5},color:"success",children:e},""+e+t)))]})})})})}let gn,bn,xn=e=>e;function yn({label:e,compareBuild:t,extraButtonsRight:a,extraButtonsLeft:i,disabled:r}){const{character:{key:l,equippedArtifacts:s}}=(0,b.useContext)(_.K),{buildSetting:{mainStatAssumptionLevel:o,allowLocationsState:c}}=$t(l),{database:d}=(0,b.useContext)(O.t),u=(0,b.useContext)(K.R),{data:m,oldData:f}=u,[x,y]=(0,b.useState)(void 0),v=(0,b.useCallback)((()=>y(void 0)),[y]),C=(0,b.useCallback)((()=>{if(!window.confirm("Do you want to equip this build to this character?"))return;const e=d.chars.get(l);if(!e)return;n.Ex.forEach((t=>{var a;const i=null==(a=m.get(ye.ri.art[t].id).value)?void 0:a.toString();if(i)d.arts.set(i,{location:(0,n.V7)(l)});else{const a=e.equippedArtifacts[t];a&&d.arts.get(a)&&d.arts.set(a,{location:""})}}));const t=m.get(ye.ri.weapon.id).value;t&&d.weapons.set(t,{location:(0,n.V7)(l)})}),[l,m,d]),k=(0,b.useMemo)((()=>{const e=Object.assign({},u);return t||(e.oldData=void 0),e}),[u,t]),S=(0,b.useMemo)((()=>Object.fromEntries(n.Ex.map((e=>{var t;return[e,null==(t=m.get(ye.ri.art[e].id).value)?void 0:t.toString()]})))),[m]),B=(0,b.useMemo)((()=>S&&Object.values(S).map((e=>d.arts.get(e))).filter((e=>e))),[S,d.arts]),j=(0,b.useMemo)((()=>n.Ex.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tn,{showLocation:!0,slotKey:e,artifactId:S[e],mainStatAssumptionLevel:o,onClick:()=>{const t=s[e],a=S[e];y({oldId:t!==a?t:void 0,newId:a})}})},e)))),[y,s,o,S]);if(!f)return null;const E=n.Ex.every((e=>{var t;return S[e]===(null==(t=f.get(ye.ri.art[e].id).value)?void 0:t.toString())}))&&m.get(ye.ri.weapon.id).value===f.get(ye.ri.weapon.id).value;return(0,$.tZ)(w.Z,{children:(0,$.BX)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:600}),children:[x&&(0,$.tZ)(vn,{newOld:x,mainStatAssumptionLevel:o,onClose:v,allowLocationsState:c}),(0,$.BX)(p.Z,{children:[(0,$.BX)(h.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==e&&(0,$.tZ)(X.Z,{color:"info",children:(0,$.tZ)(Y.Z,{children:(0,$.BX)("strong",{children:[e,E?" (Equipped)":""]})})}),(0,$.tZ)(mn,{artifacts:B,currentlyEquipped:E}),(0,$.tZ)(h.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),i,(0,$.tZ)(g.Z,{size:"small",color:"success",onClick:C,disabled:r||E,startIcon:(0,$.tZ)(Aa.Z,{}),children:"Equip Build"}),a]}),(0,$.BX)(ue.ZP,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(un,{showLocation:!0,weaponId:m.get(ye.ri.weapon.id).value})}),j]}),(0,$.tZ)(K.R.Provider,{value:k,children:(0,$.tZ)(rn,{})})]})]})})}function vn({newOld:{newId:e,oldId:t},mainStatAssumptionLevel:a,onClose:i,allowLocationsState:r}){var l,s;const{database:o}=(0,b.useContext)(O.t),{character:{key:c}}=(0,b.useContext)(_.K),d=(0,b.useCallback)((()=>{window.confirm("Do you want to equip this artifact to this character?")&&(o.arts.set(e,{location:(0,n.V7)(c)}),i())}),[e,o,c,i]),u=null!=(l=null==(s=o.arts.get(e))?void 0:s.location)?l:"",Z=(0,Va.Z)(e);return(0,$.tZ)(ne.Z,{open:!!e,onClose:i,containerProps:{maxWidth:t?"md":"xs"},children:(0,$.tZ)(C.Z,{children:(0,$.BX)(p.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[t&&(0,$.tZ)(h.Z,{minWidth:320,children:(0,$.tZ)(Zn.Z,{artifactId:t,mainStatAssumptionLevel:a,canEquip:!0,editorProps:{disableSet:!0,disableSlot:!0},extraButtons:(0,$.tZ)(Cn,{id:t})})}),t&&(0,$.tZ)(h.Z,{display:"flex",flexGrow:1}),t&&(0,$.tZ)(h.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.tZ)(g.Z,{onClick:d,sx:{display:"flex"},children:(0,$.tZ)(La.Z,{sx:{fontSize:40}})})}),t&&(0,$.tZ)(h.Z,{display:"flex",flexGrow:1}),(0,$.BX)(h.Z,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(Zn.Z,{artifactId:e,mainStatAssumptionLevel:a,canEquip:!0,editorProps:{disableSet:!0,disableSlot:!0},extraButtons:(0,$.tZ)(Cn,{id:e})}),u&&u!==(0,n.V7)(c)&&"all"!==r&&(0,$.tZ)(wn,{locationKey:u}),Z&&xt.Uu.includes(Z.setKey)&&(0,$.tZ)(ca,{setKey:Z.setKey})]})]})})})}function Cn({id:e}){const{t}=(0,x.$G)("page_character_optimize"),{character:{key:a}}=(0,b.useContext)(_.K),{buildSetting:{artExclusion:n},buildSettingDispatch:i}=$t(a),r=n.includes(e),l=(0,b.useCallback)((()=>i({artExclusion:(0,at.nh)(n,e)})),[e,n,i]);return(0,$.tZ)(dt.Z,{title:(0,$.BX)(h.Z,{children:[(0,$.tZ)(Y.Z,{children:t(gn||(gn=xn`excludeArt.excludeArtifactTip`))}),(0,$.tZ)(Y.Z,{children:(0,$.tZ)(te.Z,{color:r?"error":"success",children:t(r?"excludeArt.excluded":"excludeArt.included")})})]}),placement:"top",arrow:!0,children:(0,$.tZ)(g.Z,{onClick:l,color:r?"error":"success",size:"small",children:r?(0,$.tZ)(Qt.Z,{}):(0,$.tZ)(Dt.Z,{})})})}function wn({locationKey:e}){const{t}=(0,x.$G)("page_character_optimize"),{character:{key:a}}=(0,b.useContext)(_.K),{database:n}=(0,b.useContext)(O.t),i=(0,P.m)(n.chars.LocationToCharacterKey(e)),{buildSetting:{excludedLocations:r},buildSettingDispatch:l}=$t(a),s=r.includes(e),o=(0,b.useCallback)((()=>l({excludedLocations:(0,at.nh)(r,e)})),[e,r,l]);return(0,$.tZ)(g.Z,{onClick:o,color:s?"secondary":"success",size:"small",startIcon:s?(0,$.tZ)(za.Z,{}):(0,$.tZ)(Ra.Z,{}),children:(0,$.BX)("span",{children:[t(bn||(bn=xn`excludeChar.allowEquip`))," ",(0,$.tZ)("strong",{children:i.name})]})})}var kn=a(68164),Sn=a(36081),Bn=a(61660),Xn=a(22443),_n=a(55484),Kn=a(25556),jn=a(81224),En=a(3131),Tn=a(47857),Pn=a(55734),On=a(63004),Dn=a(36197);function Mn(e){const{database:t}=(0,b.useContext)(O.t),[a,n]=(0,b.useState)((()=>t.buildResult.get(e)));(0,b.useEffect)((()=>n(t.buildResult.get(e))),[t,e]),(0,b.useEffect)((()=>t.buildResult.follow(e,((e,t,a)=>"update"===t&&n(a)))),[e,n,t]);return{buildResult:a,buildResultDispatch:(0,b.useCallback)((a=>e&&t.buildResult.set(e,a)),[e,t])}}var In=a(6875);function An({cx:e,cy:t,payload:a,selectedPoint:n,radiusSelected:i=6,radiusUnselected:r=3,colorSelected:l="red",colorUnselected:s,shape:o="circle"}){if(!e||!t||!a)return null;const c=n&&n.x===a.x&&n.y===a.y;return(0,$.tZ)("g",{className:"custom-dot","data-chart-x":e,"data-chart-y":t,"data-x-value":a.x,"data-y-value":a.y,"data-radius":c?r:i,children:c?(0,$.BX)($.HY,{children:[(0,$.tZ)(Ln,{id:"customShapeSelected",shape:o,cx:e,cy:t,r:i/2,fill:l}),(0,$.tZ)(Ln,{id:"customShapeBorder",shape:o,cx:e,cy:t,r:i,fill:"none",stroke:l})]}):(0,$.tZ)(Ln,{id:"customShapeUnselected",shape:o,cx:e,cy:t,r,fill:s})})}function Ln({shape:e,id:t,cx:a,cy:n,r:i,fill:r,stroke:l}){switch(e){case"circle":return(0,$.tZ)("circle",{id:t,cx:a,cy:n,r:i,fill:r,stroke:l});case"square":return(0,$.tZ)("rect",{id:t,x:a-i,y:n-i,width:2*i,height:2*i,fill:r,stroke:l});case"diamond":return(0,$.tZ)("polygon",{id:t,points:`${a},${n+2.5*i} ${a+1.5*i},${n} ${a},${n-2.5*i} ${a-1.5*i},${n}`,fill:r,stroke:l})}}var Rn=a(99118),zn=a(45390);const Gn=["xLabel","xUnit","yLabel","yUnit","selectedPoint","setSelectedPoint","addBuildToList"];function $n(e){let{xLabel:t,xUnit:a,yLabel:i,yUnit:r,selectedPoint:l,setSelectedPoint:s,addBuildToList:o}=e,c=(0,we.Z)(e,Gn);const{database:d}=(0,b.useContext)(O.t),{data:u}=(0,b.useContext)(K.R),{t:h}=(0,x.$G)("page_character_optimize"),m=(0,b.useMemo)((()=>l&&l.artifactIds&&Object.fromEntries(l.artifactIds.map((e=>{const t=d.arts.get(e);return[null==t?void 0:t.slotKey,t]})).filter((e=>e)))),[d.arts,l]),f=(0,b.useCallback)((e=>{e.target.id.includes("customShape")||e.target.id.includes("chartContainer")||s(void 0)}),[s]),y=m&&n.Ex.every((e=>{var t,a;return(null==(t=m[e])?void 0:t.id)===(null==(a=u.get(ye.qH.art[e].id).value)?void 0:a.toString())})),v=(0,b.useMemo)((()=>void 0!==(null==l?void 0:l.generBuildNumber)&&`#${null==l?void 0:l.generBuildNumber}`),[l]),w=(0,b.useMemo)((()=>void 0!==(null==l?void 0:l.graphBuildNumber)&&(0,$.BX)(x.cC,{t:h,i18nKey:"graphBuildLabel",count:null==l?void 0:l.graphBuildNumber,children:["Graph #",{count:(null==l?void 0:l.graphBuildNumber)+1}]})),[l,h]);return c.active&&l?(0,$.tZ)(Rn.d,{onClickAway:f,children:(0,$.tZ)(C.Z,{sx:{minWidth:"400px",maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:(0,$.tZ)(p.Z,{children:(0,$.BX)(de.Z,{gap:1,children:[(0,$.BX)(de.Z,{direction:"row",alignItems:"start",gap:1,children:[(0,$.BX)(de.Z,{spacing:.5,flexGrow:99,children:[y&&(0,$.tZ)(X.Z,{color:"info",children:(0,$.tZ)("strong",{children:h("currentlyEquippedBuild")})}),v&&(0,$.tZ)(X.Z,{color:"info",children:v}),w&&(0,$.tZ)(X.Z,{color:"info",children:w}),(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{width:300,height:50}),children:(0,$.tZ)(mn,{artifacts:Object.values(m),currentlyEquipped:y})})]}),(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1}),(0,$.tZ)(k.Z,{onClick:()=>s(void 0)})]}),(0,$.tZ)(ue.ZP,{container:!0,direction:"row",spacing:.75,columns:5,children:n.Ex.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{width:75,height:75}),children:(0,$.tZ)(zn.Z,{artifactObj:m[e],slotKey:e})})},e)))}),(0,$.BX)(Y.Z,{children:[(0,$.tZ)("strong",{children:t}),":"," ",(0,at.EC)("%"===a?l.x/100:l.x,a)]}),(0,$.BX)(Y.Z,{children:[(0,$.tZ)("strong",{children:i}),":"," ",(0,at.EC)("%"===r?l.y/100:l.y,r)]}),(0,$.tZ)(dt.Z,{title:l.highlighted?h("tcGraph.buildAlreadyInList"):"",placement:"top",children:(0,$.tZ)("span",{children:(0,$.tZ)(g.Z,{sx:{width:"100%"},disabled:void 0!==(null==l?void 0:l.graphBuildNumber),color:"info",onClick:()=>o(l.artifactIds),children:h("addBuildToList")})})})]})})})}):null}class EnhancedPoint{constructor(e,t,a){this.x=void 0,this.trueY=void 0,this.artifactIds=void 0,this.min=void 0,this.current=void 0,this.highlighted=void 0,this.generBuildNumber=void 0,this.graphBuildNumber=void 0,this.x=e,this.trueY=t,this.artifactIds=a}get y(){return this.trueY||this.current||this.highlighted}set y(e){this.trueY=e}}let Nn,Wn,qn,Hn,Fn,Vn,Un,Yn=e=>e;function Jn({plotBase:e,setPlotBase:t,disabled:a=!1,showTooltip:r=!1}){const{t:l}=(0,x.$G)(["page_character_optimize","ui"]),{data:s}=(0,b.useContext)(K.R),{chartData:o}=(0,b.useContext)(E),[c,d]=(0,b.useState)(!1),[u,h]=(0,b.useState)(!0),{graphBuilds:Z}=(0,b.useContext)(E),{character:{key:m}}=(0,b.useContext)(_.K),{buildResult:{builds:f}}=Mn(m),[y,v]=(0,b.useState)(-1/0),[k,S]=(0,b.useState)(1/0),B=(0,b.useCallback)(((e,t)=>{if("number"==typeof t)throw new TypeError;const[a,n]=t;v(a),S(n)}),[v,S]);(0,b.useEffect)((()=>{v(-1/0),S(1/0)}),[o]);const{displayData:X,downloadData:j,sliderMin:T,sliderMax:P}=(0,b.useMemo)((()=>{var e,t;if(!o)return{displayData:null,downloadData:null};let a=1/0,i=-1/0;const r=n.Ex.map((e=>{var t;return null!=(t=null==s?void 0:s.get(ye.qH.art[e].id).value)?t:""})),l=o.data.map((({value:e,plot:t,artifactIds:n})=>{if(void 0===t)return null;t<a&&(a=t),t>i&&(i=t);const l=new EnhancedPoint(t,e,n),s=(0,at.K8)(n,(e=>!0));r.every((e=>s[e]))&&(l.current=e,l.y=void 0);const o=null==Z?void 0:Z.findIndex((e=>e.every((e=>s[e]))));void 0!==o&&-1!==o&&(void 0!==l.trueY&&(l.highlighted=e,l.y=void 0),l.graphBuildNumber=o+1);const c=f.findIndex((e=>e.every((e=>s[e]))));return-1!==c&&(void 0!==l.trueY&&(l.highlighted=e,l.y=void 0),l.generBuildNumber=c+1),l})).filter((e=>null!==e)).sort(((e,t)=>e.x-t.x)),c=[];for(const n of l){let e;for(;e=c.pop();)if(e.y>n.y){c.push(e);break}c.push(n)}(null==(e=c[0])?void 0:e.x)!==(null==(t=l[0])?void 0:t.x)&&(l[0].min=c[0].y),c.forEach((e=>{e.min=e.y}));const d={minimum:c.map((e=>[e.x,e.y])),allData:l.map((e=>[e.x,e.y]))};return{displayData:l.filter((e=>e&&e.x>=y&&e.x<=k)),downloadData:d,sliderMin:a,sliderMax:i}}),[o,f,s,Z,y,k]),O=e&&(0,at.Hm)(null==s?void 0:s.getDisplay(),e),D=l(e&&(!O||O.isEmpty)?"page_character_optimize:targetSelector.invalidTarget":"page_character_optimize:targetSelector.selectGraphTarget");return(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(Y.Z,{children:l(Nn||(Nn=Yn`tcGraph.vs`))})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(dt.Z,{placement:"top",title:r?l("page_character_optimize:selectTargetFirst"):"",children:(0,$.tZ)("span",{children:(0,$.tZ)(In.Z,{optimizationTarget:e,setTarget:e=>t(e),defaultText:D,disabled:a})})})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(dt.Z,{title:e?l("ui:reset"):"",placement:"top",children:(0,$.tZ)("span",{children:(0,$.tZ)(g.Z,{color:"error",onClick:()=>t(void 0),disabled:!e||a,children:(0,$.tZ)(me.Z,{})})})})}),(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,children:(0,$.tZ)(Zt.Z,{placement:"top",title:l("page_character_optimize:tcGraph.desc")})}),!!j&&(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{size:"small",startIcon:u?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),color:u?"success":"secondary",onClick:()=>h(!u),children:l(Wn||(Wn=Yn`tcGraph.showStatThr`))})}),!!j&&(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{size:"small",color:"info",startIcon:(0,$.tZ)(kn.Z,{}),onClick:()=>d(!c),children:l(qn||(qn=Yn`tcGraph.downloadData`))})})]})}),X&&X.length&&(0,$.tZ)(F.Z,{}),o&&X&&!!X.length&&(0,$.BX)(p.Z,{children:[(0,$.tZ)(xe.Z,{in:!!j&&c,children:(0,$.tZ)(C.Z,{sx:{mb:2},children:(0,$.BX)(p.Z,{children:[(0,$.tZ)(Y.Z,{children:"Min Data"}),(0,$.tZ)(i.TU,{value:JSON.stringify(null==j?void 0:j.minimum)}),(0,$.tZ)(Y.Z,{children:"All Data"}),(0,$.tZ)(i.TU,{value:JSON.stringify(null==j?void 0:j.allData)})]})})}),(0,$.tZ)(ni,{displayData:X,plotNode:o.plotNode,valueNode:o.valueNode,showMin:u}),X.length>1&&(0,$.tZ)(Sn.ZP,{marks:!0,value:[y,k],onChange:B,onChangeCommitted:B,min:T,max:P,step:(P-T)/20,valueLabelDisplay:"auto",valueLabelFormat:e=>{var t,a;return(0,at.EC)("%"===(null==(t=o.plotNode.info)?void 0:t.unit)?e/100:e,null==(a=o.plotNode.info)?void 0:a.unit)},sx:{ml:"6%",width:"93%"}})]})]})}const Qn="#8884d8",ei="cyan",ti="#46a046",ai="#ff7300";function ni({displayData:e,plotNode:t,valueNode:a,showMin:n}){var i,r,l,s;const{graphBuilds:o,setGraphBuilds:c}=(0,b.useContext)(E),{t:d}=(0,x.$G)("page_character_optimize"),[u,h]=(0,b.useState)(),Z=(0,b.useCallback)((e=>{c([...null!=o?o:[],e]),h(void 0)}),[c,o]),p=(0,b.useCallback)((t=>{t&&t.chartX&&t.chartY&&h(function(e,t,a,n){const i=Array.from(document.querySelectorAll(".custom-dot")).reduce(((a,n)=>{const{chartX:i,chartY:r}=a.dataset,l=Math.sqrt((e-i)**2+(t-r)**2),{chartX:s,chartY:o}=n.dataset;return l<=Math.sqrt((e-s)**2+(t-o)**2)?a:n})).dataset;return Math.sqrt((e-i.chartX)**2+(t-i.chartY)**2)<a?n.find((e=>e.x===+i.xValue&&e.y===+i.yValue)):void 0}(t.chartX,t.chartY,20,e))}),[h,e]),m=ii(t,d),f=ii(a,d);return(0,$.tZ)(Bn.h,{width:"100%",height:600,children:(0,$.BX)(Xn.c,{id:"chartContainer",data:e,onClick:p,style:{cursor:"pointer"},children:[(0,$.tZ)(_n.q,{strokeDasharray:"3 3"}),(0,$.tZ)(Kn.K,{dataKey:"x",scale:"linear",unit:null==(i=t.info)?void 0:i.unit,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:e=>e>1e4?e.toFixed():e.toFixed(1),label:(0,$.tZ)(jn._,{fill:"white",dy:10,children:m}),height:50}),(0,$.tZ)(En.B,{name:"DMG",domain:["auto","auto"],unit:null==(r=a.info)?void 0:r.unit,allowDecimals:!1,tick:{fill:"white"},type:"number",label:(0,$.tZ)(jn._,{fill:"white",angle:-90,dx:-40,children:f}),width:100}),(0,$.tZ)(Tn.u,{content:(0,$.tZ)($n,{xLabel:m,xUnit:null==(l=t.info)?void 0:l.unit,yLabel:f,yUnit:null==(s=a.info)?void 0:s.unit,selectedPoint:u,setSelectedPoint:h,addBuildToList:Z}),trigger:"click",wrapperStyle:{pointerEvents:"auto",cursor:"auto"},cursor:!1}),(0,$.tZ)(Pn.D,{payload:[...n?[{id:"min",value:d(Hn||(Hn=Yn`tcGraph.statReqThr`)),type:"line",color:ai}]:[],{id:"trueY",value:d(Fn||(Fn=Yn`tcGraph.generatedBuilds`)),type:"circle",color:Qn},{id:"highlighted",value:d(Vn||(Vn=Yn`tcGraph.highlightedBuilds`)),type:"square",color:ei},{id:"current",value:d(Un||(Un=Yn`tcGraph.currentBuild`)),type:"diamond",color:ti}]}),n&&(0,$.tZ)(On.x,{dataKey:"min",stroke:ai,type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1,dot:!1,activeDot:!1}),(0,$.tZ)(Dn.b,{dataKey:"trueY",isAnimationActive:!1,shape:(0,$.tZ)(An,{selectedPoint:u,colorUnselected:Qn})}),(0,$.tZ)(Dn.b,{dataKey:"highlighted",isAnimationActive:!1,shape:(0,$.tZ)(An,{shape:"square",selectedPoint:u,colorUnselected:ei})}),(0,$.tZ)(Dn.b,{dataKey:"current",isAnimationActive:!1,shape:(0,$.tZ)(An,{shape:"diamond",selectedPoint:u,colorUnselected:ti})})]})})}function ii(e,t){var a,n,i,r,l;return"string"==typeof(null==(a=e.info)?void 0:a.name)?e.info.name:`${t(`${null==(n=e.info)||null==(n=n.name)?void 0:n.props.ns}:${null==(i=e.info)||null==(i=i.name)?void 0:i.props.key18}`)}${null!=(r=e.info)&&r.textSuffix?` ${null==(l=e.info)?void 0:l.textSuffix}`:""}`}var ri=a(92760),li=a(22537),si=a(15015);let oi,ci,di,ui,hi,Zi=e=>e;function pi({disabled:e=!1,excludedTotal:t}){const{t:a}=(0,x.$G)("page_character_optimize"),{character:{key:n}}=(0,b.useContext)(_.K),{buildSetting:{artExclusion:r,useExcludedArts:l},buildSettingDispatch:s}=$t(n),[o,c,d]=(0,i.aV)(!1),u=r.length,[Z,m,f]=(0,i.aV)(!1),y=(0,b.useCallback)((e=>{s({artExclusion:[...r,e],useExcludedArts:!1})}),[s,r]),v=(0,b.useCallback)((e=>{s({artExclusion:r.filter((t=>t!==e)),useExcludedArts:!1})}),[s,r]),S=(0,b.useCallback)((()=>s({useExcludedArts:!l})),[s,l]);return(0,$.BX)($.HY,{children:[(0,$.tZ)(ne.Z,{open:o,onClose:d,containerProps:{maxWidth:"xl"},children:(0,$.BX)(C.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.BX)(h.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,$.tZ)(Y.Z,{variant:"h6",children:a(oi||(oi=Zi`excludeArt.title_exclude`))}),(0,$.tZ)(Zt.Z,{title:(0,$.tZ)(Y.Z,{children:a(ci||(ci=Zi`excludeArt.title_tooltip`))})}),(0,$.tZ)(h.Z,{flexGrow:1}),(0,$.tZ)(k.Z,{onClick:d,size:"small"})]})}),(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{children:[(0,$.tZ)(gi,{show:Z,onClose:f,onSelect:y,artExclusion:r}),(0,$.tZ)(g.Z,{fullWidth:!0,onClick:m,color:"info",sx:{mb:1},startIcon:(0,$.tZ)(ri.Z,{}),children:a(di||(di=Zi`excludeArt.addExc`))}),!!u&&(0,$.tZ)(w.Z,{sx:{mb:1},children:(0,$.tZ)(Y.Z,{textAlign:"center",children:a(ui||(ui=Zi`excludeArt.deSelectExc`))})}),(0,$.tZ)(ue.ZP,{container:!0,columns:{xs:3,md:5,lg:6,xl:8},spacing:1,children:r.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tn,{artifactId:e,slotKey:"flower",BGComponent:w.Z,onClick:()=>v(e),showLocation:!0})},e)))})]})]})}),(0,$.BX)(_e.Z,{sx:{display:"flex",width:"100%"},children:[(0,$.tZ)(g.Z,{onClick:S,disabled:e||!u,startIcon:l?(0,$.tZ)(za.Z,{}):(0,$.tZ)(Ra.Z,{}),color:l?"secondary":"success",sx:{flexGrow:1},children:(0,$.BX)(h.Z,{sx:{display:"flex",gap:1},children:[(0,$.tZ)(h.Z,{children:a("excludeArt.button_txt")}),(0,$.tZ)(X.Z,{sx:{whiteSpace:"normal"},color:u?l?"warning":"primary":"secondary",children:l?(0,$.BX)(x.cC,{t:a,i18nKey:"excludeArt.usingNum",children:["Using ",{totalStr:t}," excluded artifacts"]}):(0,$.BX)(x.cC,{t:a,i18nKey:"excludeArt.excNum",count:u,children:[{count:u}," artifacts are excluded"]})})]})}),(0,$.tZ)(g.Z,{color:"info",onClick:c,disabled:e,sx:{flexShrink:1},children:(0,$.tZ)(Ot.Z,{})})]})]})}const mi={xs:6,sm:6,md:9,lg:12,xl:12},fi=(e,t)=>Object.assign({},e,t);function gi({onSelect:e,show:t,onClose:a,artExclusion:n}){const{t:r}=(0,x.$G)("page_character_optimize"),{database:l}=(0,b.useContext)(O.t),s=(0,b.useCallback)((t=>{e(t),a()}),[e,a]),[o,c]=(0,b.useReducer)(fi,(0,si.Af)()),[d,u]=(0,i.NW)();(0,b.useEffect)((()=>l.arts.followAny(u)),[l,u]);const m=(0,i.JT)(),f=(0,b.useMemo)((()=>(0,si.EM)()),[]),g=(0,b.useMemo)((()=>{const e=(0,at.CZ)(o,f);return d&&l.arts.values.filter(e).map((e=>e.id)).filter((e=>!n.includes(e))).slice(0,mi[m])}),[d,l,f,o,m,n]);return(0,$.tZ)(ne.Z,{open:t,onClose:a,containerProps:{maxWidth:"xl"},children:(0,$.BX)(C.Z,{children:[(0,$.BX)(p.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$.tZ)(Y.Z,{variant:"h6",children:r(hi||(hi=Zi`excludeArt.selExc`))}),(0,$.tZ)(k.Z,{onClick:a})]}),(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{children:[(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,$.tZ)(li.default,{filterOption:o,filterOptionDispatch:c,filteredIds:g})}),(0,$.tZ)(h.Z,{mt:1,children:(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,$.tZ)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:g.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(Zn.Z,{artifactId:e,onClick:s})},e)))})})})]})]})})}var bi=a(49284),xi=a(61851);const yi=["sands","goblet","circlet"];function vi({disabled:e=!1,filteredArtIdMap:t}){const{t:a}=(0,x.$G)("artifact"),{character:{key:i}}=(0,b.useContext)(_.K),{buildSetting:{mainStatKeys:r},buildSettingDispatch:l}=$t(i),{database:s}=(0,b.useContext)(O.t),{mainStatSlotTots:o,slotTots:c}=(0,b.useMemo)((()=>{const e={flowerMainStatTots:n.x1.flower.stats,plumeMainStatTots:n.x1.plume.stats,sandsMainStatTots:n.x1.sands.stats,gobletMainStatTots:n.x1.goblet.stats,circletMainStatTots:n.x1.circlet.stats,slotTots:yi},a=(0,Pt.A)(e,(e=>Object.entries(s.arts.data).forEach((([a,n])=>{const{slotKey:i,mainStatKey:r}=n;yi.includes(i)&&(e.slotTots[i].total++,t[a]&&e.slotTots[i].current++),e[`${i}MainStatTots`][r].total++,t[a]&&e[`${i}MainStatTots`][r].current++}))));return{mainStatSlotTots:{flower:a.flowerMainStatTots,plume:a.plumeMainStatTots,sands:a.sandsMainStatTots,goblet:a.gobletMainStatTots,circlet:a.circletMainStatTots},slotTots:a.slotTots}}),[s,t]);return(0,$.BX)(h.Z,{display:"flex",flexDirection:"column",children:[(0,$.tZ)(F.Z,{}),(0,$.BX)(h.Z,{display:"flex",children:[(0,$.tZ)(p.Z,{sx:{flexGrow:1},children:(0,$.BX)(h.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:a("slotName.flower")}),children:(0,$.tZ)(bi.pv,{fontSize:"inherit"})}),(0,$.tZ)(h.Z,{flexGrow:1,children:(0,$.BX)(X.Z,{color:"info",children:[(0,$.tZ)(bi.If,Object.assign({},pe.mX))," ",o.flower.hp]})})]})}),(0,$.tZ)(F.Z,{orientation:"vertical",flexItem:!0}),(0,$.tZ)(p.Z,{sx:{flexGrow:1},children:(0,$.BX)(h.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:a("slotName.plume")}),children:(0,$.tZ)(bi.QA,{fontSize:"inherit"})}),(0,$.tZ)(h.Z,{flexGrow:1,children:(0,$.BX)(X.Z,{color:"info",children:[(0,$.tZ)(bi._B,Object.assign({},pe.mX))," ",o.plume.atk]})})]})})]}),yi.map((t=>{const i=r[t],s=n.x1[t].stats,d=(0,xi.X)([...s]);return(0,$.BX)(h.Z,{children:[(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{sx:{pt:1,pb:1},children:[(0,$.BX)(h.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:a(`slotName.${t}`)}),children:(0,$.tZ)(h.Z,{lineHeight:0,children:(0,$.tZ)(It.Z,{slotKey:t,iconProps:{fontSize:"inherit"}})})}),(0,$.tZ)(h.Z,{flexGrow:1,children:(0,$.tZ)(X.Z,{color:"info",children:c[t]})})]}),(0,$.tZ)(ue.ZP,{container:!0,spacing:1,children:s.map(((a,s)=>{const c=n.fR.find((e=>a.includes(e))),u=i.includes(a)?null!=c?c:"success":"secondary";return(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,xs:s<3&&"goblet"!==t||"goblet"===t?4:void 0,children:(0,$.tZ)(dt.Z,{placement:"top",title:(0,$.tZ)(Y.Z,{children:(0,$.tZ)("strong",{children:(0,$.tZ)(Qa,{statKey:a})})}),disableInteractive:!0,children:(0,$.tZ)(g.Z,{fullWidth:!0,size:"small",color:u,sx:{height:"100%",pointerEvents:e?"none":void 0,cursor:e?"none":void 0},startIcon:(0,$.tZ)(Ce.C,{statKey:a}),onClick:()=>l({mainStatKeys:Object.assign({},r,{[t]:d(i,a)})}),children:o[t][a]})})},a)}))})]})]},t)}))]})}var Ci=a(11845);function wi({statFilters:e,setStatFilters:t,disabled:a=!1}){const n=(0,b.useCallback)(((a,n,i)=>{var r;const l=Object.assign({},e),s=JSON.stringify(n),o=n?[...e[s]]:void 0,c=JSON.stringify(a),d=[...null!=(r=e[c])?r:[]];void 0!==i&&o?d.push(o[i]):d.push({value:0,disabled:!1}),l[c]=d,void 0!==i&&o&&(o.splice(i,1),o.length?l[s]=o:delete l[s]),t(Object.assign({},l))}),[t,e]),i=(0,b.useCallback)(((a,n)=>{const i=Object.assign({},e),r=JSON.stringify(a),l=[...e[r]];l.splice(n,1),l.length?i[r]=l:delete i[r],t(Object.assign({},i))}),[t,e]),r=(0,b.useCallback)(((a,n,i)=>{const r=Object.assign({},e),l=JSON.stringify(a),s=[...e[l]];s[n]=Object.assign({},s[n],{value:i}),r[l]=s,t(Object.assign({},r))}),[t,e]),l=(0,b.useCallback)(((a,n,i)=>{const r=Object.assign({},e),l=JSON.stringify(a),s=[...e[l]];s[n]=Object.assign({},s[n],{disabled:i}),r[l]=s,t(Object.assign({},r))}),[t,e]);return(0,$.BX)($.HY,{children:[Object.entries(e).flatMap((([e,t])=>null==t?void 0:t.map(((t,s)=>(0,$.tZ)(ki,{path:JSON.parse(e),setting:t,index:s,setTarget:n,delTarget:i,setValue:r,setDisabled:l,disabled:a},e+s))))),(0,$.tZ)(ki,{setTarget:n,delTarget:i,setValue:r,setDisabled:l,disabled:a})]})}function ki({path:e,setting:t,index:a,setTarget:n,delTarget:i,setValue:r,setDisabled:l,disabled:s}){var o;const{t:c}=(0,x.$G)("page_character_optimize"),{data:d}=(0,b.useContext)(K.R),u=(0,b.useCallback)((t=>e&&void 0!==a&&r(e,a,null!=t?t:0)),[r,e,a]),h={p:1,flexBasis:30,flexGrow:0,flexShrink:0},Z=(0,Ci.Hm)(d.getDisplay(),null!=e?e:[]),p="%"===(null==Z||null==(o=Z.info)?void 0:o.unit);return(0,$.BX)(_e.Z,{sx:{"& .MuiButtonGroup-grouped":{minWidth:24},width:"100%"},children:[!!t&&!!e&&void 0!==a&&(0,$.tZ)(g.Z,{sx:h,color:t.disabled?"secondary":"success",onClick:()=>l(e,a,!t.disabled),disabled:s,children:t.disabled?(0,$.tZ)(ge.Z,{}):(0,$.tZ)(fe.Z,{})}),(0,$.tZ)(In.Z,{showEmptyTargets:!0,optimizationTarget:e,setTarget:t=>n(t,e,a),defaultText:c("targetSelector.selectBuildTarget")}),(0,$.tZ)(Ke.CC,{sx:{flexBasis:150,flexGrow:1},children:(0,$.tZ)(Ke.ZP,{float:!0,disabled:!e||s,value:null==t?void 0:t.value,placeholder:"Stat Value",onChange:u,sx:{px:1},inputProps:{sx:{textAlign:"right"}},endAdornment:p?"%":void 0})}),!!e&&void 0!==a&&(0,$.tZ)(g.Z,{sx:h,color:"error",onClick:()=>i(e,a),disabled:s,children:(0,$.tZ)(it.Z,{fontSize:"small"})})]})}let Si,Bi,Xi=e=>e;function _i({disabled:e=!1}){const{t}=(0,x.$G)("page_character_optimize"),{character:{key:a}}=(0,b.useContext)(_.K),{buildSetting:{statFilters:n},buildSettingDispatch:i}=$t(a),r=(0,b.useCallback)((e=>i({statFilters:e})),[i]);return(0,$.tZ)(h.Z,{children:(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between",flexDirection:"column"},children:(0,$.BX)(h.Z,{display:"flex",justifyContent:"space-between",children:[(0,$.tZ)(Y.Z,{sx:{fontWeight:"bold"},children:t(Si||(Si=Xi`constraintFilter.title`))}),(0,$.tZ)(Zt.Z,{title:(0,$.tZ)(Y.Z,{children:t(Bi||(Bi=Xi`constraintFilter.tooltip`))})})]})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(h.Z,{display:"flex",flexDirection:"column",gap:.5,children:(0,$.tZ)(wi,{statFilters:n,setStatFilters:r,disabled:e})})]})})}const Ki=(0,wt.yY)((0,at.I8)({dyn:Object.assign({},ye.qH.art,ye.qH.artSet)})),ji={art:(0,at.K8)([...n.rW,...n._m],(e=>Ki.dyn[e])),artSet:(0,at.vU)(ye.qH.artSet,((e,t)=>Ki.dyn[t]))};let Ei,Ti,Pi,Oi,Di,Mi,Ii,Ai=e=>e;const Li=new Audio("notification.mp3");function Ri(){var e,t;const{t:a}=(0,x.$G)("page_character_optimize"),{character:{key:r,compareData:l}}=(0,b.useContext)(_.K),{database:s}=(0,b.useContext)(O.t),{setChartData:c,graphBuilds:d,setGraphBuilds:u}=(0,b.useContext)(E),{gender:Z}=(0,I.Z)(),[m,f]=(0,b.useState)(!1),y=(0,b.useRef)(!1);(0,b.useEffect)((()=>{y.current=m}),[m]);const[v,C]=(0,b.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),k="inactive"!==v.type,[B,j]=(0,i.NW)(),[{threads:T=bt.g},P]=(0,b.useState)(s.displayOptimize.get());(0,b.useEffect)((()=>s.displayOptimize.follow(((e,t)=>P(t)))),[s,P]);const D=T>bt.g?bt.g:T,L=(0,b.useCallback)((e=>s.displayOptimize.set({threads:e})),[s]),R=(0,M.Z)(r),z=(0,G.Z)();(0,b.useEffect)((()=>{C({type:"inactive",tested:0,failed:0,skipped:0,total:0})}),[r]);const N=(0,b.useMemo)((()=>!s.arts.values.length),[s]),{buildSetting:W,buildSettingDispatch:q}=$t(r),{plotBase:H,optimizationTarget:V,mainStatAssumptionLevel:U,allowPartial:J,maxBuildsToShow:Q,levelLow:ee,levelHigh:te}=W,{buildResult:{builds:ae,buildDate:ne},buildResultDispatch:ie}=Mn(r),re=(0,A.Z)(r,U),{characterSheet:le,target:se}=null!=(e=null==re?void 0:re[r])?e:{},oe=V&&(0,at.Hm)(null==se?void 0:se.getDisplay(),V),ce=["xs","sm"].includes((0,i.JT)());(0,b.useEffect)((()=>s.arts.followAny(j)),[j,s]);const de=(0,b.useDeferredValue)(B),he=(0,b.useDeferredValue)(W),Ze=(0,b.useMemo)((()=>{const{mainStatKeys:e,excludedLocations:t,artExclusion:a,levelLow:i,levelHigh:l,allowLocationsState:o,useExcludedArts:c}=de&&he;return s.arts.values.filter((s=>{if(!c&&a.includes(s.id))return!1;if(s.level<i)return!1;if(s.level>l)return!1;const d=e[s.slotKey];if(null!=d&&d.length&&!d.includes(s.mainStatKey))return!1;const u=(0,n.V7)(r),h="unequippedOnly"===o&&s.location&&s.location!==u,Z="customList"===o&&s.location&&s.location!==u&&t.includes(s.location);return!h&&!Z}))}),[s,r,de,he]),pe=(0,b.useMemo)((()=>(0,at.K8)(Ze.map((({id:e})=>e)),(e=>!0))),[Ze]),{levelTotal:me,allowListTotal:be,excludedTotal:xe}=(0,b.useMemo)((()=>(0,Pt.A)({levelTotal:["in"],allowListTotal:["in"],excludedTotal:["in"]},(e=>Object.entries(s.arts.data).forEach((([t,a])=>{const{level:i,location:l}=a,{levelLow:s,levelHigh:o,excludedLocations:c,allowLocationsState:d,artExclusion:u}=de&&he;i>=s&&i<=o&&(e.levelTotal.in.total++,pe[t]&&e.levelTotal.in.current++);const h=(0,n.V7)(r),Z="all"===d&&l&&l!==h,p="customList"===d&&l&&l!==h&&!c.includes(l);(Z||p)&&(e.allowListTotal.in.total++,pe[t]&&e.allowListTotal.in.current++),u.includes(t)&&(e.excludedTotal.in.total++,pe[t]&&e.excludedTotal.in.current++)}))))),[r,s.arts.data,de,he,pe]),ye=(0,b.useRef)(!0);(0,b.useEffect)((()=>{const e=()=>ye.current=!0,t=()=>ye.current=!1;return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[ye]);const ve=(0,b.useRef)((()=>{}));(0,b.useEffect)((()=>()=>ve.current()),[]);const Ce=function(){const[,e]=(0,b.useState)();return(0,b.useCallback)((t=>{e((()=>{throw t}))}),[])}(),we=(0,b.useCallback)((async()=>{var e,t,i;const{artSetExclusion:l,plotBase:o,statFilters:d,optimizationTarget:u,mainStatAssumptionLevel:h,allowPartial:p,maxBuildsToShow:m}=W;if(!r||!u)return;const f=function(e,t,a){const i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},r=new Set;for(const l of e){const e=(0,$a.Bv)(l.mainStatKey,l.rarity,Math.max(Math.min(t,n.F7[l.rarity]),l.level)),a={id:l.id,set:l.setKey,values:Object.assign({[l.setKey]:1,[l.mainStatKey]:l.mainStatKey.endsWith("_")?e/100:e},Object.fromEntries(l.substats.map((e=>[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]))))};delete a.values[""],i.values[l.slotKey].push(a),Object.keys(a.values).forEach((e=>r.add(e)))}if(i.base=(0,at.K8)([...r],(e=>0)),a)for(const n of Object.values(i.values))n.push({id:"",values:{}});return i}(Ze,h,p),g=(0,A.V)(s,r,h,[]);if(!g)return;const b=null==(e=(0,yt.Qo)(g.teamData,Z,r)[r])?void 0:e.target.data[0];if(!b)return;Object.assign(b,(0,yt.b3)([b,ji]));const x=(0,at.Hm)(null!=(t=b.display)?t:{},u);if(!x)return;const v=x,w=Object.entries(d).flatMap((([e,t])=>t.filter((e=>!e.disabled)).map((t=>{var a,n;const i=(0,at.Hm)(null!=(a=b.display)?a:{},JSON.parse(e));return{value:i,minimum:"%"===(null==(n=i.info)?void 0:n.unit)?t.value/100:t.value}})))).filter((e=>e.value&&e.minimum>-1/0));c(void 0);const k=new Promise((e=>ve.current=e)),S=[...w.map((e=>e.value)),x],B=[...w.map((e=>e.minimum)),-1/0],X=o&&(0,at.Hm)(null!=(i=b.display)?i:{},o);X&&(S.push(X),B.push(-1/0));const _=(0,vt.tL)(S,b,(({path:[e]})=>"dyn"!==e)),K=X?_.pop():void 0,j={arts:f,optimizationTarget:_.pop(),exclusion:l,constraints:_.map(((e,t)=>({value:e,min:B[t]}))),topN:m,plotBase:K},E={tested:0,failed:0,skipped:0,total:0,startTime:performance.now()},T=setInterval((()=>C(Object.assign({type:"active"},E))),100),P=new Error;try{const e=new GOSolver(j,E,D);k.then((()=>e.cancel(P)));const t=await e.solve();if(e.cancel(),ve.current=()=>{},X){var O,M;const e=function(e){let t=.01,a=new Set(e.flatMap((e=>Object.values(e).map((e=>Math.round(e.plot/t))))));for(;a.size>1500;)t*=2,a=new Set([...a].map((e=>Math.round(e/2))));const n={};for(const i of e)for(const e of Object.values(i)){const a=Math.round(e.plot/t)*t;(!n[a]||n[a].value<e.value)&&(n[a]=e)}return n}(t.map((e=>e.plotData)));let a=Object.values(e);"%"===(null==(O=v.info)?void 0:O.unit)&&(a=a.map((({value:e,plot:t,artifactIds:a})=>({value:100*e,plot:t,artifactIds:a})))),"%"===(null==(M=X.info)?void 0:M.unit)&&(a=a.map((({value:e,plot:t,artifactIds:a})=>({value:e,plot:100*(null!=t?t:0),artifactIds:a})))),c({valueNode:v,plotNode:X,data:a})}const n=function(e,t){return e.flatMap((e=>e)).sort(((e,t)=>t.value-e.value)).slice(0,t)}(t.map((e=>e.builds)),m);0,ie({builds:n.map((e=>e.artifactIds)),buildDate:Date.now()}),setTimeout((()=>{t&&y.current&&(Li.play(),ye.current||setTimeout((()=>window.alert(a(Ei||(Ei=Ai`buildCompleted`)))),1))}),100)}catch(I){I!==P&&(console.log("Failed to load worker"),console.log(I),I instanceof Error&&Ce(I)),ve.current(),E.tested=0,E.failed=0,E.skipped=0,E.total=0}finally{clearInterval(T),C(Object.assign({type:"inactive"},E,{finishTime:performance.now()}))}}),[W,r,Ze,s,Z,c,D,ie,a,Ce]),ke=null!=(t=null==le?void 0:le.name)?t:"Character Name",Se=(0,b.useCallback)((e=>{q({plotBase:e}),c(void 0)}),[q,c]),Be=(0,b.useMemo)((()=>se&&re&&{data:se,teamData:re}),[se,re]),Xe=(0,$.tZ)(In.Z,{optimizationTarget:V,setTarget:e=>q({optimizationTarget:e}),disabled:!!k}),Ke=(0,b.useCallback)((e=>(0,$.BX)(x.cC,{t:a,i18nKey:"graphBuildLabel",count:e+1,children:["Graph #",{count:e+1}]})),[a]),je=(0,b.useCallback)((e=>`#${e+1}`),[]);return(0,$.BX)(h.Z,{display:"flex",flexDirection:"column",gap:1,children:[N&&(0,$.tZ)(mt,{}),Be&&(0,$.BX)(K.R.Provider,{value:Be,children:[(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.BX)(ue.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(h.Z,{children:(0,$.tZ)(ut.Z,{characterKey:r,onClickTeammate:z})}),(0,$.tZ)(Pa,{})]}),(0,$.BX)(ue.ZP,{item:!0,xs:12,sm:6,lg:4,display:"flex",flexDirection:"column",gap:1,children:[(0,$.BX)(w.Z,{children:[(0,$.BX)(p.Z,{sx:{display:"flex",gap:1},children:[(0,$.tZ)(Y.Z,{sx:{fontWeight:"bold"},children:a(Ti||(Ti=Ai`levelFilter`))}),(0,$.tZ)(X.Z,{color:"info",children:me.in})]}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{children:(0,$.tZ)(ct.Z,{levelLow:ee,levelHigh:te,setLow:e=>q({levelLow:e}),setHigh:e=>q({levelHigh:e}),setBoth:(e,t)=>q({levelLow:e,levelHigh:t}),disabled:k})})]}),(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.tZ)(Y.Z,{sx:{fontWeight:"bold"},children:a(Pi||(Pi=Ai`mainStat.title`))})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{children:(0,$.BX)(h.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,$.tZ)(ja,{mainStatAssumptionLevel:U,setmainStatAssumptionLevel:e=>q({mainStatAssumptionLevel:e}),disabled:k}),(0,$.tZ)(Zt.Z,{title:(0,$.BX)(h.Z,{children:[(0,$.tZ)(Y.Z,{variant:"h6",children:a(Oi||(Oi=Ai`mainStat.levelAssTooltip.title`))}),(0,$.tZ)(Y.Z,{children:a(Di||(Di=Ai`mainStat.levelAssTooltip.desc`))})]})})]})}),(0,$.tZ)(vi,{disabled:k,filteredArtIdMap:pe})]})]}),(0,$.BX)(ue.ZP,{item:!0,xs:12,sm:6,lg:5,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(Sa,{disabled:k}),(0,$.tZ)(pi,{disabled:k,excludedTotal:xe.in}),(0,$.tZ)(g.Z,{fullWidth:!0,startIcon:J?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),color:J?"success":"secondary",onClick:()=>q({allowPartial:!J}),disabled:k,children:a(Mi||(Mi=Ai`allowPartial`))}),(0,$.tZ)(Ut,{disabled:k,allowListTotal:be.in}),(0,$.tZ)(_i,{disabled:k})]})]}),ce&&Xe,(0,$.BX)(_e.Z,{children:[!ce&&Xe,(0,$.BX)(ht.Z,{disabled:k||!r,title:(0,$.BX)(x.cC,{t:a,i18nKey:"build",count:Q,children:[{count:Q}," Builds"]}),children:[(0,$.tZ)(st.Z,{children:(0,$.tZ)(Y.Z,{variant:"caption",color:"info.main",children:a("buildDropdownDesc")})}),(0,$.tZ)(F.Z,{}),xt.sY.map((e=>(0,$.tZ)(st.Z,{onClick:()=>q({maxBuildsToShow:e}),children:(0,$.BX)(x.cC,{t:a,i18nKey:"build",count:e,children:[{count:e}," Builds"]})},e)))]}),(0,$.BX)(ht.Z,{disabled:k||!r,sx:{borderRadius:"4px 0px 0px 4px"},title:(0,$.BX)(x.cC,{t:a,i18nKey:"thread",count:D,children:[{count:D}," Threads"]}),children:[(0,$.tZ)(st.Z,{children:(0,$.tZ)(Y.Z,{variant:"caption",color:"info.main",children:a("threadDropdownDesc")})}),(0,$.tZ)(F.Z,{}),(0,at.w6)(1,bt.g).reverse().map((e=>(0,$.tZ)(st.Z,{onClick:()=>L(e),children:(0,$.BX)(x.cC,{t:a,i18nKey:"thread",count:e,children:[{count:e}," Threads"]})},e)))]}),(0,$.tZ)(dt.Z,{placement:"top",title:a(Ii||(Ii=Ai`notifyTooltip`)),children:(0,$.tZ)(g.Z,{sx:{borderRadius:0},color:"warning",onClick:()=>f((e=>!e)),children:m?(0,$.tZ)(rt.Z,{}):(0,$.tZ)(lt.Z,{})})}),(0,$.tZ)(dt.Z,{placement:"top",title:V?"":a("selectTargetFirst"),children:(0,$.tZ)("span",{children:(0,$.tZ)(g.Z,{disabled:!r||!V||!oe||oe.isEmpty,color:k?"error":"success",onClick:k?()=>ve.current():we,startIcon:k?(0,$.tZ)(nt.Z,{}):(0,$.tZ)(o.Z,{}),sx:{borderRadius:"0px 4px 4px 0px"},children:a(k?"generateButton.cancel":"generateButton.generateBuilds")})})})]}),!!r&&(0,$.tZ)(Ia,{status:v,characterName:ke,maxBuildsToShow:Q}),(0,$.tZ)(h.Z,{children:(0,$.tZ)(Jn,{disabled:k||!V,plotBase:H,setPlotBase:Se,showTooltip:!V})}),(0,$.tZ)(w.Z,{children:(0,$.BX)(p.Z,{children:[(0,$.BX)(h.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,$.tZ)(Y.Z,{sx:{flexGrow:1},children:ae?(0,$.BX)("span",{children:["Showing"," ",(0,$.tZ)("strong",{children:ae.length+(d?d.length:0)})," ","build generated for ",ke,"."," ",!!ne&&(0,$.BX)("span",{children:["Build generated on:"," ",(0,$.tZ)("strong",{children:new Date(ne).toLocaleString()})]})]}):(0,$.tZ)("span",{children:"Select a character to generate builds."})}),(0,$.tZ)(g.Z,{disabled:!ae.length,color:"error",onClick:()=>{u(void 0),ie({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,$.BX)(ue.ZP,{container:!0,display:"flex",spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(S.Hn,{size:"small"})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(S.oX,{size:"small"})}),(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.BX)(ft.Z,{exclusive:!0,value:l,onChange:(e,t)=>R({compareData:t}),size:"small",children:[(0,$.tZ)(ot.Z,{value:!1,disabled:!l,children:"Show new builds"}),(0,$.tZ)(ot.Z,{value:!0,disabled:l,children:"Compare vs. equipped"})]})})]})]})}),(0,$.BX)(gt.Provider,{value:V,children:[d&&(0,$.tZ)(zi,{builds:d,characterKey:r,data:se,compareData:l,disabled:!!k,getLabel:Ke,setBuilds:u}),(0,$.tZ)(zi,{builds:ae,characterKey:r,data:se,compareData:l,disabled:!!k,getLabel:je})]})]})]})}function zi({builds:e,setBuilds:t,characterKey:a,data:n,compareData:i,disabled:r,getLabel:l}){const s=(0,b.useCallback)((a=>{if(t){const n=[...e];n.splice(a,1),t(n)}}),[e,t]);return(0,b.useMemo)((()=>(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:600}),children:null==e?void 0:e.map(((e,o)=>a&&n&&(0,$.tZ)($i,{characterKey:a,build:e,oldData:n,children:(0,$.tZ)(Gi,{index:o,label:l(o),build:e,compareData:i,disabled:r,deleteBuild:t?s:void 0})},o+e.join())))})),[e,a,n,i,r,l,s,t])}function Gi({index:e,label:t,build:a,compareData:n,disabled:i,deleteBuild:r}){const{t:l}=(0,x.$G)("page_character_optimize"),s=(0,y.TH)(),o=(0,y.s0)(),d=(0,b.useCallback)((()=>{const e=s.pathname.split("/");e.pop(),o(`${e.join("/")}/theorycraft`,{state:{build:a}})}),[o,a,s.pathname]);return(0,$.tZ)(yn,{label:t,compareBuild:n,disabled:i,extraButtonsLeft:(0,$.BX)($.HY,{children:[(0,$.tZ)(g.Z,{color:"info",size:"small",startIcon:(0,$.tZ)(c.Z,{}),onClick:d,children:l("theorycraftButton")}),r&&(0,$.tZ)(g.Z,{color:"error",size:"small",startIcon:(0,$.tZ)(it.Z,{}),onClick:()=>r(e),children:l("removeBuildButton")})]})})}function $i({children:e,characterKey:t,build:a,oldData:n}){const{database:r}=(0,b.useContext)(O.t),{buildSetting:{mainStatAssumptionLevel:l}}=$t(t),[s,o]=(0,i.NW)();(0,b.useEffect)((()=>r.arts.followAny((e=>a.includes(e)&&o()))),[r,a,o]);const c=(0,b.useMemo)((()=>s&&a.map((e=>r.arts.get(e))).filter((e=>e))),[s,a,r]),d=(0,A.Z)(t,l,c),u=(0,b.useMemo)((()=>{const e=null==d?void 0:d[t];if(e)return{data:e.target,teamData:d,oldData:n}}),[d,n,t]);return u?(0,$.tZ)(K.R.Provider,{value:u,children:e}):null}var Ni=a(1856),Wi=a(5896),qi=a(81073),Hi=a(30840),Fi=a(15045);const Vi=[[1],[1,1,1,1],[1,2,3,4,3,2,1],[1,3,6,10,12,12,10,6,3,1],[1,4,10,20,31,40,44,40,31,20,10,4,1],[1,5,15,35,65,101,135,155,155,135,101,65,35,15,5,1]];function Ui(e,t){var a;if(e>=Vi.length)throw Error("Input to `quadrinomial` leaves expected range 0 <= n <= 5");return null!=(a=Vi[e][t])?a:0}function Yi(e){let t=1;e<0&&(t=-1);const a=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-e*e))}const Ji=[1,1,2,6,24,120,720];function Qi(e){for(;e>=Ji.length;)Ji.push(Ji.length*Ji[Ji.length-1]);return Ji[e]}function er(e,t){var a,n,i,r,l;if(0!==e)for(let s=e;s>=0;s--)for(let o=e-s;o>=0;o--)for(let c=e-s-o;c>=0;c--){const d=e-s-o-c;t([s,o,c,d],(a=s)+(n=o)+(i=c)+(r=d)!==(l=e)?0:Qi(l)/Qi(a)/Qi(n)/Qi(i)/Qi(r)*4**-l)}else t([0,0,0,0],1)}function tr(e,t,a){let n=!0;return(0,Ct.aD)([e],(e=>{}),(e=>{const{operation:i}=e;if("read"===i){if("number"!==e.type||e.accu&&"add"!==e.accu)throw new Error(`Unsupported [${i}] node in zero_deriv`);t(e)===a&&(n=!1)}})),n}function ar(e,t,a){const{operation:n}=e;switch(n){case"read":if("number"!==e.type||e.accu&&"add"!==e.accu)throw new Error(`Unsupported [${n}] node in d/dx`);return t(e)===a?(0,wt.a9)(1):(0,wt.a9)(0);case"const":return(0,wt.a9)(0);case"res":if(!tr(e,t,a))throw new Error(`[${n}] node takes only constant inputs. ${e}`);return(0,wt.a9)(0);case"add":return(0,wt.Sm)(...e.operands.map((e=>ar(e,t,a))));case"mul":{const n=e.operands.map(((n,i)=>(0,wt.WV)(ar(n,t,a),...e.operands.filter(((e,t)=>t!==i)))));return(0,wt.Sm)(...n)}case"sum_frac":{const n=e.operands[0],i=ar(n,t,a),r=(0,wt.Sm)(...e.operands.slice(1)),l=ar(r,t,a),s=(0,wt.WV)((0,wt.Sm)(...e.operands),(0,wt.Sm)(...e.operands)),o=(0,wt.Sm)((0,wt.WV)(r,i),(0,wt.WV)(-1,n,l));return(0,wt.F9)(o,(0,wt.Sm)((0,wt.WV)(-1,o),s))}case"min":case"max":{let i=ar(e.operands[0],t,a);for(let r=1;r<e.operands.length;r++){const l=e.operands[r];if("min"===n){const n=(0,wt.VV)(...e.operands.slice(0,r));i=(0,wt.Lj)(l,n,i,ar(l,t,a))}else if("max"===n){const n=(0,wt.Fp)(...e.operands.slice(0,r));i=(0,wt.Lj)(l,n,ar(l,t,a),i)}}return i}case"threshold":{const[i,r,l,s]=e.operands;if(!tr(i,t,a)||!tr(r,t,a))throw new Error(`[${n}] node must branch on constant inputs. ${e}`);return(0,wt.Lj)(i,r,ar(l,t,a),ar(s,t,a))}default:(0,Ci.UT)(n)}}function nr(e,t,a){if(t<1e-5)return e>a?{p:1,upAvg:e-a}:{p:0,upAvg:0};const n=(a-e)/Math.sqrt(t),i=(1-Yi(n/Math.sqrt(2)))/2,r=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=1),a<=0?0:Math.exp(-(t-e)*(t-e)/a/2)/Math.sqrt(2*Math.PI*a)}(n),l=1/(n*n),s=n<5?r/i-n:(1-2*l*(1-l*(5+37*l)))/n;return{p:i,upAvg:Math.sqrt(t)*s}}const ir=8.5,rr=18.375,lr=4.515625;let sr=function(e){return e[e.Fast=0]="Fast",e[e.Slow=1]="Slow",e[e.Exact=2]="Exact",e}({});const or={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3};function cr(e,t=5){return dr(e,(0,$a.U9)(e,t)/10)}function dr(e,t){return e.endsWith("_")?t/100:t}class UpOptCalculator{constructor(e,t,a,i){this.baseBuild=void 0,this.nodes=void 0,this.thresholds=void 0,this.calc4th=!1,this.skippableDerivatives=void 0,this.eval=void 0,this.artifacts=[],this.fixedIx=0,this.baseBuild=a,this.nodes=e,this.thresholds=t;const r=[];e.forEach((e=>{r.push(e,...n._m.map((t=>ar(e,(e=>e.path[1]),t))))}));const l=(0,vt.tL)(r,{},(({path:[e]})=>"dyn"!==e)),s=(0,vt.I3)(l,{},(e=>e.path[1]),5);t[0]=s(Object.values(a))[0],this.skippableDerivatives=n._m.map((t=>e.every((e=>tr(e,(e=>e.path[1]),t))))),this.eval=(t,i)=>{const r=Object.assign({},a,{[i]:{id:"",values:t}}),l=s(Object.values(r));return e.map(((e,t)=>{const a=t*(1+n._m.length);return{v:l[a],grads:n._m.map(((e,t)=>l[a+1+t]))}}))},i.forEach((e=>this._addArtifact(e)))}_addArtifact(e){const t=n.F7[e.rarity],a=(0,$a.Bv)(e.mainStatKey,e.rarity,t);this.artifacts.push({id:e.id,rollsLeft:(0,$a.NB)(e.level,e.rarity),slotKey:e.slotKey,mainStat:e.mainStatKey,subs:e.substats.map((({key:e})=>e)).filter((e=>""!==e)),values:Object.assign({[e.setKey]:1,[e.mainStatKey]:dr(e.mainStatKey,a)},Object.fromEntries(e.substats.filter((({key:e})=>""!==e)).map((e=>[e.key,dr(e.key,e.accurateValue)]))))})}calcFastAll(){function e(e){return e.result.p*e.result.upAvg}this.artifacts.forEach(((e,t)=>this.calcFast(t,this.calc4th))),this.artifacts.sort(((t,a)=>e(a)-e(t))),this.fixedIx=0}calcSlowToIndex(e,t=5){const a=this.artifacts.slice(0,this.fixedIx),n=this.artifacts.slice(this.fixedIx);function i(e){return e.result.p*e.result.upAvg}function r(e,t){if(i(e)>1e-5||i(t)>1e-5)return i(t)-i(e);const a=e.result.distr.gmm.reduce(((e,{phi:t,mu:a})=>e+t*a),0);return t.result.distr.gmm.reduce(((e,{phi:t,mu:a})=>e+t*a),0)-a}let l=0;const s=Math.min(e-this.fixedIx+t,n.length);do{for(;l<s;l++)this.calcSlow(this.fixedIx+l,this.calc4th);for(n.sort(r),this.artifacts=[...a,...n],l=0;l<s&&n[l].result.evalMode!==sr.Fast;l++);}while(l<s)}_toResultFast(e){let t=0,a=0;const n=e.map((({prob:e,mu:n,cov:i})=>{const r=n.map(((e,t)=>nr(e,i[t],this.thresholds[t]))),l=Math.min(...r.map((({p:e})=>e))),s=Math.min(...r.slice(1).map((({p:e})=>e)));return t+=l*e,a+=l*e*r[0].upAvg,{phi:e,cp:s,mu:n[0],sig2:i[0]}})),i=n.map((({mu:e,sig2:t})=>e-4*Math.sqrt(t))),r=n.map((({mu:e,sig2:t})=>e+4*Math.sqrt(t)));return{p:t,upAvg:t<1e-6?0:a/t,distr:{gmm:n,lower:Math.min(...i),upper:Math.max(...r)},evalMode:sr.Fast}}calcFast(e,t=!0){4===this.artifacts[e].subs.length&&(t=!1),t?this._calcFast4th(e):this._calcFast(e)}_calcFast(e){const{subs:t,slotKey:a,rollsLeft:i}=this.artifacts[e],r=i-(t.length<4?1:0),l=Object.assign({},this.artifacts[e].values);t.forEach((e=>{l[e]+=ir*(r/4)*cr(e)}));const s=this.eval(l,a).map((({v:e,grads:a})=>{const i=t.map((e=>a[n._m.indexOf(e)]*cr(e))),l=i.reduce(((e,t)=>e+t),0),s=i.reduce(((e,t)=>e+t*t),0);return{mu:e,sig2:(rr*s-lr*l**2)*r}}));this.artifacts[e].result=this._toResultFast([{prob:1,mu:s.map((({mu:e})=>e)),cov:s.map((({sig2:e})=>e))}])}_calcFast4th(e){const{mainStat:t,subs:a,slotKey:i,rollsLeft:r}=this.artifacts[e],l=r-1,s=n._m.filter((e=>!a.includes(e)&&e!==t)),o=s.reduce(((e,t)=>e+or[t]),0),c=s.map((t=>{var r;const s=or[t]/o,c=Object.assign({},this.artifacts[e].values);a.forEach((e=>{c[e]+=ir*(l/4)*cr(e)})),c[t]=(null!=(r=c[t])?r:0)+ir*(l/4+1)*cr(t);const d=this.eval(c,i).map((({v:e,grads:i})=>{const r=a.map((e=>i[n._m.indexOf(e)]*cr(e))),s=i[n._m.indexOf(t)]*cr(t),o=r.reduce(((e,t)=>e+t),s),c=r.reduce(((e,t)=>e+t*t),s*s);return{mu:e,sig2:(rr*c-lr*o**2)*l+1.25*s*s}}));return{prob:s,mu:d.map((({mu:e})=>e)),cov:d.map((({sig2:e})=>e))}}));this.artifacts[e].result=this._toResultFast(c)}_toResultSlow(e){let t=0,a=0;const n=e.map((({prob:e,mu:n,cov:i})=>{const{p:r,upAvg:l,cp:s}=function(e,t,a){let n=1,i=1;for(let l=0;l<e.length;++l){if(t[l][l]<1e-5){if(e[l]<a[l])return{p:0,upAvg:0,cp:0};continue}const r=(1-Yi((a[l]-e[l])/Math.sqrt(t[l][l])/Math.sqrt(2)))/2;n*=r,0!==l&&(i*=r)}const{upAvg:r}=nr(e[0],t[0][0],a[0]);return{p:n,upAvg:r,cp:i}}(n,i,this.thresholds);return t+=e*r,a+=e*r*l,{phi:e,cp:s,mu:n[0],sig2:i[0][0]}})),i=n.map((({mu:e,sig2:t})=>e-4*Math.sqrt(t))),r=n.map((({mu:e,sig2:t})=>e+4*Math.sqrt(t)));return{p:t,upAvg:t<1e-6?0:a/t,distr:{gmm:n,lower:Math.min(...i,this.thresholds[0]),upper:Math.max(...r,this.thresholds[0])},evalMode:sr.Slow}}calcSlow(e,t=!0){var a,n;(null==(a=this.artifacts[e].result)?void 0:a.evalMode)!==sr.Slow&&(null==(n=this.artifacts[e].result)?void 0:n.evalMode)!==sr.Exact&&(4===this.artifacts[e].subs.length&&(t=!1),t?this._calcSlow4th(e):this._calcSlow(e))}_calcSlow(e){const{subs:t,slotKey:a,rollsLeft:i}=this.artifacts[e],r=i-(t.length<4?1:0),l=[];er(r,((i,r)=>{const s=Object.assign({},this.artifacts[e].values);t.forEach(((e,t)=>{s[e]+=ir*i[t]*cr(e)}));const o=this.eval(s,a),c=o.map((({grads:e})=>t.map((t=>e[n._m.indexOf(t)]*cr(t))))),d=o.map((e=>e.v)),u=c.map((e=>c.map((t=>e.reduce(((a,n,r)=>a+e[r]*t[r]*i[r]),0)))));l.push({prob:r,mu:d,cov:u})})),this.artifacts[e].result=this._toResultSlow(l)}_calcSlow4th(e){const{mainStat:t,subs:a,slotKey:i,rollsLeft:r}=this.artifacts[e],l=r-1,s=n._m.filter((e=>!a.includes(e)&&e!==t)),o=s.reduce(((e,t)=>e+or[t]),0),c=[];s.forEach((t=>{er(l,((r,l)=>{var s;l*=or[t]/o;const d=Object.assign({},this.artifacts[e].values);r[3]+=1,a.forEach(((e,t)=>{d[e]+=ir*r[t]*cr(e)})),d[t]=(null!=(s=d[t])?s:0)+ir*r[3]*cr(t);const u=this.eval(d,i),h=u.map((({grads:e})=>{const i=a.map((t=>e[n._m.indexOf(t)]*cr(t)));return i.push(e[n._m.indexOf(t)]*cr(t)),i})),Z=u.map((e=>e.v)),p=h.map((e=>h.map((t=>e.reduce(((a,n,i)=>a+e[i]*t[i]*r[i]),0)))));c.push({prob:l,mu:Z,cov:p})}))})),this.artifacts[e].result=this._toResultSlow(c)}_toResultExact(e){let t=0,a=0;const n=e.map((({prob:e,val:n})=>{if(n.every(((e,t)=>e>=this.thresholds[t])))return t+=e,a+=e*(n[0]-this.thresholds[0]),{phi:e,cp:1,mu:n[0],sig2:0};return{phi:e,cp:n.slice(1).every(((e,t)=>e>=this.thresholds[t]))?1:0,mu:n[0],sig2:0}})),i=n.map((({mu:e})=>e));return{p:t,upAvg:t<1e-6?0:a/t,distr:{gmm:n,lower:Math.min(...i),upper:Math.max(...i)},evalMode:sr.Exact}}calcExact(e,t=!0){var a;(null==(a=this.artifacts[e].result)?void 0:a.evalMode)!==sr.Exact&&(4===this.artifacts[e].subs.length&&(t=!1),t?this._calcExact4th(e):this._calcExact(e))}_calcExact(e){const{subs:t,slotKey:a,rollsLeft:i}=this.artifacts[e],r=i-(t.length<4?1:0),l=[];er(r,((i,r)=>{const s=Object.assign({},this.artifacts[e].values),o=i.map(((e,a)=>t[a]&&!this.skippableDerivatives[n._m.indexOf(t[a])]?(0,at.w6)(7*e,10*e):[NaN]));(0,at.Og)(...o).forEach((e=>{const n=Object.assign({},s);let o=1;for(let a=0;a<4;a++){var c;if(isNaN(e[a]))continue;const r=t[a],l=e[a],s=i[a];n[r]=(null!=(c=n[r])?c:0)+l*cr(r);o*=4**-s*Ui(s,l-7*s)}l.push({prob:r*o,val:this.eval(n,a).map((e=>e.v))})}))})),this.artifacts[e].result=this._toResultExact(l)}_calcExact4th(e){const{mainStat:t,subs:a,slotKey:i,rollsLeft:r}=this.artifacts[e],l=r-1,s=n._m.filter((e=>!a.includes(e)&&e!==t)),o=s.reduce(((e,t)=>e+or[t]),0),c=[];s.forEach((t=>{const r=or[t]/o;er(l,((l,s)=>{const o=l.map(((e,i)=>3===i?(e+=1,this.skippableDerivatives[n._m.indexOf(t)]?[NaN]:(0,at.w6)(7*e,10*e)):a[i]&&!this.skippableDerivatives[n._m.indexOf(a[i])]?(0,at.w6)(7*e,10*e):[NaN]));(0,at.Og)(...o).forEach((n=>{const o=Object.assign({},this.artifacts[e].values);let d=1;for(let e=0;e<3;e++){var u;if(isNaN(n[e]))continue;const t=a[e],i=n[e],r=l[e];o[t]=(null!=(u=o[t])?u:0)+i*cr(t);d*=4**-r*Ui(r,i-7*r)}if(!isNaN(n[3])){var h;const e=t,a=n[3],i=l[3]+1;o[e]=(null!=(h=o[e])?h:0)+a*cr(e);d*=4**-i*Ui(i,a-7*i)}c.push({prob:r*s*d,val:this.eval(o,i).map((e=>e.v))})}))}))})),this.artifacts[e].result=this._toResultExact(c)}}function ur(e){const t=dr(e.mainStatKey,(0,$a.Bv)(e.mainStatKey,e.rarity,e.level)),a={id:e.id,slot:e.slotKey,level:e.level,rarity:e.rarity,values:Object.assign({[e.setKey]:1,[e.mainStatKey]:t},Object.fromEntries(e.substats.map((e=>[e.key,dr(e.key,e.accurateValue)])).filter((([,e])=>0!==e)))),subs:e.substats.reduce(((e,t)=>(""!==t.key&&e.push(t.key),e)),[])};return delete a.values[""],a}const hr=50;function Zr(e){return(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:5,sm:4,md:4,lg:3,xl:3,children:(0,$.tZ)(Zn.Z,{artifactId:e.upgradeOpt.id,editorProps:{}})}),(0,$.tZ)(ue.ZP,{item:!0,xs:7,sm:8,md:8,lg:9,xl:9,children:(0,$.tZ)(pr,Object.assign({},e))})]})}function pr({upgradeOpt:e,thresholds:t,objMin:a,objMax:n,calcExactCallback:r}){const{database:l}=(0,b.useContext)(O.t),s=l.arts.get(e.id);if(!s)throw new Error(`artifact ${e.id} not found.`);const o=t.length>1,c=(t,a)=>e.result.distr.gmm.reduce(((e,{phi:n,mu:i,sig2:r})=>{const l=Math.sqrt(r);if(l<.001)return t<=i&&i<a?n+e:e;return e+n*(Yi((i-t)/l)-Yi((i-a)/l))/2}),0),d=(t,a)=>e.result.distr.gmm.reduce(((e,{cp:n,phi:i,mu:r,sig2:l})=>{const s=Math.sqrt(l);if(s<.001)return t<=r&&r<a?n*i+e:e;return e+n*i*(Yi((r-t)/s)-Yi((r-a)/s))/2}),0),u=t[0],Z=(0,b.useCallback)((e=>100*(e-u)/u),[u]),m=(n-a)/hr,f=(0,at.SX)(a,n,hr,!1).flatMap((e=>[{x:Z(e),est:c(e,e+m),estCons:d(e,e+m)},{x:Z(e+m),est:c(e,e+m),estCons:d(e,e+m)}]));f.unshift({x:Z(a),est:0,estCons:0}),f.push({x:Z(n),est:0,estCons:0});const g=f.reduce(((e,{est:t})=>Math.max(e,t)),0),x=(u-a)/(n-a),y=e.result.p,v=e.result.upAvg,C=f,k=e.result.evalMode===sr.Exact,S=(0,at.SX)(a,n,hr,!1).reduce(((e,t)=>t<u+v?t:e)),B=d(S,S+m),X=(0,i.KS)();k||X(r,1e3);const _=(0,$.BX)("span",{children:["Prob. upgrade",k?"":" (est.)",":"," ",(0,$.BX)("strong",{children:[(100*y).toFixed(1),"%"]})]}),K=(0,$.BX)("span",{children:["Average increase",k?"":" (est.)",":"," ",(0,$.BX)("strong",{children:[v<=0?"":"+",(100*v/u).toFixed(1),"%"]})]});return(0,$.BX)(w.Z,{children:[(0,$.BX)(h.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,$.tZ)(p.Z,{sx:{flexGrow:1},children:(0,$.BX)(h.Z,{sx:{display:"flex",flexDirection:"row",gap:2},children:[(0,$.tZ)(Y.Z,{children:_}),(0,$.tZ)(Y.Z,{sx:{flexGrow:1},children:K}),(0,$.tZ)(Y.Z,{children:"Currently Equipped"})]})}),(0,$.tZ)(h.Z,{sx:{height:50,width:50},children:(0,$.tZ)(mr,{slotKey:s.slotKey})})]}),(0,$.tZ)(p.Z,{children:(0,$.tZ)(Bn.h,{width:"100%",aspect:2.5,children:(0,$.BX)(Xn.c,{data:C,margin:{top:5,right:30,left:20,bottom:20},children:[(0,$.tZ)(Kn.K,{dataKey:"x",type:"number",domain:["auto","auto"],allowDecimals:!1,tickFormatter:e=>`${e<=0?"":"+"}${e}%`,children:(0,$.tZ)(jn._,{value:"Relative Damage Potential",position:"insideBottom",style:{fill:"#eaebed"},offset:-10})}),(0,$.tZ)(En.B,{type:"number",domain:[0,g],tick:!1,children:(0,$.tZ)(jn._,{value:"Probability",position:"insideLeft",angle:-90,style:{fill:"#eaebed"}})}),(0,$.tZ)(Pn.D,{verticalAlign:"top",height:36}),(0,$.tZ)("defs",{children:(0,$.BX)("linearGradient",{id:`splitOpacity${e.id}`,x1:"0",y1:"0",x2:x,y2:"0",children:[(0,$.tZ)("stop",{offset:1,stopColor:k?"#f17704":"orange",stopOpacity:0}),(0,$.tZ)("stop",{offset:0,stopColor:k?"#f17704":"orange",stopOpacity:1})]})}),(0,$.tZ)(On.x,{dataKey:"dne",stroke:"red",name:"Current Damage"}),o&&(0,$.tZ)(qi.u,{type:"monotone",dataKey:"est",stroke:"grey",dot:!1,fill:"grey",legendType:"none",tooltipType:"none",opacity:.5,activeDot:!1}),(0,$.tZ)(qi.u,{type:"monotone",dataKey:"estCons",stroke:k?"#f17704":"orange",dot:!1,fill:`url(#splitOpacity${e.id})`,opacity:.5,name:k?`Exact${o?" Constrained":""} Distribution`:"Estimated Distribution",activeDot:!1}),(0,$.tZ)(Hi.d,{x:Z(u),stroke:"red",strokeDasharray:"3 3",name:"Current Damage"}),(0,$.tZ)(Fi.q,{x:Z(u+v),y:B/2,shape:(0,$.tZ)("circle",{radius:1,opacity:.5})}),(0,$.tZ)(Tn.u,{content:(0,$.tZ)((({active:e})=>e?(0,$.BX)("div",{className:"custom-tooltip",children:[(0,$.tZ)("p",{className:"label"}),(0,$.tZ)("p",{className:"desc",children:_}),(0,$.tZ)("p",{className:"desc",children:K})]}):null),{}),cursor:!1})]})},e.id)})]})}function mr({slotKey:e}){const{database:t}=(0,b.useContext)(O.t),{data:a}=(0,b.useContext)(K.R),n=(0,b.useMemo)((()=>t.arts.get(a.get(ye.ri.art[e].id).value)),[e,a,t]);return(0,$.tZ)(zn.Z,{slotKey:e,artifactObj:n})}var fr=a(37214),gr=a(83660);function br(){var e;const{character:{key:t}}=(0,b.useContext)(_.K),{database:a}=(0,b.useContext)(O.t),{gender:r}=(0,I.Z)(),l=(0,G.Z)(),s=(0,b.useMemo)((()=>!a.arts.values.length),[a]),{buildSetting:o,buildSettingDispatch:c}=$t(t),{optimizationTarget:d,levelLow:u,levelHigh:m}=o,f=(0,A.Z)(t),{target:x}=null!=(e=null==f?void 0:f[t])?e:{},[y]=(0,i.NW)(),[,v]=(0,b.useState)(a.displayOptimize.get());(0,b.useEffect)((()=>a.displayOptimize.follow(((e,t)=>v(t)))),[a,v]);const C=(0,b.useDeferredValue)(y),k=(0,b.useDeferredValue)(o),B=(0,b.useMemo)((()=>{const{mainStatKeys:e,excludedLocations:i,artExclusion:r,levelLow:l,levelHigh:s,allowLocationsState:o,useExcludedArts:c}=C&&k;return a.arts.values.filter((a=>{if(!c&&r.includes(a.id))return!1;if(a.level<l)return!1;if(a.level>s)return!1;const d=e[a.slotKey];if(null!=d&&d.length&&!d.includes(a.mainStatKey))return!1;const u=(0,n.V7)(t),h="unequippedOnly"===o&&a.location&&a.location!==u,Z="customList"===o&&a.location&&a.location!==u&&i.includes(a.location);return!h&&!Z}))}),[a,t,C,k]),X=(0,b.useMemo)((()=>Object.fromEntries(B.map((({id:e})=>[e,!0])))),[B]),[j,E]=(0,b.useState)(void 0),[,T]=(0,i.NW)(),[P,D]=(0,b.useState)(!0),[M,L]=(0,b.useState)(!0),[R,z]=(0,b.useState)(!1),[N,W]=(0,b.useState)(0),{artifactsToShow:q,numPages:H,currentPageIndex:F,minObj0:V,maxObj0:U}=(0,b.useMemo)((()=>{if(!j)return{artifactsToShow:[],numPages:0,currentPageIndex:0,toShow:0,minObj0:0,maxObj0:0};const e=Math.ceil(j.artifacts.length/5),t=(0,at.re)(N,0,e-1),a=j.artifacts.slice(5*t,5*(t+1)),n=j.thresholds[0];return{artifactsToShow:a,numPages:e,currentPageIndex:t,minObj0:a.reduce(((e,t)=>Math.min(t.result.distr.lower,e)),n),maxObj0:a.reduce(((e,t)=>Math.max(t.result.distr.upper,e)),n)}}),[N,j]),Y=(0,b.useCallback)(((e,t)=>{if(!j)return;const a=5*t;j.calcSlowToIndex(a),W(t-1)}),[j]),J=(0,b.useCallback)((async()=>{var e,i,l,s;const{statFilters:c,optimizationTarget:d,mainStatKeys:u,levelLow:h,levelHigh:Z,artSetExclusion:p}=o;if(!Ci.dG)return;if(!t||!d)return;const m=(0,A.V)(a,t,0,[]);if(!m)return;const f=null==(e=(0,yt.Qo)(m.teamData,r,t)[t])?void 0:e.target.data[0];if(!f)return;Object.assign(f,(0,yt.b3)([f,ji]));const g=(0,Ci.Hm)(null!=(i=f.display)?i:{},d);if(!g)return;E(void 0),W(0);const b=Object.entries(c).flatMap((([e,t])=>t.filter((e=>!e.disabled)).map((t=>{var a,n;const i=(0,Ci.Hm)(null!=(a=f.display)?a:{},JSON.parse(e));return{value:i,minimum:"%"===(null==(n=i.info)?void 0:n.unit)?t.value/100:t.value}})))),x=null!=(l=null==(s=a.chars.get(t))?void 0:s.equippedArtifacts)?l:{},y=Object.fromEntries(n.Ex.map((e=>{var t;const n=a.arts.get(null!=(t=x[e])?t:"");return[e,n?ur(n):void 0]}))),v=Object.fromEntries(n.Ex.map((e=>{var t,n;const i=a.arts.get(null!=(t=x[e])?t:"");return[e,null!=(n=null==i?void 0:i.setKey)?n:""]})));const C=[g,...b.map((e=>e.value))],w=(0,vt.tL)(C,f,(({path:[e]})=>"dyn"!==e)),k=a.arts.values.filter((e=>5===e.rarity)).filter((function(e){const t=Object.assign({},v);t[e.slotKey]=e.setKey;const a={};if(n.Ex.forEach((e=>{var n;return a[t[e]]=(null!=(n=a[t[e]])?n:0)+1})),!Object.entries(a).every((([e,t])=>{if(!p[e])return!0;switch(t){case 0:case 1:return!0;case 2:case 3:return!p[e].includes(2);case 4:case 5:return!p[e].includes(4);default:throw Error("error in respectSetExclude: num > 5")}})))return!1;if(!p.rainbow)return!0;switch(Object.values(a).reduce(((e,t)=>e+t%2),0)){case 0:case 1:return!0;case 2:case 3:return!p.rainbow.includes(2);case 4:case 5:return!p.rainbow.includes(4);default:throw Error("error in respectSex: nRainbow > 5")}})).filter((e=>P||20!==e.level)).filter((e=>{var t,a;return!R||!(null!=(t=u[e.slotKey])&&t.length)||(null==(a=u[e.slotKey])?void 0:a.includes(e.mainStatKey))})).filter((e=>!R||h<=e.level&&e.level<=Z)),S=new UpOptCalculator(w,[-1/0,...b.map((e=>e.minimum))],y,k);S.calc4th=M,S.calcFastAll(),S.calcSlowToIndex(5),E(S)}),[o,t,a,r,P,R,M]),Q=(0,b.useMemo)((()=>x&&f&&{data:x,teamData:f}),[x,f]),ee=H>1&&(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.BX)(ue.ZP,{container:!0,children:[(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,children:(0,$.tZ)(Wi.Z,{count:H,page:F+1,onChange:Y})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(xr,{numShowing:q.length,total:null==j?void 0:j.artifacts.length})})]})})});return(0,$.BX)(h.Z,{display:"flex",flexDirection:"column",gap:1,children:[s&&(0,$.tZ)(mt,{}),Q&&(0,$.tZ)(K.R.Provider,{value:Q,children:(0,$.BX)(fr.Z,{spacing:1,children:[(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.BX)(ue.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(h.Z,{children:(0,$.tZ)(ut.Z,{characterKey:t,onClickTeammate:l})}),(0,$.tZ)(Pa,{})]}),(0,$.tZ)(ue.ZP,{item:!0,xs:12,sm:6,lg:9,display:"flex",flexDirection:"column",gap:1,children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.BX)(ue.ZP,{item:!0,lg:4,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(w.Z,{children:(0,$.BX)(p.Z,{children:[(0,$.tZ)("span",{children:"Optimization Target: "}),(0,$.tZ)(In.Z,{optimizationTarget:d,setTarget:e=>c({optimizationTarget:e}),disabled:!1})]})}),(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.tZ)(_i,{disabled:!1})})}),R&&(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,$.tZ)(ct.Z,{levelLow:u,levelHigh:m,setLow:e=>c({levelLow:e}),setHigh:e=>c({levelHigh:e}),setBoth:(e,t)=>c({levelLow:e,levelHigh:t}),disabled:!1}),(0,$.tZ)(p.Z,{children:(0,$.tZ)(vi,{disabled:!1,filteredArtIdMap:X})})]})]}),(0,$.BX)(ue.ZP,{item:!0,lg:8,display:"flex",flexDirection:"column",gap:1,children:[(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.tZ)(Sa,{disabled:!1})})}),(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{startIcon:P?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),color:P?"success":"secondary",onClick:()=>D(!P),children:"show lvl 20"})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{startIcon:M?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),color:M?"success":"secondary",onClick:()=>L(!M),children:"compute 4th sub"})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{startIcon:R?(0,$.tZ)(fe.Z,{}):(0,$.tZ)(ge.Z,{}),color:R?"success":"secondary",onClick:()=>z(!R),children:"enable filters"})})]})})})]})]})})]}),(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(g.Z,{disabled:!t||!d||!(0,Ci.Hm)(null==x?void 0:x.getDisplay(),d),color:t?"success":"warning",onClick:J,startIcon:(0,$.tZ)(Ni.Z,{}),children:"Calc Upgrade Priority"})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(S.Hn,{size:"small"})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(S.oX,{size:"small"})})]})})}),ee,s&&(0,$.tZ)(gr.Z,{}),(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:600,minHeight:5e3}}),children:q.map(((e,t)=>{var a;return(0,$.tZ)(h.Z,{children:(0,$.tZ)(Zr,{upgradeOpt:e,thresholds:null!=(a=null==j?void 0:j.thresholds)?a:[],objMax:U,objMin:V,calcExactCallback:()=>{const e=5*F+t;null==j||j.calcExact(e),T()}})},e.id)}))}),ee]})})]})}function xr({numShowing:e,total:t}){return(0,$.tZ)(Y.Z,{color:"text.secondary",children:(0,$.BX)(x.cC,{i18nKey:"showingNum",count:e,value:t,children:["Showing ",{count:e}," out of ",{value:t}," Artifacts"]})})}const yr=a.p+"Character_Albedo_Card.5892308f446f759f.png",vr=a.p+"Character_Alhaitham_Card.390618cfb70f0e4e.jpg",Cr=a.p+"Character_Aloy_Card.b6b990337b74f55f.png",wr=a.p+"Character_Amber_Card.2830ac6d2ff3846d.jpg",kr=a.p+"Character_Arataki_Itto_Card.e1e874752d65877c.jpg",Sr=a.p+"Character_Baizhu_Card.19f716d36f154360.jpg",Br=a.p+"Character_Barbara_Card.f372476873df3b6d.jpg",Xr=a.p+"Character_Beidou_Card.916c73f4f4a3ca3c.jpg",_r=a.p+"Character_Bennett_Card.25f8771de05532d0.jpg",Kr=a.p+"Character_Candace_Card.6353e91b7bcd4404.jpg",jr=a.p+"Character_Charlotte_Card.d62569d3d856b446.jpg",Er=a.p+"Character_Chongyun_Card.1770f1995289db9c.jpg",Tr=a.p+"Character_Collei_Card.aaa7e8dc2183674d.jpg",Pr=a.p+"Character_Cyno_Card.65e14ca6391b2f37.jpg",Or=a.p+"Character_Dehya_Card.eeff4efcde0ab4f5.jpg",Dr=a.p+"Character_Diluc_Card.18a7a83ac9ce0b87.jpg",Mr=a.p+"Character_Diona_Card.21bd261dfcfe1c21.png",Ir=a.p+"Character_Dori_Card.ab5ef6d6304aec80.jpg",Ar=a.p+"Character_Eula_Card.e680ce8ea2567c4f.png",Lr=a.p+"Character_Faruzan_Card.8e06d53607285885.jpg",Rr=a.p+"Character_Fischl_Card.d45651a83cfbca82.jpg",zr=a.p+"Character_Freminet_Card.9d2a6e594423439d.jpg",Gr=a.p+"Character_Furina_Card.a50ca164f1c3f956.jpg",$r=a.p+"Character_Ganyu_Card.5dc050fe16cea049.png",Nr=a.p+"Character_Gorou_Card.50bf591a764d2242.png",Wr=a.p+"Character_Hu_Tao_Card.d087463aac3ba35f.png",qr=a.p+"Character_Jean_Card.36b2f258f4290f55.jpg",Hr=a.p+"Character_Kaeya_Card.b2645bca5fa7a637.jpg",Fr=a.p+"Character_Kaveh_Card.7f11be5aaf366a88.jpg",Vr=a.p+"Character_Kamisato_Ayaka_Card.e481f78f6bb51a31.png",Ur=a.p+"Character_Kamisato_Ayato_Card.c32d0bbba107a804.png",Yr=a.p+"Character_Kazuha_Card.09ababa93ec3a3e2.png",Jr=a.p+"Character_Keqing_Card.ed7c0168559732f6.jpg",Qr=a.p+"Character_Kirara_Card.f5792590c4f5a97d.jpg",el=a.p+"Character_Klee_Card.e0ee4daa68e99a52.jpg",tl=a.p+"Character_Kujou_Sara_Card.1f934a5832be2b5c.jpg",al=a.p+"Character_Kuki_Shinobu_Card.3247590264aa41ec.jpg",nl=a.p+"Character_Layla_Card.1e4a55ea008f4fa2.jpeg",il=a.p+"Character_Lisa_Card.4966ba74ac03470a.jpg",rl=a.p+"Character_Lyney_Card.83574b5d5adf4c43.jpg",ll=a.p+"Character_Lynette_Card.1a7ba1c24c9aa9d3.jpg",sl=a.p+"Character_Mika_Card.280a1899f15cfea5.jpg",ol=a.p+"Character_Mona_Card.d14df945153b29c3.jpg",cl=a.p+"Character_Nahida_Card.c01ab425bddc31ae.jpeg",dl=a.p+"Character_Navia_Card.2abe7fc6b3dfd08f.jpg",ul=a.p+"Character_Neuvillette_Card.d775e9330c010b45.jpg",hl=a.p+"Character_Nilou_Card.13f5e94ed5181b37.jpg",Zl=a.p+"Character_Ningguang_Card.cd89f11944f1c9cd.jpg",pl=a.p+"Character_Noelle_Card.394f26d7473fd2ad.jpg",ml=a.p+"Character_Qiqi_Card.8728d970279d46ac.jpg",fl=a.p+"Character_Raiden_Shogun_Card.56a2190f00c137f3.png",gl=a.p+"Character_Razor_Card.1b116c57394d4b1b.jpg",bl=a.p+"Character_Rosaria_Card.8267339e414b4b96.png",xl=a.p+"Character_Sangonomiya_Kokomi_Card.843fc41e00f54a04.jpg",yl=a.p+"Character_Sayu_Card.5d2a94faea5e0c8e.png",vl=a.p+"Character_Shenhe_Card.883f751b234b9ec6.jpg",Cl=a.p+"Character_Shikanoin_Heizou_Card.e3c6c8b01018558e.png",wl=a.p+"Character_Somnia_Card.36432f04e4174367.png",kl=a.p+"Character_Sucrose_Card.a5b72ffa09e14920.jpg",Sl=a.p+"Character_Tartaglia_Card.daa075230d685675.png",Bl=a.p+"Character_Thoma_Card.8aaf239f62fe5ce8.jpg",Xl=a.p+"Character_Tighnari_Card.c59a95c5d6c8e80b.jpg",_l=a.p+"Character_Venti_Card.53c36f1f18e39e8c.jpg",Kl=a.p+"Character_Wanderer_Card.9280e378fab9bec7.jpg",jl=a.p+"Character_Wriothesley_Card.85c1fd9bd1edf599.jpg",El=a.p+"Character_Xiangling_Card.5693675f27b0f2d7.jpg",Tl=a.p+"Character_Xiao_Card.505ee35780a80258.jpg",Pl=a.p+"Character_Xingqiu_Card.7eb5998349f9541d.jpg",Ol=a.p+"Character_Xinyan_Card.592529410cb0ab30.jpg",Dl=a.p+"Character_Yae_Miko_Card.4ad3e897b1e3a097.png",Ml=a.p+"Character_Yanfei_Card.0e3112d6ef574c1a.png",Il=a.p+"Character_Yaoyao_Card.b1085e13b40477e1.jpg",Al=a.p+"Character_Yelan_Card.3a483ca01484e384.jpg",Ll=a.p+"Character_Yoimiya_Card.cd7bc5df84521f72.png",Rl=a.p+"Character_Yun_Jin_Card.f980c03bc03f7f1d.jpg",zl=a.p+"Character_Zhongli_Card.34830d011897679b.png",Gl={Albedo:yr,Alhaitham:vr,Aloy:Cr,Amber:wr,AratakiItto:kr,Baizhu:Sr,Barbara:Br,Beidou:Xr,Bennett:_r,Candace:Kr,Charlotte:jr,Chongyun:Er,Collei:Tr,Cyno:Pr,Dehya:Or,Diluc:Dr,Diona:Mr,Dori:Ir,Eula:Ar,Faruzan:Lr,Fischl:Rr,Freminet:zr,Furina:Gr,Ganyu:$r,Gorou:Nr,HuTao:Wr,Jean:qr,KaedeharaKazuha:Yr,Kaeya:Hr,KamisatoAyaka:Vr,KamisatoAyato:Ur,Kaveh:Fr,Keqing:Jr,Kirara:Qr,Klee:el,KujouSara:tl,KukiShinobu:al,Layla:nl,Lisa:il,Lyney:rl,Lynette:ll,Mika:sl,Mona:ol,Nahida:cl,Navia:dl,Neuvillette:ul,Nilou:hl,Ningguang:Zl,Noelle:pl,Qiqi:ml,RaidenShogun:fl,Razor:gl,Rosaria:bl,SangonomiyaKokomi:xl,Sayu:yl,Shenhe:vl,ShikanoinHeizou:Cl,Somnia:wl,Sucrose:kl,Tartaglia:Sl,Thoma:Bl,Tighnari:Xl,TravelerF:a.p+"Traveler_Female_Card.fa3a506cfdb64634.jpg",TravelerM:a.p+"Traveler_Male_Card.68e79e7eeb25b514.jpg",Venti:_l,Wanderer:Kl,Wriothesley:jl,Xiangling:El,Xiao:Tl,Xingqiu:Pl,Xinyan:Ol,YaeMiko:Dl,Yanfei:Ml,Yaoyao:Il,Yelan:Al,Yoimiya:Ll,YunJin:Rl,Zhongli:zl};var $l=a(55290),Nl=a(16068),Wl=a(66147),ql=a(21194),Hl=a(36674),Fl=a(15132),Vl=a(85469),Ul=a(49810),Yl=a(86432),Jl=a(23883),Ql=a(71179),es=a(96580),ts=a(73501),as=a(29687);let ns,is=e=>e;function rs({artId:e,weaponId:t}){const{t:a}=(0,x.$G)("page_character"),[n,r,l]=(0,i.aV)(!1);return(0,$.BX)($.HY,{children:[(0,$.tZ)(ne.Z,{open:n,onClose:l,containerProps:{maxWidth:"xl"},children:(0,$.tZ)(ls,{artId:e,weaponId:t,onHide:l})}),(0,$.tZ)(Jl.Z,{title:(0,$.tZ)(Y.Z,{children:a(ns||(ns=is`tabEquip.compare`))}),placement:"top",arrow:!0,children:(0,$.tZ)(g.Z,{color:"info",size:"small",onClick:r,children:(0,$.tZ)(as.Z,{})})})]})}function ls({artId:e,weaponId:t,onHide:a}){const{database:n}=(0,b.useContext)(O.t),{character:{key:i,equippedArtifacts:r}}=(0,b.useContext)(_.K),{buildSetting:{mainStatAssumptionLevel:l}}=$t(i),{data:s}=(0,b.useContext)(K.R),o=(0,b.useMemo)((()=>{const t=n.arts.get(null!=e?e:""),a=(0,at.vU)(r,((e,a)=>a===(null==t?void 0:t.slotKey)?t:n.arts.get(e)));return Object.values(a).filter((e=>e))}),[n,r,e]),c=(0,A.Z)(i,l,o,t?n.weapons.get(t):void 0),d=(0,b.useMemo)((()=>c&&{data:c[i].target,teamData:c,oldData:s}),[i,c,s]);return(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:600}),children:d&&(0,$.tZ)(K.R.Provider,{value:d,children:(0,$.tZ)(yn,{compareBuild:!0,extraButtonsLeft:(0,$.BX)($.HY,{children:[(0,$.tZ)(S.Hn,{size:"small"}),(0,$.tZ)(S.oX,{size:"small"})]}),extraButtonsRight:(0,$.tZ)(g.Z,{size:"small",color:"error",onClick:a,children:(0,$.tZ)(nt.Z,{})})})})})}let ss,os=e=>e;const cs={xs:6,sm:6,md:9,lg:12,xl:12},ds=(0,b.lazy)((()=>Promise.resolve().then(a.bind(a,22537))));function us({onChangeId:e,slotKey:t,show:a,onClose:n}){const{t:r}=(0,x.$G)("page_character"),{database:l}=(0,b.useContext)(O.t),s=(0,b.useCallback)((t=>{e(t),n()}),[e,n]),o=(0,b.useCallback)(((e,a)=>Object.assign({},e,a,{slotKeys:[t]})),[t]),[c,d]=(0,b.useReducer)(o,Object.assign({},(0,si.Af)(),{slotKeys:[t]})),[u,m]=(0,i.NW)();(0,b.useEffect)((()=>l.arts.followAny(m)),[l,m]);const f=(0,i.JT)(),g=(0,b.useMemo)((()=>(0,si.EM)()),[]),y=(0,b.useMemo)((()=>{const e=(0,at.CZ)(c,g);return u&&l.arts.values.filter(e).map((e=>e.id)).slice(0,cs[f])}),[u,l,g,c,f]);return(0,$.tZ)(ne.Z,{open:a,onClose:n,containerProps:{maxWidth:"xl"},children:(0,$.BX)(C.Z,{children:[(0,$.BX)(p.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$.BX)(Y.Z,{variant:"h6",children:[t?(0,$.tZ)(ae.Z,{src:Ga.CL.slot[t]}):null," ",r(ss||(ss=os`tabEquip.swapArt`))]}),(0,$.tZ)(k.Z,{onClick:n})]}),(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{children:[(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,$.tZ)(ds,{filterOption:c,filterOptionDispatch:d,filteredIds:y,disableSlotFilter:!0})}),(0,$.tZ)(h.Z,{mt:1,children:(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,$.tZ)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:y.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(Zn.Z,{artifactId:e,extraButtons:(0,$.tZ)(rs,{artId:e}),onClick:s})},e)))})})})]})]})})}var hs=a(92252),Zs=a(18571),ps=a(64262),ms=a(54578),fs=a(7794);let gs,bs=e=>e;const xs=(0,xi.X)([...n.U1]);function ys({onChangeId:e,weaponTypeKey:t,show:a,onClose:r}){const{t:l}=(0,x.$G)(["page_character","page_weapon","weaponNames_gen"]),{database:s}=(0,b.useContext)(O.t),[o,c]=(0,b.useState)(!1),d=(0,b.useCallback)((t=>{e(t),r()}),[e,r]),[u,Z]=(0,b.useState)(""),m=(0,b.useCallback)((e=>{Z(s.weapons.new((0,fs.xg)(e)))}),[s,Z]),f=(0,b.useCallback)((()=>Z("")),[]),[y,v]=(0,i.NW)();(0,b.useEffect)((()=>s.weapons.followAny(v)),[v,s]);const[w,S]=(0,b.useState)([5,4,3]),[B,X]=(0,b.useState)(""),_=(0,b.useDeferredValue)(B),K=(0,b.useMemo)((()=>{var e,a;return null!=(e=y&&s.weapons.values.filter((0,at.CZ)({weaponType:t,rarity:w,name:_},(0,ms.Xg)())).sort((0,at.ef)(null!=(a=ms.gd.level)?a:[],!1,(0,ms.Sn)())).map((e=>e.id)))?e:[]}),[y,s,w,t,_]);return(0,$.tZ)(ne.Z,{open:a,onClose:r,children:(0,$.BX)(C.Z,{children:[(0,$.tZ)(b.Suspense,{fallback:!1,children:(0,$.tZ)(Zs.default,{show:o,onHide:()=>c(!1),onSelect:m,weaponTypeFilter:t})}),(0,$.tZ)(b.Suspense,{fallback:!1,children:(0,$.tZ)(ps.default,{weaponId:u,footer:!0,onClose:f})}),(0,$.tZ)(p.Z,{sx:{py:1},children:(0,$.BX)(ue.ZP,{container:!0,children:[(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,children:(0,$.BX)(Y.Z,{variant:"h6",children:[t?(0,$.tZ)(ae.Z,{src:Ga.CL.weaponTypes[t]}):null," ",l(gs||(gs=bs`page_character:tabEquip.swapWeapon`))]})}),(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(k.Z,{onClick:r})})]})}),(0,$.tZ)(F.Z,{}),(0,$.BX)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(ft.Z,{sx:{height:"100%"},value:w,size:"small",children:n.U1.map((e=>(0,$.tZ)(ot.Z,{value:e,onClick:()=>S(xs(w,e)),children:(0,$.BX)(h.Z,{display:"flex",children:[(0,$.tZ)("strong",{children:e}),(0,$.tZ)(ea.Z,{})]})},e)))})}),(0,$.tZ)(ue.ZP,{item:!0,flexGrow:1,children:(0,$.tZ)(Mt.Z,{autoFocus:!0,size:"small",value:B,onChange:e=>X(e.target.value),label:l("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,$.tZ)(g.Z,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:(0,$.tZ)(hs.Z,{}),children:l("page_weapon:addWeapon")}),(0,$.tZ)(ue.ZP,{container:!0,spacing:1,children:K.map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,$.tZ)(ts.Z,{weaponId:e,onClick:d,extraButtons:(0,$.tZ)(rs,{weaponId:e})})},e)))})]})]})})}let vs,Cs,ws,ks,Ss,Bs,Xs,_s=e=>e;const Ks=(0,b.lazy)((()=>Promise.resolve().then(a.bind(a,64262))));function js(){var e;const{character:{equippedWeapon:t,key:a},characterSheet:i}=(0,b.useContext)(_.K),{teamData:r,data:l}=(0,b.useContext)(K.R),s=null==(e=r[a])?void 0:e.weaponSheet,[o,c]=(0,b.useState)(""),d=(0,b.useCallback)((()=>c(t)),[t]),u=(0,b.useCallback)((()=>c("")),[]);(0,b.useEffect)((()=>{o&&o!==t&&c(t)}),[o,t]);const Z=(0,qa.Z)(),p=(0,Yl.Z)(Z.breakpoints.up("lg")),m=(0,b.useMemo)((()=>s&&s.document.length>0&&(0,$.tZ)(w.Z,{children:(0,$.tZ)(h.Z,{p:1,children:(0,$.tZ)(aa.Z,{sections:s.document})})})),[s]),{rvFilter:f}=(0,Fl.Z)(a),g=(0,b.useDeferredValue)(f),x=(0,b.useMemo)((()=>new Set(g)),[g]);return(0,$.BX)(h.Z,{children:[(0,$.tZ)(b.Suspense,{fallback:!1,children:(0,$.tZ)(Ks,{weaponId:o,footer:!0,onClose:u,extraButtons:(0,$.tZ)(Ps,{weaponTypeKey:i.weaponTypeKey})})}),(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[p&&(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,lg:3,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[m&&m,(0,$.tZ)(Ds,{})]}),(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,$.tZ)(ts.Z,{weaponId:t,onEdit:d,canEquip:!0,extraButtons:(0,$.tZ)(Ts,{weaponTypeKey:i.weaponTypeKey})})}),n.Ex.map((e=>{var t;return(0,$.tZ)(ue.ZP,{item:!0,xs:12,sm:6,md:4,children:l.get(ye.ri.art[e].id).value?(0,$.tZ)(Zn.Z,{artifactId:null==(t=l.get(ye.ri.art[e].id).value)?void 0:t.toString(),effFilter:x,extraButtons:(0,$.tZ)(Os,{slotKey:e}),editorProps:{},canEquip:!0}):(0,$.tZ)(Es,{slotKey:e})},e)}))]}),!p&&(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[m&&(0,$.tZ)(ue.ZP,{item:!0,xs:12,md:6,lg:4,children:m}),(0,$.tZ)(ue.ZP,{item:!0,xs:12,md:6,lg:4,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,$.tZ)(Ds,{})})]})]})]})}function Es({slotKey:e}){const{character:{key:t}}=(0,b.useContext)(_.K),{database:a}=(0,b.useContext)(O.t),[r,l,s]=(0,i.aV)(),{t:o}=(0,x.$G)("artifact");return(0,$.BX)(w.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,$.tZ)(p.Z,{children:(0,$.BX)(Y.Z,{children:[(0,$.tZ)(It.Z,{iconProps:pe.mX,slotKey:e})," ",o(`slotName.${e}`)]})}),(0,$.tZ)(F.Z,{}),(0,$.BX)(h.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,$.tZ)(us,{slotKey:e,show:r,onClose:s,onChangeId:e=>a.arts.set(e,{location:(0,n.V7)(t)})}),(0,$.tZ)(g.Z,{onClick:l,color:"info",sx:{borderRadius:"1em"},children:(0,$.tZ)(Vl.Z,{sx:{height:100,width:100}})})]})]})}function Ts({weaponTypeKey:e}){const{t}=(0,x.$G)("page_character"),{character:{key:a}}=(0,b.useContext)(_.K),{database:r}=(0,b.useContext)(O.t),[l,s,o]=(0,i.aV)();return(0,$.BX)($.HY,{children:[(0,$.tZ)(Jl.Z,{title:(0,$.tZ)(Y.Z,{children:t(vs||(vs=_s`tabEquip.swapWeapon`))}),placement:"top",arrow:!0,children:(0,$.tZ)(g.Z,{color:"info",size:"small",onClick:s,children:(0,$.tZ)(Vl.Z,{})})}),(0,$.tZ)(ys,{weaponTypeKey:e,onChangeId:e=>r.weapons.set(e,{location:(0,n.V7)(a)}),show:l,onClose:o})]})}function Ps({weaponTypeKey:e}){const{t}=(0,x.$G)("page_character"),{character:{key:a}}=(0,b.useContext)(_.K),{database:r}=(0,b.useContext)(O.t),[l,s,o]=(0,i.aV)();return(0,$.BX)($.HY,{children:[(0,$.tZ)(g.Z,{color:"info",onClick:s,startIcon:(0,$.tZ)(Vl.Z,{}),children:t(Cs||(Cs=_s`tabEquip.swapWeapon`))}),(0,$.tZ)(ys,{weaponTypeKey:e,onChangeId:e=>r.weapons.set(e,{location:(0,n.V7)(a)}),show:l,onClose:o})]})}function Os({slotKey:e}){const{t}=(0,x.$G)("page_character"),{character:{key:a}}=(0,b.useContext)(_.K),{database:r}=(0,b.useContext)(O.t),[l,s,o]=(0,i.aV)();return(0,$.BX)($.HY,{children:[(0,$.tZ)(Jl.Z,{title:(0,$.tZ)(Y.Z,{children:t(ws||(ws=_s`tabEquip.swapArt`))}),placement:"top",arrow:!0,children:(0,$.tZ)(g.Z,{color:"info",size:"small",onClick:s,children:(0,$.tZ)(Vl.Z,{})})}),(0,$.tZ)(us,{slotKey:e,show:l,onClose:o,onChangeId:e=>r.arts.set(e,{location:(0,n.V7)(a)})})]})}function Ds(){const{t:e}=(0,x.$G)(["page_character","artifact"]),{database:t}=(0,b.useContext)(O.t),{character:a,character:{key:r,equippedArtifacts:l}}=(0,b.useContext)(_.K),{data:s}=(0,b.useContext)(K.R),o=(0,b.useMemo)((()=>!!Object.values(l).filter((e=>e)).length),[l]),c=(0,b.useCallback)((()=>{a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&Object.values(l).forEach((e=>t.arts.set(e,{location:""})))}),[a,t,l]),d=(0,b.useMemo)((()=>(0,ta.ND)(s)),[s]),{rvFilter:u}=(0,Fl.Z)(r),Z=(0,b.useCallback)((e=>t.charMeta.set(r,{rvFilter:e})),[t,r]),[m,f,y]=(0,i.aV)(),v=(0,b.useDeferredValue)(u),{rvField:k,rvmField:S}=(0,b.useMemo)((()=>{const{currentEfficiency:a,currentEfficiency_:i,maxEfficiency:r,maxEfficiency_:s}=Object.values(l).reduce(((e,a)=>{const i=t.arts.get(a);if(i){const{currentEfficiency:t,maxEfficiency:a}=Fa.Z.getArtifactEfficiency(i,new Set(v)),{currentEfficiency:r,maxEfficiency:l}=Fa.Z.getArtifactEfficiency(i,new Set(n._m));e.currentEfficiency=e.currentEfficiency+t,e.maxEfficiency=e.maxEfficiency+a,e.currentEfficiency_=e.currentEfficiency_+r,e.maxEfficiency_=e.maxEfficiency_+l}return e}),{currentEfficiency:0,currentEfficiency_:0,maxEfficiency:0,maxEfficiency_:0});return{rvField:{text:e(ks||(ks=_s`artifact:editor.curSubEff`)),value:a-i?(0,$.BX)("span",{children:[(0,$.tZ)(es.Z,{value:a,max:4500,valid:!0})," /"," ",(0,$.tZ)(es.Z,{value:i,max:4500,valid:!0})]}):(0,$.tZ)(es.Z,{value:a,max:4500,valid:!0})},rvmField:{text:e(Ss||(Ss=_s`artifact:editor.maxSubEff`)),canShow:()=>!!(i-s),value:r-s?(0,$.BX)("span",{children:[(0,$.tZ)(es.Z,{value:r,max:4500,valid:!0})," /"," ",(0,$.tZ)(es.Z,{value:s,max:4500,valid:!0})]}):(0,$.tZ)(es.Z,{value:r,max:4500,valid:!0})}}}),[e,v,l,t]);return(0,$.BX)(w.Z,{children:[o&&(0,$.tZ)(g.Z,{color:"error",onClick:c,fullWidth:!0,sx:{borderBottomRightRadius:0,borderBottomLeftRadius:0},children:e(Bs||(Bs=_s`tabEquip.unequipArts`))}),(0,$.tZ)(h.Z,{p:1,children:(0,$.BX)(de.Z,{spacing:1,children:[(0,$.BX)(C.Z,{children:[(0,$.tZ)(g.Z,{fullWidth:!0,color:"info",startIcon:(0,$.tZ)(Ul.Z,{}),sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},onClick:f,children:"RV Filter"}),(0,$.tZ)(ne.Z,{open:m,onClose:y,children:(0,$.tZ)(C.Z,{children:(0,$.BX)(p.Z,{children:[(0,$.tZ)(Y.Z,{textAlign:"center",gutterBottom:!0,variant:"h6",children:e(Xs||(Xs=_s`artifact:efficiencyFilter.title`))}),(0,$.tZ)(Ql.Z,{selectedKeys:u,onChange:Z})]})})}),(0,$.BX)(Le.lD,{children:[(0,$.tZ)(Le.ms,{field:k,component:Ze.ZP}),(null==S||null==S.canShow?void 0:S.canShow(s))&&(0,$.tZ)(Le.ms,{field:S,component:Ze.ZP})]})]}),d&&Object.entries(d).flatMap((([e,t])=>t.map((t=>(0,$.tZ)(na,{setKey:e,setNumKey:t},e+t)))))]})})]})}function Ms(){const e=(0,b.useRef)(),t=(0,b.useCallback)((()=>{var t;return null==e||null==(t=e.current)||null==t.scrollIntoView?void 0:t.scrollIntoView({behavior:"smooth"})}),[e]);return(0,$.BX)(de.Z,{spacing:1,children:[(0,$.BX)(ue.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,$.tZ)(ue.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,$.tZ)(As,{})}),(0,$.BX)(ue.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.tZ)(Is,{onClick:t}),(0,$.tZ)(w.Z,{sx:{flexGrow:1,p:1},children:(0,$.tZ)(rn,{})})]})]}),(0,$.tZ)(h.Z,{ref:e,children:(0,$.tZ)(js,{})})]})}function Is({onClick:e}){const{character:{equippedWeapon:t}}=(0,b.useContext)(_.K),{data:a}=(0,b.useContext)(K.R);return(0,$.BX)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(un,{weaponId:t,BGComponent:w.Z,onClick:e})}),n.Ex.map((t=>{var n;return(0,$.tZ)(ue.ZP,{item:!0,xs:1,children:(0,$.tZ)(tn,{artifactId:null==(n=a.get(ye.ri.art[t].id).value)?void 0:n.toString(),slotKey:t,BGComponent:w.Z,onClick:e})},t)}))]})}function As(){const{silly:e}=(0,b.useContext)(T.E),{characterSheet:t,character:{key:a,team:n}}=(0,b.useContext)(_.K),{gender:i}=(0,I.Z)(),{data:r}=(0,b.useContext)(K.R),l=(0,M.Z)(a),s=(0,y.s0)(),o=r.get(ye.ri.lvl).value,c=r.get(ye.ri.asc).value,d=r.get(ye.ri.constellation).value,u={auto:r.get(ye.ri.total.auto).value,skill:r.get(ye.ri.total.skill).value,burst:r.get(ye.ri.total.burst).value},Z={auto:r.get(ye.ri.total.autoBoost).value,skill:r.get(ye.ri.total.skillBoost).value,burst:r.get(ye.ri.total.burstBoost).value},p=(0,$l.V)(a,i),m=function(e,t){var a,n;switch(e){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return null!=(a=Gl[`Traveler${t}`])?a:"";default:return null!=(n=Gl[e])?n:""}}(a,i);return(0,$.BX)(w.Z,{sx:{height:"100%"},children:[e&&p?(0,$.tZ)(Ls,{src:p,level:o,ascension:c}):(0,$.tZ)(Rs,{src:m,level:o,ascension:c}),(0,$.BX)(h.Z,{children:[(0,$.tZ)(Wa.Z,{sx:{p:1},onClick:()=>s("talent"),children:(0,$.tZ)(ue.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((e=>{var a;return(0,$.tZ)(ue.ZP,{item:!0,xs:4,children:(0,$.tZ)(ql.Z,{badgeContent:u[e],color:Z[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,$.tZ)(h.Z,{component:"img",src:null==(a=t.getTalentOfKey(e))?void 0:a.img,width:"100%",height:"auto"})})},e)}))})}),(0,$.tZ)(Y.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,$.tZ)(ue.ZP,{container:!0,spacing:1,children:(0,Ci.w6)(1,6).map((e=>{var a;return(0,$.tZ)(ue.ZP,{item:!0,xs:4,children:(0,$.tZ)(Wa.Z,{onClick:()=>l({constellation:e===d?e-1:e}),children:(0,$.tZ)(h.Z,{component:"img",src:null==(a=t.getTalentOfKey(`constellation${e}`))?void 0:a.img,sx:Object.assign({},d>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,$.tZ)(Wa.Z,{sx:{p:1},onClick:()=>s("teambuffs"),children:(0,$.tZ)(ue.ZP,{container:!0,columns:3,spacing:1,children:(0,Ci.w6)(0,2).map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:1,height:"100%",children:n[e]?(0,$.tZ)(At.Z,{characterKey:n[e]}):(0,$.tZ)(At.D,{index:e})},e)))})})]})]})}function Ls({src:e,level:t,ascension:a}){const{characterSheet:n}=(0,b.useContext)(_.K);return(0,$.BX)(h.Z,{sx:{position:"relative"},children:[(0,$.tZ)(h.Z,{src:e,component:"img",width:"100%",height:"auto"}),(0,$.BX)(h.Z,{sx:{width:"100%",height:"100%"},children:[(0,$.tZ)(h.Z,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,$.tZ)(zs,{})}),(0,$.tZ)(Y.Z,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:(0,$.tZ)(Hl.q,{stars:n.rarity,colored:!0})}),(0,$.tZ)($s,{}),(0,$.tZ)(Gs,{level:t,ascension:a})]})]})}function Rs({src:e,level:t,ascension:a}){const{characterSheet:n}=(0,b.useContext)(_.K);return(0,$.BX)(h.Z,{sx:{position:"relative"},children:[(0,$.BX)(h.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,$.tZ)(Y.Z,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:(0,$.tZ)(Hl.q,{stars:n.rarity,colored:!0})}),(0,$.tZ)(h.Z,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,$.tZ)(zs,{})}),(0,$.tZ)($s,{}),(0,$.tZ)(Gs,{level:t,ascension:a})]}),(0,$.tZ)(h.Z,{src:e,component:"img",width:"100%",height:"auto"})]})}function zs(){var e;const{characterSheet:t}=(0,b.useContext)(_.K),a=t.elementKey;return(0,$.tZ)(be.Z,{color:a,sx:{height:"auto"},label:(0,$.BX)(Y.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,$.tZ)(Ce.Z,{ele:a}),(0,$.tZ)(h.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,$.tZ)(ae.Z,{src:null==(e=Ga.CL.weaponTypes)?void 0:e[t.weaponTypeKey]})]})})}function Gs({level:e,ascension:t}){return(0,$.tZ)(Y.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,$.tZ)(X.Z,{children:(0,$a.wQ)(e,t)})})}function $s(){const{character:{key:e}}=(0,b.useContext)(_.K),{database:t}=(0,b.useContext)(O.t),{favorite:a}=(0,Fl.Z)(e);return(0,$.tZ)(h.Z,{sx:{position:"absolute",left:0,top:0},children:(0,$.tZ)(Se.Z,{sx:{p:1},color:"error",onClick:()=>t.charMeta.set(e,{favorite:!a}),children:a?(0,$.tZ)(Nl.Z,{}):(0,$.tZ)(Wl.Z,{})})})}const Ns={xs:12,sm:6,md:4};function Ws(){const{character:e,characterSheet:t}=(0,b.useContext)(_.K),{data:a}=(0,b.useContext)(K.R),i=(0,M.Z)(e.key),r=a.get(ye.ri.asc).value,l=a.get(ye.ri.constellation).value,s=(0,qa.Z)(),o=(0,Yl.Z)(s.breakpoints.up("lg")),c=(0,b.useMemo)((()=>(0,Ci.w6)(1,n.o9).map((e=>(0,$.tZ)(Fs,{talentKey:`constellation${e}`,subtitle:`Constellation Lv. ${e}`,onClickTitle:()=>i({constellation:e===l?e-1:e})})))),[l,i]),d=(0,$.tZ)(ht.Z,{fullWidth:!0,title:`Constellation Lv. ${l}`,color:"primary",sx:{borderRadius:0},children:(0,Ci.w6)(0,n.o9).map((e=>(0,$.BX)(st.Z,{selected:l===e,disabled:l===e,onClick:()=>i({constellation:e}),children:["Constellation Lv. ",e]},e)))});return(0,$.BX)($.HY,{children:[(0,$.tZ)(qs,{}),(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[o&&(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.tZ)(w.Z,{children:d}),c.map(((e,t)=>(0,$.tZ)(h.Z,{sx:{opacity:l>=t+1?1:.5},children:e},t)))]}),(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((([e,t])=>(0,$.tZ)(ue.ZP,Object.assign({item:!0},Ns,{children:(0,$.tZ)(Fs,{talentKey:e,subtitle:t})}),e))),!!t.getTalentOfKey("sprint")&&(0,$.tZ)(ue.ZP,Object.assign({item:!0},Ns,{children:(0,$.tZ)(Fs,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!t.getTalentOfKey("passive")&&(0,$.tZ)(ue.ZP,Object.assign({item:!0},Ns,{children:(0,$.tZ)(Fs,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((([e,a,n])=>{const i=r>=n;return t.getTalentOfKey(e)?(0,$.tZ)(ue.ZP,Object.assign({item:!0,style:{opacity:i?1:.5}},Ns,{children:(0,$.tZ)(Fs,{talentKey:e,subtitle:a})}),e):null}))]}),!o&&(0,$.BX)(ue.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,$.tZ)(ue.ZP,{item:!0,xs:12,children:(0,$.tZ)(w.Z,{children:d})}),c.map(((e,t)=>(0,$.tZ)(ue.ZP,Object.assign({item:!0,sx:{opacity:l>=t+1?1:.5}},Ns,{children:e}),t)))]})]})]})}function qs(){const{data:e}=(0,b.useContext)(K.R),t=e.getDisplay().reaction;return(0,$.tZ)(w.Z,{children:(0,$.tZ)(p.Z,{children:(0,$.tZ)(ue.ZP,{container:!0,spacing:1,children:Object.entries(t).filter((([e,t])=>!t.isEmpty)).map((([e,t])=>(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(C.Z,{children:(0,$.tZ)(p.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,$.tZ)(Le.JW,{node:t})})})},e)))})})})}const Hs=[1,1,2,4,6,8,10];function Fs({talentKey:e,subtitle:t,onClickTitle:a}){const{character:{talent:n},characterSheet:i,characterDispatch:r}=(0,b.useContext)(_.K),{data:l}=(0,b.useContext)(K.R),s=(0,b.useCallback)((e=>(0,$.tZ)(Wa.Z,{onClick:a,children:e})),[a]),o=(0,b.useCallback)(((e,t)=>r({talent:Object.assign({},n,{[e]:t})})),[n,r]);let c=null;if(e in n){const t=l.get(ye.ri.total[`${e}Boost`]).value,a=l.get(ye.ri.total[e]).value,i=l.get(ye.ri.asc).value;c=(0,$.tZ)(ht.Z,{fullWidth:!0,title:`Talent Lv. ${a}`,color:t?"info":"primary",sx:{borderRadius:0},children:(0,Ci.w6)(1,Hs[i]).map((a=>(0,$.BX)(st.Z,{selected:n[e]===a,disabled:n[e]===a,onClick:()=>o(e,a),children:["Talent Lv. ",a+t]},a)))})}const d=i.getTalentOfKey(e);return(0,$.BX)(w.Z,{sx:{height:"100%"},children:[c,(0,$.BX)(p.Z,{children:[(0,$.tZ)(Ya.Z,{condition:!!a,wrapper:s,children:(0,$.BX)(ue.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,$.tZ)(ue.ZP,{item:!0,children:(0,$.tZ)(h.Z,{component:"img",src:null==d?void 0:d.img,sx:{width:60,height:"auto"}})}),(0,$.BX)(ue.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,$.tZ)(Y.Z,{variant:"h6",children:null==d?void 0:d.name}),(0,$.tZ)(Y.Z,{variant:"subtitle1",children:t})]})]})}),null!=d&&d.sections?(0,$.tZ)(aa.Z,{sections:d.sections,hideDesc:!0,hideHeader:t=>{var a;const n=null==(a=t.header)?void 0:a.action;if(n&&"string"!=typeof n){return n.props.children.props.key18.includes(e)}return!1}}):null]})]})}var Vs=a(88819),Us=a(75958),Ys=a(87923);let Js,Qs=e=>e;function eo(){return(0,$.tZ)(h.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,children:[(0,$.BX)(ue.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.tZ)(to,{}),(0,$.tZ)(ao,{})]}),(0,Ci.w6)(0,2).map((e=>(0,$.tZ)(ue.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,$.tZ)(no,{index:e})},e)))]})})}function to(){var e,t,a;const{data:n,oldData:i}=(0,b.useContext)(K.R),r=n.getTeamBuff(),l=[];return Object.entries(null!=(e=r.total)?e:{}).forEach((([e,t])=>!t.isEmpty&&0!==t.value&&l.push([["total",e],t]))),Object.entries(null!=(t=r.premod)?t:{}).forEach((([e,t])=>!t.isEmpty&&0!==t.value&&l.push([["premod",e],t]))),Object.entries(null!=(a=r.enemy)?a:{}).forEach((([e,t])=>!t.isEmpty&&"number"==typeof t.value&&0!==t.value&&l.push([["enemy",e],t]))),l.length?(0,$.BX)(w.Z,{children:[(0,$.tZ)(p.Z,{children:(0,$.tZ)(Y.Z,{children:"Team Buffs"})}),(0,$.tZ)(F.Z,{}),(0,$.tZ)(p.Z,{children:(0,$.tZ)(ue.ZP,{container:!0,children:l.map((([e,t])=>{var a;return t&&(0,$.tZ)(ue.ZP,{item:!0,xs:12,children:(0,$.tZ)(Le.JW,{node:t,oldValue:null==(a=(0,Ci.Hm)(null==i?void 0:i.getTeamBuff(),e))?void 0:a.value})},JSON.stringify(t.info))}))})})]}):null}function ao(){const{t:e}=(0,x.$G)("page_character"),{data:t}=(0,b.useContext)(K.R),{character:{team:a}}=(0,b.useContext)(_.K),n=a.reduce(((e,t)=>e+(t?1:0)),1);return(0,$.BX)($.HY,{children:[(0,$.tZ)(w.Z,{children:(0,$.tZ)(H.Z,{title:(0,$.BX)("span",{children:[e("tabTeambuff.team_reso")," ",(0,$.tZ)("strong",{children:(0,$.BX)(te.Z,{color:n>=4?"success":"warning",children:["(",n,"/4)"]})})," ",(0,$.tZ)(Zt.L,{title:(0,$.tZ)(Y.Z,{children:e(Js||(Js=Qs`tabTeambuff.resonance_tip`))})})]}),titleTypographyProps:{variant:"subtitle2"}})}),Ys.J.map(((e,a)=>(0,$.BX)(w.Z,{sx:{opacity:e.canShow(t)?1:.5},children:[(0,$.tZ)(H.Z,{title:(0,$.BX)("span",{children:[e.name," ",(0,$.tZ)(Zt.L,{title:(0,$.tZ)(Y.Z,{children:e.desc})})]}),action:e.icon,titleTypographyProps:{variant:"subtitle2"}}),e.canShow(t)&&(0,$.tZ)(F.Z,{}),e.canShow(t)&&(0,$.tZ)(p.Z,{children:(0,$.tZ)(aa.Z,{sections:e.sections,teamBuffOnly:!0,hideDesc:!0})})]},a)))]})}function no({index:e}){const{teamData:t}=(0,b.useContext)(K.R),{t:a}=(0,x.$G)("page_character"),{character:n,character:{key:i},characterDispatch:r}=(0,b.useContext)(_.K),l=n.team[e],s=(0,b.useMemo)((()=>[i,...n.team].filter(((t,a)=>a-1!==e))),[n.team,i,e]),o=(0,G.Z)(),c=(0,b.useCallback)((t=>r({type:"team",index:e,charKey:t})),[e,r]),d=t[l],u=(0,b.useMemo)((()=>{var e;return d&&{character:Object.assign({},d.character,{conditional:null!=(e=n.teamConditional[l])?e:{}}),characterSheet:d.characterSheet,characterDispatch:e=>{if(!l)return;if(!("conditional"in e))return;const{conditional:t}=e;t&&r({type:"teamConditional",teamMateKey:l,conditional:t})}}}),[n,l,d,r]),h=(0,b.useMemo)((()=>d&&{data:d.target,teamData:t}),[d,t]);return(0,$.BX)(w.Z,{sx:{overflow:"visible"},children:[(0,$.tZ)(so,{characterKey:l,team:s,setChar:c,label:a("teammate",{count:e+1})}),l&&u&&(0,$.tZ)(_.K.Provider,{value:u,children:h&&(0,$.tZ)(K.R.Provider,{value:h,children:(0,$.tZ)(ut.Z,{characterKey:l,onClickHeader:o,artifactChildren:(0,$.tZ)(_.K.Provider,{value:u,children:(0,$.tZ)(K.R.Provider,{value:h,children:(0,$.tZ)(io,{})})}),weaponChildren:(0,$.tZ)(_.K.Provider,{value:u,children:(0,$.tZ)(K.R.Provider,{value:h,children:(0,$.tZ)(ro,{})})}),characterChildren:(0,$.tZ)(_.K.Provider,{value:u,children:(0,$.tZ)(K.R.Provider,{value:h,children:(0,$.tZ)(lo,{})})}),isTeammateCard:!0})})})]})}function io(){const{data:e}=(0,b.useContext)(K.R),t=(0,b.useMemo)((()=>Object.entries((0,ta.ND)(e)).flatMap((([e,t])=>t.flatMap((t=>{var a;return null!=(a=(0,ta.Sk)(e).setEffectDocument(t))?a:[]}))))),[e]);return t?(0,$.tZ)(aa.Z,{sections:t,teamBuffOnly:!0}):null}function ro(){const{character:{key:e}}=(0,b.useContext)(_.K),{teamData:t}=(0,b.useContext)(K.R),a=t[e].weaponSheet;return a.document?(0,$.tZ)(aa.Z,{sections:a.document,teamBuffOnly:!0}):null}function lo(){const{character:{key:e}}=(0,b.useContext)(_.K),{teamData:t}=(0,b.useContext)(K.R),a=t[e].characterSheet,n=Object.values(a.talent).flatMap((e=>e.sections));return n?(0,$.tZ)(aa.Z,{sections:n,teamBuffOnly:!0}):null}function so({characterKey:e,team:t,label:a,setChar:i,autoCompleteProps:r={}}){const{t:l}=(0,x.$G)(["sillyWisher_charNames","page_character","sheet_gen","charNames_gen"]),{database:s}=(0,b.useContext)(O.t),{gender:o}=(0,I.Z)(),{silly:c}=(0,b.useContext)(T.E),d=(0,b.useCallback)(((e,t)=>{var a;return e.startsWith("Traveler")?`${l(`${t?"sillyWisher_charNames":"charNames_gen"}:${(0,n.Cs)(e,o)}`)} (${l(`sheet_gen:element.${null==(a=(0,P.m)(e,o))?void 0:a.elementKey}`)})`:l(`${t?"sillyWisher_charNames":"charNames_gen"}:${e}`)}),[l,o]),u=(0,b.useCallback)((e=>e?(0,$.tZ)(z.Z,{characterKey:e}):(0,$.tZ)(Vs.Z,{})),[]),h=(0,b.useCallback)((e=>s.charMeta.get(e).favorite),[s]),p=(0,b.useCallback)((({key:a})=>t.filter((t=>t&&t!==e)).includes(a)||a.startsWith("Traveler")&&t.some((e=>e.startsWith("Traveler")))),[t,e]),m=(0,b.useMemo)((()=>s.chars.keys.map((e=>({key:e,label:d(e,c),favorite:h(e),alternateNames:[d(e,!1)]}))).sort(((e,t)=>e.favorite&&!t.favorite?-1:!e.favorite&&t.favorite?1:e.label.localeCompare(t.label)))),[s.chars.keys,d,h,c]);return(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"text",width:100}),children:(0,$.tZ)(Us._,Object.assign({size:"small",label:a,options:m,valueKey:e,onChange:e=>i(null!=e?e:""),getOptionDisabled:p,toImg:u},r))})}var oo=a(71076),co=a(97183),uo=a(31114),ho=a(47712),Zo=a(23128),po=a(40584);let mo,fo=e=>e;function go(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const bo=b.lazy((()=>Promise.resolve().then(a.bind(a,18571))));function xo(){var e,t;const{database:a}=(0,b.useContext)(O.t),{data:n}=(0,b.useContext)(K.R),{character:i,character:{key:r,compareData:l},characterSheet:s,characterDispatch:o}=(0,b.useContext)(_.K),c=function(e,t){const{database:a}=(0,b.useContext)(O.t),[n,i]=(0,b.useState)((()=>a.charTCs.getWithInit(e,t)));return(0,b.useEffect)((()=>i(a.charTCs.getWithInit(e,t))),[a,e,t]),(0,b.useEffect)((()=>e?a.charTCs.follow(e,((e,t,a)=>"update"===t&&i(a))):void 0),[e,i,a]),n}(r,(0,fs.mT)(s.weaponTypeKey)),d=(0,b.useCallback)((e=>a.charTCs.set(r,e)),[r,a]),u=(0,b.useCallback)((()=>{d((0,po.O)((0,fs.mT)(s.weaponTypeKey)))}),[d,s]),p=(0,b.useCallback)((e=>{d(Object.assign({},c,{weapon:Object.assign({},c.weapon,e)}))}),[d,c]),m=(0,b.useCallback)(((e,t)=>{const a=(0,po.O)(e.key);a.artifact.substats.type=c.artifact.substats.type,a.weapon.level=e.level,a.weapon.ascension=e.ascension,a.weapon.refinement=e.refinement;const n={};t.forEach((e=>{var t;if(!e)return;const{slotKey:i,setKey:r,substats:l,mainStatKey:s,level:o,rarity:c}=e;a.artifact.slots[i].level=o,a.artifact.slots[i].statKey=s,a.artifact.slots[i].rarity=c,n[r]=(null!=(t=n[r])?t:0)+1,l.forEach((e=>{var t;e.key&&(a.artifact.substats.stats[e.key]=(null!=(t=a.artifact.substats.stats[e.key])?t:0)+e.accurateValue)}))})),a.artifact.sets=Object.fromEntries(Object.entries(n).map((([e,t])=>[e,3===t?2:5===t?4:1!==t||e.startsWith("PrayersFor")?t:0])).filter((([,e])=>e))),d(a)}),[c,d]),f=(0,y.TH)(),{build:x}=null!=(e=f.state)?e:{build:void 0};(0,b.useEffect)((()=>{if(!x)return;const e=a.weapons.get(i.equippedWeapon);m(e,x.map((e=>a.arts.get(e))))}),[x,a]);const v=(0,b.useCallback)((()=>{const e=a.weapons.get(i.equippedWeapon);m(e,Object.values(i.equippedArtifacts).map((e=>a.arts.get(e))).filter((e=>e)))}),[a,i.equippedArtifacts,i.equippedWeapon,m]),C=(0,b.useMemo)((()=>Object.assign({},c.weapon,{location:"",lock:!1,id:""})),[c]),k=(0,b.useCallback)((e=>{const t=(0,at.I8)(c);t.artifact=e,d(t)}),[c,d]),S=(0,b.useCallback)((e=>{const t=(0,at.I8)(c);t.artifact.substats.type=e,d(t)}),[c,d]),B=(0,b.useCallback)((e=>{const t=(0,at.I8)(c);t.artifact.substats.stats=e,d(t)}),[c,d]),X=(0,b.useDeferredValue)(c),j=(0,b.useMemo)((()=>{const e=Object.assign({},X.artifact.substats.stats);return Object.values(X.artifact.slots).forEach((({statKey:t,rarity:a,level:n})=>{var i;return e[t]=(null!=(i=e[t])?i:0)+(0,$a.Bv)(t,a,n)})),{art:(0,at.vU)(e,((e,t)=>t.endsWith("_")?(0,wt.aQ)(e/100):(0,wt.a9)(e))),artSet:(0,at.vU)(X.artifact.sets,(e=>(0,wt.a9)(e)))}}),[X]),E=(0,b.useMemo)((()=>({id:"",location:"",key:c.weapon.key,level:c.weapon.level,ascension:c.weapon.ascension,refinement:c.weapon.refinement,lock:!1})),[c]),T=(0,A.Z)(r,0,j,E),{target:P}=null!=(t=null==T?void 0:T[r])?t:{},D=(0,b.useMemo)((()=>{if(T&&P)return{data:P,teamData:T}}),[P,T]),M=(0,b.useMemo)((()=>{if(D)return Object.assign({},D,{oldData:l?n:void 0})}),[D,l,n]);return(0,$.BX)(de.Z,{spacing:1,children:[(0,$.tZ)(w.Z,{children:(0,$.BX)(h.Z,{sx:{display:"flex",gap:1,p:1},children:[(0,$.BX)(h.Z,{sx:{flexGrow:1,display:"flex",gap:1},children:[(0,$.tZ)(g.Z,{color:"info",onClick:v,startIcon:(0,$.tZ)(oo.Z,{}),children:"Copy from equipped"}),(0,$.tZ)(g.Z,{color:"error",onClick:u,startIcon:(0,$.tZ)(co.Z,{}),children:"Reset"})]}),(0,$.BX)(ft.Z,{exclusive:!0,value:l,onChange:(e,t)=>o({compareData:t}),size:"small",children:[(0,$.tZ)(ot.Z,{value:!1,disabled:!l,children:"Show TC stats"}),(0,$.tZ)(ot.Z,{value:!0,disabled:l,children:"Compare vs. equipped"})]})]})}),D?(0,$.tZ)(K.R.Provider,{value:D,children:(0,$.BX)(ue.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,$.BX)(ue.ZP,{item:!0,sx:{flexGrow:-1},children:[(0,$.tZ)(yo,{weapon:C,setWeapon:p,weaponTypeKey:s.weaponTypeKey}),(0,$.tZ)(vo,{artifactData:c.artifact,setArtifactData:k})]}),(0,$.tZ)(ue.ZP,{item:!0,sx:{flexGrow:1},children:(0,$.tZ)(So,{substats:c.artifact.substats.stats,setSubstats:B,substatsType:c.artifact.substats.type,setSubstatsType:S,mainStatKeys:Object.values(c.artifact.slots).map((e=>e.statKey))})})]})}):(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:500}),(0,$.tZ)(w.Z,{sx:{flexGrow:1,p:1},children:M?(0,$.tZ)(K.R.Provider,{value:M,children:(0,$.tZ)(rn,{})}):(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:500})})]})}function yo({weapon:e,setWeapon:t,weaponTypeKey:a}){const{key:n,level:r=0,refinement:l=1,ascension:s=0}=e,o=(0,sn.ub)(n),[c,d,u]=(0,i.aV)(),{data:Z}=(0,b.useContext)(K.R),p=(0,b.useMemo)((()=>e&&(0,yt.mP)([o.data,(0,yt.v0)(e)])),[o,e]);return(0,$.BX)(w.Z,{sx:{p:1,mb:1},children:[(0,$.tZ)(bo,{ascension:s,show:c,onHide:u,onSelect:e=>t({key:e}),weaponTypeFilter:a}),(0,$.BX)(h.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,$.BX)(h.Z,{display:"flex",gap:1,children:[(0,$.tZ)(h.Z,{className:`grad-${o.rarity}star`,component:"img",src:(0,Ga.Aq)(e.key,s>=2),sx:{flexshrink:1,flexBasis:0,maxWidth:"30%",borderRadius:1}}),(0,$.BX)(de.Z,{spacing:1,flexGrow:1,children:[(0,$.tZ)(g.Z,{fullWidth:!0,color:"info",sx:{flexGrow:1},onClick:d,children:(0,$.tZ)(h.Z,{sx:{maxWidth:"10em"},children:null==o?void 0:o.name})}),o.hasRefinement&&(0,$.tZ)(Zo.Z,{refinement:l,setRefinement:e=>t({refinement:e})})]})]}),(0,$.tZ)(B.Z,{level:r,ascension:s,setBoth:t,useLow:!o.hasRefinement}),(0,$.BX)(C.Z,{children:[(0,$.tZ)(H.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,$.tZ)(F.Z,{}),p&&(0,$.tZ)(Le.lD,{children:[ye.ri.weapon.main,ye.ri.weapon.sub,ye.ri.weapon.sub2].map((e=>{const t=p.get(e);return t.isEmpty||!t.value?null:(0,$.tZ)(Le.JW,{node:t,component:Ze.ZP},JSON.stringify(t.info))}))})]}),Z&&(null==o?void 0:o.document)&&(0,$.tZ)(aa.Z,{sections:o.document})]})]})}function vo({artifactData:e,setArtifactData:t}){const a=(0,b.useCallback)((a=>n=>{const i=(0,at.I8)(e);i.slots[a]=n,t(i)}),[e,t]),i=(0,b.useCallback)((a=>{const n=(0,at.I8)(e);n.sets=a,t(n)}),[e,t]);return(0,$.BX)(de.Z,{spacing:1,children:[(0,$.tZ)(w.Z,{sx:{p:1},children:(0,$.tZ)(de.Z,{spacing:1,children:n.Ex.map((t=>(0,$.tZ)(Co,{slotKey:t,slot:e.slots[t],setSlot:a(t)},t)))})}),(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,$.tZ)(wo,{artSet:e.sets,setArtSet:i})})]})}function Co({slotKey:e,slot:t,setSlot:a}){var i;const{level:r,statKey:l,rarity:s}=t,o=n.x1[e].stats,c=(0,b.useCallback)((e=>{a(Object.assign({},t,e))}),[t,a]),d=(0,b.useCallback)((e=>{var t;const a=null!=(t=n.F7[e])?t:0;c(r>a?{rarity:e,level:a}:{rarity:e})}),[r,c]);return(0,$.BX)(h.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,$.tZ)(It.Z,{slotKey:e}),(0,$.tZ)(C.Z,{sx:{height:"100%",minWidth:"5em",flexGrow:1,display:"flex"},children:1===o.length?(0,$.BX)(h.Z,{p:1,justifyContent:"center",alignItems:"center",width:"100%",display:"flex",gap:1,children:[(0,$.tZ)(Ce.C,{statKey:o[0],iconProps:pe.mX})," ",ve.ZP.getStr(o[0])]}):(0,$.tZ)(ht.Z,{sx:{px:0},fullWidth:!0,title:(0,$.tZ)(Ja,{statKey:l}),color:null!=(i=ve.ZP.getVariant(l))?i:"success",children:o.map((e=>(0,$.tZ)(st.Z,{disabled:l===e,onClick:()=>c({statKey:e}),children:(0,$.tZ)(Qa,{statKey:e})},e)))})}),(0,$.tZ)(ht.Z,{sx:{px:0},title:(0,$.BX)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[s," ",(0,$.tZ)(ea.Z,{fontSize:"inherit"})]}),children:[5,4,3].map((e=>(0,$.tZ)(st.Z,{disabled:s===e,onClick:()=>d(e),children:(0,$.BX)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[e," ",(0,$.tZ)(ea.Z,{fontSize:"inherit"})]})},e)))}),(0,$.tZ)(Ke.ZP,{startAdornment:"+",value:r,color:Fa.Z.levelVariant(r),onChange:e=>void 0!==e&&c({level:e}),sx:{borderRadius:1,pl:1,my:0,height:"100%"},inputProps:{sx:{pl:.5,width:"2em"},max:20,min:0}}),(0,$.tZ)(C.Z,{sx:{height:"100%",minWidth:"4em"},children:(0,$.tZ)(h.Z,{p:1,textAlign:"center",children:`${(0,$a.Jj)((0,$a.Bv)(l,s,r),ve.ZP.unit(l))}${ve.ZP.unit(l)}`})})]})}function wo({artSet:e,setArtSet:t}){const a=(0,b.useCallback)((a=>{a&&t(Object.assign({},e,{[a]:parseInt(Object.keys((0,ta.Sk)(a).setEffects)[0])}))}),[e,t]),n=(0,b.useCallback)((a=>n=>t(Object.assign({},e,{[a]:n}))),[e,t]),i=(0,b.useCallback)((a=>()=>{const n=(0,we.Z)(e,[a].map(go));t(Object.assign({},n))}),[e,t]),r=5-Object.values(e).reduce(((e,t)=>e+t),0);return(0,$.BX)(de.Z,{spacing:1,sx:{flexGrow:1},children:[Object.entries(e).map((([e,t])=>(0,$.tZ)(ko,{setKey:e,value:t,setValue:n(e),deleteValue:i(e),remaining:r},e))),(0,$.tZ)(w.Z,{sx:{flexGrow:1,overflow:"visible"},children:(0,$.tZ)(ho.Z,{artSetKey:"",setArtSetKey:a,label:"New Artifact Set",getOptionDisabled:({key:t})=>Object.keys(e).includes(t)||!t||Object.keys((0,ta.Sk)(t).setEffects).every((e=>parseInt(e)>r))})})]})}function ko({setKey:e,value:t,setValue:a,deleteValue:n,remaining:i}){const r=(0,ta.Sk)(e),l=(0,b.useMemo)((()=>t<4?[]:Object.keys(r.setEffects).filter((e=>{var t;return null==(t=r.setEffects[e])?void 0:t.document.some((e=>"states"in e))}))),[r,t]);return(0,$.BX)(w.Z,{children:[(0,$.BX)(h.Z,{display:"flex",children:[(0,$.tZ)(pn.Z,{artifactSheet:r,numInSet:t,children:(0,$.BX)(h.Z,{flexGrow:1,p:1,display:"flex",gap:1,alignItems:"center",children:[(0,$.tZ)(ae.Z,{size:2,src:(0,ra.jU)(e)}),(0,$.tZ)(h.Z,{children:r.setName}),(0,$.tZ)(uo.Z,{})]})}),(0,$.BX)(_e.Z,{children:[(0,$.tZ)(ht.Z,{size:"small",title:(0,$.BX)(h.Z,{whiteSpace:"nowrap",children:[t,"-set"]}),children:Object.keys(r.setEffects).map((e=>parseInt(e))).map((e=>(0,$.BX)(st.Z,{disabled:t===e||e>i+t,onClick:()=>a(e),children:[e,"-set"]},e)))}),(0,$.tZ)(g.Z,{color:"error",size:"small",onClick:n,children:(0,$.tZ)(it.Z,{})})]})]}),!!l.length&&(0,$.tZ)(de.Z,{spacing:1,sx:{p:1},children:l.map((t=>(0,$.tZ)(na,{setKey:e,setNumKey:parseInt(t),hideHeader:!0,conditionalsOnly:!0},t)))})]})}function So({substats:e,setSubstats:t,substatsType:a,setSubstatsType:i,mainStatKeys:r}){const l=(0,b.useCallback)((a=>n=>t(Object.assign({},e,{[a]:n}))),[e,t]),{t:s}=(0,x.$G)("page_character"),o=100*Object.entries(e).reduce(((e,[t,a])=>e+a/(0,$a.U9)(t)),0),c=Object.entries(e).reduce(((e,[t,n])=>e+n/(0,$a.U9)(t,void 0,a)),0);return(0,$.BX)(w.Z,{sx:{p:1,height:"100%"},children:[(0,$.BX)(h.Z,{sx:{mb:1,display:"flex",gap:1},children:[(0,$.tZ)(ht.Z,{fullWidth:!0,title:s(`tabTheorycraft.substatType.${a}`),children:n.Ar.map((e=>(0,$.tZ)(st.Z,{disabled:a===e,onClick:()=>i(e),children:s(`tabTheorycraft.substatType.${e}`)},e)))}),(0,$.tZ)(dt.Z,{title:(0,$.tZ)(Y.Z,{children:s(mo||(mo=fo`tabTheorycraft.maxTotalRolls`))}),placement:"top",children:(0,$.BX)(C.Z,{sx:{textAlign:"center",py:.5,px:1,minWidth:"15em",whiteSpace:"nowrap",display:"flex",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,$.BX)(te.Z,{color:c>45?"warning":void 0,children:["Rolls: ",(0,$.tZ)("strong",{children:c.toFixed(0)})]}),(0,$.BX)(te.Z,{color:c>45?"warning":void 0,children:["RV: ",(0,$.BX)("strong",{children:[o.toFixed(1),"%"]})]})]})})]}),(0,$.tZ)(de.Z,{spacing:1,children:Object.entries(e).map((([e,t])=>(0,$.tZ)(Bo,{statKey:e,value:t,setValue:l(e),substatsType:a,mainStatKeys:r},e)))})]})}function Bo({statKey:e,value:t,setValue:a,substatsType:n,mainStatKeys:i}){const{t:r}=(0,x.$G)("page_character"),l=(0,$a.U9)(e,5,n),[s,o]=(0,b.useState)((()=>t/l));(0,b.useEffect)((()=>o(t/l)),[t,l]);const c=ve.ZP.unit(e),d=s*l,u=s*l/(0,$a.U9)(e)*100,Z=i.reduce(((t,a)=>t+(a===e?1:0)),0),p=6*(5-Z),m=s-1e-4>p,f=(0,b.useCallback)((e=>a(e*l)),[a,l]);return(0,$.BX)(de.Z,{spacing:.5,children:[(0,$.BX)(h.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,$.BX)(C.Z,{sx:{p:.5,minWidth:"11em",flexGrow:1,display:"flex",gap:1,alignItems:"center",justifyContent:"center"},children:[(0,$.tZ)(Ce.C,{statKey:e,iconProps:{fontSize:"inherit"}}),ve.ZP.getStr(e),ve.ZP.unit(e)]}),(0,$.tZ)(dt.Z,{title:(0,$.tZ)(Y.Z,{children:r(Z?"tabTheorycraft.maxRollsMain":"tabTheorycraft.maxRolls",{value:p})}),placement:"top",children:(0,$.tZ)(C.Z,{sx:{textAlign:"center",p:.5,minWidth:"8em"},children:(0,$.BX)(te.Z,{color:m?"warning":void 0,children:["RV: ",(0,$.BX)("strong",{children:[u.toFixed(1),"%"]})]})})})]}),(0,$.BX)(h.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,$.tZ)(Ke.ZP,{color:d?"success":"primary",float:"%"===ve.ZP.unit(e),endAdornment:ve.ZP.unit(e)||(0,$.tZ)(h.Z,{width:"1em",component:"span"}),value:parseFloat(d.toFixed(2)),onChange:e=>void 0!==e&&a(e),sx:{borderRadius:1,px:1,height:"100%",width:"6em"},inputProps:{sx:{textAlign:"right"},min:0}}),(0,$.tZ)(C.Z,{sx:{px:2,flexGrow:1,display:"flex",gap:1,alignItems:"center",justifyContent:"center",overflow:"visible"},children:(0,$.tZ)(Sn.ZP,{size:"small",value:s,max:p,min:0,step:1,marks:!0,valueLabelDisplay:"auto",onChange:(e,t)=>o(t),onChangeCommitted:(e,t)=>f(t)})}),(0,$.tZ)(Ke.ZP,{color:t?m?"warning":"success":"primary",float:!0,startAdornment:(0,$.BX)(h.Z,{sx:{whiteSpace:"nowrap",width:"7em",display:"flex",justifyContent:"space-between"},children:[(0,$.BX)("span",{children:[(0,$a.Jj)(l,c),c]}),(0,$.tZ)("span",{children:"x"})]}),value:parseFloat(s.toFixed(2)),onChange:e=>void 0!==e&&a(e*l),sx:{borderRadius:1,px:1,my:0,height:"100%",width:"7em"},inputProps:{sx:{textAlign:"right",pr:.5},min:0,step:1}})]})]})}var Xo=a(51638);function _o(){const{character:e}=(0,b.useContext)(_.K),{key:t}=e,a=(0,G.Z)();if(!t.startsWith("Traveler"))return null;const i=n.UB.find((e=>t.toLowerCase().includes(e)));return i?(0,$.tZ)(ht.Z,{color:i,title:(0,$.tZ)("strong",{children:(0,Xo.el)(`element.${i}`)}),children:n.DZ.map((e=>(0,$.tZ)(st.Z,{selected:i===e,disabled:i===e,onClick:()=>a((0,n.vd)(e)),children:(0,$.tZ)("strong",{children:(0,$.tZ)(te.Z,{color:e,children:(0,Xo.el)(`element.${e}`)})})},e)))}):null}var Ko=a(2247),jo=a(96608);function Eo(){const{t:e}=(0,x.$G)("ui"),{database:t}=(0,b.useContext)(O.t),{character:a}=(0,b.useContext)(_.K),{key:n}=a,{gender:i}=(0,I.Z)(),r=(0,b.useCallback)((()=>t.dbMeta.set({gender:"F"===i?"M":"F"})),[i,t]);return n.startsWith("Traveler")?(0,$.BX)(g.Z,{onClick:r,startIcon:"F"===i?(0,$.tZ)(Ko.Z,{}):(0,$.tZ)(jo.Z,{}),children:[(0,$.tZ)("strong",{children:e(`gender.${i}`)})," "]}):null}let To,Po=e=>e;function Oo(){const e=(0,y.s0)(),{database:t}=(0,b.useContext)(O.t),a=(0,b.useCallback)((()=>e("/characters")),[e]),{characterKey:n}=(0,y.UO)();return!t.chars.keys.includes(n)?(0,$.tZ)(y.Fg,{to:"/characters"}):(0,$.tZ)(h.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:1e3}),children:n&&(0,$.tZ)(Do,{characterKey:n,onClose:a},n)})})}function Do({characterKey:e,onClose:t}){var a,i,r;const{silly:l}=(0,b.useContext)(T.E),s=(0,D.Z)(e),{gender:o}=(0,I.Z)(),c=(0,P.m)(e,o),d=(0,A.Z)(e),{target:u}=null!=(a=null==d?void 0:d[e])?a:{},{params:{tab:m="overview"}}=null!=(i=(0,y.bS)({path:"/characters/:charKey/:tab",end:!1}))?i:{params:{tab:"overview"}},{t:f}=(0,x.$G)(["sillyWisher_charNames","charNames_gen","page_character"]);(0,L.Z)((0,b.useMemo)((()=>`${f(`${l?"sillyWisher_charNames":"charNames_gen"}:${(0,n.Cs)(e,o)}`)} - ${f(`page_character:tabs.${m}`)}`),[f,l,e,o,m]));const g=(0,M.Z)(null!=(r=null==s?void 0:s.key)?r:""),v=(0,b.useMemo)((()=>{if(d&&u)return{data:u,teamData:d,oldData:void 0}}),[u,d]),X=(0,b.useMemo)((()=>{if(s&&c)return{character:s,characterSheet:c,characterDispatch:g}}),[s,c,g]),[O,z]=(0,b.useState)(void 0),[G,N]=(0,b.useState)(),q=(0,b.useMemo)((()=>({chartData:O,setChartData:z,graphBuilds:G,setGraphBuilds:N})),[O,G]);return(0,b.useEffect)((()=>{z(void 0),N(void 0)}),[e]),(0,$.tZ)(C.Z,{children:v&&X&&q?(0,$.tZ)(_.K.Provider,{value:X,children:(0,$.tZ)(K.R.Provider,{value:v,children:(0,$.tZ)(E.Provider,{value:q,children:(0,$.tZ)(j.B,{children:(0,$.BX)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,$.BX)(h.Z,{display:"flex",children:[(0,$.BX)(h.Z,{display:"flex",gap:1,flexWrap:"wrap",flexGrow:1,children:[(0,$.tZ)(W,{}),(0,$.tZ)(_o,{}),(0,$.tZ)(Eo,{}),(0,$.tZ)(Ao,{}),(0,$.tZ)(R.J,{}),(0,$.tZ)(Lo,{})]}),!!t&&(0,$.tZ)(k.Z,{onClick:t})]}),(0,$.BX)(h.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[s&&(0,$.tZ)(B.Z,{level:s.level,ascension:s.ascension,setBoth:g}),(0,$.tZ)(S.Hn,{size:"small"}),(0,$.tZ)(S.pg,{}),(0,$.tZ)(S.oX,{size:"small"})]}),(0,$.tZ)(w.Z,{children:(0,$.tZ)(Io,{tab:m})}),(0,$.tZ)(Mo,{}),(0,$.tZ)(w.Z,{children:(0,$.tZ)(Io,{tab:m})})]})})})})}):(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:1e3})})}function Mo(){return(0,$.tZ)(b.Suspense,{fallback:(0,$.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,$.BX)(y.Z5,{children:[(0,$.tZ)(y.AW,{index:!0,element:(0,$.tZ)(Ms,{})}),(0,$.tZ)(y.AW,{path:"/talent",element:(0,$.tZ)(Ws,{})}),(0,$.tZ)(y.AW,{path:"/teambuffs",element:(0,$.tZ)(eo,{})}),(0,$.tZ)(y.AW,{path:"/optimize",element:(0,$.tZ)(Ri,{})}),(0,$.tZ)(y.AW,{path:"/theorycraft",element:(0,$.tZ)(xo,{})}),Ci.dG&&(0,$.tZ)(y.AW,{path:"/upopt",element:(0,$.tZ)(br,{})})]})})}function Io({tab:e}){const{t}=(0,x.$G)("page_character"),a=Ci.dG?{minWidth:"16.6%"}:{minWidth:"20%"};return(0,$.BX)(m.Z,{value:e,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,$.tZ)(f.Z,{sx:a,value:"overview",label:t("tabs.overview"),icon:(0,$.tZ)(r.Z,{}),component:v.rU,to:""}),(0,$.tZ)(f.Z,{sx:a,value:"talent",label:t("tabs.talent"),icon:(0,$.tZ)(l.Z,{}),component:v.rU,to:"talent"}),(0,$.tZ)(f.Z,{sx:a,value:"teambuffs",label:t("tabs.teambuffs"),icon:(0,$.tZ)(s.Z,{}),component:v.rU,to:"teambuffs"}),(0,$.tZ)(f.Z,{sx:a,value:"optimize",label:t("tabs.optimize"),icon:(0,$.tZ)(o.Z,{}),component:v.rU,to:"optimize"}),(0,$.tZ)(f.Z,{sx:a,value:"theorycraft",label:t("tabs.theorycraft"),icon:(0,$.tZ)(c.Z,{}),component:v.rU,to:"theorycraft"}),Ci.dG&&(0,$.tZ)(f.Z,{sx:a,value:"upopt",label:t("tabs.upgradeopt"),icon:(0,$.tZ)(o.Z,{}),component:v.rU,to:"upopt"})]})}function Ao(){const{t:e}=(0,x.$G)("page_character"),[t,a,n]=(0,i.aV)(),{character:{bonusStats:r}}=(0,b.useContext)(_.K),l=Object.keys(r).length;return(0,$.BX)($.HY,{children:[(0,$.BX)(g.Z,{color:"info",startIcon:(0,$.tZ)(d.Z,{}),onClick:a,children:[e(To||(To=Po`addStats.title`)),!!l&&(0,$.tZ)(X.Z,{sx:{ml:1},color:"success",children:l})]}),(0,$.tZ)(Ne,{open:t,onClose:n})]})}function Lo(){const{onModalOpen:e}=(0,b.useContext)(j.M);return(0,$.BX)($.HY,{children:[(0,$.BX)(g.Z,{color:"info",startIcon:(0,$.tZ)(u.Z,{}),onClick:e,children:["Formulas ","&"," Calcs"]}),(0,$.tZ)(le,{})]})}},73501:(e,t,a)=>{a.d(t,{Z:()=>O});var n=a(16736),i=a(74155),r=a(54278),l=a(40535),s=a(22698),o=a(29754),c=a(75213),d=a(67550),u=a(79906),h=a(85801),Z=a(62197),p=a(7671),m=a(23883),f=a(83249),g=a(2784),b=a(11141),x=a(87833),y=a(50090),v=a(41653),C=a(26437),w=a(79410),k=a(36674),S=a(13499),B=a(34156),X=a(41319),_=a(2754),K=a(15030),j=a(30311),E=a(52903);let T,P=e=>e;function O({weaponId:e,onClick:t,onEdit:a,onDelete:O,canEquip:D=!1,extraButtons:M}){const{t:I}=(0,b.$G)(["page_weapon","ui"]),{database:A}=(0,g.useContext)(B.t),L=(0,j.Z)(e),R=null!=L&&L.key?(0,S.ub)(L.key):void 0,z=(0,g.useCallback)((e=>e.weaponTypeKey===(null==R?void 0:R.weaponType)),[R]),G=(0,g.useCallback)((a=>(0,E.tZ)(c.Z,{onClick:()=>null==t?void 0:t(e),children:a})),[t,e]),$=(0,g.useCallback)((e=>(0,E.tZ)(d.Z,{children:e})),[]),N=(0,g.useCallback)((t=>e&&A.weapons.set(e,{location:t})),[A,e]),W=(0,g.useMemo)((()=>R&&L&&(0,_.mP)([R.data,(0,_.v0)(L)])),[R,L]);if(!L||!R||!W)return null;const{level:q,ascension:H,refinement:F,id:V,location:U="",lock:Y}=L,J=W.get(X.ri.weapon.type).value,Q=[X.ri.weapon.main,X.ri.weapon.sub,X.ri.weapon.sub2].map((e=>W.get(e))),ee=(0,n.Aq)(L.key,H>=2);return(0,E.tZ)(g.Suspense,{fallback:(0,E.tZ)(u.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,E.BX)(x.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,E.BX)(C.Z,{condition:!!t,wrapper:G,falseWrapper:$,children:[(0,E.BX)(d.Z,{className:`grad-${R.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!t&&(0,E.tZ)(h.Z,{color:"primary",onClick:()=>A.weapons.set(V,{lock:!Y}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Y?(0,E.tZ)(r.Z,{}):(0,E.tZ)(l.Z,{})}),(0,E.BX)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,E.BX)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,E.tZ)(w.Z,{size:2,src:n.CL.weaponTypes[J]}),(0,E.tZ)(Z.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,E.tZ)("strong",{children:R.name})})]}),(0,E.BX)(Z.Z,{component:"span",variant:"h5",children:["Lv. ",q]}),(0,E.BX)(Z.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",i.SJ[H]]}),(0,E.BX)(Z.Z,{variant:"h6",children:["Refinement ",(0,E.tZ)("strong",{children:F})]}),(0,E.tZ)(k.q,{stars:R.rarity,colored:!0})]}),(0,E.tZ)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,E.tZ)(d.Z,{component:"img",src:null!=ee?ee:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,E.tZ)(p.Z,{children:Q.map((e=>e.info.name?(0,E.BX)(d.Z,{sx:{display:"flex"},children:[(0,E.BX)(Z.Z,{flexGrow:1,children:[e.info.icon," ",e.info.name]}),(0,E.tZ)(Z.Z,{children:(0,K.p)(e)})]},JSON.stringify(e.info)):null))})]}),(0,E.BX)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[(0,E.tZ)(d.Z,{sx:{flexGrow:1},children:D?(0,E.tZ)(y.W,{location:U,setLocation:N,filter:z,autoCompleteProps:{getOptionDisabled:e=>!e.key}}):(0,E.tZ)(v.Z,{location:U})}),(0,E.BX)(d.Z,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!a&&(0,E.tZ)(m.Z,{title:(0,E.tZ)(Z.Z,{children:I(T||(T=P`page_weapon:edit`))}),placement:"top",arrow:!0,children:(0,E.tZ)(f.Z,{color:"info",size:"small",onClick:()=>a(V),children:(0,E.tZ)(o.Z,{})})}),!!O&&(0,E.tZ)(f.Z,{color:"error",size:"small",onClick:()=>O(V),disabled:!!U||Y,children:(0,E.tZ)(s.Z,{})}),M]})]})]})})}},64262:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(16736),i=a(74155),r=a(54278),l=a(40535),s=a(7671),o=a(41075),c=a(67550),d=a(62197),u=a(80551),h=a(83249),Z=a(42523),p=a(56961),m=a(15873),f=a(2784),g=a(24264),b=a(87833),x=a(50090),y=a(23690),v=a(14836),C=a(39282),w=a(86512),k=a(69698),S=a(23128),B=a(36674),X=a(99487),_=a(31637),K=a(13499),j=a(34156),E=a(41319),T=a(2754),P=a(72550),O=a(55893),D=a(30311),M=a(52903);const I=f.lazy((()=>a.e(571).then(a.bind(a,18571))));function A({weaponId:e,footer:t=!1,onClose:a,extraButtons:A}){var L;const{data:R}=(0,f.useContext)(X.R),{database:z}=(0,f.useContext)(j.t),G=(0,D.Z)(e),{key:$="",level:N=0,refinement:W=1,ascension:q=0,lock:H,location:F="",id:V}=null!=G?G:{},U=$?(0,K.ub)($):void 0,Y=(0,f.useCallback)((t=>{z.weapons.set(e,t)}),[e,z]),{gender:J}=(0,O.Z)(),Q=(0,f.useMemo)((()=>F?(0,_.m)(z.chars.LocationToCharacterKey(F),J):void 0),[z,J,F]),ee=Q&&Q.weaponTypeKey,te=(0,f.useCallback)((e=>V&&z.weapons.set(V,{location:e})),[z,V]),ae=(0,f.useCallback)((e=>e.weaponTypeKey===(null==U?void 0:U.weaponType)),[U]),[ne,ie,re]=(0,P.aV)(),le=$?(0,n.Aq)($,q>=2):"";(0,f.useEffect)((()=>{if(U&&Y&&U.key===(null==G?void 0:G.key)&&U.rarity<=2&&(N>70||q>4)){const[e,t]=i.vF[0];Y({level:e,ascension:t})}}),[U,G,Y,N,q]);const se=(0,f.useMemo)((()=>U&&G&&(0,T.mP)([U.data,(0,T.v0)(G)])),[U,G]);return(0,M.tZ)(k.Z,{open:!!e,onClose:a,containerProps:{maxWidth:"md"},children:(0,M.BX)(b.Z,{children:[(0,M.tZ)(I,{ascension:q,show:ne,onHide:re,onSelect:e=>Y({key:e}),weaponTypeFilter:ee}),(0,M.tZ)(s.Z,{children:U&&se&&(0,M.BX)(o.ZP,{container:!0,spacing:1.5,children:[(0,M.tZ)(o.ZP,{item:!0,xs:12,sm:3,children:(0,M.BX)(o.ZP,{container:!0,spacing:1.5,children:[(0,M.tZ)(o.ZP,{item:!0,xs:6,sm:12,children:(0,M.tZ)(c.Z,{component:"img",src:le,className:`grad-${U.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})}),(0,M.tZ)(o.ZP,{item:!0,xs:6,sm:12,children:(0,M.tZ)(d.Z,{children:(0,M.tZ)("small",{children:U.description})})})]})}),(0,M.BX)(o.ZP,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,M.tZ)(c.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:(0,M.BX)(u.Z,{children:[(0,M.tZ)(h.Z,{color:"info",onClick:ie,children:null!=(L=null==U?void 0:U.name)?L:"Select a Weapon"}),(null==U?void 0:U.hasRefinement)&&(0,M.tZ)(S.Z,{refinement:W,setRefinement:e=>Y({refinement:e})}),A]})}),(0,M.BX)(c.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:[U&&(0,M.tZ)(w.Z,{level:N,ascension:q,setBoth:Y,useLow:!U.hasRefinement}),(0,M.tZ)(h.Z,{color:"error",onClick:()=>V&&z.weapons.set(V,{lock:!H}),startIcon:H?(0,M.tZ)(r.Z,{}):(0,M.tZ)(l.Z,{}),children:H?"Locked":"Unlocked"})]}),(0,M.tZ)(B.q,{stars:U.rarity}),(0,M.tZ)(d.Z,{variant:"subtitle1",children:(0,M.tZ)("strong",{children:U.passiveName})}),(0,M.tZ)(d.Z,{gutterBottom:!0,children:U.passiveName&&U.passiveDescription(se.get(E.ri.weapon.refinement).value-1)}),(0,M.BX)(c.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,M.BX)(g.Z,{children:[(0,M.tZ)(Z.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,M.tZ)(p.Z,{}),(0,M.tZ)(C.lD,{children:[E.ri.weapon.main,E.ri.weapon.sub,E.ri.weapon.sub2].map((e=>{const t=se.get(e);return t.isEmpty||!t.value?null:(0,M.tZ)(C.JW,{node:t,component:m.ZP},JSON.stringify(t.info))}))})]}),R&&U.document&&(0,M.tZ)(v.Z,{sections:U.document})]})]})]})}),t&&V&&(0,M.tZ)(s.Z,{sx:{py:1},children:(0,M.BX)(o.ZP,{container:!0,spacing:1,children:[(0,M.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,M.tZ)(x.W,{location:F,setLocation:te,filter:ae,autoCompleteProps:{getOptionDisabled:e=>!e.key}})}),(0,M.tZ)(o.ZP,{item:!0,flexGrow:2}),!!a&&(0,M.tZ)(o.ZP,{item:!0,children:(0,M.tZ)(y.Z,{sx:{height:"100%"},large:!0,onClick:a})})]})})]})})}},70582:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(2784),i=a(34156);function r(e=""){const{database:t}=(0,n.useContext)(i.t),[a,r]=(0,n.useState)(t.arts.get(e));return(0,n.useEffect)((()=>r(t.arts.get(e))),[t,e]),(0,n.useEffect)((()=>e?t.arts.follow(e,((e,t,a)=>"update"===t&&r(a))):void 0),[e,r,t]),a}},15132:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(2784),i=a(34156);function r(e){const{database:t}=(0,n.useContext)(i.t),[a,r]=(0,n.useState)((()=>t.charMeta.get(e)));return(0,n.useEffect)((()=>t.charMeta.follow(e,((e,t,a)=>r(a)))),[e,t]),(0,n.useEffect)((()=>r(t.charMeta.get(e))),[t,e]),a}},2180:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(2784),i=a(73557),r=a(34156);function l(){var e;const{database:t}=(0,n.useContext)(r.t),a=(0,i.s0)(),{params:{tab:l=""}}=null!=(e=(0,i.bS)({path:"/characters/:charKey/:tab",end:!1}))?e:{params:{tab:""}};return(0,n.useCallback)((e=>{const n=t.chars.get(e);let i=l;n||(t.chars.getWithInitWeapon(e),i=""),a(`/characters/${e}/${i}`)}),[a,t,l])}},56302:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(2784),i=a(34156);function r(e=""){const{database:t}=(0,n.useContext)(i.t),[a,r]=(0,n.useState)(t.chars.get(e));return(0,n.useEffect)((()=>r(t.chars.get(e))),[t,e]),(0,n.useEffect)((()=>e?t.chars.follow(e,((e,t,a)=>"update"===t&&r(a))):void 0),[e,r,t]),a}},76260:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(2784),i=a(34156),r=a(12761);function l(e){const{database:t}=(0,n.useContext)(i.t);return(0,n.useCallback)((a=>{if(!e)return;const n=t.chars.get(e);if(n)if("type"in a)switch(a.type){case"enemyOverride":{const i=n.enemyOverride,{statKey:r,value:l}=a;if(i[r]===l)break;t.chars.set(e,Object.assign({},n,{enemyOverride:Object.assign({},i,{[r]:l})}));break}case"editStats":{const{statKey:i,value:l}=a,s=(0,r.I8)(n.bonusStats);if(s[i]===l)break;l?s[i]=l:delete s[i],t.chars.set(e,Object.assign({},n,{bonusStats:s}));break}case"resetStats":{const{statKey:i}=a,r=n.bonusStats;delete r[i],t.chars.set(e,Object.assign({},n,{bonusStats:r}));break}case"teamConditional":{const{teamMateKey:i,conditional:l}=a,s=(0,r.I8)(n.teamConditional);s[i]=l,t.chars.set(e,Object.assign({},n,{teamConditional:s}));break}case"team":{const{team:i}=n,r=[...i],{index:l,charKey:s}=a;r[l]=s,t.chars.set(e,Object.assign({},n,{team:r}))}}else t.chars.set(e,Object.assign({},n,a))}),[e,t])}},22134:(e,t,a)=>{a.d(t,{V:()=>y,Z:()=>x});var n=a(98283),i=a(2784),r=a(4121),l=a(31637),s=a(87923),o=a(13499),c=a(51784),d=a(34156),u=a(41319),h=a(2754),Z=a(11845),p=a(7794),m=a(55893),f=a(72550);const g=["data"],b=["display"];function x(e,t=0,a,r){const{database:l}=(0,i.useContext)(d.t),[s,o]=(0,f.NW)(),c=(0,i.useDeferredValue)(s),{gender:u}=(0,m.Z)(),p=(0,i.useMemo)((()=>c&&function(e,t,a=0,i,r,l){var s;if(!t)return;if(!a&&!r&&!l){const a=e._getTeamData(t);if(a)return a}const{teamData:o,teamBundle:c}=null!=(s=y(e,t,a,r,l))?s:{};if(!o||!c)return;const d=(0,h.Qo)(o,i,t),u=(0,Z.xh)(d,((e,t)=>{const a=c[t],i=(0,n.Z)(a,g);return Object.assign({},e,i)}));a||r||l||e.cacheTeamData(t,u);return u}(l,e,t,u,a,r)),[c,u,e,l,t,a,r]);return(0,i.useEffect)((()=>e?l.chars.follow(e,o):void 0),[e,o,l]),p}function y(e,t,a=0,n,i){var r;if(!t)return;const l=e.chars.get(t);if(!l)return;const s=v(e,!0,a,l,i||(null!=(r=e.weapons.get(l.equippedWeapon))?r:(0,p.Qu)()),null!=n?n:Object.values(l.equippedArtifacts).map((t=>e.arts.get(t))).filter((e=>e)));if(!s)return;const o={[t]:s},c={[t]:s.data};return s.character.team.forEach((t=>{var a,n;if(!t)return;const i=e.chars.get(t);if(!i)return;const r=v(e,!1,0,Object.assign({},i,{conditional:null!=(a=l.teamConditional[t])?a:{}}),null!=(n=e.weapons.get(i.equippedWeapon))?n:(0,p.Qu)(),Object.values(i.equippedArtifacts).map((t=>e.arts.get(t))).filter((e=>e)));r&&(o[t]=r,c[t]=r.data)})),{teamData:c,teamBundle:o}}function v(e,t=!1,a,i,d,Z){const p=(0,l.m)(i.key,e.gender);if(!p)return;const m=(0,o.ub)(d.key);if(!m)return;const f=c.Z.getAllDataOfType(p.weaponTypeKey),g=t?(()=>{const e=m.data,t=(0,n.Z)(e,b);return(0,h.b3)([t,f])})():m.data,x=(0,h.b3)([p.data,g,r.d5]),y=[...Array.isArray(Z)?Z.map((e=>(0,h.n3)(e,a))):[Z],(0,h.vn)(i,t?x:void 0),(0,h.v0)(d),x,u.y0,s.Y];return{character:i,weapon:d,characterSheet:p,weaponSheet:m,data:y}}},30311:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(2784),i=a(34156);function r(e=""){const{database:t}=(0,n.useContext)(i.t),[a,r]=(0,n.useState)(t.weapons.get(e));return(0,n.useEffect)((()=>r(t.weapons.get(e))),[t,e]),(0,n.useEffect)((()=>e?t.weapons.follow(e,((e,t,a)=>"update"===t&&r(a))):void 0),[e,r,t]),a}},87227:(e,t,a)=>{a.d(t,{i:()=>r});var n=a(16736),i=a(55290);function r(e,t,a){const r=(0,i.t)(e,t),l=(0,n.Li)(e,"icon",t);return a&&r?r:l||""}},61851:(e,t,a)=>{a.d(t,{X:()=>i});var n=a(12761);function i(e){return(t,a)=>{const i=t.length;return i===e.length?[a]:1===i&&t[0]===a?[...e]:[...new Set((0,n.nh)(t,a))]}}},2313:(e,t,a)=>{a.d(t,{A:()=>i,W:()=>r});var n=a(12761);function i(e,t){const a=(0,n.vU)(e,(e=>l(e)));return t(a),(0,n.vU)(a,(e=>s(e)))}function r(e,t){const a=l(e);return t(a),s(a)}function l(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}function s(e){return(0,n.vU)(e,(({total:e,current:t})=>t===e?`${e}`:`${t}/${e}`))}},55290:(e,t,a)=>{a.d(t,{t:()=>ct,V:()=>U});var n=a(31981);const i=a.p+"splash_aether.34952116717f90b2.png",r=a.p+"splash_albedo.41ae768b7f816936.png",l=a.p+"splash_alhaitham.0aea2d84d3a76682.png",s=a.p+"splash_amber.4398eed4108e6e45.png",o=a.p+"splash_ayaka.9f277a9d4d0eb3e1.png",c=a.p+"splash_ayato.19fbf52c20703614.png",d=a.p+"splash_barbara.a0a5e1abda0b2d11.png",u=a.p+"splash_beidou.b2442cc32782c025.png",h=a.p+"splash_bennett.d43b7de43b08549e.png",Z=a.p+"splash_candace.569a9a668a25d271.png",p=a.p+"splash_chongyun.67305b1878564890.png",m=a.p+"splash_collei.9cfc45884ab4eb51.png",f=a.p+"splash_cyno.8b85f282c259cde0.png",g=a.p+"splash_dehya.e6cac1553a263bce.png",b=a.p+"splash_diluc.5ea30e4e67ae9585.png",x=a.p+"splash_diona.2b5b0b3d887b5cdc.png",y=a.p+"splash_dori.e06bbe629b0d9d6e.png",v=a.p+"splash_eula.e2d5f2d1f95c030b.png",C=a.p+"splash_faruzan.1b2a210557e17be9.png",w=a.p+"splash_fischl.4d77a8ba4eab9c33.png",k=a.p+"splash_ganyu.6a25af2608c60463.png",S=a.p+"splash_gorou.369f328ac57baaac.png",B=a.p+"splash_heizou.6b18c82c9aa898b4.png",X=a.p+"splash_hutao.62027cac3ab61675.png",_=a.p+"splash_itto.aa2bbe8bb03fe6f2.png",K=a.p+"splash_jean.036586e6b6250c4e.png",j=a.p+"splash_kaeya.510a2cbe75e22700.png",E=a.p+"splash_kazuha.dc85e6e380b91e77.png",T=a.p+"splash_keqing.8d9baa8ea744af2b.png",P=a.p+"splash_klee.63437aa01b19442f.png",O=a.p+"splash_kokomi.8c1990242417dabe.png",D=a.p+"splash_kuki.597b6ba8467cc295.png",M=a.p+"splash_layla.db5414dd55b00d21.png",I=a.p+"splash_lisa.5a25a174d31d2748.png",A=a.p+"splash_mika.43983fc2dc44b5f8.png",L=a.p+"splash_lumine.55e82107827ca15e.png",R=a.p+"splash_mona.7b8c3118dcc5eebf.png",z=a.p+"splash_nahida.735f07bfb7b44cc0.png",G=a.p+"splash_nilou.b7c0c2372471ef39.png",$=a.p+"splash_ningguang.28a50a3084a949ae.png",N=a.p+"splash_noelle.4759574cc1b69a19.png",W=a.p+"splash_qiqi.d3af00cd0ae3958e.png",q=a.p+"splash_raiden.0761d0de1d77f9a4.png",H=a.p+"splash_razor.b4b2f17776e86b8b.png",F=a.p+"splash_rosaria.de442b9c8fc88cd8.png",V={Albedo:r,Alhaitham:l,Amber:s,AratakiItto:_,Barbara:d,Beidou:u,Bennett:h,Candace:Z,Chongyun:p,Collei:m,Cyno:f,Dehya:g,Diluc:b,Diona:x,Dori:y,Eula:v,Faruzan:C,Fischl:w,Ganyu:k,Gorou:S,HuTao:X,Jean:K,KaedeharaKazuha:E,Kaeya:j,KamisatoAyaka:o,KamisatoAyato:c,Keqing:T,Klee:P,KujouSara:a.p+"splash_sara.6927638e04f80ef2.png",KukiShinobu:D,Layla:M,Lisa:I,Mika:A,Mona:R,Nahida:z,Nilou:G,Ningguang:$,Noelle:N,Qiqi:W,RaidenShogun:q,Razor:H,Rosaria:F,SangonomiyaKokomi:O,Sayu:a.p+"splash_sayu.c7e8e3538bde3729.png",Shenhe:a.p+"splash_shenhe.4a77d286bde14cda.png",ShikanoinHeizou:B,Sucrose:a.p+"splash_sucrose.9b5662054eb03751.png",Tartaglia:a.p+"splash_tartaglia.706594d34dcced58.png",Thoma:a.p+"splash_thoma.ad95b3cdb981999a.png",Tighnari:a.p+"splash_tighnari.24790e9fa262eb62.png",TravelerF:L,TravelerM:i,Venti:a.p+"splash_venti.26824524cf16f528.png",Wanderer:a.p+"splash_wanderer.184c52527412c63f.png",Xiangling:a.p+"splash_xiangling.dd58736a26a089d8.png",Xiao:a.p+"splash_xiao.138c2c6c3360b62a.png",Xingqiu:a.p+"splash_xingqiu.2cd84ccdea55e7d9.png",Xinyan:a.p+"splash_xinyan.d293e82ba4602ff2.png",YaeMiko:a.p+"splash_yae.b753a9c091042c93.png",Yanfei:a.p+"splash_yanfei.51dbc4e87e8a388b.png",Yaoyao:a.p+"splash_yaoyao.c839a8f7091fe1b6.png",Yelan:a.p+"splash_yelan.38afbca8c2f47341.png",Yoimiya:a.p+"splash_yoimiya.9ab15faa3f382c75.png",YunJin:a.p+"splash_yunjin.a3f9cb4411db1bb7.png",Zhongli:a.p+"splash_zhongli.e4f5a623d3e60a3f.png"};function U(e,t){var a;return null!=(a=V[(0,n.Cs)(e,t)])?a:""}const Y=a.p+"portrait_aether.f61a87b477361ae7.png",J=a.p+"portrait_albedo.aa78a312578fd9c0.png",Q=a.p+"portrait_alhaitham.7ed291376b28137c.png",ee=a.p+"portrait_aloy.e248a1e20e73e5d4.png",te=a.p+"portrait_amber.da26735b882d7ba6.png",ae=a.p+"portrait_ayaka.130335676ba0adcc.png",ne=a.p+"portrait_ayato.ad7b88b73fa3e2e7.png",ie=a.p+"portrait_barbara.a8ca73150a887f16.png",re=a.p+"portrait_beidou.6583cfbf2a5a65cd.png",le=a.p+"portrait_bennett.919238f3eaa62de3.png",se=a.p+"portrait_candace.20b25b01deb752c0.png",oe=a.p+"portrait_chongyun.0e20f121604bcd7b.png",ce=a.p+"portrait_collei.ac4d86f72ce4e2e1.png",de=a.p+"portrait_cyno.cdf3ba2854f35751.png",ue=a.p+"portrait_dehya.ed4ce0b9611a83a6.png",he=a.p+"portrait_diluc.e14217fc5343f268.png",Ze=a.p+"portrait_diona.2cd5754f28dd7e3b.png",pe=a.p+"portrait_dori.516f8e3dbb6ab732.png",me=a.p+"portrait_eula.83de127ae9f50be2.png",fe=a.p+"portrait_faruzan.7cb1e2e8d60ccc02.png",ge=a.p+"portrait_fischl.565bf441931ed8f2.png",be=a.p+"portrait_ganyu.80658ffcaf15e7b1.png",xe=a.p+"portrait_gorou.787db64e4321df79.png",ye=a.p+"portrait_hutao.a4302ec09b4c5289.png",ve=a.p+"portrait_itto.14d6b3025090c553.png",Ce=a.p+"portrait_jean.05e8e697e2575254.png",we=a.p+"portrait_kaeya.b21f804ba85efa08.png",ke=a.p+"portrait_kazuha.430f08b01298b27c.png",Se=a.p+"portrait_keqing.de6d2a3e10f78803.png",Be=a.p+"portrait_klee.3a2764bfbf3dd461.png",Xe=a.p+"portrait_kokomi.5951e24a89e46e65.png",_e=a.p+"portrait_kuki.8fcd9b8eb49fd5e8.png",Ke=a.p+"portrait_layla.39b378442f3bcb85.png",je=a.p+"portrait_lisa.c299ea6831baaaff.png",Ee=a.p+"portrait_mika.062ef5e9895b61c8.png",Te=a.p+"portrait_lumine.a07623a874604fc9.png",Pe=a.p+"portrait_mona.1fe4f7feabbe627a.png",Oe=a.p+"portrait_nahida.51fdf186e1124eba.png",De=a.p+"portrait_nilou.a9dea5acf24e72ee.png",Me=a.p+"portrait_ningguang.76e8d16b6ec2e7b9.png",Ie=a.p+"portrait_noelle.0eacad288dfca71c.png",Ae=a.p+"portrait_qiqi.3ab710a84fe50744.png",Le=a.p+"portrait_raiden.b01fe3d2d492baa8.png",Re=a.p+"portrait_razor.f9facb1f24ab3ebd.png",ze=a.p+"portrait_rosaria.cc4f46825957ea0d.png",Ge=a.p+"portrait_sara.979912380f161319.png",$e=a.p+"portrait_sayu.3745c6d983db752f.png",Ne=a.p+"portrait_shenhe.96cbd3bc14f671eb.png",We=a.p+"portrait_sucrose.e88dbe01a32275b8.png",qe=a.p+"portrait_tartaglia.06bd7eacd389c245.png",He=a.p+"portrait_thoma.fb224668174536a9.png",Fe=a.p+"portrait_tightnari.3b8bd8cd36460d24.png",Ve=a.p+"portrait_venti.b71fbc4e9b9acca2.png",Ue=a.p+"portrait_wanderer.3942c1e743971df5.png",Ye=a.p+"portrait_xiangling.b562f0a0d4f59b9b.png",Je=a.p+"portrait_xiao.8762aff1f47842d2.png",Qe=a.p+"portrait_xingqiu.4b56b17ee63e8929.png",et=a.p+"portrait_xinyan.dc536310efd58d65.png",tt=a.p+"portrait_yae.18141a2b6063d2a9.png",at=a.p+"portrait_yanfei.e912a861eb3fc131.png",nt=a.p+"portrait_yaoyao.14a317e4b0fcf6d4.png",it=a.p+"portrait_yelan.61b9c7808cbc1ade.png",rt=a.p+"portrait_yoimiya.78ff7c734fa0f28e.png",lt=a.p+"portrait_yunjin.29b3f40b4acae3b1.png",st=a.p+"portrait_zhongli.f05f1487662d3b9b.png",ot={Albedo:J,Alhaitham:Q,Aloy:ee,Amber:te,AratakiItto:ve,Barbara:ie,Beidou:re,Bennett:le,Candace:se,Chongyun:oe,Collei:ce,Cyno:de,Dehya:ue,Diluc:he,Diona:Ze,Dori:pe,Eula:me,Faruzan:fe,Fischl:ge,Ganyu:be,Gorou:xe,HuTao:ye,Jean:Ce,KaedeharaKazuha:ke,Kaeya:we,KamisatoAyaka:ae,KamisatoAyato:ne,Keqing:Se,Klee:Be,KujouSara:Ge,KukiShinobu:_e,Layla:Ke,Lisa:je,Mika:Ee,Mona:Pe,Nahida:Oe,Nilou:De,Ningguang:Me,Noelle:Ie,Qiqi:Ae,RaidenShogun:Le,Razor:Re,Rosaria:ze,SangonomiyaKokomi:Xe,Sayu:$e,Shenhe:Ne,ShikanoinHeizou:a.p+"potrait_heizou.e5d455f070b52675.png",Sucrose:We,Tartaglia:qe,Thoma:He,Tighnari:Fe,TravelerF:Te,TravelerM:Y,Venti:Ve,Wanderer:Ue,Xiangling:Ye,Xiao:Je,Xingqiu:Qe,Xinyan:et,YaeMiko:tt,Yanfei:at,Yaoyao:nt,Yelan:it,Yoimiya:rt,YunJin:lt,Zhongli:st};function ct(e,t){var a;return null!=(a=ot[(0,n.Cs)(e,t)])?a:""}}}]);