"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[514,629],{97053:(e,t,n)=>{var a=n(14859);t.Z=void 0;var l=a(n(68671)),r=n(52322),s=(0,l.default)((0,r.jsx)("path",{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"}),"Sort");t.Z=s},56489:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(93827),l=n(97053),r=n(67550),s=n(80551),i=n(94380),o=n(83249),c=n(11141),d=n(23485),h=n(52903);const Z=["sortKeys","value","onChange","ascending","onChangeAsc"];function p(e){let{sortKeys:t,value:n,onChange:p,ascending:u,onChangeAsc:y}=e,g=(0,a.Z)(e,Z);const{t:x}=(0,c.$G)("ui");return(0,h.BX)(r.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,h.BX)(c.cC,{t:x,i18nKey:"sortBy",children:["Sort by:"," "]}),(0,h.BX)(s.Z,Object.assign({},g,{children:[(0,h.tZ)(d.Z,{title:(0,h.tZ)(c.cC,{t:x,i18nKey:`sortMap.${n}`,children:{value:x(`sortMap.${n}`)}}),children:t.map((e=>(0,h.tZ)(i.Z,{selected:n===e,disabled:n===e,onClick:()=>p(e),children:x(`sortMap.${e}`)},e)))}),(0,h.tZ)(o.Z,{onClick:()=>y(!u),startIcon:(0,h.tZ)(l.Z,{sx:{transform:u?"scale(1, -1)":"scale(1)"}}),children:u?(0,h.tZ)(c.cC,{t:x,i18nKey:"ascending",children:"Ascending"}):(0,h.tZ)(c.cC,{t:x,i18nKey:"descending",children:"Descending"})})]}))]})}},37629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(93827),l=n(31981),r=n(16736),s=n(74155),i=n(72550),o=n(12761),c=n(16068),d=n(66147),h=n(7671),Z=n(67550),p=n(13780),u=n(56961),y=n(41075),g=n(65992),x=n(23883),m=n(43894),f=n(85801),v=n(75213),C=n(62197),w=n(2784),b=n(11141),k=n(24264),B=n(87833),K=n(11615),S=n(23690),X=n(69698),I=n(56489),z=n(12366),M=n(36674),D=n(89279),V=n(28265),N=n(99487),T=n(23657),W=n(31637),$=n(34156),E=n(56302),j=n(15132),G=n(55893),P=n(87227),A=n(64303),H=n(2313),O=n(52903);const _=["className"],L=Object.keys(A.V3);function F({show:e,onHide:t,onSelect:n,filter:a=(()=>!0),newFirst:r=!1}){const{t:s}=(0,b.$G)(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:c}=(0,w.useContext)(T.E),{database:d}=(0,w.useContext)($.t),[g,x]=(0,w.useState)((()=>d.displayCharacter.get()));(0,w.useEffect)((()=>d.displayCharacter.follow(((e,t)=>x(t)))),[d,x]);const{gender:m}=(0,G.Z)(),[f,v]=(0,i.NW)();(0,w.useEffect)((()=>d.charMeta.followAny((()=>v()))),[v,d]);const[C,B]=(0,w.useState)(""),K=(0,w.useDeferredValue)(C),z=(0,w.useDeferredValue)(g),M=(0,w.useDeferredValue)(f),E=(0,w.useMemo)((()=>{var e;const{element:t,weaponType:n,sortType:s,ascending:i}=z,h=[...r?["new"]:[],...null!=(e=A.V3[s])?e:[]];return M&&l.IV.filter((e=>a(d.chars.get(e),(0,W.m)(e,m)))).filter((0,o.CZ)({element:t,weaponType:n,name:K},(0,A.zU)(d,c))).sort((0,o.ef)(h,i,(0,A._L)(d,c),["new","favorite"]))}),[z,r,M,K,d,c,a,m]),j=(0,w.useMemo)((()=>(0,H.W)(l.yd,(e=>l.IV.forEach((t=>{const n=(0,W.m)(t,d.gender).weaponTypeKey;e[n].total++,E.includes(t)&&e[n].current++}))))),[E,d]),P=(0,w.useMemo)((()=>(0,H.W)(l.UB,(e=>l.IV.forEach((t=>{const n=(0,W.m)(t,d.gender).elementKey;e[n].total++,E.includes(t)&&e[n].current++}))))),[E,d]),{weaponType:_,element:F,sortType:U,ascending:J}=g;return(0,O.tZ)(X.Z,{open:e,onClose:t,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,O.BX)(k.Z,{children:[(0,O.BX)(h.Z,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,O.tZ)(V.Z,{sx:{height:"100%"},onChange:e=>d.displayCharacter.set({weaponType:e}),value:_,totals:j,size:"small"}),(0,O.tZ)(D.Z,{sx:{height:"100%"},onChange:e=>d.displayCharacter.set({element:e}),value:F,totals:P,size:"small"}),(0,O.tZ)(Z.Z,{flexGrow:1,children:(0,O.tZ)(p.Z,{autoFocus:!0,value:C,onChange:e=>B(e.target.value),label:s("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,O.tZ)(I.Z,{sx:{height:"100%"},sortKeys:L,value:U,onChange:e=>d.displayCharacter.set({sortType:e}),ascending:J,onChangeAsc:e=>d.displayCharacter.set({ascending:e})}),(0,O.tZ)(S.Z,{onClick:t})]}),(0,O.tZ)(u.Z,{}),(0,O.tZ)(N.R.Provider,{value:{teamData:void 0},children:(0,O.tZ)(h.Z,{children:(0,O.tZ)(y.ZP,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:E.map((e=>(0,O.tZ)(y.ZP,{item:!0,xs:1,children:(0,O.tZ)(q,{characterKey:e,onClick:()=>{t(),null==n||n(e)}})},e)))})})})]})})}const U=(0,g.ZP)((e=>{let{className:t}=e,n=(0,a.Z)(e,_);return(0,O.tZ)(x.Z,Object.assign({},n,{classes:{popper:t}}))}))({[`& .${m.Z.tooltip}`]:{padding:0}});function q({characterKey:e,onClick:t}){var n;const{gender:a}=(0,G.Z)(),l=(0,W.m)(e,a),o=(0,E.Z)(e),{favorite:h}=(0,j.Z)(e),{database:p}=(0,w.useContext)($.t),{silly:u}=(0,w.useContext)(T.E),[y,g,x]=(0,i.aV)(),{level:m=1,ascension:b=0,constellation:k=0}=null!=o?o:{},S=(0,r.Li)(e,"banner",a);return(0,O.tZ)(U,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:y,onClose:x,onOpen:g,title:(0,O.tZ)(Z.Z,{sx:{width:300},children:(0,O.tZ)(K.Z,{hideStats:!0,characterKey:e})}),children:(0,O.tZ)(Z.Z,{children:(0,O.BX)(B.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,O.tZ)(Z.Z,{sx:{position:"absolute",opacity:.7,zIndex:2},children:(0,O.tZ)(f.Z,{sx:{p:.25},onClick:t=>{x(),p.charMeta.set(e,{favorite:!h})},children:h?(0,O.tZ)(c.Z,{}):(0,O.tZ)(d.Z,{})})}),(0,O.tZ)(v.Z,{onClick:t,children:(0,O.BX)(Z.Z,{display:"flex",position:"relative",className:S?void 0:`grad-${null==l?void 0:l.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${S})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,O.tZ)(Z.Z,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,O.tZ)(Z.Z,{component:"img",src:(0,P.i)(e,a,u),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,O.BX)(Z.Z,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[(0,O.tZ)(C.Z,{variant:"body2",sx:{flexGrow:1},children:(0,O.tZ)(z.Z,{color:null==l?void 0:l.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:null==l?void 0:l.name})}),o?(0,O.BX)(Z.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,O.BX)(Z.Z,{sx:{textShadow:"0 0 5px gray"},children:[(0,O.BX)(C.Z,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",m]}),(0,O.BX)(C.Z,{variant:"body2",component:"span",color:"text.secondary",children:["/",s.SJ[b]]})]}),(0,O.BX)(C.Z,{variant:"body2",children:["C",k]})]}):(0,O.tZ)(C.Z,{component:"span",variant:"body2",children:(0,O.tZ)(z.Z,{children:"NEW"})}),(0,O.tZ)(M.q,{stars:null!=(n=null==l?void 0:l.rarity)?n:1,colored:!0})]})]})})]})})})}}}]);