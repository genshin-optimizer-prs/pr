"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[629],{37629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(93827),l=n(31981),r=n(16736),o=n(74155),s=n(72550),i=n(12761),c=n(16068),d=n(66147),h=n(7671),Z=n(67550),p=n(13780),u=n(56961),x=n(41075),y=n(65992),m=n(23883),f=n(43894),g=n(85801),v=n(75213),C=n(62197),w=n(2784),b=n(11141),k=n(24264),B=n(87833),S=n(11615),I=n(23690),X=n(69698),D=n(56489),N=n(12366),V=n(36674),z=n(89279),T=n(28265),W=n(99487),E=n(23657),K=n(31637),M=n(34156),P=n(56302),G=n(15132),j=n(55893),$=n(87227),_=n(64303),L=n(2313),O=n(52903);const A=["className"],F=Object.keys(_.V3);function U({show:e,onHide:t,onSelect:n,filter:a=(()=>!0),newFirst:r=!1}){const{t:o}=(0,b.$G)(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:c}=(0,w.useContext)(E.E),{database:d}=(0,w.useContext)(M.t),[y,m]=(0,w.useState)((()=>d.displayCharacter.get()));(0,w.useEffect)((()=>d.displayCharacter.follow(((e,t)=>m(t)))),[d,m]);const{gender:f}=(0,j.Z)(),[g,v]=(0,s.NW)();(0,w.useEffect)((()=>d.charMeta.followAny((()=>v()))),[v,d]);const[C,B]=(0,w.useState)(""),S=(0,w.useDeferredValue)(C),N=(0,w.useDeferredValue)(y),V=(0,w.useDeferredValue)(g),P=(0,w.useMemo)((()=>{var e;const{element:t,weaponType:n,sortType:o,ascending:s}=N,h=[...r?["new"]:[],...null!=(e=_.V3[o])?e:[]];return V&&l.IV.filter((e=>a(d.chars.get(e),(0,K.m)(e,f)))).filter((0,i.CZ)({element:t,weaponType:n,name:S},(0,_.zU)(d,c))).sort((0,i.ef)(h,s,(0,_._L)(d,c),["new","favorite"]))}),[N,r,V,S,d,c,a,f]),G=(0,w.useMemo)((()=>(0,L.W)(l.yd,(e=>l.IV.forEach((t=>{const n=(0,K.m)(t,d.gender).weaponTypeKey;e[n].total++,P.includes(t)&&e[n].current++}))))),[P,d]),$=(0,w.useMemo)((()=>(0,L.W)(l.UB,(e=>l.IV.forEach((t=>{const n=(0,K.m)(t,d.gender).elementKey;e[n].total++,P.includes(t)&&e[n].current++}))))),[P,d]),{weaponType:A,element:U,sortType:q,ascending:J}=y;return(0,O.tZ)(X.Z,{open:e,onClose:t,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,O.BX)(k.Z,{children:[(0,O.BX)(h.Z,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,O.tZ)(T.Z,{sx:{height:"100%"},onChange:e=>d.displayCharacter.set({weaponType:e}),value:A,totals:G,size:"small"}),(0,O.tZ)(z.Z,{sx:{height:"100%"},onChange:e=>d.displayCharacter.set({element:e}),value:U,totals:$,size:"small"}),(0,O.tZ)(Z.Z,{flexGrow:1,children:(0,O.tZ)(p.Z,{autoFocus:!0,value:C,onChange:e=>B(e.target.value),label:o("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,O.tZ)(D.Z,{sx:{height:"100%"},sortKeys:F,value:q,onChange:e=>d.displayCharacter.set({sortType:e}),ascending:J,onChangeAsc:e=>d.displayCharacter.set({ascending:e})}),(0,O.tZ)(I.Z,{onClick:t})]}),(0,O.tZ)(u.Z,{}),(0,O.tZ)(W.R.Provider,{value:{teamData:void 0},children:(0,O.tZ)(h.Z,{children:(0,O.tZ)(x.ZP,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:P.map((e=>(0,O.tZ)(x.ZP,{item:!0,xs:1,children:(0,O.tZ)(H,{characterKey:e,onClick:()=>{t(),null==n||n(e)}})},e)))})})})]})})}const q=(0,y.ZP)((e=>{let{className:t}=e,n=(0,a.Z)(e,A);return(0,O.tZ)(m.Z,Object.assign({},n,{classes:{popper:t}}))}))({[`& .${f.Z.tooltip}`]:{padding:0}});function H({characterKey:e,onClick:t}){var n;const{gender:a}=(0,j.Z)(),l=(0,K.m)(e,a),i=(0,P.Z)(e),{favorite:h}=(0,G.Z)(e),{database:p}=(0,w.useContext)(M.t),{silly:u}=(0,w.useContext)(E.E),[x,y,m]=(0,s.aV)(),{level:f=1,ascension:b=0,constellation:k=0}=null!=i?i:{},I=(0,r.Li)(e,"banner",a);return(0,O.tZ)(q,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:x,onClose:m,onOpen:y,title:(0,O.tZ)(Z.Z,{sx:{width:300},children:(0,O.tZ)(S.Z,{hideStats:!0,characterKey:e})}),children:(0,O.tZ)(Z.Z,{children:(0,O.BX)(B.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,O.tZ)(Z.Z,{sx:{position:"absolute",opacity:.7,zIndex:2},children:(0,O.tZ)(g.Z,{sx:{p:.25},onClick:t=>{m(),p.charMeta.set(e,{favorite:!h})},children:h?(0,O.tZ)(c.Z,{}):(0,O.tZ)(d.Z,{})})}),(0,O.tZ)(v.Z,{onClick:t,children:(0,O.BX)(Z.Z,{display:"flex",position:"relative",className:I?void 0:`grad-${null==l?void 0:l.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${I})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,O.tZ)(Z.Z,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,O.tZ)(Z.Z,{component:"img",src:(0,$.i)(e,a,u),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,O.BX)(Z.Z,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[(0,O.tZ)(C.Z,{variant:"body2",sx:{flexGrow:1},children:(0,O.tZ)(N.Z,{color:null==l?void 0:l.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:null==l?void 0:l.name})}),i?(0,O.BX)(Z.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,O.BX)(Z.Z,{sx:{textShadow:"0 0 5px gray"},children:[(0,O.BX)(C.Z,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",f]}),(0,O.BX)(C.Z,{variant:"body2",component:"span",color:"text.secondary",children:["/",o.SJ[b]]})]}),(0,O.BX)(C.Z,{variant:"body2",children:["C",k]})]}):(0,O.tZ)(C.Z,{component:"span",variant:"body2",children:(0,O.tZ)(N.Z,{children:"NEW"})}),(0,O.tZ)(V.q,{stars:null!=(n=null==l?void 0:l.rarity)?n:1,colored:!0})]})]})})]})})})}}}]);