import{r as c,J as e,am as q,G as H,H as L,j as W,L as I,aP as N,ae as k,x as F,ai as V,W as m,aO as A,a6 as u,a9 as x,al as S,aQ as T,ab as $,I as O,ak as Q,aL as j,aj as G,aR as J,aS as w,aT as U,aU as X,aV as E,aq as Y,aW as Z}from"./index-yGyHOEkn.js";import{C as ee}from"./CardActionArea-BrTo79oN.js";import{C as ae}from"./CardHeader-DMQ3c09l.js";function K({value:a,onChange:t,...s}){const[o,l]=c.useState(a);c.useEffect(()=>{l(a)},[a]);const i=()=>t(o);return e(q,{value:o,onChange:n=>l(n.target.value),onBlur:i,onKeyDown:n=>n.key==="Enter"&&!s.multiline&&i(),...s})}var M={},te=L;Object.defineProperty(M,"__esModule",{value:!0});var B=M.default=void 0,re=te(H()),se=W,ne=(0,re.default)((0,se.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");B=M.default=ne;function oe({teamId:a,charKey:t,tab:s=""}){const{t:o}=I("page_team"),l=N(),{database:i}=k(),n=i.teams.get(a),{loadoutData:d}=n,y=F(),b=V(y.breakpoints.down("md")),[p,f]=c.useState(!1),[h,g]=c.useState(n.name),[R,D]=c.useState(n.description),P=r=>{g(r),i.teams.set(a,{name:r})},z=r=>{D(r),i.teams.set(a,{description:r})};return m(u,{sx:()=>({borderBottom:"1px rgb(200,200,200,0.3) solid","& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px",backgroundColor:"rgb(200,200,200,0.5)"}}),children:[e(ee,{onClick:()=>f(!0),children:e(A,{placement:"top",title:m(u,{children:[m(u,{sx:{display:"flex",color:"info.light",gap:1},children:[e(B,{}),e(x,{children:e("strong",{children:o`team.editNameDesc`})})]}),!!n.description&&e(x,{children:n.description})]}),children:e(S,{sx:{display:"flex",justifyContent:"center","&:hover":{color:"info.light"}},children:m(x,{variant:"h5",sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",textShadow:"#000 0 0 10px !important"},children:[e(T,{}),h]})})})}),e(G,{open:p,onClose:()=>f(!1),children:m($,{children:[e(ae,{title:o`team.editNameDesc`,avatar:e(T,{}),titleTypographyProps:{variant:"h6"},action:e(O,{onClick:()=>f(!1),children:e(Q,{})})}),e(j,{}),e(S,{children:m(u,{display:"flex",flexDirection:"column",gap:2,sx:{mt:2},children:[e(K,{label:o`team.name`,value:h,onChange:r=>P(r),autoFocus:!0}),e(K,{label:o`team.desc`,value:R,onChange:r=>z(r),multiline:!0,minRows:4})]})})]})}),e(j,{}),m(J,{variant:"fullWidth",value:t??"team",orientation:b?"vertical":"horizontal",children:[e(w,{icon:e(T,{}),iconPosition:"start",value:"team",label:"Team Settings",onClick:()=>l(`/teams/${a}/`)}),d.map((r,C)=>{var _;const v=r&&((_=i.teamChars.get(r==null?void 0:r.teamCharId))==null?void 0:_.key);return e(w,{icon:e(U,{}),iconPosition:"start",value:v??C,disabled:!d[C],label:v?e(x,{children:o`Character Name`}):`Character ${C+1}`,onClick:()=>v&&l(`/teams/${a}/${v}/${s}`)},C)})]})]})}const ie=e(Y,{variant:"rectangular",width:"100%",height:1e3});function me(){const{database:a}=k(),{teamId:t}=X(),s=!t||!a.teams.keys.includes(t);return c.useEffect(()=>{s||a.teams.set(t,{lastEdit:Date.now()})},[t,a.teams,s]),s?e(Z,{to:"/teams"}):e(u,{display:"flex",flexDirection:"column",gap:1,children:e(c.Suspense,{fallback:ie,children:t&&e(ce,{teamId:t})})})}function ce({teamId:a}){var p;const{database:t}=k(),s=N(),o=t.teams.get(a),{loadoutData:l}=o,{params:{characterKey:i}}=E({path:"/teams/:teamId/:characterKey",end:!1})??{params:{}},{params:{tab:n}}=E({path:"/teams/:teamId/:characterKey/:tab"})??{params:{}},d=c.useMemo(()=>l.find(h=>{var g;return(h==null?void 0:h.teamCharId)&&((g=t.teamChars.get(h.teamCharId))==null?void 0:g.key)===i}),[l,t.teamChars,i]);c.useEffect(()=>{window.scrollTo({top:0})},[]),c.useEffect(()=>{d||s("",{replace:!0})},[d,s]);const y=d==null?void 0:d.teamCharId,b=(p=t.teamChars.get(y))==null?void 0:p.key;return I(["charNames_gen","page_character"]),e(u,{sx:{display:"flex",gap:1,flexDirection:"column",mx:1,mt:2},children:e($,{children:e(oe,{teamId:a,charKey:b,tab:n})})})}export{me as default};
