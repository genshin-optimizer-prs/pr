import{r as c,J as e,am as z,G as q,H,j as L,L as W,aP as I,ae as k,x as F,ai as V,W as m,aO as A,a6 as u,a9 as x,al as _,aQ as T,ab as $,I as O,ak as Q,aL as j,aj as G,aR as J,aS as w,aT as U,aU as X,aV as E,aq as Y,aW as Z}from"./index-D9iVjWZD.js";import{C as ee}from"./CardActionArea-kZwXliHq.js";import{C as ae}from"./CardHeader-lYKxfr1O.js";function K({value:a,onChange:t,...r}){const[o,l]=c.useState(a);c.useEffect(()=>{l(a)},[a]);const i=()=>t(o);return e(z,{value:o,onChange:n=>l(n.target.value),onBlur:i,onKeyDown:n=>n.key==="Enter"&&!r.multiline&&i(),...r})}var M={},te=H;Object.defineProperty(M,"__esModule",{value:!0});var B=M.default=void 0,se=te(q()),re=L,ne=(0,se.default)((0,re.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");B=M.default=ne;function oe({teamId:a,charKey:t,tab:r=""}){const{t:o}=W("page_team"),l=I(),{database:i}=k(),n=i.teams.get(a),{loadoutData:d}=n,y=F(),b=V(y.breakpoints.down("md")),[p,f]=c.useState(!1),[h,g]=c.useState(n.name),[N,R]=c.useState(n.description),D=s=>{g(s),i.teams.set(a,{name:s})},P=s=>{R(s),i.teams.set(a,{description:s})};return m(u,{sx:()=>({borderBottom:"1px rgb(200,200,200,0.3) solid","& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px",backgroundColor:"rgb(200,200,200,0.5)"}}),children:[e(ee,{onClick:()=>f(!0),children:e(A,{placement:"top",title:m(u,{children:[m(u,{sx:{display:"flex",color:"info.light",gap:1},children:[e(B,{}),e(x,{children:e("strong",{children:o`team.editNameDesc`})})]}),!!n.description&&e(x,{children:n.description})]}),children:e(_,{sx:{display:"flex",justifyContent:"center","&:hover":{color:"info.light"}},children:m(x,{variant:"h5",sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",textShadow:"#000 0 0 10px !important"},children:[e(T,{}),h]})})})}),e(G,{open:p,onClose:()=>f(!1),children:m($,{children:[e(ae,{title:o`team.editNameDesc`,avatar:e(T,{}),titleTypographyProps:{variant:"h6"},action:e(O,{onClick:()=>f(!1),children:e(Q,{})})}),e(j,{}),e(_,{children:m(u,{display:"flex",flexDirection:"column",gap:2,sx:{mt:2},children:[e(K,{label:o`team.name`,value:h,onChange:s=>D(s),autoFocus:!0}),e(K,{label:o`team.desc`,value:N,onChange:s=>P(s),multiline:!0,minRows:4})]})})]})}),e(j,{}),m(J,{variant:"fullWidth",value:t??"team",orientation:b?"vertical":"horizontal",children:[e(w,{icon:e(T,{}),iconPosition:"start",value:"team",label:"Team Settings",onClick:()=>l(`/teams/${a}/`)}),d.map((s,C)=>{var S;const v=s&&((S=i.teamChars.get(s==null?void 0:s.teamCharId))==null?void 0:S.key);return e(w,{icon:e(U,{}),iconPosition:"start",value:v??C,disabled:!d[C],label:v?e(x,{children:o`Character Name`}):`Character ${C+1}`,onClick:()=>v&&l(`/teams/${a}/${v}/${r}`)},C)})]})]})}const ie=e(Y,{variant:"rectangular",width:"100%",height:1e3});function me(){const{database:a}=k(),{teamId:t}=X(),r=!t||!a.teams.keys.includes(t);return c.useEffect(()=>{r||a.teams.set(t,{lastEdit:Date.now()})},[t,a.teams,r]),r?e(Z,{to:"/teams"}):e(u,{display:"flex",flexDirection:"column",gap:1,children:e(c.Suspense,{fallback:ie,children:t&&e(ce,{teamId:t})})})}function ce({teamId:a}){var p;const{database:t}=k(),r=I(),o=t.teams.get(a),{loadoutData:l}=o,{params:{characterKey:i}}=E({path:"/teams/:teamId/:characterKey",end:!1})??{params:{}},{params:{tab:n}}=E({path:"/teams/:teamId/:characterKey/:tab"})??{params:{}},d=c.useMemo(()=>l.find(h=>{var g;return(h==null?void 0:h.teamCharId)&&((g=t.teamChars.get(h.teamCharId))==null?void 0:g.key)===i}),[l,t.teamChars,i]);c.useEffect(()=>{window.scrollTo({top:0})},[]),c.useEffect(()=>{d||r("",{replace:!0})},[d,r]);const y=d==null?void 0:d.teamCharId,b=(p=t.teamChars.get(y))==null?void 0:p.key;return e(u,{sx:{display:"flex",gap:1,flexDirection:"column",mx:1,mt:2},children:e($,{children:e(oe,{teamId:a,charKey:b,tab:n})})})}export{me as default};
