import{e as l,n as x,p as e,a0 as _,a2 as A,du as se,r as oe,i as re,j as ne,u as k,bH as ie,bi as ae,q as C,K as N,cm as we,$ as ce,b as ue,d as _e,a9 as Ae,ao as Ie,ct as Re,an as de,V as ze,B as V,D as Ee,o as $e,J as B,cl as H,k as M,N as qe,am as je}from"./index-7683529c.js";import{d as Be,a as Ve}from"./StatEditorList-c25f1f6c.js";import{c as me,C as He,a as L,S as w,h as I}from"./StarDisplay-dbcf8a43.js";import{b as Me}from"./totalUtils-4845313e.js";import{B as Pe}from"./Help-1afbbe58.js";import{S as fe,s as Ne}from"./sortByRarityAndName-f21f001d.js";import{a as he}from"./Artifact-c158859c.js";import{S as pe,g as We}from"./index-dd1be0e3.js";import{e as R,c as Ge}from"./LocationAutocomplete-f5f89b27.js";import{a as Fe,s as Je}from"./index-009bcdb5.js";import{I as Qe}from"./ColoredText-61794693.js";import{S as Ue}from"./SlotIcon-fc285d79.js";function Xe({levelLow:d,levelHigh:s,setLow:n,setHigh:p,setBoth:u,dark:i=!1,disabled:m=!1,showLevelText:b=!1}){const[o,a]=l.useState(d),[y,v]=l.useState(s),S=l.useCallback((g,f)=>{if(typeof f=="number")throw new TypeError;const[r,h]=f;a(r),v(h)},[a,v]);return l.useEffect(()=>a(d),[a,d]),l.useEffect(()=>v(s),[v,s]),x(se,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:i?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[e(A,{value:o,onChange:g=>n(_(g??0,0,s)),sx:{px:1,pl:b?2:void 0,width:b?100:50,borderRadius:"4px 0 0 4px"},inputProps:{sx:{textAlign:b?"right":"center"}},startAdornment:b?"Level: ":void 0,disabled:m}),e(fe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact Level Range",value:[o,y],onChange:S,onChangeCommitted:(g,f)=>u(f[0],f[1]),valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),e(A,{value:y,onChange:g=>p(_(g??0,d,20)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}var W={},Ye=re;Object.defineProperty(W,"__esModule",{value:!0});var be=W.default=void 0,Ze=Ye(oe()),De=ne,Oe=(0,Ze.default)((0,De.jsx)("path",{d:"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z"}),"BusinessCenter");be=W.default=Oe;var G={},et=re;Object.defineProperty(G,"__esModule",{value:!0});var ge=G.default=void 0,tt=et(oe()),le=ne,at=(0,tt.default)([(0,le.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,le.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");ge=G.default=at;function lt({mainStatKeys:d,setMainStatKeys:s,totals:n}){const{t:p}=k("artifact"),{t:u}=k("statKey_gen"),i=l.useMemo(()=>ie.map(a=>({key:a,label:`${u(a)}${he(a)}`,variant:ae.getVariant(a)})),[u]),m=l.useCallback(a=>e(pe,{statKey:a,iconProps:{sx:{ml:1,color:ae.getVariant(a)}}}),[]),b=l.useCallback(a=>e("strong",{children:n[a]}),[n]),o=l.useCallback(a=>e(C,{size:"small",label:n[a]}),[n]);return e(R,{options:i,valueKeys:d,onChange:s,toImg:m,toExLabel:b,toExItemLabel:o,label:p("autocompleteLabels.mainStats")})}function st({artSetKeys:d,setArtSetKeys:s,totals:n}){const{t:p}=k(["artifact","artifactNames_gen"]),u=l.useCallback(o=>e(Qe,{src:Fe(o),size:3}),[]),i=l.useCallback(o=>e("strong",{children:n[o]}),[n]),m=l.useCallback(o=>e(C,{size:"small",label:n[o]}),[n]),b=l.useMemo(()=>Object.entries(Je).flatMap(([o,a])=>a.map(y=>({key:y,grouper:+o,label:p(`artifactNames_gen:${y}`)}))).sort(Ne),[p]);return e(R,{options:b,valueKeys:d,label:p("artifact:autocompleteLabels.sets"),toImg:u,toExLabel:i,toExItemLabel:m,onChange:s,groupBy:o=>{var a;return((a=o.grouper)==null?void 0:a.toString())??""},renderGroup:o=>o.group&&x(we,{component:N,children:[x(Ge,{sx:{top:"-1em"},children:[o.group," ",e(me,{stars:+o.group,inline:!0})]},`${o.group}Header`),o.children]},o.group)})}function ot({substatKeys:d,setSubstatKeys:s,totals:n}){const{t:p}=k("artifact"),{t:u}=k("statKey_gen"),i=l.useMemo(()=>ce.map(a=>({key:a,label:`${u(a)}${he(a)}`})),[u]),m=l.useCallback(a=>e(pe,{statKey:a,iconProps:{sx:{ml:1}}}),[]),b=l.useCallback(a=>e("strong",{children:n[a]}),[n]),o=l.useCallback(a=>e(C,{size:"small",label:n[a]}),[n]);return e(R,{options:i,toImg:m,toExLabel:b,toExItemLabel:o,valueKeys:d,onChange:s,label:p("autocompleteLabels.substats")})}function rt({locations:d,setLocations:s,totals:n,disabled:p}){const{t:u}=k(["artifact","sillyWisher_charNames","charNames_gen"]),i=ue(),{gender:m}=_e(),{silly:b}=l.useContext(Ae),o=l.useCallback((r,h)=>u(`${h?"sillyWisher_charNames":"charNames_gen"}:${Ie(i.chars.LocationToCharacterKey(r),m)}`),[i,m,u]),a=l.useCallback(r=>e(He,{characterKey:i.chars.LocationToCharacterKey(r)}),[i]),y=l.useCallback(r=>e("strong",{children:n[r]}),[n]),v=l.useCallback(r=>e(C,{size:"small",label:n[r]}),[n]),S=l.useCallback(r=>r==="Traveler"?Re.some(h=>i.charMeta.get(h).favorite):r?i.charMeta.get(r).favorite:!1,[i]),g=l.useCallback(r=>We(i.chars.LocationToCharacterKey(r),m).elementKey??void 0,[i,m]),f=l.useMemo(()=>de.filter(r=>i.chars.get(i.chars.LocationToCharacterKey(r))).map(r=>({key:r,label:o(r,b),favorite:S(r),color:g(r),alternateNames:[o(r,!1)]})).sort((r,h)=>r.favorite&&!h.favorite?-1:!r.favorite&&h.favorite?1:r.label.localeCompare(h.label)),[i.chars,S,g,b,o]);return e(l.Suspense,{fallback:e(ze,{variant:"text",width:100}),children:e(R,{disabled:p,options:f,valueKeys:d,onChange:r=>s(r),toImg:a,toExLabel:y,toExItemLabel:v,label:u`artifact:filterLocation.location`,chipProps:{variant:"outlined"}})})}function nt({rvLow:d,rvHigh:s,useMaxRV:n,switchFilter:p,setLow:u,setHigh:i,setBoth:m,dark:b=!1,disabled:o=!1}){const[a,y]=l.useState(n),[v,S]=l.useState(d),[g,f]=l.useState(s),r=l.useCallback((h,T)=>{if(typeof T=="number")throw new TypeError;const[z,E]=T;S(z),f(E)},[S,f]);return l.useEffect(()=>S(d),[S,d]),l.useEffect(()=>f(s),[f,s]),l.useEffect(()=>y(n),[y,n]),x(se,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:b?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[x(N,{sx:{width:100,height:32,display:"flex"},children:[e(V,{onClick:()=>p(!n),sx:{p:0,pl:2,minWidth:0,width:"55%",borderRadius:"4px 0 0 4px",fontWeight:400,fontSize:"16px",display:"inline",textAlign:"left",color:"rgba(255,255,255,0.9)"},children:a?"MRV":"RV"}),e(Ee,{orientation:"vertical",flexItem:!0}),e(A,{value:v,onChange:h=>u(_(h??0,0,g)),sx:{pr:1,width:"45%"},inputProps:{sx:{textAlign:"right"}},disabled:o})]}),e(fe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>`Arifact ${a?"Max RV":"RV"} Range`,value:[v,g],onChange:r,onChangeCommitted:(h,T)=>m(T[0],T[1]),valueLabelDisplay:"auto",min:0,max:900,disabled:o}),e(A,{value:g,onChange:h=>i(_(h??0,v,900)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:o})]})}const P=["locked","unlocked"],it=I([...H]),ct=I([...M]),ut=I([...P]),dt=I([1,2,3,4]);function mt({filterOption:d,filterOptionDispatch:s,filteredIds:n,disableSlotFilter:p=!1}){const{t:u}=k(["artifact","ui"]),i=l.useMemo(()=>$e(n,t=>!0),[n]),{artSetKeys:m=[],mainStatKeys:b=[],rarity:o=[],slotKeys:a=[],levelLow:y=0,levelHigh:v=20,substats:S=[],locations:g,showEquipped:f,showInventory:r,locked:h=[...P],rvLow:T=0,rvHigh:z=900,useMaxRV:E=!1,lines:F=[]}=d,J=ue(),{rarityTotal:xe,slotTotal:ye,lockedTotal:ve,linesTotal:Se,equippedTotal:Q,setTotal:Ce,mainStatTotal:Te,subStatTotal:ke,locationTotal:Ke}=l.useMemo(()=>{const t={rarityTotal:H,slotTotal:M,lockedTotal:["locked","unlocked"],linesTotal:[0,1,2,3,4],equippedTotal:["equipped","unequipped"],setTotal:je,mainStatTotal:ie,subStatTotal:ce,locationTotal:[...de,""]};return Me(t,c=>Object.entries(J.arts.data).forEach(([U,K])=>{const{rarity:X,slotKey:Y,location:$,setKey:Z,mainStatKey:D,substats:Le}=K,O=K.lock?"locked":"unlocked",ee=K.substats.filter(q=>q.value).length,te=$?"equipped":"unequipped";(!p||K.slotKey===d.slotKeys[0])&&(c.rarityTotal[X].total++,c.slotTotal[Y].total++,c.lockedTotal[O].total++,c.linesTotal[ee].total++,c.equippedTotal[te].total++,c.setTotal[Z].total++,c.mainStatTotal[D].total++,Le.forEach(q=>{const j=q.key;j&&(c.subStatTotal[j].total++,i[U]&&c.subStatTotal[j].current++)}),c.locationTotal[$].total++),i[U]&&(c.rarityTotal[X].current++,c.slotTotal[Y].current++,c.lockedTotal[O].current++,c.linesTotal[ee].current++,c.equippedTotal[te].current++,c.setTotal[Z].current++,c.mainStatTotal[D].current++,c.locationTotal[$].current++)}))},[J,p,i,d]);return x(B,{container:!0,spacing:1,children:[x(B,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(w,{fullWidth:!0,value:o,size:"small",children:H.map(t=>x(L,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({rarity:it(o,t)}),children:[e(me,{stars:t,inline:!0}),e(C,{label:xe[t],size:"small"})]},t))}),e(w,{fullWidth:!0,value:a,size:"small",disabled:p,children:M.map(t=>x(L,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({slotKeys:ct(a,t)}),children:[e(Ue,{slotKey:t}),e(C,{label:ye[t],size:"small"})]},t))}),e(w,{fullWidth:!0,value:h,size:"small",children:P.map((t,c)=>x(L,{value:t,sx:{display:"flex",gap:1},onClick:()=>s({locked:ut(h,t)}),children:[c?e(Be,{}):e(Ve,{}),e(qe,{i18nKey:`ui:${t}`,t:u}),e(C,{label:ve[c?"unlocked":"locked"],size:"small"})]},t))}),e(w,{fullWidth:!0,value:F,size:"small",children:[1,2,3,4].map(t=>x(L,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({lines:dt(F,t)}),children:[e(N,{whiteSpace:"nowrap",children:u("sub",{count:t})}),e(C,{label:Se[t],size:"small"})]},t))}),x(V,{startIcon:e(ge,{}),color:f?"success":"secondary",onClick:()=>s({showEquipped:!f}),children:[u`equippedArt`," ",e(C,{sx:{ml:1},label:Q.equipped,size:"small"})]}),x(V,{startIcon:e(be,{}),color:r?"success":"secondary",onClick:()=>s({showInventory:!r}),children:[u`artInInv`," ",e(C,{sx:{ml:1},label:Q.unequipped,size:"small"})]}),e(Xe,{showLevelText:!0,levelLow:y,levelHigh:v,setLow:t=>s({levelLow:t}),setHigh:t=>s({levelHigh:t}),setBoth:(t,c)=>s({levelLow:t,levelHigh:c})}),e(nt,{showLevelText:!0,rvLow:T,rvHigh:z,useMaxRV:E,switchFilter:t=>s({useMaxRV:t}),setLow:t=>s({rvLow:t}),setHigh:t=>s({rvHigh:t}),setBoth:(t,c)=>s({rvLow:t,rvHigh:c})})]}),x(B,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(st,{totals:Ce,artSetKeys:m,setArtSetKeys:t=>s({artSetKeys:t})}),e(lt,{totals:Te,mainStatKeys:b,setMainStatKeys:t=>s({mainStatKeys:t})}),e(ot,{totals:ke,substatKeys:S,setSubstatKeys:t=>s({substats:t})}),e(l.Suspense,{fallback:null,children:e(Pe,{title:f?u`locationsTooltip`:"",placement:"top",children:e("span",{children:e(rt,{totals:Ke,locations:f?[]:g,setLocations:t=>s({locations:t}),disabled:f})})})})]})]})}const Kt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{mt as A,Xe as a,Kt as b};
