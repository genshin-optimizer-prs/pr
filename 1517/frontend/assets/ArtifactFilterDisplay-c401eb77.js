import{e as l,n as y,p as e,a0 as R,a2 as E,dx as oe,r as re,i as ne,j as ie,u as K,bI as ce,bk as se,q as S,K as F,cn as Ae,$ as ue,b as de,d as Ie,a9 as _e,ao as Re,cu as Ee,an as me,V as qe,B as P,o as ze,J as M,cm as N,k as W,N as $e,am as He}from"./index-078f93a6.js";import{d as je,a as Be}from"./StatEditorList-d8de33d3.js";import{c as he,C as Ve,a as I,S as _,h as q}from"./StarDisplay-3359d7a4.js";import{b as Me}from"./totalUtils-09c2317e.js";import{B as Pe}from"./Help-a0275779.js";import{S as pe,s as Ne}from"./sortByRarityAndName-a23c36c8.js";import{a as fe}from"./Artifact-df05b0e0.js";import{S as be,g as We}from"./index-230ec75b.js";import{e as z,c as Ge}from"./LocationAutocomplete-a8a1d629.js";import{a as Fe,s as Je}from"./index-f7fb7351.js";import{I as Qe}from"./ColoredText-cbe1a83d.js";import{S as Ue}from"./SlotIcon-fdaccc71.js";function Xe({levelLow:m,levelHigh:o,setLow:i,setHigh:h,setBoth:u,dark:c=!1,disabled:p=!1,showLevelText:f=!1}){const[r,a]=l.useState(m),[d,v]=l.useState(o),C=l.useCallback((g,b)=>{if(typeof b=="number")throw new TypeError;const[s,x]=b;a(s),v(x)},[a,v]);return l.useEffect(()=>a(m),[a,m]),l.useEffect(()=>v(o),[v,o]),y(oe,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:c?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[e(E,{value:r,onChange:g=>i(R(g??0,0,o)),sx:{px:1,pl:f?2:void 0,width:f?100:50,borderRadius:"4px 0 0 4px"},inputProps:{sx:{textAlign:f?"right":"center"}},startAdornment:f?"Level: ":void 0,disabled:p}),e(pe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact Level Range",value:[r,d],onChange:C,onChangeCommitted:(g,b)=>u(b[0],b[1]),valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:p}),e(E,{value:d,onChange:g=>h(R(g??0,m,20)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:p})]})}var J={},Ye=ne;Object.defineProperty(J,"__esModule",{value:!0});var ge=J.default=void 0,Ze=Ye(re()),De=ie;ge=J.default=(0,Ze.default)((0,De.jsx)("path",{d:"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m-6 0h-4V5h4z"}),"BusinessCenter");var Q={},Oe=ne;Object.defineProperty(Q,"__esModule",{value:!0});var xe=Q.default=void 0,et=Oe(re()),le=ie;xe=Q.default=(0,et.default)([(0,le.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,le.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function tt({mainStatKeys:m,setMainStatKeys:o,totals:i}){const{t:h}=K("artifact"),{t:u}=K("statKey_gen"),c=l.useMemo(()=>ce.map(a=>({key:a,label:`${u(a)}${fe(a)}`,variant:se.getVariant(a)})),[u]),p=l.useCallback(a=>e(be,{statKey:a,iconProps:{sx:{ml:1,color:se.getVariant(a)}}}),[]),f=l.useCallback(a=>e("strong",{children:i[a]}),[i]),r=l.useCallback(a=>e(S,{size:"small",label:i[a]}),[i]);return e(z,{options:c,valueKeys:m,onChange:o,toImg:p,toExLabel:f,toExItemLabel:r,label:h("autocompleteLabels.mainStats")})}function at({artSetKeys:m,setArtSetKeys:o,totals:i}){const{t:h}=K(["artifact","artifactNames_gen"]),u=l.useCallback(r=>e(Qe,{src:Fe(r),size:3}),[]),c=l.useCallback(r=>e("strong",{children:i[r]}),[i]),p=l.useCallback(r=>e(S,{size:"small",label:i[r]}),[i]),f=l.useMemo(()=>Object.entries(Je).flatMap(([r,a])=>a.map(d=>({key:d,grouper:+r,label:h(`artifactNames_gen:${d}`)}))).sort(Ne),[h]);return e(z,{options:f,valueKeys:m,label:h("artifact:autocompleteLabels.sets"),toImg:u,toExLabel:c,toExItemLabel:p,onChange:o,groupBy:r=>{var a;return((a=r.grouper)==null?void 0:a.toString())??""},renderGroup:r=>r.group&&y(Ae,{component:F,children:[y(Ge,{sx:{top:"-1em"},children:[r.group," ",e(he,{stars:+r.group,inline:!0})]},`${r.group}Header`),r.children]},r.group)})}function st({substatKeys:m,setSubstatKeys:o,totals:i}){const{t:h}=K("artifact"),{t:u}=K("statKey_gen"),c=l.useMemo(()=>ue.map(a=>({key:a,label:`${u(a)}${fe(a)}`})),[u]),p=l.useCallback(a=>e(be,{statKey:a,iconProps:{sx:{ml:1}}}),[]),f=l.useCallback(a=>e("strong",{children:i[a]}),[i]),r=l.useCallback(a=>e(S,{size:"small",label:i[a]}),[i]);return e(z,{options:c,toImg:p,toExLabel:f,toExItemLabel:r,valueKeys:m,onChange:o,label:h("autocompleteLabels.substats")})}function lt({locations:m,setLocations:o,totals:i,disabled:h}){const{t:u}=K(["artifact","sillyWisher_charNames","charNames_gen"]),c=de(),{gender:p}=Ie(),{silly:f}=l.useContext(_e),r=l.useCallback((s,x)=>u(`${x?"sillyWisher_charNames":"charNames_gen"}:${Re(c.chars.LocationToCharacterKey(s),p)}`),[c,p,u]),a=l.useCallback(s=>e(Ve,{characterKey:c.chars.LocationToCharacterKey(s)}),[c]),d=l.useCallback(s=>e("strong",{children:i[s]}),[i]),v=l.useCallback(s=>e(S,{size:"small",label:i[s]}),[i]),C=l.useCallback(s=>s==="Traveler"?Ee.some(x=>c.charMeta.get(x).favorite):s?c.charMeta.get(s).favorite:!1,[c]),g=l.useCallback(s=>We(c.chars.LocationToCharacterKey(s),p).elementKey??void 0,[c,p]),b=l.useMemo(()=>me.filter(s=>c.chars.get(c.chars.LocationToCharacterKey(s))).map(s=>({key:s,label:r(s,f),favorite:C(s),color:g(s),alternateNames:[r(s,!1)]})).sort((s,x)=>s.favorite&&!x.favorite?-1:!s.favorite&&x.favorite?1:s.label.localeCompare(x.label)),[c.chars,C,g,f,r]);return e(l.Suspense,{fallback:e(qe,{variant:"text",width:100}),children:e(z,{disabled:h,options:b,valueKeys:m,onChange:s=>o(s),toImg:a,toExLabel:d,toExItemLabel:v,label:u`artifact:filterLocation.location`,chipProps:{variant:"outlined"}})})}function ot({rvLow:m,rvHigh:o,mrvLow:i,mrvHigh:h,reset:u,setLow:c,setHigh:p,setBoth:f,dark:r=!1,disabled:a=!1}){const[d,v]=l.useState(!1),[C,g]=l.useState(d?i:m),[b,s]=l.useState(d?h:o),x=l.useCallback((k,T)=>{if(typeof T=="number")throw new TypeError;const[$,H]=T;g($),s(H)},[g,s]);return l.useEffect(()=>g(d?i:m),[g,m,i,d]),l.useEffect(()=>s(d?h:o),[s,o,h,d]),y(oe,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:r?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[y(F,{sx:{width:100,height:30,display:"flex",alignItems:"center"},children:[e(P,{onClick:()=>v(k=>(u(),!k)),sx:{p:0,minWidth:0,width:"50%",height:"100%",borderRadius:"4px 0 0 4px",transition:"transform 0.3s ease","&:hover":{transform:"translate(-3px, -3px)"}},children:d?"MRV":"RV"}),e(E,{value:C,onChange:k=>c(R(k??0,0,b),d),sx:{pr:1,pl:2,width:"50%",height:"100%",borderRadius:"0 0 0 0"},inputProps:{sx:{textAlign:"right"}},disabled:a})]}),e(pe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>`Arifact ${d?"Max RV":"RV"} Range`,value:[C,b],onChange:x,onChangeCommitted:(k,T)=>f(T[0],T[1],d),valueLabelDisplay:"auto",min:0,max:900,disabled:a}),e(E,{value:b,onChange:k=>p(R(k??0,C,900),d),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:a})]})}const G=["locked","unlocked"],rt=q([...N]),nt=q([...W]),it=q([...G]),ct=q([1,2,3,4]);function ut({filterOption:m,filterOptionDispatch:o,filteredIds:i,disableSlotFilter:h=!1}){const{t:u}=K(["artifact","ui"]),c=l.useMemo(()=>ze(i,t=>!0),[i]),{artSetKeys:p=[],mainStatKeys:f=[],rarity:r=[],slotKeys:a=[],levelLow:d=0,levelHigh:v=20,substats:C=[],locations:g,showEquipped:b,showInventory:s,locked:x=[...G],rvLow:k=0,rvHigh:T=900,mrvLow:$=0,mrvHigh:H=900,lines:U=[]}=m,X=de(),{rarityTotal:ye,slotTotal:ve,lockedTotal:Ce,linesTotal:Se,equippedTotal:Y,setTotal:ke,mainStatTotal:Te,subStatTotal:Le,locationTotal:Ke}=l.useMemo(()=>{const t={rarityTotal:N,slotTotal:W,lockedTotal:["locked","unlocked"],linesTotal:[0,1,2,3,4],equippedTotal:["equipped","unequipped"],setTotal:He,mainStatTotal:ce,subStatTotal:ue,locationTotal:[...me,""]};return Me(t,n=>Object.entries(X.arts.data).forEach(([L,w])=>{const{rarity:A,slotKey:Z,location:j,setKey:D,mainStatKey:O,substats:we}=w,ee=w.lock?"locked":"unlocked",te=w.substats.filter(B=>B.value).length,ae=j?"equipped":"unequipped";(!h||w.slotKey===m.slotKeys[0])&&(n.rarityTotal[A].total++,n.slotTotal[Z].total++,n.lockedTotal[ee].total++,n.linesTotal[te].total++,n.equippedTotal[ae].total++,n.setTotal[D].total++,n.mainStatTotal[O].total++,we.forEach(B=>{const V=B.key;V&&(n.subStatTotal[V].total++,c[L]&&n.subStatTotal[V].current++)}),n.locationTotal[j].total++),c[L]&&(n.rarityTotal[A].current++,n.slotTotal[Z].current++,n.lockedTotal[ee].current++,n.linesTotal[te].current++,n.equippedTotal[ae].current++,n.setTotal[D].current++,n.mainStatTotal[O].current++,n.locationTotal[j].current++)}))},[X,h,c,m]);return y(M,{container:!0,spacing:1,children:[y(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(_,{fullWidth:!0,value:r,size:"small",children:N.map(t=>y(I,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({rarity:rt(r,t)}),children:[e(he,{stars:t,inline:!0}),e(S,{label:ye[t],size:"small"})]},t))}),e(_,{fullWidth:!0,value:a,size:"small",disabled:h,children:W.map(t=>y(I,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({slotKeys:nt(a,t)}),children:[e(Ue,{slotKey:t}),e(S,{label:ve[t],size:"small"})]},t))}),e(_,{fullWidth:!0,value:x,size:"small",children:G.map((t,n)=>y(I,{value:t,sx:{display:"flex",gap:1},onClick:()=>o({locked:it(x,t)}),children:[n?e(je,{}):e(Be,{}),e($e,{i18nKey:`ui:${t}`,t:u}),e(S,{label:Ce[n?"unlocked":"locked"],size:"small"})]},t))}),e(_,{fullWidth:!0,value:U,size:"small",children:[1,2,3,4].map(t=>y(I,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({lines:ct(U,t)}),children:[e(F,{whiteSpace:"nowrap",children:u("sub",{count:t})}),e(S,{label:Se[t],size:"small"})]},t))}),y(P,{startIcon:e(xe,{}),color:b?"success":"secondary",onClick:()=>o({showEquipped:!b}),children:[u`equippedArt`," ",e(S,{sx:{ml:1},label:Y.equipped,size:"small"})]}),y(P,{startIcon:e(ge,{}),color:s?"success":"secondary",onClick:()=>o({showInventory:!s}),children:[u`artInInv`," ",e(S,{sx:{ml:1},label:Y.unequipped,size:"small"})]}),e(Xe,{showLevelText:!0,levelLow:d,levelHigh:v,setLow:t=>o({levelLow:t}),setHigh:t=>o({levelHigh:t}),setBoth:(t,n)=>o({levelLow:t,levelHigh:n})}),e(ot,{showLevelText:!0,rvLow:k,rvHigh:T,mrvLow:$,mrvHigh:H,reset:()=>{o({rvLow:0,rvHigh:900,mrvLow:0,mrvHigh:900})},setLow:(t,n)=>{o({[n?"mrvLow":"rvLow"]:t})},setHigh:(t,n)=>{o({[n?"mrvHigh":"rvHigh"]:t})},setBoth:(t,n,L)=>{const w=L?"mrvLow":"rvLow",A=L?"mrvHigh":"rvHigh";o({[w]:t,[A]:n})}})]}),y(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(at,{totals:ke,artSetKeys:p,setArtSetKeys:t=>o({artSetKeys:t})}),e(tt,{totals:Te,mainStatKeys:f,setMainStatKeys:t=>o({mainStatKeys:t})}),e(st,{totals:Le,substatKeys:C,setSubstatKeys:t=>o({substats:t})}),e(l.Suspense,{fallback:null,children:e(Pe,{title:b?u`locationsTooltip`:"",placement:"top",children:e("span",{children:e(lt,{totals:Ke,locations:b?[]:g,setLocations:t=>o({locations:t}),disabled:b})})})})]})]})}const kt=Object.freeze(Object.defineProperty({__proto__:null,default:ut},Symbol.toStringTag,{value:"Module"}));export{ut as A,Xe as a,kt as b};
