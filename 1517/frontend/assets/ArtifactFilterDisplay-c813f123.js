import{e as s,n as y,p as e,a0 as R,a2 as z,du as oe,r as re,i as ne,j as ie,u as K,bH as ce,bi as le,q as S,K as F,cm as Ae,$ as ue,b as de,d as _e,a9 as Ie,ao as Re,ct as ze,an as me,V as Ee,B as P,o as $e,J as M,cl as N,k as W,N as qe,am as He}from"./index-988ec5d8.js";import{d as je,a as Be}from"./StatEditorList-6ba071df.js";import{c as he,C as Ve,a as _,S as I,h as E}from"./StarDisplay-161237e5.js";import{b as Me}from"./totalUtils-f76e92be.js";import{B as Pe}from"./Help-65462091.js";import{S as fe,s as Ne}from"./sortByRarityAndName-02317513.js";import{a as pe}from"./Artifact-2e5c2b75.js";import{S as be,g as We}from"./index-d7f59dd8.js";import{e as $,c as Ge}from"./LocationAutocomplete-6903c226.js";import{a as Fe,s as Je}from"./index-5b5338d0.js";import{I as Qe}from"./ColoredText-d3d7f721.js";import{S as Ue}from"./SlotIcon-8d7a6189.js";function Xe({levelLow:m,levelHigh:o,setLow:i,setHigh:h,setBoth:u,dark:c=!1,disabled:f=!1,showLevelText:p=!1}){const[r,a]=s.useState(m),[d,v]=s.useState(o),C=s.useCallback((g,b)=>{if(typeof b=="number")throw new TypeError;const[l,x]=b;a(l),v(x)},[a,v]);return s.useEffect(()=>a(m),[a,m]),s.useEffect(()=>v(o),[v,o]),y(oe,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:c?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[e(z,{value:r,onChange:g=>i(R(g??0,0,o)),sx:{px:1,pl:p?2:void 0,width:p?100:50,borderRadius:"4px 0 0 4px"},inputProps:{sx:{textAlign:p?"right":"center"}},startAdornment:p?"Level: ":void 0,disabled:f}),e(fe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact Level Range",value:[r,d],onChange:C,onChangeCommitted:(g,b)=>u(b[0],b[1]),valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:f}),e(z,{value:d,onChange:g=>h(R(g??0,m,20)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:f})]})}var J={},Ye=ne;Object.defineProperty(J,"__esModule",{value:!0});var ge=J.default=void 0,Ze=Ye(re()),De=ie,Oe=(0,Ze.default)((0,De.jsx)("path",{d:"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z"}),"BusinessCenter");ge=J.default=Oe;var Q={},et=ne;Object.defineProperty(Q,"__esModule",{value:!0});var xe=Q.default=void 0,tt=et(re()),se=ie,at=(0,tt.default)([(0,se.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,se.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");xe=Q.default=at;function lt({mainStatKeys:m,setMainStatKeys:o,totals:i}){const{t:h}=K("artifact"),{t:u}=K("statKey_gen"),c=s.useMemo(()=>ce.map(a=>({key:a,label:`${u(a)}${pe(a)}`,variant:le.getVariant(a)})),[u]),f=s.useCallback(a=>e(be,{statKey:a,iconProps:{sx:{ml:1,color:le.getVariant(a)}}}),[]),p=s.useCallback(a=>e("strong",{children:i[a]}),[i]),r=s.useCallback(a=>e(S,{size:"small",label:i[a]}),[i]);return e($,{options:c,valueKeys:m,onChange:o,toImg:f,toExLabel:p,toExItemLabel:r,label:h("autocompleteLabels.mainStats")})}function st({artSetKeys:m,setArtSetKeys:o,totals:i}){const{t:h}=K(["artifact","artifactNames_gen"]),u=s.useCallback(r=>e(Qe,{src:Fe(r),size:3}),[]),c=s.useCallback(r=>e("strong",{children:i[r]}),[i]),f=s.useCallback(r=>e(S,{size:"small",label:i[r]}),[i]),p=s.useMemo(()=>Object.entries(Je).flatMap(([r,a])=>a.map(d=>({key:d,grouper:+r,label:h(`artifactNames_gen:${d}`)}))).sort(Ne),[h]);return e($,{options:p,valueKeys:m,label:h("artifact:autocompleteLabels.sets"),toImg:u,toExLabel:c,toExItemLabel:f,onChange:o,groupBy:r=>{var a;return((a=r.grouper)==null?void 0:a.toString())??""},renderGroup:r=>r.group&&y(Ae,{component:F,children:[y(Ge,{sx:{top:"-1em"},children:[r.group," ",e(he,{stars:+r.group,inline:!0})]},`${r.group}Header`),r.children]},r.group)})}function ot({substatKeys:m,setSubstatKeys:o,totals:i}){const{t:h}=K("artifact"),{t:u}=K("statKey_gen"),c=s.useMemo(()=>ue.map(a=>({key:a,label:`${u(a)}${pe(a)}`})),[u]),f=s.useCallback(a=>e(be,{statKey:a,iconProps:{sx:{ml:1}}}),[]),p=s.useCallback(a=>e("strong",{children:i[a]}),[i]),r=s.useCallback(a=>e(S,{size:"small",label:i[a]}),[i]);return e($,{options:c,toImg:f,toExLabel:p,toExItemLabel:r,valueKeys:m,onChange:o,label:h("autocompleteLabels.substats")})}function rt({locations:m,setLocations:o,totals:i,disabled:h}){const{t:u}=K(["artifact","sillyWisher_charNames","charNames_gen"]),c=de(),{gender:f}=_e(),{silly:p}=s.useContext(Ie),r=s.useCallback((l,x)=>u(`${x?"sillyWisher_charNames":"charNames_gen"}:${Re(c.chars.LocationToCharacterKey(l),f)}`),[c,f,u]),a=s.useCallback(l=>e(Ve,{characterKey:c.chars.LocationToCharacterKey(l)}),[c]),d=s.useCallback(l=>e("strong",{children:i[l]}),[i]),v=s.useCallback(l=>e(S,{size:"small",label:i[l]}),[i]),C=s.useCallback(l=>l==="Traveler"?ze.some(x=>c.charMeta.get(x).favorite):l?c.charMeta.get(l).favorite:!1,[c]),g=s.useCallback(l=>We(c.chars.LocationToCharacterKey(l),f).elementKey??void 0,[c,f]),b=s.useMemo(()=>me.filter(l=>c.chars.get(c.chars.LocationToCharacterKey(l))).map(l=>({key:l,label:r(l,p),favorite:C(l),color:g(l),alternateNames:[r(l,!1)]})).sort((l,x)=>l.favorite&&!x.favorite?-1:!l.favorite&&x.favorite?1:l.label.localeCompare(x.label)),[c.chars,C,g,p,r]);return e(s.Suspense,{fallback:e(Ee,{variant:"text",width:100}),children:e($,{disabled:h,options:b,valueKeys:m,onChange:l=>o(l),toImg:a,toExLabel:d,toExItemLabel:v,label:u`artifact:filterLocation.location`,chipProps:{variant:"outlined"}})})}function nt({rvLow:m,rvHigh:o,mrvLow:i,mrvHigh:h,reset:u,setLow:c,setHigh:f,setBoth:p,dark:r=!1,disabled:a=!1}){const[d,v]=s.useState(!1),[C,g]=s.useState(d?i:m),[b,l]=s.useState(d?h:o),x=s.useCallback((T,k)=>{if(typeof k=="number")throw new TypeError;const[q,H]=k;g(q),l(H)},[g,l]);return s.useEffect(()=>g(d?i:m),[g,m,i,d]),s.useEffect(()=>l(d?h:o),[l,o,h,d]),y(oe,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:r?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[y(F,{sx:{width:100,height:30,display:"flex",alignItems:"center"},children:[e(P,{onClick:()=>v(T=>(u(),!T)),sx:{p:0,minWidth:0,width:"50%",height:"100%",borderRadius:"4px 0 0 4px",transition:"transform 0.3s ease","&:hover":{transform:"translate(-3px, -3px)"}},children:d?"MRV":"RV"}),e(z,{value:C,onChange:T=>c(R(T??0,0,b),d),sx:{pr:1,pl:2,width:"50%",height:"100%",borderRadius:"0 0 0 0"},inputProps:{sx:{textAlign:"right"}},disabled:a})]}),e(fe,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>`Arifact ${d?"Max RV":"RV"} Range`,value:[C,b],onChange:x,onChangeCommitted:(T,k)=>p(k[0],k[1],d),valueLabelDisplay:"auto",min:0,max:900,disabled:a}),e(z,{value:b,onChange:T=>f(R(T??0,C,900),d),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:a})]})}const G=["locked","unlocked"],it=E([...N]),ct=E([...W]),ut=E([...G]),dt=E([1,2,3,4]);function mt({filterOption:m,filterOptionDispatch:o,filteredIds:i,disableSlotFilter:h=!1}){const{t:u}=K(["artifact","ui"]),c=s.useMemo(()=>$e(i,t=>!0),[i]),{artSetKeys:f=[],mainStatKeys:p=[],rarity:r=[],slotKeys:a=[],levelLow:d=0,levelHigh:v=20,substats:C=[],locations:g,showEquipped:b,showInventory:l,locked:x=[...G],rvLow:T=0,rvHigh:k=900,mrvLow:q=0,mrvHigh:H=900,lines:U=[]}=m,X=de(),{rarityTotal:ye,slotTotal:ve,lockedTotal:Ce,linesTotal:Se,equippedTotal:Y,setTotal:Te,mainStatTotal:ke,subStatTotal:Le,locationTotal:Ke}=s.useMemo(()=>{const t={rarityTotal:N,slotTotal:W,lockedTotal:["locked","unlocked"],linesTotal:[0,1,2,3,4],equippedTotal:["equipped","unequipped"],setTotal:He,mainStatTotal:ce,subStatTotal:ue,locationTotal:[...me,""]};return Me(t,n=>Object.entries(X.arts.data).forEach(([L,w])=>{const{rarity:A,slotKey:Z,location:j,setKey:D,mainStatKey:O,substats:we}=w,ee=w.lock?"locked":"unlocked",te=w.substats.filter(B=>B.value).length,ae=j?"equipped":"unequipped";(!h||w.slotKey===m.slotKeys[0])&&(n.rarityTotal[A].total++,n.slotTotal[Z].total++,n.lockedTotal[ee].total++,n.linesTotal[te].total++,n.equippedTotal[ae].total++,n.setTotal[D].total++,n.mainStatTotal[O].total++,we.forEach(B=>{const V=B.key;V&&(n.subStatTotal[V].total++,c[L]&&n.subStatTotal[V].current++)}),n.locationTotal[j].total++),c[L]&&(n.rarityTotal[A].current++,n.slotTotal[Z].current++,n.lockedTotal[ee].current++,n.linesTotal[te].current++,n.equippedTotal[ae].current++,n.setTotal[D].current++,n.mainStatTotal[O].current++,n.locationTotal[j].current++)}))},[X,h,c,m]);return y(M,{container:!0,spacing:1,children:[y(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(I,{fullWidth:!0,value:r,size:"small",children:N.map(t=>y(_,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({rarity:it(r,t)}),children:[e(he,{stars:t,inline:!0}),e(S,{label:ye[t],size:"small"})]},t))}),e(I,{fullWidth:!0,value:a,size:"small",disabled:h,children:W.map(t=>y(_,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({slotKeys:ct(a,t)}),children:[e(Ue,{slotKey:t}),e(S,{label:ve[t],size:"small"})]},t))}),e(I,{fullWidth:!0,value:x,size:"small",children:G.map((t,n)=>y(_,{value:t,sx:{display:"flex",gap:1},onClick:()=>o({locked:ut(x,t)}),children:[n?e(je,{}):e(Be,{}),e(qe,{i18nKey:`ui:${t}`,t:u}),e(S,{label:Ce[n?"unlocked":"locked"],size:"small"})]},t))}),e(I,{fullWidth:!0,value:U,size:"small",children:[1,2,3,4].map(t=>y(_,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>o({lines:dt(U,t)}),children:[e(F,{whiteSpace:"nowrap",children:u("sub",{count:t})}),e(S,{label:Se[t],size:"small"})]},t))}),y(P,{startIcon:e(xe,{}),color:b?"success":"secondary",onClick:()=>o({showEquipped:!b}),children:[u`equippedArt`," ",e(S,{sx:{ml:1},label:Y.equipped,size:"small"})]}),y(P,{startIcon:e(ge,{}),color:l?"success":"secondary",onClick:()=>o({showInventory:!l}),children:[u`artInInv`," ",e(S,{sx:{ml:1},label:Y.unequipped,size:"small"})]}),e(Xe,{showLevelText:!0,levelLow:d,levelHigh:v,setLow:t=>o({levelLow:t}),setHigh:t=>o({levelHigh:t}),setBoth:(t,n)=>o({levelLow:t,levelHigh:n})}),e(nt,{showLevelText:!0,rvLow:T,rvHigh:k,mrvLow:q,mrvHigh:H,reset:()=>{o({rvLow:0,rvHigh:900,mrvLow:0,mrvHigh:900})},setLow:(t,n)=>{o({[n?"mrvLow":"rvLow"]:t})},setHigh:(t,n)=>{o({[n?"mrvHigh":"rvHigh"]:t})},setBoth:(t,n,L)=>{const w=L?"mrvLow":"rvLow",A=L?"mrvHigh":"rvHigh";o({[w]:t,[A]:n})}})]}),y(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[e(st,{totals:Te,artSetKeys:f,setArtSetKeys:t=>o({artSetKeys:t})}),e(lt,{totals:ke,mainStatKeys:p,setMainStatKeys:t=>o({mainStatKeys:t})}),e(ot,{totals:Le,substatKeys:C,setSubstatKeys:t=>o({substats:t})}),e(s.Suspense,{fallback:null,children:e(Pe,{title:b?u`locationsTooltip`:"",placement:"top",children:e("span",{children:e(rt,{totals:Ke,locations:b?[]:g,setLocations:t=>o({locations:t}),disabled:b})})})})]})]})}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{mt as A,Xe as a,Lt as b};
