import{c as T,j as g,r as O,i as z,l as $,p as t,n as k,aI as M,aJ as S,e as d,W as L,aL as A,q as D,u as N,ac as P,b as q,d as H,as as G,$ as I,b8 as R,M as F,cG as W,ar as B}from"./index-1bec8779.js";import{T as _,b as K,A as b,C as V,i as J}from"./StarDisplay-adc31b21.js";import{g as U}from"./index-b76b9937.js";import{C as w}from"./ColoredText-d0f79325.js";import{M as j}from"./DropdownButton-12e93f36.js";const ce=T(g.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),le=T(g.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");var x={},E=z;Object.defineProperty(x,"__esModule",{value:!0});var Q=x.default=void 0,X=E(O()),Y=g,Z=(0,X.default)((0,Y.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");Q=x.default=Z;function ee({options:h,valueKey:i,label:y,onChange:f,toImg:p,toExItemLabel:n,toExLabel:o,textFieldProps:v,...C}){const l=h.find(e=>e.key===i)??null,s=$();return t(b,{autoHighlight:!0,options:h,value:l,onChange:(e,a,c)=>f((a==null?void 0:a.key)??null),isOptionEqualToValue:(e,a)=>e.key===(a==null?void 0:a.key),renderInput:e=>{var r;const a=l==null?void 0:l.color,c=a?(r=s.palette[a])==null?void 0:r.main:void 0,u=l==null?void 0:l.key;return t(_,{...e,...v,label:y,InputProps:{...e.InputProps,startAdornment:u?p(u):void 0},inputProps:{...e.inputProps,autoComplete:"new-password",style:{color:c}},color:i?"success":"primary"})},renderOption:(e,a)=>k(j,{value:a.key,sx:{whiteSpace:"normal"},...e,children:[t(M,{children:p(a.key)}),t(S,{color:a.color,children:t(d.Suspense,{fallback:t(L,{variant:"text",width:100}),children:k(w,{color:a.color,sx:{display:"flex",gap:1},children:[a.key===(l==null?void 0:l.key)?t("strong",{children:a.label}):t("span",{children:a.label}),n==null?void 0:n(a.key)]})})}),!!a.favorite&&t(K,{})]}),filterOptions:(e,{inputValue:a})=>e.filter(c=>{var u;return c.label.toLowerCase().includes(a.toLowerCase())||((u=c.alternateNames)==null?void 0:u.some(r=>r.toLowerCase().includes(a.toLowerCase())))}),...C})}function ne({options:h,valueKeys:i,label:y,onChange:f,toImg:p,toExItemLabel:n,toExLabel:o,chipProps:v,...C}){const l=d.useMemo(()=>i.map(s=>h.find(e=>e.key===s)).filter(s=>s),[h,i]);return t(b,{autoHighlight:!0,options:h,multiple:!0,disableCloseOnSelect:!0,value:l,onChange:(s,e,a)=>a==="clear"?f([]):e!==null&&f(e.map(c=>c.key)),isOptionEqualToValue:(s,e)=>s.key===e.key,renderInput:s=>t(_,{...s,label:y,inputProps:{...s.inputProps,autoComplete:"new-password"},color:i.length?"success":"primary"}),renderOption:(s,e)=>k(j,{value:e.key,...s,children:[t(M,{children:p(e.key)}),t(S,{children:t(d.Suspense,{fallback:t(L,{variant:"text",width:100}),children:k(w,{color:e.color,sx:{display:"flex",gap:1},children:[i.includes(e.key)?t("strong",{children:e.label}):t("span",{children:e.label}),n==null?void 0:n(e.key)]})})}),!!e.favorite&&t(K,{})]}),renderTags:(s,e)=>s.map(({key:a,label:c,color:u},r)=>A(D,{...v,...e({index:r}),key:`${r}${a}${c}`,icon:p(a),label:o?k("span",{children:[c," ",o(a)]}):c,color:u})),filterOptions:(s,{inputValue:e})=>s.filter(a=>{var c;return a.label.toLowerCase().includes(e.toLowerCase())||((c=a.alternateNames)==null?void 0:c.some(u=>u.toLowerCase().includes(e.toLowerCase())))}),...C})}function ie({location:h,setLocation:i,filter:y=()=>!0,autoCompleteProps:f={}}){const{t:p}=N(["ui","artifact","sillyWisher_charNames","charNames_gen"]),{silly:n}=d.useContext(P),o=q(),{gender:v}=H(),C=d.useCallback(r=>m=>p(`${r?"sillyWisher_charNames":"charNames_gen"}:${G(o.chars.LocationToCharacterKey(m),v)}`),[o,v,p]),[l,s]=I();d.useEffect(()=>o.arts.followAny(()=>s()),[o,s]);const e=d.useMemo(()=>l&&o.chars.keys.map(r=>R(r)),[l,o]),a=d.useCallback(r=>r===""?t(J,{}):t(F,{sx:{opacity:e.includes(r)?void 0:.7},children:t(V,{characterKey:o.chars.LocationToCharacterKey(r)})}),[o,e]),c=d.useCallback(r=>r==="Traveler"?W.some(m=>o.charMeta.get(m).favorite):r?o.charMeta.get(r).favorite:!1,[o]),u=d.useMemo(()=>[{key:"",label:p`artifact:filterLocation.inventory`},...Array.from(new Set(B.filter(r=>y(U(o.chars.LocationToCharacterKey(r),v))))).map(r=>({key:r,label:C(n)(r),favorite:c(r),alternateNames:n?[C(!n)(r)]:void 0,color:e.includes(r)?void 0:"secondary"})).sort((r,m)=>r.favorite&&!m.favorite?-1:!r.favorite&&m.favorite?1:!r.color&&m.color?-1:r.color&&!m.color?1:r.label.localeCompare(m.label))],[p,o.chars,v,e,y,C,n,c]);return t(d.Suspense,{fallback:t(L,{variant:"text",width:100}),children:t(ee,{size:"small",options:u,valueKey:h,onChange:r=>i(r??""),toImg:a,...f})})}function ue({condition:h,wrapper:i,falseWrapper:y,children:f}){return h?i(f):y?y(f):f}export{ue as C,ee as G,ce as L,le as a,ie as b,ne as c,Q as d};
