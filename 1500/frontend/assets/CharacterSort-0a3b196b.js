import{b as T,r as de,i as ue,j as E,p as t,cw as zt,cx as Rt,cy as Et,cz as Wt,cA as $t,cB as Tt,cC as Ht,cD as jt,cE as Ft,cF as Nt,bF as At,bD as Lt,bh as he,aY as Z,cG as Gt,a_ as ee,cH as N,aX as te,aV as A,aZ as P,cI as ne,u as He,bw as Me,bx as Ot,n as c,aW as D,T as p,c as G,e as d,bb as ze,f as H,cJ as Vt,Y as qt,d as O,cK as Kt,bi as Pt,bv as Ut,a0 as Jt,K as h,V as Q,t as j,a9 as je,c3 as Fe,aA as Qt,s as Yt,C as Ne,J as L,bL as Xt,al as pe,q as $,k as Zt,l as Ae,m as ae,aE as Le,at as en,aD as tn,af as nn,cn as oe,ao as se,aq as re,bo as ie,cL as an}from"./index-9cb39364.js";import{E as fe,s as Ge,G as C,H as I,I as v,D as B,c as m,J as V,K as me,L as on,M as sn,T as Oe,N as F,F as ce,z as rn,g as q,A as Re,O as cn,P as ln,x as ge,Q as dn,R as Ve,S as qe,q as un,v as Ke,u as w,w as Pe,n as Ue}from"./index-97f4e8b9.js";import{e as Je,p as hn,c as ve,L as pn,b as U,F as fn,a as Qe,d as mn,S as gn,h as Ye,j as vn}from"./StarDisplay-4e568075.js";import{D as Y,C as Xe,a as yn}from"./FieldDisplay-ef45fcb2.js";import{b as xn,g as Sn}from"./index-27b82561.js";import{g as ye,W as xe}from"./index-df0072ad.js";import{a as Ee,u as Ze}from"./WeaponUtil-2a009db6.js";import{A as et}from"./Artifact-31bf8e6b.js";import{S as _}from"./SqBadge-27e03487.js";import{B as J}from"./Help-5e0d91b8.js";import{S as Cn}from"./SlotIcon-c6bb8994.js";import{i as Se,I as bn,C as wn}from"./ColoredText-aa84ea1b.js";import{C as Ce}from"./CardActionArea-70ae795a.js";function tt(e){const n=T();return Je(n.chars,e)}function nt(e){const n=T();return Je(n.charMeta,e)}var be={},Dn=ue;Object.defineProperty(be,"__esModule",{value:!0});var at=be.default=void 0,In=Dn(de()),_n=E,kn=(0,In.default)((0,_n.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");at=be.default=kn;function Bn({statKey:e,iconProps:n={}}){switch(e){case"hp":case"hp_":case"base_hp":return t(Lt,{...n});case"atk":case"atk_":case"base_atk":return t(At,{...n});case"def":case"def_":case"base_def":return t(Nt,{...n});case"eleMas":return t(Ft,{...n});case"critRate_":return t(jt,{...n});case"critDMG_":return t(Ht,{...n});case"enerRech_":return t(Tt,{...n});case"incHeal_":return t($t,{...n});case"heal_":return t(Wt,{...n});case"cdRed_":return t(Et,{...n});case"shield_":return t(Rt,{...n});case"stamina":return t(zt,{...n})}const a=e.split("_")[0];return he.includes(a)?t(Mn,{ele:a,iconProps:n}):null}function Mn({ele:e,iconProps:n={}}){switch(e){case"anemo":return t(ne,{...n});case"cryo":return t(P,{...n});case"dendro":return t(A,{...n});case"electro":return t(te,{...n});case"geo":return t(N,{...n});case"hydro":return t(ee,{...n});case"physical":return t(Gt,{...n});case"pyro":return t(Z,{...n})}}function zn({statKey:e,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:r}=He("statKey_gen"),i=Me(e),l=Ot(n,Me(e));return c(p,{color:a?`${a}.main`:void 0,...s,children:[t(Bn,{statKey:e,iconProps:D})," ",r(e)," ",t("strong",{children:`${o}${l}${i}`})]},e)}const Wa=G(E.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),$a=G(E.jsx("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck"),Rn=G(E.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Ta=G(E.jsx("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science"),Ha=G(E.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");var we={},En=ue;Object.defineProperty(we,"__esModule",{value:!0});var Wn=we.default=void 0,$n=En(de()),Tn=E,Hn=(0,$n.default)((0,Tn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Wn=we.default=Hn;function jn(e){const n=T();return d.useCallback(a=>{if(!e)return;const o=n.chars.get(e);if(o)if("type"in a)switch(a.type){case"enemyOverride":{const s=o.enemyOverride,{statKey:r,value:i}=a;if(s[r]===i)break;n.chars.set(e,{...o,enemyOverride:{...s,[r]:i}});break}case"editStats":{const{statKey:s,value:r}=a,i=ze(o.bonusStats);if(i[s]===r)break;r?i[s]=r:delete i[s],n.chars.set(e,{...o,bonusStats:i});break}case"resetStats":{const{statKey:s}=a,r=o.bonusStats;delete r[s],n.chars.set(e,{...o,bonusStats:r});break}case"teamConditional":{const{teamMateKey:s,conditional:r}=a,i=ze(o.teamConditional);i[s]=r,n.chars.set(e,{...o,teamConditional:i});break}case"team":{const{team:s}=o,r=[...s],{index:i,charKey:l}=a;r[i]=l,n.chars.set(e,{...o,team:r})}}else n.chars.set(e,{...o,...a})},[e,n])}function Fn({iconProps:e}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),t(fe,{ele:H[n%H.length],iconProps:e})}const S=e=>t(Oe,{ns:"elementalResonance_gen",key18:e}),le=e=>t(Oe,{ns:"elementalResonance",key18:e}),b=Ge(...H.map(e=>C[e])),ot=Vt(he,e=>[`${e}_res_`,I(m.activeCharKey,m.charKey,v(C.ele,4,B(.15)))]),Nn={name:S("ProtectiveCanopy.name"),desc:S("ProtectiveCanopy.desc"),icon:c("span",{children:[t(Fn,{iconProps:D})," x4"]}),canShow:e=>H.filter(n=>e.get(C[n]).value>=1).length===4,sections:[{teamBuff:!0,fields:Object.values(ot).map(e=>({node:e}))}]},st=I(m.activeCharKey,m.charKey,v(b,4,v(C.pyro,2,B(.25)))),An={name:S("FerventFlames.name"),desc:S("FerventFlames.desc"),icon:c("span",{children:[t(Z,{...D})," ",t(Z,{...D})]}),canShow:e=>e.get(C.pyro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:F("effectDuration.cryo"),value:-40,unit:"%"},{node:st}]}]},rt=I(m.activeCharKey,m.charKey,v(b,4,v(C.hydro,2,B(.25)))),Ln={name:S("SoothingWater.name"),desc:S("SoothingWater.desc"),icon:c("span",{children:[t(ee,{...D})," ",t(ee,{...D})]}),canShow:e=>e.get(C.hydro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:F("effectDuration.pyro"),value:-40,unit:"%"},{node:rt}]}]},it=["resonance","ShatteringIce"],ct=V(it),lt=I(m.activeCharKey,m.charKey,v(b,4,v(C.cryo,2,I(ct,"on",B(.15))))),Gn={name:S("ShatteringIce.name"),desc:S("ShatteringIce.desc"),icon:c("span",{children:[t(P,{...D})," ",t(P,{...D})]}),canShow:e=>e.get(C.cryo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:F("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:it,value:ct,name:F("enemyAffected.frozenOrCryo"),header:{title:S("ShatteringIce.name"),icon:t(P,{})},states:{on:{fields:[{node:lt}]}}}]},On={name:S("HighVoltage.name"),desc:S("HighVoltage.desc"),icon:c("span",{children:[t(te,{...D})," ",t(te,{...D})]}),canShow:e=>e.get(C.electro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:F("effectDuration.hydro"),value:-40,unit:"%"}]}]},dt=I(m.activeCharKey,m.charKey,v(b,4,v(C.anemo,2,B(-.15)))),ut=I(m.activeCharKey,m.charKey,v(b,4,v(C.anemo,2,B(.1)))),ht=I(m.activeCharKey,m.charKey,v(b,4,v(C.anemo,2,B(-.05)))),Vn={name:S("ImpetuousWinds.name"),desc:S("ImpetuousWinds.desc"),icon:c("span",{children:[t(ne,{...D})," ",t(ne,{...D})]}),canShow:e=>e.get(C.anemo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{node:dt},{node:ut},{node:ht}]}]},pt=["resonance","EnduringRock"],ft=V(pt),mt=["resonance","EnduringRockHit"],gt=V(mt),vt=I(m.activeCharKey,m.charKey,v(b,4,v(C.geo,2,B(.15)))),yt=I(m.activeCharKey,m.charKey,v(b,4,v(C.geo,2,I(ft,"on",B(.15))))),xt=I(m.activeCharKey,m.charKey,v(b,4,v(C.geo,2,I(gt,"on",B(-.2))))),qn={name:S("EnduringRock.name"),desc:S("EnduringRock.desc"),icon:c("span",{children:[t(N,{...D})," ",t(N,{...D})]}),canShow:e=>e.get(C.geo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:S("EnduringRock.desc"),fields:[{node:vt}]},{teamBuff:!0,path:pt,value:ft,header:{title:S("EnduringRock.name"),icon:t(N,{})},name:F("protectedByShield"),states:{on:{fields:[{node:yt}]}}},{teamBuff:!0,path:mt,value:gt,header:{title:S("EnduringRock.name"),icon:t(N,{})},name:le("EnduringRock.hitCond"),states:{on:{fields:[{node:xt},{text:ce("duration"),value:15,unit:"s"}]}}}]},St=["resonance","SprawlingCanopy2ele"],Ct=V(St),bt=["resonance","SprawlingCanopy3ele"],wt=V(bt),Dt=I(m.activeCharKey,m.charKey,v(b,4,v(C.dendro,2,50,{...me.info("eleMas"),isTeamBuff:!0}))),It=I(m.activeCharKey,m.charKey,v(b,4,v(C.dendro,2,I(Ct,"on",30,{...me.info("eleMas"),isTeamBuff:!0})))),_t=I(m.activeCharKey,m.charKey,v(b,4,v(C.dendro,2,I(wt,"on",20,{...me.info("eleMas"),isTeamBuff:!0})))),Kn={name:S("SprawlingGreenery.name"),desc:S("SprawlingGreenery.desc"),icon:c("span",{children:[t(A,{...D})," ",t(A,{...D})]}),canShow:e=>e.get(C.dendro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:S("SprawlingGreenery.desc"),fields:[{node:Dt}]},{teamBuff:!0,path:St,value:Ct,header:{title:S("SprawlingGreenery.name"),icon:t(A,{})},name:le("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:It},{text:ce("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:bt,value:wt,header:{title:S("SprawlingGreenery.name"),icon:t(A,{})},name:le("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:_t},{text:ce("duration"),value:6,unit:"s"}]}}}]},ja=[Nn,An,Ln,Gn,On,Vn,qn,Kn],Pn=on({teamBuff:{premod:{...ot,atk_:st,hp_:rt,staminaDec_:dt,moveSPD_:ut,cdRed_:ht,shield_:vt,all_dmg_:yt,geo_enemyRes_:xt,eleMas:sn(Ge(Dt,It,_t),{pivot:!0})},total:{critRate_:lt}}});function Un(e,n=0,a,o){const s=T(),[r,i]=qt(),l=d.useDeferredValue(r),{gender:g}=O(),f=d.useMemo(()=>l&&Jn(s,e,n,g,a,o),[l,g,e,s,n,a,o]);return d.useEffect(()=>e?s.chars.follow(e,i):void 0,[e,i,s]),f}function Jn(e,n,a=0,o,s,r){if(!n)return;if(!a&&!s&&!r){const u=e._getTeamData(n);if(u)return u}const{teamData:i,teamBundle:l}=Qn(e,n,a,s,r)??{};if(!i||!l)return;const g=rn(i,o,n),f=Kt(g,(u,y)=>{const{data:x,...k}=l[y];return{...u,...k}});return!a&&!s&&!r&&e.cacheTeamData(n,f),f}function Qn(e,n,a=0,o,s){if(!n)return;const r=e.chars.get(n);if(!r)return;const i=We(e,!0,a,r,s||(e.weapons.get(r.equippedWeapon)??Ee()),o??Object.values(r.equippedArtifacts).map(f=>e.arts.get(f)).filter(f=>f));if(!i)return;const l={[n]:i},g={[n]:i.data};return i.character.team.forEach(f=>{if(!f)return;const u=e.chars.get(f);if(!u)return;const y=We(e,!1,0,{...u,conditional:r.teamConditional[f]??{}},e.weapons.get(u.equippedWeapon)??Ee(),Object.values(u.equippedArtifacts).map(x=>e.arts.get(x)).filter(x=>x));y&&(l[f]=y,g[f]=y.data)}),{teamData:g,teamBundle:l}}function We(e,n=!1,a,o,s,r){const i=q(o.key,e.gender);if(!i)return;const l=ye(s.key);if(!l)return;const g=xe.getAllDataOfType(i.weaponTypeKey),f=n?(()=>{const{display:k,...M}=l.data;return Re([M,g])})():l.data,u=Re([i.data,f,xn]),x=[...Array.isArray(r)?r.map(k=>cn(k,a)):[r],ln(o,n?u:void 0),ge(s),u,dn,Pn];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:x}}function kt(e,n,a){const o=hn(e,n),s=Ve(e,"icon",n);return a&&o?o:s||""}function Yn({art:e,children:n}){const a=t(h,{children:t(Q,{variant:"rectangular",width:100,height:100})}),o=t(d.Suspense,{fallback:a,children:t(Xn,{art:e})});return t(J,{placement:"top",title:o,disableInteractive:!0,children:n})}function Xn({art:e}){const{t:n}=He("statKey_gen"),a=Sn(e.setKey),{slotKey:o,level:s,rarity:r,mainStatKey:i,substats:l}=e,g=a.getSlotName(o),f=Pt.getVariant(i);return c(h,{p:1,children:[c(p,{variant:"h6",children:[t(Cn,{slotKey:o,iconProps:D})," ",g]}),c(p,{variant:"subtitle1",color:`${f}.main`,children:[t(qe,{statKey:i,iconProps:D})," ",n(i)," ",Ut(i,r,s)]}),c(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(ve,{stars:r}),c(_,{color:et.levelVariant(s),children:["+",s]})," "]}),t(h,{py:1,children:l.map(({value:u,key:y,rolls:x})=>!!(u&&y)&&t(zn,{statKey:y,value:u,color:`roll${Jt(x.length,1,6)}`,prefix:"+"},y))}),t(p,{color:"success.main",children:a.name}),t(pn,{color:"secondary.main",location:e.location})]})}function Zn({artifactObj:e,slotKey:n}){if(!e)return t(j,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:t(h,{sx:{width:"100%",pb:"100%",position:"relative"},children:t(h,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:Se.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=e,i=he.find(l=>e.mainStatKey.includes(l))??"secondary";return t(Yn,{art:e,children:c(j,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[t(h,{component:"img",className:`grad-${o}star`,src:un(e.setKey,e.slotKey),maxWidth:"100%",maxHeight:"100%"}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(_,{sx:{p:.5},color:et.levelVariant(s),children:c("strong",{children:["+",s]})})})}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t(_,{color:i,sx:{p:.5},children:t(qe,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function ea({sheet:e,addlText:n,children:a}){const o=c(d.Suspense,{fallback:t(Q,{variant:"text",width:100}),children:[c(p,{children:[t(bn,{src:Se.weaponTypes[e.weaponType],size:1.5})," ",e.name]}),n]});return t(J,{placement:"top",title:o,disableInteractive:!0,children:a})}function ta({weaponId:e}){const n=Ze(e),a=(n==null?void 0:n.key)&&ye(n.key),o=d.useMemo(()=>a&&n&&Ke([a.data,ge(n)]),[a,n]);if(!n||!a||!o)return null;const s=c(h,{children:[t($e,{node:o.get(w.weapon.main)}),t($e,{node:o.get(w.weapon.sub)})]});return c(j,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[t(h,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:t(ea,{sheet:a,addlText:s,children:t(h,{component:"img",src:Pe(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(_,{color:"primary",children:xe.getLevelString(n)})})}),a.hasRefinement&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:c(_,{color:"secondary",children:["R",n.refinement]})})})]})}function $e({node:e}){return c(p,{children:[e.info.icon," ",Ue(e)]})}function na({weaponId:e}){const n=Ze(e),a=(n==null?void 0:n.key)&&ye(n.key),o=d.useMemo(()=>a&&n&&Ke([a.data,ge(n)]),[a,n]);return!n||!a||!o?null:t(j,{children:c(h,{display:"flex",children:[t(h,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:t(h,{component:"img",src:Pe(n.key,n.ascension>=2),width:"100%",height:"auto",sx:{mt:"auto"}})}),c(h,{flexGrow:1,sx:{p:1},children:[t(p,{variant:"body2",gutterBottom:!0,children:t("strong",{children:a==null?void 0:a.name})}),c(p,{variant:"subtitle1",sx:{display:"flex",gap:1},gutterBottom:!0,children:[c(_,{color:"primary",children:["Lv. ",xe.getLevelString(n)]}),a.hasRefinement&&c(_,{color:"info",children:["R",n.refinement]})]}),c(p,{variant:"subtitle1",sx:{display:"flex",gap:1},children:[t(Te,{node:o.get(w.weapon.main)}),t(Te,{node:o.get(w.weapon.sub)})]})]})]})})}function Te({node:e}){return Number.isNaN(e.value)?null:c(_,{color:"secondary",children:[e.info.icon," ",Ue(e)]})}var De={},aa=ue;Object.defineProperty(De,"__esModule",{value:!0});var Bt=De.default=void 0,oa=aa(de()),sa=E,ra=(0,oa.default)((0,sa.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");Bt=De.default=ra;function ia({characterKey:e,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:r=!1}){const i=tt(e),{favorite:l}=nt(e),{gender:g}=O(),{silly:f}=d.useContext(je),u=q(e,g),y=d.useCallback(()=>n==null?void 0:n(e),[e,n]),x=d.useCallback(R=>t(Ce,{onClick:y,onMouseDown:a,onMouseEnter:o,children:R}),[y,a,o]),[k,M]=d.useState(!1),W=d.useCallback(()=>!r&&M(!0),[r]),z=d.useCallback(()=>M(!1),[]);d.useEffect(()=>{r&&M(!1)},[r]);const K=d.useCallback(R=>t(J,{placement:"top",open:k&&!r,onClose:z,onOpen:W,title:t(d.Suspense,{fallback:t(Q,{width:300,height:400}),children:c(p,{children:[u.elementKey&&t(fe,{ele:u.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${u.elementKey}.main`}}})," ",u.name]})}),children:R}),[u.elementKey,u.name,r,z,W,k]),X=d.useCallback(R=>t(J,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:k&&!r,onClose:z,onOpen:W,title:t(h,{sx:{width:300,m:-1},children:t(la,{hideStats:!0,characterKey:e})}),children:R}),[e,r,z,W,k]);return t(U,{condition:s,wrapper:K,falseWrapper:X,children:t(j,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:c(U,{condition:!!n||!!a||!!o,wrapper:x,children:[t(h,{display:"flex",className:`grad-${u.rarity}star`,children:t(h,{component:"img",src:kt(e,g,f),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:t("strong",{children:c(_,{color:"primary",children:[i.level,"/",Fe[i.ascension]]})})}),t(h,{sx:{position:"absolute",top:0,right:0},children:l?t(at,{fontSize:"small"}):t(Bt,{fontSize:"small"})}),i&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:c(_,{color:"secondary",children:["C",i.constellation]})})})]})})})}function ca({index:e}){return t(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:t(h,{component:"img",src:Se.team[`team${e+2}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function la({characterKey:e,artifactChildren:n,weaponChildren:a,characterChildren:o,onClick:s,onClickHeader:r,onClickTeammate:i,footer:l,hideStats:g,isTeammateCard:f}){var ke;const u=T(),y=Un(e),x=tt(e),{gender:k}=O(),M=q(e,k),W=jn(e),z=(ke=y==null?void 0:y[e])==null?void 0:ke.target,K=d.useCallback(()=>e&&(s==null?void 0:s(e)),[e,s]),X=d.useCallback(Be=>t(Ce,{onClick:K,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:Be}),[K]),R=d.useMemo(()=>x&&M&&{character:x,characterSheet:M,characterDispatch:W},[x,M,W]),Ie=d.useMemo(()=>z&&y&&{data:z,teamData:y},[z,y]),{favorite:_e}=nt(e);return t(d.Suspense,{fallback:t(Q,{variant:"rectangular",width:"100%",height:g?300:600}),children:c(Yt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[t(h,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:t(Qt,{sx:{p:.5},onClick:Be=>u.charMeta.set(e,{favorite:!_e}),children:_e?t(fn,{}):t(Rn,{})})}),t(U,{condition:!!s,wrapper:X,children:x&&Ie&&R?t(da,{characterContextObj:R,dataContextObj:Ie,characterKey:e,onClick:s,onClickHeader:r,isTeammateCard:f,character:x,onClickTeammate:i,hideStats:g,weaponChildren:a,artifactChildren:n,characterChildren:o}):t(ua,{characterKey:e})}),l]})})}function da({characterContextObj:e,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,isTeammateCard:r,character:i,onClickTeammate:l,hideStats:g,weaponChildren:f,artifactChildren:u,characterChildren:y}){return t(Xe.Provider,{value:e,children:c(Y.Provider,{value:n,children:[t(Mt,{characterKey:a,onClick:o?void 0:s,children:t(ha,{})}),c(Ne,{sx:x=>({width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:g?`${x.spacing(1)}!important`:void 0}),children:[t(fa,{}),!r&&c(L,{container:!0,columns:4,spacing:.75,children:[t(L,{item:!0,xs:1,height:"100%",children:t(ta,{weaponId:i.equippedWeapon})}),Xt(0,2).map(x=>t(L,{item:!0,xs:1,height:"100%",children:i.team[x]?t(ia,{simpleTooltip:g,characterKey:i.team[x],onClick:o?void 0:l}):t(ca,{index:x})},x))]}),r&&t(na,{weaponId:i.equippedWeapon}),!r&&!g&&t(ma,{}),f,u,y]})]})})}function ua({characterKey:e}){return c(pe,{children:[t(Mt,{characterKey:e,children:t(pa,{characterKey:e})}),t(Ne,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}function Mt({children:e,characterKey:n,onClick:a}){const{gender:o}=O(),{silly:s}=d.useContext(je),r=q(n,o),i=d.useCallback(g=>t(Ce,{onClick:()=>n&&(a==null?void 0:a(n)),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[a,n]),l=Ve(n,"banner",o);return r?t(U,{condition:!!a,wrapper:i,children:c(h,{display:"flex",position:"relative",className:l?void 0:`grad-${r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[t(h,{flexShrink:1,component:"img",src:kt(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),t(h,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:e})]})}):null}function ha(){const{characterSheet:e}=d.useContext(Xe),{data:n}=d.useContext(Y),a=n.get(w.charEle).value,o=n.get(w.lvl).value,s=n.get(w.constellation).value,r=n.get(w.asc).value,i=n.get(w.total.autoBoost).value,l=n.get(w.total.skillBoost).value,g=n.get(w.total.burstBoost).value,f=n.get(w.total.auto).value,u=n.get(w.total.skill).value,y=n.get(w.total.burst).value;return c(pe,{children:[t($,{label:t(p,{variant:"subtitle1",children:e.name}),size:"small",color:a,sx:{opacity:.85}}),c(h,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[c(h,{children:[c(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",o]}),c(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",Fe[r]]})]}),t(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:t(_,{color:`roll${s<3?3:s}`,children:t(wn,{color:"white",children:c("strong",{children:["C",s]})})})})]}),c(h,{display:"flex",gap:1,sx:{opacity:.85},children:[t($,{size:"small",color:i?"info":"secondary",label:t("strong",{children:f})}),t($,{size:"small",color:l?"info":"secondary",label:t("strong",{children:u})}),t($,{size:"small",color:g?"info":"secondary",label:t("strong",{children:y})})]}),t(p,{variant:"h6",lineHeight:1,children:t(ve,{stars:e.rarity,colored:!0,inline:!0})})]})}function pa({characterKey:e}){const{gender:n}=O(),a=q(e,n);return a?c(pe,{children:[t($,{label:t(p,{variant:"subtitle1",children:a.name}),size:"small",color:a.elementKey,sx:{opacity:.85}}),t(h,{mt:1,children:t(p,{variant:"h4",children:t(_,{children:"NEW"})})}),t(p,{mt:1.5,children:t(ve,{stars:a.rarity,colored:!0})})]}):null}function fa(){const e=T(),{data:n}=d.useContext(Y),a=d.useMemo(()=>Zt.map(o=>{var s;return[o,e.arts.get(((s=n.get(w.art[o].id).value)==null?void 0:s.toString())??"")]}),[n,e]);return t(L,{direction:"row",container:!0,spacing:.75,columns:5,children:a.map(([o,s])=>t(L,{item:!0,xs:1,children:t(Zn,{artifactObj:s,slotKey:o})},o))})}function ma(){const{data:e}=d.useContext(Y);return c(h,{sx:{width:"100%"},children:[Object.values(e.getDisplay().basic).map(n=>t(yn,{node:n},JSON.stringify(n.info))),e.get(w.special).info.name&&c(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t(p,{flexGrow:1,children:t("strong",{children:"Specialized:"})}),e.get(w.special).info.icon,t(p,{children:e.get(w.special).info.name})]})]})}const ga=Ye([...Le]);function Fa({value:e,totals:n,onChange:a,...o}){const s=Ae(),r=!ae(s.breakpoints.up("sm"));return t(gn,{exclusive:!0,value:e,...o,children:Le.map(i=>t(Qe,{value:i,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex",gap:r?0:1},onClick:()=>a(ga(e,i)),children:c(h,{display:"flex",children:[t("strong",{children:i}),t(mn,{}),!r&&t($,{label:n[i],size:"small"})]})},i))})}const va=en(Qe,{shouldForwardProp:e=>e!=="baseColor"&&e!=="selectedColor"})(({theme:e,baseColor:n="secondary",selectedColor:a="success"})=>({"&":{backgroundColor:e.palette[n].main,color:e.palette[n].contrastText},"&:hover":{backgroundColor:e.palette[n].dark},"&.Mui-selected":{backgroundColor:e.palette[a].main,color:e.palette[a].contrastText},"&.Mui-selected:hover":{backgroundColor:e.palette[a].dark},"&.Mui-disabled":{backgroundColor:e.palette[n].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:e.palette[a].dark}})),ya=va,xa=Ye([...H]);function Na({value:e,totals:n,onChange:a,...o}){const s=Ae(),r=!ae(s.breakpoints.up("md")),i=!ae(s.breakpoints.up("sm"));return t(vn,{exclusive:!0,value:e,...o,children:H.map(l=>c(ya,{value:l,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex"},selectedColor:l,onClick:()=>a(xa(e,l)),children:[t(fe,{ele:l,iconProps:{fontSize:r&&!i?"inherit":void 0}}),!i&&t($,{sx:{ml:.5},label:n[l],size:"small"})]},l))})}function Aa(){const e=T(),n=tn(),{params:{tab:a=""}}=nn({path:"/characters/:charKey/:tab",end:!1})??{params:{tab:""}};return d.useCallback(s=>{const r=e.chars.get(s);let i=a;r||(e.chars.getWithInitWeapon(s),i=""),n(`/characters/${s}/${i}`)},[n,e,a])}function La(e,n){return{new:a=>e.chars.get(a)?0:1,name:a=>oe.t(`${n?"sillyWisher_charNames":"charNames_gen"}:${se(a,e.gender)}`).toString(),level:a=>{const o=e.chars.get(a);return o?o.level*(o.ascension+1):0},rarity:a=>re.char.data[ie(a)].rarity??0,favorite:a=>e.charMeta.get(a).favorite?1:0}}function Ga(e,n){return{element:(a,o)=>o.includes(an(a)),weaponType:(a,o)=>o.includes(re.char.data[ie(a)].weaponType),rarity:(a,o)=>o.includes(re.char.data[ie(a)].rarity),name:(a,o)=>o===void 0||oe.t(`${n?"sillyWisher_charNames":"charNames_gen"}:${se(a,e.gender)}`).toLowerCase().includes(o.toLowerCase())||n&&oe.t(`charNames_gen:${se(a,e.gender)}`).toLowerCase().includes(o.toLowerCase()),new:(a,o)=>o===void 0||o===(e.chars.get(a)?"no":"yes")}}const Oa={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]};export{Yn as A,ca as B,Fa as C,Wa as D,Na as E,$a as F,Ta as S,Ha as T,ea as W,la as a,Ga as b,Oa as c,Wn as d,La as e,ia as f,Zn as g,jn as h,Un as i,Qn as j,nt as k,Rn as l,Bn as m,Jn as n,tt as o,kt as p,ja as r,Aa as u};
