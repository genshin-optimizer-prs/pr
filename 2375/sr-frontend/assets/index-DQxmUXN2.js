import{_ as Pe,r as yr,m as xr,a as v,u as mt,b as Sr,g as Wt,c as Ut,d as Ue,j as y,s as oe,P as kr,e as ae,f as Ke,l as Be,h as b,i as qt,I as Gt,C as Cr,k as be,n as Yt,o as wr,p as $r,q as Rr,t as dt,v as He,w as pt,x as Ve,y as Mt,z as Xt,A as Lr,B as fe,D as Ce,E as we,F as n,G as Pr,H as Me,J as _r,M as _e,K as gt,L as Mr,N as Qt,O as Ar,Q as Ir,R as Tr,S as T,T as Zt,U as zr,V as jr,W as Nr,X as Or,Y as Dr,Z as ft,$ as At,a0 as It,a1 as Er,a2 as se,a3 as Fr,a4 as U,a5 as he,a6 as Jt,a7 as Hr,a8 as me,a9 as Vr,aa as Kr,ab as er,ac as Br,ad as Wr,ae as Tt,af as Ur,ag as qr,ah as Gr,ai as Yr,aj as tr,ak as Xr,al as le,am as Qr,an as Zr,ao as vt,ap as Jr,aq as ea,ar as ht,as as ta}from"./index-AuOfA1ES.js";import{u as rr,a as ra,b as aa}from"./useInfScroll-B9STtMBe.js";import{d as bt}from"./Add-BLfc13a-.js";import{C as oa}from"./CardHeader-DEq_9C79.js";const na={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},la=na;function Le(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}const sa=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],ia=["component","slots","slotProps"],ca=["component"];function zt(e,t){const{className:a,elementType:r,ownerState:u,externalForwardedProps:d,getSlotOwnerState:i,internalForwardedProps:p}=t,m=Pe(t,sa),{component:A,slots:P={[e]:void 0},slotProps:o={[e]:void 0}}=d,R=Pe(d,ia),_=P[e]||r,$=yr(o[e],u),x=xr(v({className:a},m,{externalForwardedProps:e==="root"?R:void 0,externalSlotProps:$})),{props:{component:h},internalRef:M}=x,V=Pe(x.props,ca),z=mt(M,$==null?void 0:$.ref,t.ref),I=i?i(V):{},C=v({},u,I),O=e==="root"?h||A:h,D=Sr(_,v({},e==="root"&&!A&&!P[e]&&p,e!=="root"&&!P[e]&&p,V,O&&{as:O},{ref:z}),C);return Object.keys(I).forEach(J=>{delete D[J]}),[_,D]}function ua(e){return Ut("MuiAlert",e)}const da=Wt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),jt=da,pa=Ue(y.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),fa=Ue(y.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ma=Ue(y.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),va=Ue(y.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ha=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],ba=e=>{const{variant:t,color:a,severity:r,classes:u}=e,d={root:["root",`color${ae(a||r)}`,`${t}${ae(a||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Yt(d,ua,u)},ga=oe(kr,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${ae(a.color||a.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?Ke:Be,a=e.palette.mode==="light"?Be:Ke;return v({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:a(e.palette[r].light,.9),[`& .${jt.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${jt.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:v({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)})}))]})}),ya=oe("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),xa=oe("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Nt=oe("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Ot={success:y.jsx(pa,{fontSize:"inherit"}),warning:y.jsx(fa,{fontSize:"inherit"}),error:y.jsx(ma,{fontSize:"inherit"}),info:y.jsx(va,{fontSize:"inherit"})},Sa=b.forwardRef(function(t,a){const r=qt({props:t,name:"MuiAlert"}),{action:u,children:d,className:i,closeText:p="Close",color:m,components:A={},componentsProps:P={},icon:o,iconMapping:R=Ot,onClose:_,role:$="alert",severity:x="success",slotProps:h={},slots:M={},variant:V="standard"}=r,z=Pe(r,ha),I=v({},r,{color:m,severity:x,variant:V,colorSeverity:m||x}),C=ba(I),O={slots:v({closeButton:A.CloseButton,closeIcon:A.CloseIcon},M),slotProps:v({},P,h)},[D,J]=zt("closeButton",{elementType:Gt,externalForwardedProps:O,ownerState:I}),[q,X]=zt("closeIcon",{elementType:Cr,externalForwardedProps:O,ownerState:I});return y.jsxs(ga,v({role:$,elevation:0,ownerState:I,className:be(C.root,i),ref:a},z,{children:[o!==!1?y.jsx(ya,{ownerState:I,className:C.icon,children:o||R[x]||Ot[x]}):null,y.jsx(xa,{ownerState:I,className:C.message,children:d}),u!=null?y.jsx(Nt,{ownerState:I,className:C.action,children:u}):null,u==null&&_?y.jsx(Nt,{ownerState:I,className:C.action,children:y.jsx(D,v({size:"small","aria-label":p,title:p,color:"inherit",onClick:_},J,{children:y.jsx(q,v({fontSize:"small"},X))}))}):null]}))}),ka=Sa;function Ca(e,t,a=(r,u)=>r===u){return e.length===t.length&&e.every((r,u)=>a(r,t[u]))}const wa=2;function ar(e,t){return e-t}function Dt(e,t){var a;const{index:r}=(a=e.reduce((u,d,i)=>{const p=Math.abs(t-d);return u===null||p<u.distance||p===u.distance?{distance:p,index:i}:u},null))!=null?a:{};return r}function Oe(e,t){if(t.current!==void 0&&e.changedTouches){const a=e;for(let r=0;r<a.changedTouches.length;r+=1){const u=a.changedTouches[r];if(u.identifier===t.current)return{x:u.clientX,y:u.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function We(e,t,a){return(e-t)*100/(a-t)}function $a(e,t,a){return(a-t)*e+t}function Ra(e){if(Math.abs(e)<1){const a=e.toExponential().split("e-"),r=a[0].split(".")[1];return(r?r.length:0)+parseInt(a[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function La(e,t,a){const r=Math.round((e-a)/t)*t+a;return Number(r.toFixed(Ra(t)))}function Et({values:e,newValue:t,index:a}){const r=e.slice();return r[a]=t,r.sort(ar)}function De({sliderRef:e,activeIndex:t,setActive:a}){var r,u;const d=He(e.current);if(!((r=e.current)!=null&&r.contains(d.activeElement))||Number(d==null||(u=d.activeElement)==null?void 0:u.getAttribute("data-index"))!==t){var i;(i=e.current)==null||i.querySelector(`[type="range"][data-index="${t}"]`).focus()}a&&a(t)}function Ee(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?Ca(e,t):!1}const Pa={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},_a=e=>e;let Fe;function Ft(){return Fe===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Fe=CSS.supports("touch-action","none"):Fe=!0),Fe}function Ma(e){const{"aria-labelledby":t,defaultValue:a,disabled:r=!1,disableSwap:u=!1,isRtl:d=!1,marks:i=!1,max:p=100,min:m=0,name:A,onChange:P,onChangeCommitted:o,orientation:R="horizontal",rootRef:_,scale:$=_a,step:x=1,shiftStep:h=10,tabIndex:M,value:V}=e,z=b.useRef(),[I,C]=b.useState(-1),[O,D]=b.useState(-1),[J,q]=b.useState(!1),X=b.useRef(0),[G,de]=wr({controlled:V,default:a??m,name:"Slider"}),Y=P&&((s,c,f)=>{const S=s.nativeEvent||s,k=new S.constructor(S.type,S);Object.defineProperty(k,"target",{writable:!0,value:{value:c,name:A}}),P(k,c,f)}),ie=Array.isArray(G);let l=ie?G.slice().sort(ar):[G];l=l.map(s=>s==null?m:Le(s,m,p));const j=i===!0&&x!==null?[...Array(Math.floor((p-m)/x)+1)].map((s,c)=>({value:m+x*c})):i||[],L=j.map(s=>s.value),{isFocusVisibleRef:H,onBlur:ge,onFocus:$e,ref:qe}=$r(),[Ae,ve]=b.useState(-1),W=b.useRef(),Ie=mt(qe,W),Te=mt(_,Ie),ye=s=>c=>{var f;const S=Number(c.currentTarget.getAttribute("data-index"));$e(c),H.current===!0&&ve(S),D(S),s==null||(f=s.onFocus)==null||f.call(s,c)},xe=s=>c=>{var f;ge(c),H.current===!1&&ve(-1),D(-1),s==null||(f=s.onBlur)==null||f.call(s,c)},ze=(s,c)=>{const f=Number(s.currentTarget.getAttribute("data-index")),S=l[f],k=L.indexOf(S);let g=c;if(j&&x==null){const re=L[L.length-1];g>re?g=re:g<L[0]?g=L[0]:g=g<S?L[k-1]:L[k+1]}if(g=Le(g,m,p),ie){u&&(g=Le(g,l[f-1]||-1/0,l[f+1]||1/0));const re=g;g=Et({values:l,newValue:g,index:f});let ne=f;u||(ne=g.indexOf(re)),De({sliderRef:W,activeIndex:ne})}de(g),ve(f),Y&&!Ee(g,G)&&Y(s,g,f),o&&o(s,g)},Ge=s=>c=>{var f;if(x!==null){const S=Number(c.currentTarget.getAttribute("data-index")),k=l[S];let g=null;(c.key==="ArrowLeft"||c.key==="ArrowDown")&&c.shiftKey||c.key==="PageDown"?g=Math.max(k-h,m):((c.key==="ArrowRight"||c.key==="ArrowUp")&&c.shiftKey||c.key==="PageUp")&&(g=Math.min(k+h,p)),g!==null&&(ze(c,g),c.preventDefault())}s==null||(f=s.onKeyDown)==null||f.call(s,c)};Rr(()=>{if(r&&W.current.contains(document.activeElement)){var s;(s=document.activeElement)==null||s.blur()}},[r]),r&&I!==-1&&C(-1),r&&Ae!==-1&&ve(-1);const Ye=s=>c=>{var f;(f=s.onChange)==null||f.call(s,c),ze(c,c.target.valueAsNumber)},je=b.useRef();let ce=R;d&&R==="horizontal"&&(ce+="-reverse");const E=({finger:s,move:c=!1})=>{const{current:f}=W,{width:S,height:k,bottom:g,left:re}=f.getBoundingClientRect();let ne;ce.indexOf("vertical")===0?ne=(g-s.y)/k:ne=(s.x-re)/S,ce.indexOf("-reverse")!==-1&&(ne=1-ne);let w;if(w=$a(ne,m,p),x)w=La(w,x,m);else{const ke=Dt(L,w);w=L[ke]}w=Le(w,m,p);let Q=0;if(ie){c?Q=je.current:Q=Dt(l,w),u&&(w=Le(w,l[Q-1]||-1/0,l[Q+1]||1/0));const ke=w;w=Et({values:l,newValue:w,index:Q}),u&&c||(Q=w.indexOf(ke),je.current=Q)}return{newValue:w,activeIndex:Q}},N=dt(s=>{const c=Oe(s,z);if(!c)return;if(X.current+=1,s.type==="mousemove"&&s.buttons===0){ee(s);return}const{newValue:f,activeIndex:S}=E({finger:c,move:!0});De({sliderRef:W,activeIndex:S,setActive:C}),de(f),!J&&X.current>wa&&q(!0),Y&&!Ee(f,G)&&Y(s,f,S)}),ee=dt(s=>{const c=Oe(s,z);if(q(!1),!c)return;const{newValue:f}=E({finger:c,move:!0});C(-1),s.type==="touchend"&&D(-1),o&&o(s,f),z.current=void 0,te()}),pe=dt(s=>{if(r)return;Ft()||s.preventDefault();const c=s.changedTouches[0];c!=null&&(z.current=c.identifier);const f=Oe(s,z);if(f!==!1){const{newValue:k,activeIndex:g}=E({finger:f});De({sliderRef:W,activeIndex:g,setActive:C}),de(k),Y&&!Ee(k,G)&&Y(s,k,g)}X.current=0;const S=He(W.current);S.addEventListener("touchmove",N,{passive:!0}),S.addEventListener("touchend",ee,{passive:!0})}),te=b.useCallback(()=>{const s=He(W.current);s.removeEventListener("mousemove",N),s.removeEventListener("mouseup",ee),s.removeEventListener("touchmove",N),s.removeEventListener("touchend",ee)},[ee,N]);b.useEffect(()=>{const{current:s}=W;return s.addEventListener("touchstart",pe,{passive:Ft()}),()=>{s.removeEventListener("touchstart",pe),te()}},[te,pe]),b.useEffect(()=>{r&&te()},[r,te]);const Xe=s=>c=>{var f;if((f=s.onMouseDown)==null||f.call(s,c),r||c.defaultPrevented||c.button!==0)return;c.preventDefault();const S=Oe(c,z);if(S!==!1){const{newValue:g,activeIndex:re}=E({finger:S});De({sliderRef:W,activeIndex:re,setActive:C}),de(g),Y&&!Ee(g,G)&&Y(c,g,re)}X.current=0;const k=He(W.current);k.addEventListener("mousemove",N,{passive:!0}),k.addEventListener("mouseup",ee)},B=We(ie?l[0]:m,m,p),Se=We(l[l.length-1],m,p)-B,Qe=(s={})=>{const c=pt(s),f={onMouseDown:Xe(c||{})},S=v({},c,f);return v({},s,{ref:Te},S)},Ze=s=>c=>{var f;(f=s.onMouseOver)==null||f.call(s,c);const S=Number(c.currentTarget.getAttribute("data-index"));D(S)},Je=s=>c=>{var f;(f=s.onMouseLeave)==null||f.call(s,c),D(-1)};return{active:I,axis:ce,axisProps:Pa,dragging:J,focusedThumbIndex:Ae,getHiddenInputProps:(s={})=>{var c;const f=pt(s),S={onChange:Ye(f||{}),onFocus:ye(f||{}),onBlur:xe(f||{}),onKeyDown:Ge(f||{})},k=v({},f,S);return v({tabIndex:M,"aria-labelledby":t,"aria-orientation":R,"aria-valuemax":$(p),"aria-valuemin":$(m),name:A,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(c=e.step)!=null?c:void 0,disabled:r},s,k,{style:v({},la,{direction:d?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Qe,getThumbProps:(s={})=>{const c=pt(s),f={onMouseOver:Ze(c||{}),onMouseLeave:Je(c||{})};return v({},s,c,f)},marks:j,open:O,range:ie,rootRef:Te,trackLeap:Se,trackOffset:B,values:l,getThumbStyle:s=>({pointerEvents:I!==-1&&I!==s?"none":void 0})}}const Aa=e=>!e||!Ve(e);function Ia(e){return Ut("MuiSlider",e)}const Ta=Wt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Z=Ta,za=e=>{const{open:t}=e;return{offset:be(t&&Z.valueLabelOpen),circle:Z.valueLabelCircle,label:Z.valueLabelLabel}};function ja(e){const{children:t,className:a,value:r}=e,u=za(e);return t?b.cloneElement(t,{className:be(t.props.className)},y.jsxs(b.Fragment,{children:[t.props.children,y.jsx("span",{className:be(u.offset,a),"aria-hidden":!0,children:y.jsx("span",{className:u.circle,children:y.jsx("span",{className:u.label,children:r})})})]})):null}const Na=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Ht(e){return e}const Oa=oe("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`color${ae(a.color)}`],a.size!=="medium"&&t[`size${ae(a.size)}`],a.marked&&t.marked,a.orientation==="vertical"&&t.vertical,a.track==="inverted"&&t.trackInverted,a.track===!1&&t.trackFalse]}})(({theme:e})=>{var t;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Z.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Z.dragging}`]:{[`& .${Z.thumb}, & .${Z.track}`]:{transition:"none"}},variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),Da=oe("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ea=oe("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>{var t;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a,track:"inverted"},style:v({},e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:v({backgroundColor:Be(e.palette[a].main,.62),borderColor:Be(e.palette[a].main,.62)},e.applyStyles("dark",{backgroundColor:Ke(e.palette[a].main,.5)}),e.applyStyles("dark",{borderColor:Ke(e.palette[a].main,.5)})))}))]}}),Fa=oe("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.thumb,t[`thumbColor${ae(a.color)}`],a.size!=="medium"&&t[`thumbSize${ae(a.size)}`]]}})(({theme:e})=>{var t;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Z.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((t=e.vars)!=null?t:e).palette).filter(a=>{var r;return((r=e.vars)!=null?r:e).palette[a].main}).map(a=>({props:{color:a},style:{[`&:hover, &.${Z.focusVisible}`]:v({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Mt(e.palette[a].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${Z.active}`]:v({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Mt(e.palette[a].main,.16)}`})}}))]}}),Ha=oe(ja,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e})=>v({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Z.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Z.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Va=oe("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Xt(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:a}=e;return[t.mark,a&&t.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),Ka=oe("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Xt(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e})=>v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),Ba=e=>{const{disabled:t,dragging:a,marked:r,orientation:u,track:d,classes:i,color:p,size:m}=e,A={root:["root",t&&"disabled",a&&"dragging",r&&"marked",u==="vertical"&&"vertical",d==="inverted"&&"trackInverted",d===!1&&"trackFalse",p&&`color${ae(p)}`,m&&`size${ae(m)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",m&&`thumbSize${ae(m)}`,p&&`thumbColor${ae(p)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Yt(A,Ia,i)},Wa=({children:e})=>e,Ua=b.forwardRef(function(t,a){var r,u,d,i,p,m,A,P,o,R,_,$,x,h,M,V,z,I,C,O,D,J,q,X;const G=qt({props:t,name:"MuiSlider"}),de=Lr(),{"aria-label":Y,"aria-valuetext":ie,"aria-labelledby":l,component:j="span",components:L={},componentsProps:H={},color:ge="primary",classes:$e,className:qe,disableSwap:Ae=!1,disabled:ve=!1,getAriaLabel:W,getAriaValueText:Ie,marks:Te=!1,max:ye=100,min:xe=0,orientation:ze="horizontal",shiftStep:Ge=10,size:Ye="medium",step:je=1,scale:ce=Ht,slotProps:E,slots:N,track:ee="normal",valueLabelDisplay:pe="off",valueLabelFormat:te=Ht}=G,Xe=Pe(G,Na),B=v({},G,{isRtl:de,max:ye,min:xe,classes:$e,disabled:ve,disableSwap:Ae,orientation:ze,marks:Te,color:ge,size:Ye,step:je,shiftStep:Ge,scale:ce,track:ee,valueLabelDisplay:pe,valueLabelFormat:te}),{axisProps:Se,getRootProps:Qe,getHiddenInputProps:Ze,getThumbProps:Je,open:$t,active:et,axis:Re,focusedThumbIndex:s,range:c,dragging:f,marks:S,values:k,trackOffset:g,trackLeap:re,getThumbStyle:ne}=Ma(v({},B,{rootRef:a}));B.marked=S.length>0&&S.some(F=>F.label),B.dragging=f,B.focusedThumbIndex=s;const w=Ba(B),Q=(r=(u=N==null?void 0:N.root)!=null?u:L.Root)!=null?r:Oa,ke=(d=(i=N==null?void 0:N.rail)!=null?i:L.Rail)!=null?d:Da,Rt=(p=(m=N==null?void 0:N.track)!=null?m:L.Track)!=null?p:Ea,Lt=(A=(P=N==null?void 0:N.thumb)!=null?P:L.Thumb)!=null?A:Fa,Pt=(o=(R=N==null?void 0:N.valueLabel)!=null?R:L.ValueLabel)!=null?o:Ha,tt=(_=($=N==null?void 0:N.mark)!=null?$:L.Mark)!=null?_:Va,rt=(x=(h=N==null?void 0:N.markLabel)!=null?h:L.MarkLabel)!=null?x:Ka,_t=(M=(V=N==null?void 0:N.input)!=null?V:L.Input)!=null?M:"input",at=(z=E==null?void 0:E.root)!=null?z:H.root,ur=(I=E==null?void 0:E.rail)!=null?I:H.rail,ot=(C=E==null?void 0:E.track)!=null?C:H.track,nt=(O=E==null?void 0:E.thumb)!=null?O:H.thumb,lt=(D=E==null?void 0:E.valueLabel)!=null?D:H.valueLabel,dr=(J=E==null?void 0:E.mark)!=null?J:H.mark,pr=(q=E==null?void 0:E.markLabel)!=null?q:H.markLabel,fr=(X=E==null?void 0:E.input)!=null?X:H.input,mr=fe({elementType:Q,getSlotProps:Qe,externalSlotProps:at,externalForwardedProps:Xe,additionalProps:v({},Aa(Q)&&{as:j}),ownerState:v({},B,at==null?void 0:at.ownerState),className:[w.root,qe]}),vr=fe({elementType:ke,externalSlotProps:ur,ownerState:B,className:w.rail}),hr=fe({elementType:Rt,externalSlotProps:ot,additionalProps:{style:v({},Se[Re].offset(g),Se[Re].leap(re))},ownerState:v({},B,ot==null?void 0:ot.ownerState),className:w.track}),st=fe({elementType:Lt,getSlotProps:Je,externalSlotProps:nt,ownerState:v({},B,nt==null?void 0:nt.ownerState),className:w.thumb}),br=fe({elementType:Pt,externalSlotProps:lt,ownerState:v({},B,lt==null?void 0:lt.ownerState),className:w.valueLabel}),it=fe({elementType:tt,externalSlotProps:dr,ownerState:B,className:w.mark}),ct=fe({elementType:rt,externalSlotProps:pr,ownerState:B,className:w.markLabel}),gr=fe({elementType:_t,getSlotProps:Ze,externalSlotProps:fr,ownerState:B});return y.jsxs(Q,v({},mr,{children:[y.jsx(ke,v({},vr)),y.jsx(Rt,v({},hr)),S.filter(F=>F.value>=xe&&F.value<=ye).map((F,K)=>{const ut=We(F.value,xe,ye),Ne=Se[Re].offset(ut);let ue;return ee===!1?ue=k.indexOf(F.value)!==-1:ue=ee==="normal"&&(c?F.value>=k[0]&&F.value<=k[k.length-1]:F.value<=k[0])||ee==="inverted"&&(c?F.value<=k[0]||F.value>=k[k.length-1]:F.value>=k[0]),y.jsxs(b.Fragment,{children:[y.jsx(tt,v({"data-index":K},it,!Ve(tt)&&{markActive:ue},{style:v({},Ne,it.style),className:be(it.className,ue&&w.markActive)})),F.label!=null?y.jsx(rt,v({"aria-hidden":!0,"data-index":K},ct,!Ve(rt)&&{markLabelActive:ue},{style:v({},Ne,ct.style),className:be(w.markLabel,ct.className,ue&&w.markLabelActive),children:F.label})):null]},K)}),k.map((F,K)=>{const ut=We(F,xe,ye),Ne=Se[Re].offset(ut),ue=pe==="off"?Wa:Pt;return y.jsx(ue,v({},!Ve(ue)&&{valueLabelFormat:te,valueLabelDisplay:pe,value:typeof te=="function"?te(ce(F),K):te,index:K,open:$t===K||et===K||pe==="on",disabled:ve},br,{children:y.jsx(Lt,v({"data-index":K},st,{className:be(w.thumb,st.className,et===K&&w.active,s===K&&w.focusVisible),style:v({},Ne,ne(K),st.style),children:y.jsx(_t,v({"data-index":K,"aria-label":W?W(K):Y,"aria-valuenow":ce(F),"aria-labelledby":l,"aria-valuetext":Ie?Ie(ce(F),K):ie,value:k[K]},gr))}))}),K)})]}))}),qa=Ua;var yt={},Ga=we;Object.defineProperty(yt,"__esModule",{value:!0});var or=yt.default=void 0,Ya=Ga(Ce()),Xa=y,Qa=(0,Ya.default)((0,Xa.jsx)("path",{d:"m12 17.27 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z"}),"StarRounded");or=yt.default=Qa;const Vt=({stars:e=1,colored:t=!1,inline:a=!1})=>n(Pr,{color:t?"warning":void 0,children:[...Array(e).keys()].map((r,u)=>n(or,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},u))});var xt={},Za=we;Object.defineProperty(xt,"__esModule",{value:!0});var nr=xt.default=void 0,Ja=Za(Ce()),eo=y,to=(0,Ja.default)((0,eo.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");nr=xt.default=to;var St={},ro=we;Object.defineProperty(St,"__esModule",{value:!0});var lr=St.default=void 0,ao=ro(Ce()),oo=y,no=(0,ao.default)((0,oo.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");lr=St.default=no;var kt={},lo=we;Object.defineProperty(kt,"__esModule",{value:!0});var sr=kt.default=void 0,so=lo(Ce()),io=y,co=(0,so.default)((0,io.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");sr=kt.default=co;var Ct={},uo=we;Object.defineProperty(Ct,"__esModule",{value:!0});var ir=Ct.default=void 0,po=uo(Ce()),fo=y,mo=(0,po.default)((0,fo.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");ir=Ct.default=mo;var wt={},vo=we;Object.defineProperty(wt,"__esModule",{value:!0});var cr=wt.default=void 0,ho=vo(Ce()),bo=y,go=(0,ho.default)((0,bo.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update");cr=wt.default=go;function yo({rarity:e,onRarityChange:t,filter:a,...r}){const{t:u}=Me("relic");return n(gt,{...r,title:e?n(Vt,{stars:e,inline:!0}):u`editor.rarity`,color:e?"success":"primary",children:_r.map(d=>n(_e,{disabled:!a(d),onClick:()=>t(d),children:n(Vt,{stars:d,inline:!0})},d))})}function xo({relicSetKey:e,setRelicSetKey:t,label:a="",...r}){const{t:u}=Me(["relic","relicNames_gen"]);a=a||u("relic:autocompleteLabels.set");const d=b.useMemo(()=>Mr.map(p=>({key:p,label:u(`relicNames_gen:${p}`)})),[u]),i=b.useCallback(p=>t(p??""),[t]);return n(Ar,{options:d,valueKey:e,onChange:i,toImg:()=>n(Qt,{children:" "}),label:a,...r})}function So({index:e,relic:t,setSubstat:a}){const{t:r}=Me("relic"),{mainStatKey:u="",rarity:d=5}=t??{},{key:i="",value:p=0,rolls:m=[],efficiency:A=0}=(t==null?void 0:t.substats[e])??{},P=m.length;let o="",R=[],_=0;if(t){const h=t.rarity,{numUpgrades:M,high:V}=Vr[h];_=M+V-3-P,R=i?Ir(i,h):[]}const $=7-R.length;_<0&&(o=o||r("editor.substat.error.noOverRoll",{value:_+P}));const x=b.useMemo(()=>i?[{value:0},...Tr(d,i).map(h=>({value:h}))]:[{value:0}],[i,d]);return T(me,{bgt:"light",children:[n(se,{sx:{display:"flex"},children:T(Zt,{size:"small",sx:{width:"100%",display:"flex"},children:[T(gt,{title:i?n("p",{children:i}):r("editor.substat.substatFormat",{value:e+1}),disabled:!t,color:i?"success":"primary",sx:{whiteSpace:"nowrap"},children:[i&&n(_e,{onClick:()=>a(e,{key:"",value:0}),children:r`editor.substat.noSubstat`}),zr.filter(h=>u!==h).map(h=>T(_e,{selected:i===h,disabled:i===h,onClick:()=>a(e,{key:h,value:0}),children:[n(jr,{}),n(Nr,{children:h})]},h))]}),n(Or,{sx:{flexBasis:30,flexGrow:1},children:n(Dr,{float:ft(i)==="%",placeholder:r`editor.substat.selectSub`,value:i?At(It(p,i),i):void 0,onChange:h=>{let M=h??0;ft(i)==="%"&&(M=M/100),a(e,{key:i,value:M})},disabled:!i,error:!!o,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!R.length&&n(Er,{children:r`editor.substat.nextRolls`})]})}),n(se,{px:2,children:n(ko,{value:At(It(p,i),i),marks:x,setValue:h=>{let M=h??0;ft(i)==="%"&&(M=M/100),a(e,{key:i,value:M})},disabled:!i})}),n(se,{sx:{px:1,pb:1},children:o?n(Fr,{color:"error",children:r`ui:error`}):T(U,{container:!0,children:[n(U,{item:!0,flexGrow:1,children:!!m.length&&[...m].sort().map((h,M)=>n(he,{component:"span",color:`roll${Jt($+R.indexOf(h),1,6)}.main`,sx:{ml:1},children:h},`${M}.${h}`))}),n(U,{item:!0,xs:"auto",flexShrink:1,children:n(he,{children:T(Hr,{t:r,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",A]})})})]})})]})}function ko({value:e,setValue:t,marks:a,disabled:r=!1}){var i,p;const[u,d]=b.useState(e);return b.useEffect(()=>d(e),[e]),n(qa,{value:u,step:.1,disabled:r,min:((i=a[1])==null?void 0:i.value)??0,max:((p=a[a.length-1])==null?void 0:p.value)??0,onChange:(m,A)=>d(A),onChangeCommitted:(m,A)=>t(A),valueLabelDisplay:"auto"})}function Co(e,t){const r=(()=>{switch(t.type){case"reset":return;case"substat":{const{index:u,substat:d}=t,i=[...e.substats],p=d.key?i.findIndex(m=>m.key===d.key):-1;if(p===-1||p===u)i[u]={...d};else{const m=i[u];i[u]={...i[p]},i[p]={...m}}return{...e,substats:i}}case"overwrite":return t.relic;case"update":return{...e,...t.relic}}})();return r&&Kr(r,!0)}const Kt={rarity:[5,4,3,2],setEffects:{}};function wo({relicIdToEdit:e="new",cancelEdit:t,fixedSlotKey:a,allowEmpty:r=!1,disableSet:u=!1}){const{t:d}=Me("relic"),{database:i}=er(),[p,m]=rr();b.useEffect(()=>i.relics.followAny(m),[i,m]);const[A,P]=b.useState(!1);b.useEffect(()=>{e==="new"&&(P(!0),R({type:"reset"}));const l=e&&p&&i.relics.get(e);l&&(P(!0),R({type:"overwrite",relic:Br(l)}))},[e,i,p]);const[o,R]=b.useReducer(Co,void 0),{relic:_,errors:$}=b.useMemo(()=>o?Wr(o,e):{relic:void 0,errors:[]},[o,e]),{prev:x,prevEditType:h}=b.useMemo(()=>{const l=p&&e&&i.relics.get(e);if(l)return{prev:l,prevEditType:"edit"};if(o===void 0)return{prev:void 0,prevEditType:""};const{duplicated:j,upgraded:L}=p&&i.relics.findDups(o);return{prev:j[0]??L[0],prevEditType:j.length!==0?"duplicate":"upgrade"}},[o,e,i,p]),M=!["new",""].includes(e)&&!!(o!=null&&o.location)||!!a||!!e&&e!=="new",{rarity:V=5,level:z=0}=o??{},I=b.useMemo(()=>(o==null?void 0:o.slotKey)??a??"head",[a,o]),C=o?Kt:void 0,O=b.useCallback(l=>{const j=l.setKey?Kt:C;function L(H,ge,$e){return H&&ge.includes(H)?H:$e??ge[0]}l.setKey&&(l.rarity=L(o==null?void 0:o.rarity,j.rarity,Math.max(...j.rarity)),l.slotKey=L(o==null?void 0:o.slotKey,["head","hand"])),l.rarity&&(l.level=(o==null?void 0:o.level)??0),l.level&&(l.level=Jt(l.level,0,3*(l.rarity??o.rarity))),l.slotKey&&(l.mainStatKey=L(o==null?void 0:o.mainStatKey,Tt[l.slotKey])),l.mainStatKey&&(l.substats=[0,1,2,3].map(H=>o&&o.substats[H].key!==l.mainStatKey?o.substats[H]:{key:"",value:0})),R({type:"update",relic:l})},[o,C,R]),D=b.useCallback(()=>{t==null||t(),R({type:"reset"})},[t,R]),J=b.useCallback((l,j)=>R({type:"substat",index:l,substat:j}),[]),q=!$.length,X=b.useCallback(l=>{if(!e&&o&&!window.confirm(d`editor.clearPrompt`)){l==null||l.preventDefault();return}P(!1),D()},[d,e,o,P,D]),G=Ur(),de=qr(G.breakpoints.up("md")),Y=e!=="new"&&e||(x==null?void 0:x.id),ie=()=>window.confirm(d`editor.clearPrompt`);return n(b.Suspense,{fallback:!1,children:n(Gr,{open:A,onClose:X,children:T(me,{bgt:"dark",children:[n(oa,{title:"Relic Editor",action:n(Gt,{onClick:X,children:n(Yr,{})})}),T(tr,{sx:{display:"flex",flexDirection:"column",gap:1},children:[T(U,{container:!0,spacing:1,columns:{xs:1,md:2},children:[T(U,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[T(se,{sx:{display:"flex",gap:1},children:[n(xo,{disabled:u,size:"small",relicSetKey:(o==null?void 0:o.setKey)??"",setRelicSetKey:l=>O({setKey:l}),sx:{flexGrow:1},label:o!=null&&o.setKey?"":d("editor.unknownSetName")}),n(yo,{rarity:o?V:void 0,onRarityChange:l=>O({rarity:l}),filter:l=>{var j,L;return!!((L=(j=C==null?void 0:C.rarity)==null?void 0:j.includes)!=null&&L.call(j,l))},disabled:!C})]}),T(se,{component:"div",display:"flex",children:[n(Xr,{label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:z,disabled:!C,onChange:l=>{const j=parseInt(l.target.value)||0;O({level:j})}}),T(Zt,{children:[n(le,{onClick:()=>O({level:z-1}),disabled:!C||z===0,children:"-"}),V?[...Array(V+1).keys()].map(l=>3*l).map(l=>n(le,{onClick:()=>O({level:l}),disabled:!C||z===l,children:l},l)):null,n(le,{onClick:()=>O({level:z+1}),disabled:!C||z===V*3,children:"+"})]})]}),T(se,{component:"div",display:"flex",children:[n(Qr,{label:"Slot",value:I,onChange:l=>O({slotKey:l.target.value}),disabled:M||!C,children:Zr.map(l=>n(_e,{value:l,children:l},l))}),n(me,{bgt:"light",sx:{p:1,ml:1,flexGrow:1},children:n(b.Suspense,{fallback:n(vt,{width:"60%"}),children:n(he,{color:"text.secondary",children:I})})})]}),T(se,{component:"div",display:"flex",gap:1,children:[n(gt,{title:n("b",{children:(o==null?void 0:o.mainStatKey)??"Main Stat"}),disabled:!C,color:o?"success":"primary",children:Tt[I].map(l=>n(_e,{selected:(o==null?void 0:o.mainStatKey)===l,disabled:(o==null?void 0:o.mainStatKey)===l,onClick:()=>O({mainStatKey:l}),children:l},l))}),n(me,{bgt:"light",sx:{p:1,flexGrow:1},children:n(he,{color:"text.secondary",children:o?Jr(V,o.mainStatKey,z):d`mainStat`})}),n(le,{onClick:()=>O({lock:!(o!=null&&o.lock)}),color:o!=null&&o.lock?"success":"primary",disabled:!o,children:o!=null&&o.lock?n(sr,{}):n(ir,{})})]}),n(ea,{locKey:(_==null?void 0:_.location)??"",setLocKey:l=>O({location:l})})]}),n(U,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[0,1,2,3].map(l=>n(So,{index:l,relic:_,setSubstat:J},l))})]}),x&&T(U,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[n(U,{item:!0,xs:12,md:5.5,lg:4,children:T(me,{bgt:"light",children:[n(he,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:h!=="edit"?h==="duplicate"?d`editor.dupeRelic`:d`editor.updateRelic`:d`editor.beforeEdit`}),n(ht,{relic:x})]})}),de&&n(U,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:n(me,{bgt:"light",sx:{display:"flex"},children:n(lr,{sx:{fontSize:40}})})}),n(U,{item:!0,xs:12,md:5.5,lg:4,children:T(me,{bgt:"light",children:[n(he,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:d`editor.preview`}),_&&n(ht,{relic:_})]})})]}),!q&&n(ka,{variant:"filled",severity:"error",children:$.map((l,j)=>n("div",{children:l},j))}),T(se,{display:"flex",gap:2,children:[h==="edit"?n(le,{startIcon:n(bt,{}),onClick:()=>{o&&i.relics.set(x.id,o),r||(P(!1),t()),D()},disabled:!o||!q,color:"primary",children:d`editor.btnSave`}):n(le,{startIcon:n(bt,{}),onClick:()=>{i.relics.new(o),r||(P(!1),t()),D()},disabled:!o||!q,color:h==="duplicate"?"warning":"primary",children:d`editor.btnAdd`}),r&&n(le,{startIcon:n(nr,{}),disabled:!o,onClick:()=>{ie()&&D()},color:"error",children:d`editor.btnClear`}),x&&h!=="edit"&&n(le,{startIcon:n(cr,{}),onClick:()=>{o&&i.relics.set(x.id,o),D(),r||P(!1)},disabled:!o||!q,color:"success",children:d`editor.btnUpdate`}),!!Y&&n(le,{startIcon:n(ta,{}),onClick:()=>{window.confirm(d`editor.confirmDelete`)&&(i.relics.remove(Y),D(),r||P(!1))},disabled:!o||!q,color:"error",children:d`editor.delete`})]})]})]})})})}const Bt={xs:1,sm:2,md:3,lg:3,xl:4},$o={xs:10,sm:12,md:24,lg:24,xl:24};function Ro({onAdd:e,onEdit:t}){const{t:a}=Me("relic"),{database:r}=er(),[u,d]=rr();b.useEffect(()=>r.relics.followAny(d),[r,d]);const{relicIds:i,totalRelicsNum:p}=b.useMemo(()=>{const $=r.relics.values,x=$.length,h=$.map(M=>M.id);return u&&{relicIds:h,totalRelicsNum:x}},[r,u]),m=ra(),A=i.length!==p?`${i.length}/${p}`:p,{numShow:P,setTriggerElement:o}=aa($o[m],i.length),R=b.useMemo(()=>i.slice(0,P),[i,P]),_={numShowing:R.length,totalShowing:A};return T(Qt,{children:[n(me,{bgt:"dark",children:n(tr,{children:n(se,{pb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:T(he,{color:"text.secondary",children:["Showing ",n("b",{children:_.numShowing})," out of"," ",_.totalShowing," Items"]})})})}),n(U,{container:!0,columns:Bt,spacing:1,children:n(U,{item:!0,xs:!0,children:n(le,{fullWidth:!0,onClick:e,color:"info",startIcon:n(bt,{}),children:a`addNew`})})}),T(b.Suspense,{fallback:n(vt,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:[n(U,{container:!0,columns:Bt,spacing:1,children:R.map($=>n(U,{item:!0,xs:1,children:n(ht,{relic:r.relics.get($),onEdit:()=>t==null?void 0:t($),onDelete:()=>r.relics.remove($),setLocation:x=>r.relics.set($,{location:x})})},$))}),i.length!==R.length&&n(vt,{ref:$=>{$&&o($)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})}function Ao(){const[e,t]=b.useState("");return T(se,{display:"flex",flexDirection:"column",gap:1,my:1,children:[n(wo,{relicIdToEdit:e,cancelEdit:()=>t(""),allowEmpty:!0}),n(Ro,{onAdd:()=>t("new"),onEdit:t})]})}export{Ao as default};
