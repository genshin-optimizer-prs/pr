"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[934],{17589:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$e});var i=n(98283),a=n(31981),r=n(12761);function l(t,e=10){return o(t,e)}function s(t,e=10){return o(t,-e)}function o(t,e=10){const{r:n,g:i,b:a,a:l}=t;return{r:(0,r.re)(n+e,0,255),g:(0,r.re)(i+e,0,255),b:(0,r.re)(a+e,0,255),a:l}}function c(t,e,n){return(0,r.uh)(t.r,e.r,n.r)&&(0,r.uh)(t.g,e.g,n.g)&&(0,r.uh)(t.b,e.b,n.b)}function d(t,e){const n=t.width,i=t.height;let{x1:a=0,x2:l=n,y1:s=0,y2:o=i}=e;a=(0,r.re)(a,0,n),l=(0,r.re)(l,0,n),s=(0,r.re)(s,0,i),o=(0,r.re)(o,0,i),s>=o&&(console.warn(`trying to crop with y1:${s} y2:${o}, with src height ${i}.`),s=0,o=i),a>=l&&(console.warn(`trying to crop with x1:${a} x2:${l}, with src width ${n}.`),a=0,l=n);return t.getContext("2d",{willReadFrequently:!0}).getImageData(a,s,l-a,o-s)}function u(t,e,n,i){const a=e===t.width?e-1:Math.floor(e),r=a+1,l=n===t.height?n-1:Math.floor(n),s=l+1,o=4*t.width;return(r-e)*(s-n)*t.data[i+4*a+o*l]+(e-a)*(s-n)*t.data[i+4*r+o*l]+(r-e)*(n-l)*t.data[i+4*a+o*s]+(e-a)*(n-l)*t.data[i+4*r+o*s]}function h(t){const e=t.width,n=t.height,i=new Uint8ClampedArray(e*n*4);for(let a=0;a<e*n*4;a++)i[a]=a%4!=3?255-t.data[a]:t.data[a];return new ImageData(i,e,n)}const f=t=>new Promise((e=>{const n=new Image;n.onload=({target:t})=>e(function(t){const e=document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)}(t)),n.src=t}));function Z(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e}function m(t,{x:e,y:n,w:i,h:a},r){const l=t.getContext("2d");return l.fillStyle=`rgba(${r.r},${r.g},${r.b},${r.a?r.a/255:1})`,l.fillRect(e,n,i,a),t}function y(t,e,n,i=!0){const a=t.getContext("2d");return a?(a.fillStyle=`rgba(${n.r},${n.g},${n.b},${n.a?n.a/255:1})`,e.forEach(((t,e)=>i?a.fillRect(e,0,1,t):a.fillRect(0,e,t,1))),t):t}function g(t,e,n,i=!0){const a=t.height,r=t.width,l=t.data;return Array.from({length:i?r:a},((t,s)=>{let o=0;for(let d=0;d<(i?a:r);d++){const t=i?b(s,d,r):b(d,s,r),[a,u,h]=[l[t],l[t+1],l[t+2]];c({r:a,g:u,b:h},e,n)&&o++}return o}))}function p(t,e,n,i=!0,a=[0,1]){const l=t.height,s=t.width,o=t.data,c=i?s:l,[d,u]=a,h=c*d,f=c*u;return Array.from({length:c},((t,a)=>{if(a<h||a>f)return 0;let c=0,d=0;for(let u=0;u<(i?l:s);u++){const t=i?b(a,u,s):b(u,a,s),[l,h,f]=[o[t],o[t+1],o[t+2]];(0,r.uh)(l,e.r,n.r)&&(0,r.uh)(h,e.g,n.g)&&(0,r.uh)(f,e.b,n.b)?d++:(d>c&&(c=d),d=0)}return d>c&&(c=d),c}))}function b(t,e,n){return e*(4*n)+4*t}function v(t,e=.7,n=3){const i=Math.max(...t)*e,a=t.length;let r=-n;for(let s=0;s<a;s++){const e=t[s]>i;if(e){if(e&&r<0)r=s;else if(e&&s-r>n)break}else r=-n}r<0&&(r=0);let l=a-1+n;for(let s=a-1;s>=0;s--){const e=t[s]>i;if(e){if(e&&l>a-1)l=s;else if(e&&l-s>n)break}else l=a-1+n}return l>a-1&&(l=a-1),[r,l]}const x={r:255,g:137,b:117},w={r:255,g:204,b:50};var S=n(72718),k=n(24691),C=n(74155),K=n(20417);const B={hp:"HP",hp_:"HP",atk:"ATK",atk_:"ATK",def:"DEF",def_:"DEF",eleMas:"Elemental Mastery",enerRech_:"Energy Recharge",critRate_:"Crit Rate",critDMG_:"Crit DMG",heal_:"Healing Bonus"};Object.entries({physical:"Physical",anemo:"Anemo",geo:"Geo",electro:"Electro",hydro:"Hydro",pyro:"Pyro",cryo:"Cryo",dendro:"Dendro"}).forEach((([t,e])=>{B[`${t}_dmg_`]=`${e} DMG Bonus`}));const P={flower:"Flower of Life",plume:"Plume of Death",sands:"Sands of Eon",goblet:"Goblet of Eonothem",circlet:"Circlet of Logos"};var X=n(52903);function E(t,e,n,i,l,s,o,c=!1){const d={lock:b(c,"Lock",(t=>t?"Locked":"Unlocked"))};o&&(d.location=b(o,"Location",(t=>t)));const u=e.size?[...e]:["EmblemOfSeveredFate"];let h=-1,f=[{setKey:"EmblemOfSeveredFate",rarity:5,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:null!=o?o:"",lock:c}];const Z=(0,r.K8)(a.$W,(n=>{let a=0;if(e.size){a+=[...e].reduce(((t,e)=>t+(S.G2.art.data[e].rarities.includes(n)?1:0)),0)/e.size}if(t.has(n)&&a++,i.length){a+=i.reduce(((t,e)=>t+((0,C.UW)(e.key,e.value,n).length?1:0)),0)/i.length*2}return a}));for(const k of a.Ex)for(const t of a.yh[k]){const i=(0,r.bf)(t),a="%"===i?1:0,d="%"===i?.1:1,m=(n.has(k)?1:0)+(l.has(t)?1:0),y=s.filter((e=>"%"!==e.unit||"%"===(0,r.bf)(t))).map((t=>t.mainStatValue));for(const[n,r]of Object.entries(Z)){const i=parseInt(n),l=u.filter((t=>S.G2.art.data[t].rarities.includes(i))),s=m+r;if(!(s+2<h)){for(const n of y){const r=(0,C.HD)(i,t),u=Math.max(0,r.findIndex((t=>t+d>=n))),Z=s+(r[u].toFixed(a)===n.toFixed(a)?1:0);for(const n of l){const a=Z+(e.has(n)?1:0);a>=h&&(a>h&&(f=[]),h=a,f.push({setKey:n,rarity:i,level:u,slotKey:k,mainStatKey:t,substats:[],location:null!=o?o:"",lock:c}))}}if(s>=h){const n=0;for(const a of l){const r=s+(e.has(a)?1:0);r>h&&(f=[]),h=r,f.push({setKey:a,rarity:i,level:n,slotKey:k,mainStatKey:t,substats:[],location:null!=o?o:"",lock:c})}}}}}const m={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},y=f[0],g=(0,C.Bv)(y.mainStatKey,y.rarity,y.level);y.substats=i.filter(((t,e)=>t.key!==y.mainStatKey&&i.slice(0,e).every((e=>e.key!==t.key))));for(let a=y.substats.length;a<4;a++)y.substats.push({key:"",value:0});for(const a of f)m.setKey.add(a.setKey),m.rarity.add(a.rarity),m.level.add(a.level),m.slotKey.add(a.slotKey),m.mainStatKey.add(a.mainStatKey);function p(t,e,n){return(0,X.BX)(X.HY,{children:["Unknown ",e," : Set to"," ",(0,X.tZ)(K._w,{color:"error",children:n(t)})]})}function b(t,e,n){return(0,X.BX)(X.HY,{children:["Detected ",e," ",(0,X.tZ)(K._w,{color:"success",children:n(t)})]})}function v(t,e,n){return(0,X.BX)(X.HY,{children:["Inferred ",e," ",(0,X.tZ)(K._w,{color:"warning",children:n(t)})]})}function x(t,e,n,i){const a=new Set([...m[t]].filter((t=>e.has(t)))),r=y[t];a.size>1?d[t]=function(t,e,n,i){return(0,X.BX)(X.HY,{children:["Ambiguous ",n," ",(0,X.tZ)(K._w,{color:"error",children:i(t)})," : May also be"," ",e.filter((e=>e!==t)).map(((t,e)=>(0,X.BX)(X.HY,{children:[(0,X.tZ)("b",{children:e>0?"/":""}),(0,X.tZ)(K._w,{color:"warning",children:i(t)})]})))]})}(r,[...e],n,i):1===a.size?d[t]=b(r,n,i):m[t].size>1?d[t]=p(r,n,i):d[t]=v(r,n,i)}x("setKey",e,"Set",(t=>(0,X.tZ)(k.C3,{setKey:t}))),x("rarity",t,"Rarity",(t=>(0,X.BX)(X.HY,{children:[t," ",1!==t?"Stars":"Star"]}))),x("slotKey",n,"Slot",(t=>(0,X.tZ)(k.cN,{slotKey:t}))),x("mainStatKey",l,"Main Stat",(t=>(0,X.tZ)("span",{children:B[t]}))),d.substats=(0,X.tZ)(X.HY,{children:y.substats.filter((t=>""!==t.key)).map(((t,e)=>(0,X.tZ)("div",{children:b(t,"Sub Stat",(t=>(0,X.BX)(X.HY,{children:[B[t.key],"+",(0,C.Jj)(t.value,(0,r.bf)(t.key)),(0,r.bf)(t.key)]})))},e)))});const w=t=>(0,X.BX)(X.HY,{children:[(0,C.Jj)(t,(0,r.bf)(y.mainStatKey)),(0,r.bf)(y.mainStatKey)]}),P="%"===(0,r.bf)(y.mainStatKey)?1:0;return s.find((t=>t.mainStatValue.toFixed(P)===g.toFixed(P)))?l.has(y.mainStatKey)?(d.level=b(y.level,"Level",(t=>"+"+t)),d.mainStatVal=b(g,"Main Stat value",w)):(d.level=v(y.level,"Level",(t=>"+"+t)),d.mainStatVal=v(g,"Main Stat value",w)):(d.level=p(y.level,"Level",(t=>"+"+t)),d.mainStatVal=p(g,"Main Stat value",w)),[y,d]}function R(t){const e=Math.min(...t.map((([,t])=>t))),n=t.filter((([,t])=>t===e)).map((([t])=>t));return new Set(n)}function D(t){const e=[];for(const n of t)for(const t of a.Gt)e.push([t,(0,r.Ay)(n.replace(/\W/g,""),t)]);return R(e)}function I(t){const e=[];for(const n of t)for(const t of a.Ex)e.push([t,(0,r.Ay)(n.replace(/\W/g,""),P[t].replace(/\W/g,""))]);return R(e)}function A(t){const e=[];for(const l of t)for(const t of a.rW){var n,i;const a=null==(n=B[t])?void 0:n.toLowerCase();a.length<=3?l.toLowerCase().includes(null!=a?a:"")&&e.push([t,0]):e.push([t,(0,r.Ay)(l.replace(/\W/g,""),(null!=(i=B[t])?i:"").replace(/\W/g,""))])}return R(e)}function L(t){const e=[];for(const n of t){let t=/(\d+[,|\\.]+\d)%/,i=t.exec(n);i&&e.push({mainStatValue:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),t=/(\d+[,|\\.]\d{3}|\d{2,3})/,i=t.exec(n),i&&e.push({mainStatValue:parseInt(i[1].replace(/[,|\\.]+/g,""))})}return e}function G(t){const e=[];for(let n of t)n=n.replace(/^[\W]+/,"").replace(/\n/,""),a._m.forEach((t=>{const i=B[t],a=("%"===(0,r.bf)(t)?new RegExp(i+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(i+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(n);a&&e.push({key:t,value:parseFloat(a[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}));return e.slice(0,4)}var $=n(4184),U=n(24370);function F(t,e,n,i,a){var r,l;const s=t.data[4*i]*n,o=t.data[4*i+1]*e,c=t.data[4*i+2]*n-s,d=t.data[4*i+3]*e-o;return{x:s+(null!=(r=null==a?void 0:a.x1)?r:0),y:o+(null!=(l=null==a?void 0:a.y1)?l:0),w:c,h:d}}function M(t,e){return e&&(t=function(t,e){return{x:Math.max(t.x-e*t.w/2,0),y:Math.max(t.y-e*t.h/2,0),w:t.w*(1+e),h:t.h*(1+e)}}(t,e)),{x1:t.x,y1:t.y,x2:t.x+t.w,y2:t.y+t.h}}async function _(t,e,n,i){const a=d(Z(t),n),r=function(t,e){const{width:n=t.width,height:i=t.height}=e,a=new Uint8ClampedArray(n*i*4),r=(n-1)/(t.width-1),l=(i-1)/(t.height-1);for(let s=0;s<n;s++)for(let e=0;e<i;e++)for(let i=0;i<4;i++)a[4*s+e*n*4+i]=u(t,s/r,e/l,i);return new ImageData(a,n,i)}(a,{width:200,height:200}),l=function(t){const e=new Float32Array(12e4);e.fill(0);const n=[{mu:.485,std:.229},{mu:.456,std:.224},{mu:.406,std:.225}],i=4*t.width;for(let a=0;a<3;a++){const{mu:r,std:l}=n[a];for(let n=0;n<200;n++)for(let s=0;s<200;s++){const o=t.data[1*a+i*n+4*s]/255;e[200*a*200+200*n+s]=(o-r)/l}}return e}(r);i&&(i.MLInput=Z(r).toDataURL());const s={input1:new $.Tensor("float32",l,[1,3,200,200])},o=(await e.run(s)).output1,c=a.height,h=a.width,f={title:F(o,c,h,0,n),slot:F(o,c,h,1,n),mainstat:F(o,c,h,2,n),level:F(o,c,h,3,n),rarity:F(o,c,h,4,n),substats:F(o,c,h,5,n),set:F(o,c,h,6,n),lock:F(o,c,h,7,n),bbox:F(o,c,h,8,n)};return f.substats.w=f.lock.x-f.substats.x,f}async function O(t,e,n=!1){const{f:i,fName:a}=t,r=await(o=i,new Promise((t=>{const e=new FileReader;e.onloadend=({target:e})=>t(e.result),e.readAsDataURL(o)})));var o;const c=await f(r),u=n?{}:void 0;{const{artifact:t,texts:n,imageURL:i}=await async function(t,e,n){const i=await $.InferenceSession.create("./assets/simplenet.onnx",{executionProviders:["webgl"]}),a=await _(t,i,{},n),r=await _(t,i,M(a.bbox,.2),n),o=Z(t),c=(e(d(o,M(r.title,.1))),d(o,M(r.slot,.1))),u=e(c),f=h(d(o,M(r.level,.1))),y=e(f),p=h(d(o,M(r.mainstat,.1))),b=e(p,{tessedit_pageseg_mode:U.PSM.SPARSE_TEXT}),v=d(o,M(r.substats,.1)),w=e(v),S=d(o,M(r.set,.1)),k=e(S),C=d(o,M(r.lock,.1)),K=g(C,s(x),l(x)).filter((t=>t>5)).length>5,B=d(o,M(r.rarity,.1)),P=T(B,n),[X,R]=E(new Set([P]),D(await k),I(await u),G(await w),A(await b),L(await b),"",K),F=Z(t);m(F,r.title,{r:31,g:119,b:180,a:80}),m(F,r.slot,{r:255,g:127,b:14,a:80}),m(F,r.mainstat,{r:44,g:160,b:44,a:80}),m(F,r.level,{r:214,g:39,b:40,a:80}),m(F,r.rarity,{r:128,g:103,b:189,a:80}),m(F,r.substats,{r:140,g:86,b:75,a:80}),m(F,r.set,{r:227,g:119,b:194,a:80}),m(F,r.lock,{r:188,g:189,b:34,a:80}),m(F,r.bbox,{r:127,g:127,b:127,a:60}),n&&(n.MLBoxesFull=F.toDataURL(),n.slotCrop=Z(c).toDataURL(),n.levelCrop=Z(f).toDataURL(),n.mainstatCrop=Z(p).toDataURL(),n.substatCrop=Z(v).toDataURL(),n.setCrop=Z(S).toDataURL(),n.lockCrop=Z(C).toDataURL(),n.rarityCrop=Z(B).toDataURL());const O=Z(d(F,M(a.bbox,.2)));return console.log("DETECTION: ",{artifact:X,texts:R}),console.log("TEXT:",{slotText:u,levelText:y,mainstatText:b,substatText:w,setText:k}),{artifact:X,texts:R,imageURL:O.toDataURL()}}(c,e,u);return{fileName:a,imageURL:i,artifact:t,texts:n,debugImgs:u}}}function T(t,e){const n=p(t,s(w),l(w),!1),[i,a]=v(n,.3),o=d(Z(t),{y1:i,y2:a}),c=p(o,s(w),l(w));if(e){const t=Z(o);y(t,c,{r:100,g:0,b:0,a:100}),e.rarity=t.toDataURL()}const u=.5*Math.max(...c);let h=0,f=!1;for(let r=0;r<c.length;r++)c[r]>u?f||(h++,f=!0):f&&(f=!1);return(0,r.re)(h,1,5)}class ScanningQueue{constructor(t,e=!1){this.debug=void 0,this.textsFromImage=void 0,this.processed=[],this.outstanding=[],this.scanning=[],this.callback=()=>{},this.textsFromImage=t,this.debug=e}addFiles(t){this.outstanding.push(...t),this.processQueue()}processQueue(){const t=Math.min(16-this.processed.length-this.scanning.length,3-this.scanning.length,this.outstanding.length);t&&this.outstanding.splice(0,t).map((t=>{const e=O(t,this.textsFromImage,this.debug);this.scanning.push(e),e.then((t=>{const n=this.scanning.indexOf(e);-1!==n&&(this.scanning.splice(n,1),this.processed.push(t),this.processQueue())}))})),this.callCB()}callCB(){this.callback({processedNum:this.processed.length,outstandingNum:this.outstanding.length,scanningNum:this.scanning.length})}shiftProcessed(){const t=this.processed.shift();return t&&this.processQueue(),t}clearQueue(){this.processed=[],this.outstanding=[],this.scanning=[],this.callCB()}}var N=n(16736),W=n(75927),H=n(93994),j=n(72550),z=n(67651),V=n(73673),Y=n(92252),Q=n(32510),q=n(85219),J=n(16549),tt=n(65992),et=n(47746),nt=n(86432),it=n(42523),at=n(7671),rt=n(41075),lt=n(67550),st=n(80551),ot=n(83249),ct=n(79906),dt=n(62197),ut=n(94380),ht=n(38162),ft=n(72841),Zt=n(107),mt=n(33927),yt=n(2784),gt=n(11141),pt=n(23485),bt=n(36674);let vt,xt=t=>t;const wt=["rarity","onChange","filter"];function St(t){let{rarity:e,onChange:n,filter:a}=t,r=(0,i.Z)(t,wt);const{t:l}=(0,gt.$G)("artifact");return(0,X.tZ)(pt.Z,Object.assign({},r,{title:e?(0,X.tZ)(bt.q,{stars:e,inline:!0}):l(vt||(vt=xt`editor.rarity`)),color:e?"success":"primary",children:[5,4,3].map((t=>(0,X.tZ)(ut.Z,{disabled:!a(t),onClick:()=>n(t),children:(0,X.tZ)(bt.q,{stars:t,inline:!0})},t)))}))}var kt=n(47712),Ct=n(83993),Kt=n(82056),Bt=n(56961),Pt=n(79199);let Xt,Et=t=>t;const Rt=["slotKey","onChange","hasUnselect"];function Dt(t){let{slotKey:e="",onChange:n,hasUnselect:r=!1}=t,l=(0,i.Z)(t,Rt);const{t:s}=(0,gt.$G)(["artifact","ui"]);return(0,X.BX)(pt.Z,Object.assign({title:s(e?`artifact:slotName:${e}`:"artifact:slot"),color:e?"success":"primary",startIcon:e?(0,X.tZ)(Pt.Z,{slotKey:e}):void 0},l,{children:[r&&(0,X.BX)(ut.Z,{selected:""===e,disabled:""===e,onClick:()=>n(""),children:[(0,X.tZ)(Ct.Z,{children:(0,X.tZ)(Q.Z,{})}),(0,X.tZ)(Kt.Z,{children:s(Xt||(Xt=Et`ui:unselect`))})]}),r&&(0,X.tZ)(Bt.Z,{}),a.Ex.map((t=>(0,X.BX)(ut.Z,{selected:e===t,disabled:e===t,onClick:()=>n(t),children:[(0,X.tZ)(Ct.Z,{children:(0,X.tZ)(Pt.Z,{slotKey:t})}),(0,X.tZ)(Kt.Z,{children:s(`artifact:slotName:${t}`)})]},t)))]}))}var It=n(6480),At=n(23690),Lt=n(13780);const Gt=["value","onChange","disabled","float"];function $t(t){let{value:e,onChange:n,disabled:a=!1,float:r=!1}=t,l=(0,i.Z)(t,Gt);const[s,o]=(0,yt.useState)(""),c=(0,yt.useCallback)((()=>{if(""===s)return n(0);const t=r?parseFloat:parseInt;n(t(s))}),[n,s,r]);return(0,yt.useEffect)((()=>{var t;return o(null!=(t=null==e?void 0:e.toString())?t:"")}),[e,o]),(0,X.tZ)(Lt.Z,Object.assign({value:s,"aria-label":"custom-input",type:"number",onChange:t=>o(t.target.value),onBlur:c,disabled:a,onKeyDown:t=>"Enter"===t.key&&c()},l))}var Ut=n(79410),Ft=n(69698),Mt=n(4121),_t=n(69614),Ot=n(80639),Tt=n(34156),Nt=n(39099),Wt=n(30706),Ht=n(87833),jt=n(12702),zt=n(96580);function Vt({efficiency:t,max:e=!1,t:n,valid:i}){const a=e?"maxSubEff":"curSubEff";return(0,X.tZ)(Ht.Z,{sx:{py:1,px:2},children:(0,X.BX)(rt.ZP,{container:!0,spacing:1,children:[(0,X.tZ)(rt.ZP,{item:!0,children:n(`editor.${a}`)}),(0,X.tZ)(rt.ZP,{item:!0,flexGrow:1,children:(0,X.tZ)(jt.Z,{title:(0,X.BX)("span",{children:[(0,X.tZ)(dt.Z,{variant:"h6",children:n(`editor.${a}`)}),(0,X.tZ)(dt.Z,{children:(0,X.tZ)(gt.cC,{t:n,i18nKey:`editor.${a}Desc`})})]})})}),(0,X.tZ)(rt.ZP,{item:!0,xs:"auto",children:(0,X.tZ)(zt.Z,{valid:i,max:900,value:i?t:"ERR"})})]})})}var Yt=n(36081),Qt=n(89977),qt=n(12366),Jt=n(13900),te=n(25576);let ee,ne,ie,ae,re,le,se,oe=t=>t;function ce({index:t,artifact:e,setSubstat:n}){var i;const{t:l}=(0,gt.$G)("artifact"),{mainStatKey:s="",rarity:o=5}=null!=e?e:{},{key:c="",value:d=0,rolls:u=[],efficiency:h=0}=null!=(i=null==e?void 0:e.substats[t])?i:{},f=u.reduce(((t,e)=>t+e),0),Z=te.ZP.unit(c),m=u.length;let y="",g=[],p=0;if(e){const t=e.rarity,{numUpgrades:n,high:i}=a.i0[t];p=n+i-3-m,g=c?(0,C.ME)(c,t):[]}const b=7-g.length;!m&&c&&d&&(y=y||l(ee||(ee=oe`editor.substat.error.noCalc`))),p<0&&(y=y||l("editor.substat.error.noOverRoll",{value:p+m}));const v=(0,yt.useMemo)((()=>c?[{value:0},...(0,C.K_)(o,c).map((t=>({value:t})))]:[{value:0}]),[c,o]);return(0,X.BX)(Ht.Z,{children:[(0,X.tZ)(lt.Z,{sx:{display:"flex"},children:(0,X.BX)(st.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,X.BX)(pt.Z,{startIcon:c?(0,X.tZ)(Nt.C,{statKey:c}):void 0,title:c?(0,X.tZ)(It.w0,{statKey:c}):l("editor.substat.substatFormat",{value:t+1}),disabled:!e,color:c?"success":"primary",sx:{whiteSpace:"nowrap"},children:[c&&(0,X.tZ)(ut.Z,{onClick:()=>n(t,{key:"",value:0}),children:l(ne||(ne=oe`editor.substat.noSubstat`))}),a._m.filter((t=>s!==t)).map((e=>(0,X.BX)(ut.Z,{selected:c===e,disabled:c===e,onClick:()=>n(t,{key:e,value:0}),children:[(0,X.tZ)(Ct.Z,{children:(0,X.tZ)(Nt.C,{statKey:e})}),(0,X.tZ)(Kt.Z,{children:(0,X.tZ)(It.w0,{statKey:e})})]},e)))]}),(0,X.tZ)(Qt.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,X.tZ)(Qt.ZP,{float:"%"===Z,placeholder:l(ie||(ie=oe`editor.substat.selectSub`)),value:c?d:void 0,onChange:e=>n(t,{key:c,value:null!=e?e:0}),disabled:!c,error:!!y,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!g.length&&(0,X.tZ)(Jt.Z,{children:l(ae||(ae=oe`editor.substat.nextRolls`))}),g.map(((e,i)=>{var a,l;let s=(0,C.Jj)(f+e,Z);return s=null!=(a=null==(l=S.G2.art.subRollCorrection[o])||null==(l=l[c])?void 0:l[s])?a:s,(0,X.tZ)(ot.Z,{color:`roll${(0,r.re)(b+i,1,6)}`,disabled:d&&!m||p<=0,onClick:()=>n(t,{key:c,value:parseFloat(s)}),children:s},i)}))]})}),(0,X.tZ)(lt.Z,{px:2,children:(0,X.tZ)(de,{value:d,marks:v,setValue:e=>{var i;return n(t,{key:c,value:null!=(i=e)?i:0})},disabled:!c})}),(0,X.tZ)(lt.Z,{sx:{px:1,pb:1},children:y?(0,X.tZ)(qt.Z,{color:"error",children:l(re||(re=oe`ui:error`))}):(0,X.BX)(rt.ZP,{container:!0,children:[(0,X.tZ)(rt.ZP,{item:!0,children:(0,X.tZ)(qt.Z,{color:0===m?"secondary":`roll${(0,r.re)(m,1,6)}`,children:m?l("editor.substat.RollCount",{count:m}):l(le||(le=oe`editor.substat.noRoll`))})}),(0,X.tZ)(rt.ZP,{item:!0,flexGrow:1,children:!!u.length&&[...u].sort().map(((t,e)=>(0,X.tZ)(dt.Z,{component:"span",color:`roll${(0,r.re)(b+g.indexOf(t),1,6)}.main`,sx:{ml:1},children:(0,C.Jj)(t,Z)},`${e}.${t}`)))}),(0,X.tZ)(rt.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,X.tZ)(dt.Z,{children:(0,X.BX)(gt.cC,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,X.tZ)(zt.Z,{valid:!0,max:100*m,value:h||l(se||(se=oe`editor.substat.noStat`))})]})})})]})})]})}function de({value:t,setValue:e,marks:n,disabled:i=!1}){var a,r;const[l,s]=(0,yt.useState)(t);return(0,yt.useEffect)((()=>s(t)),[t]),(0,X.tZ)(Yt.ZP,{value:l,step:null,disabled:i,marks:n,min:0,max:null!=(a=null==(r=n[n.length-1])?void 0:r.value)?a:0,onChange:(t,e)=>s(e),onChangeCommitted:(t,n)=>e(n),valueLabelDisplay:"auto"})}var ue=n(24264);const he=n.p+"scanned.7fcdf3986bbc6101.png",fe=n.p+"fullscreen.093bacd265118df9.png";function Ze({modalShow:t,hide:e}){return(0,X.tZ)(Ft.Z,{open:t,onClose:e,children:(0,X.BX)(ue.Z,{children:[(0,X.tZ)(at.Z,{sx:{py:1},children:(0,X.BX)(rt.ZP,{container:!0,children:[(0,X.tZ)(rt.ZP,{item:!0,flexGrow:1,children:(0,X.tZ)(dt.Z,{variant:"subtitle1",children:"How to Upload Screenshots for parsing"})}),(0,X.tZ)(rt.ZP,{item:!0,children:(0,X.tZ)(At.Z,{onClick:e})})]})}),(0,X.tZ)(Bt.Z,{}),(0,X.BX)(at.Z,{children:[(0,X.BX)(Zt.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only works for"," ",(0,X.tZ)("strong",{children:"ENGLISH"})," artifacts."]}),(0,X.BX)(rt.ZP,{container:!0,spacing:1,mt:1,children:[(0,X.tZ)(rt.ZP,{item:!0,xs:8,md:6,children:(0,X.tZ)(lt.Z,{component:"img",alt:"snippet of the screen to take",src:fe,width:"100%",height:"auto"})}),(0,X.BX)(rt.ZP,{item:!0,xs:12,md:6,children:[(0,X.tZ)(dt.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,X.tZ)(dt.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,X.BX)(dt.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer."," ",(0,X.tZ)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,X.tZ)(dt.Z,{variant:"h6",children:"Single artifact"}),(0,X.BX)(dt.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is"," ",(0,X.tZ)("strong",{children:"Alt + Print Screen"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,X.tZ)(dt.Z,{variant:"h6",children:"Multiple artifacts"}),(0,X.BX)(dt.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like"," ",(0,X.tZ)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," ","to create a macro to easily to screenshot multiple artifacts at once."]}),(0,X.tZ)(dt.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,X.tZ)(dt.Z,{children:"The full genshin window, or at least a region that covers the artifact card."})]}),(0,X.BX)(rt.ZP,{item:!0,xs:12,md:7,children:[(0,X.tZ)(dt.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,X.tZ)(dt.Z,{children:"At this point, you should have the artifact screenshot either saved to your harddrive, or in your clipboard."}),(0,X.tZ)(dt.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,X.BX)(dt.Z,{children:["For single screenshots from the snippets, just press"," ",(0,X.tZ)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,X.BX)(dt.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,X.tZ)("b",{children:"Artifact Editor"}),"."]}),(0,X.tZ)(dt.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,X.BX)(dt.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,X.tZ)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,X.tZ)(rt.ZP,{item:!0,xs:8,md:5,children:(0,X.tZ)(lt.Z,{component:"img",alt:"main screen after importing stats",src:he,width:"100%",height:"auto"})})]})]}),(0,X.tZ)(Bt.Z,{}),(0,X.tZ)(at.Z,{sx:{py:1},children:(0,X.tZ)(At.Z,{large:!0,onClick:e})})]})})}const me=new r.eQ((async t=>{const e=(0,U.createScheduler)(),n=Array(2).fill(0).map((async n=>{const i=await(0,U.createWorker)(t,void 0,{errorHandler:console.error,langPath:"./assets"});e.addWorker(i)}));return await Promise.any(n),e}),((t,e)=>{e.then((t=>t.terminate()))}));async function ye(t,e=void 0){const n=Z(t);return(await me.borrow("genshin_fast_09_04_21",(async t=>await(await t).addJob("recognize",n,e)))).data.lines.map((t=>t.text))}var ge=n(50090),pe=n(11845);const be=["artifact"];let ve,xe,we,Se,ke,Ce,Ke,Be,Pe,Xe,Ee,Re,De,Ie=t=>t;const Ae=new Set(a._m);function Le(t,e){const n=(()=>{switch(e.type){case"reset":return;case"substat":{const{index:n,substat:i}=e,a=i.key?t.substats.findIndex((t=>t.key===i.key)):-1;return-1===a||a===n?t.substats[n]=i:[t.substats[n],t.substats[a]]=[t.substats[a],t.substats[n]],Object.assign({},t)}case"overwrite":return e.artifact;case"update":return Object.assign({},t,e.artifact)}})();return n?(0,Ot.BG)(n,!0):n}const Ge=(0,tt.ZP)("input")({display:"none"});function $e({artifactIdToEdit:t="",cancelEdit:e,allowUpload:n=!1,allowEmpty:l=!1,disableSet:s=!1,disableSlot:o=!1}){var c,d,u;const h=(0,yt.useRef)(new ScanningQueue(ye,pe.dG)).current,{t:f}=(0,gt.$G)("artifact"),{database:Z}=(0,yt.useContext)(Tt.t),[m,y]=(0,yt.useState)(!1),[g,p]=(0,j.NW)();(0,yt.useEffect)((()=>Z.arts.followAny(p)),[Z,p]);const[b,v]=(0,yt.useReducer)(Le,void 0),[x,w]=(0,yt.useState)(!1),[{processedNum:S,outstandingNum:k,scanningNum:B},P]=(0,yt.useState)({processedNum:0,outstandingNum:0,scanningNum:0}),[E,R]=(0,yt.useState)(void 0),{fileName:D,imageURL:I,debugImgs:A,texts:L}=null!=E?E:{},G=S+k+B,$=!["new",""].includes(t)&&!(null==b||!b.location)||o,U=(0,yt.useCallback)((t=>{t&&(y(!0),h.addFiles(Array.from(t).map((t=>({f:t,fName:t.name})))))}),[y,h]),F=(0,yt.useCallback)((()=>{h.clearQueue()}),[h]),M=(0,yt.useCallback)((t=>{t.target&&(U(t.target.files),t.target.value="")}),[U]),{old:_,oldType:O}=(0,yt.useMemo)((()=>{var e;const n=g&&t&&Z.arts.get(t);if(n)return{old:n,oldType:"edit"};if(void 0===b)return{old:void 0,oldType:""};const{duplicated:i,upgraded:a}=g&&Z.arts.findDups(b);return{old:null!=(e=i[0])?e:a[0],oldType:0!==i.length?"duplicate":"upgrade"}}),[b,t,Z,g]),{artifact:T,errors:tt}=(0,yt.useMemo)((()=>{if(!b)return{artifact:void 0,errors:[]};return(0,Ot.m1)(b,t)}),[b,t]),mt=b?(0,Mt.Sk)(b.setKey):void 0,bt=(0,yt.useCallback)((()=>{null==e||e(),v({type:"reset"}),R(void 0)}),[e,v]),vt=(0,yt.useCallback)((t=>{var e,n;const i=t.setKey?(0,Mt.Sk)(t.setKey):mt;function l(t,e,n){return t&&e.includes(t)?t:null!=n?n:e[0]}t.setKey&&(t.rarity=l(null==b?void 0:b.rarity,i.rarity,Math.max(...i.rarity)),t.slotKey=l(null==b?void 0:b.slotKey,i.slots)),t.rarity&&(t.level=null!=(e=null==b?void 0:b.level)?e:0),t.level&&(t.level=(0,r.re)(t.level,0,4*(null!=(n=t.rarity)?n:b.rarity))),t.slotKey&&(t.mainStatKey=l(null==b?void 0:b.mainStatKey,a.yh[t.slotKey])),t.mainStatKey&&(t.substats=[0,1,2,3].map((e=>b&&b.substats[e].key!==t.mainStatKey?b.substats[e]:{key:"",value:0}))),v({type:"update",artifact:t})}),[b,mt,v]),xt=(0,yt.useCallback)(((t,e)=>{v({type:"substat",index:t,substat:e})}),[v]),wt=!tt.length,{rarity:Ct=5,level:Kt=0,slotKey:Bt="flower"}=null!=b?b:{},{currentEfficiency:Pt=0,maxEfficiency:Xt=0}=T?_t.Z.getArtifactEfficiency(T,Ae):{},Et=(0,yt.useCallback)((e=>{t||!G&&!b||window.confirm(f(xe||(xe=Ie`editor.clearPrompt`)))?(y(!1),h.clearQueue(),bt()):null==e||e.preventDefault()}),[f,t,h,b,G,y,bt]),Rt=(0,et.Z)(),Lt=(0,nt.Z)(Rt.breakpoints.up("md")),Gt=b?a.fR.find((t=>b.mainStatKey.includes(t))):void 0,Ht=b?null!=Gt?Gt:"success":"primary",jt=(0,yt.useCallback)((t=>vt({setKey:t})),[vt]),zt=(0,yt.useCallback)((t=>""===t||!(!$||"circlet"===Bt||"PrayersForDestiny"!==t&&"PrayersForIllumination"!==t&&"PrayersForWisdom"!==t&&"PrayersToSpringtime"!==t)),[$,Bt]);return(0,yt.useEffect)((()=>{"new"===t&&(y(!0),v({type:"reset"}));const e=t&&g&&Z.arts.get(t);e&&(y(!0),v({type:"overwrite",artifact:(0,r.I8)(e)}))}),[t,Z,g]),(0,yt.useEffect)((()=>{if(!S||E)return;const t=h.shiftProcessed();if(!t)return;const{artifact:e}=t,n=(0,i.Z)(t,be);R(n),v({type:"overwrite",artifact:e})}),[h,S,E]),(0,yt.useEffect)((()=>{const t=t=>{var e;return U(null==(e=t.clipboardData)?void 0:e.files)};return n&&window.addEventListener("paste",t),()=>{n&&window.removeEventListener("paste",t)}}),[U,n]),(0,yt.useEffect)((()=>(h.callback=P,()=>{h.callback=()=>{}})),[h]),(0,X.tZ)(Ft.Z,{open:m,onClose:Et,children:(0,X.BX)(K.s8,{children:[(0,X.tZ)(Ze,{modalShow:x,hide:()=>w(!1)}),(0,X.tZ)(it.Z,{title:(0,X.tZ)(gt.cC,{t:f,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,X.tZ)(At.Z,{disabled:!!G,onClick:Et})}),(0,X.BX)(at.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,X.BX)(rt.ZP,{container:!0,spacing:1,columns:{xs:1,md:2},children:[(0,X.BX)(rt.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[(0,X.BX)(lt.Z,{sx:{display:"flex",gap:1},children:[(0,X.tZ)(kt.Z,{disabled:s,size:"small",artSetKey:null!=(c=null==b?void 0:b.setKey)?c:"",setArtSetKey:jt,sx:{flexGrow:1},label:null!=b&&b.setKey?"":f("editor.unknownSetName"),getOptionDisabled:({key:t})=>zt(t)}),(0,X.tZ)(St,{rarity:b?Ct:void 0,onChange:t=>vt({rarity:t}),filter:t=>{var e;return!(null==mt||null==(e=mt.rarity)||null==e.includes||!e.includes(t))},disabled:!mt})]}),(0,X.BX)(lt.Z,{component:"div",display:"flex",children:[(0,X.tZ)($t,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:Kt,disabled:!mt,placeholder:"0~"+4*Ct,onChange:t=>vt({level:t})}),(0,X.BX)(st.Z,{children:[(0,X.tZ)(ot.Z,{onClick:()=>vt({level:Kt-1}),disabled:!mt||0===Kt,children:"-"}),Ct?[...Array(Ct+1).keys()].map((t=>4*t)).map((t=>(0,X.tZ)(ot.Z,{onClick:()=>vt({level:t}),disabled:!mt||Kt===t,children:t},t))):null,(0,X.tZ)(ot.Z,{onClick:()=>vt({level:Kt+1}),disabled:!mt||Kt===4*Ct,children:"+"})]})]}),(0,X.BX)(lt.Z,{component:"div",display:"flex",children:[(0,X.tZ)(Dt,{disabled:$||!mt||(null==b||null==(d=b.setKey)?void 0:d.startsWith("Prayer")),slotKey:Bt,onChange:t=>vt({slotKey:t})}),(0,X.tZ)(K.s8,{bgt:"light",sx:{p:1,ml:1,flexGrow:1},children:(0,X.tZ)(yt.Suspense,{fallback:(0,X.tZ)(ct.Z,{width:"60%"}),children:(0,X.tZ)(dt.Z,{color:"text.secondary",children:b&&null!=mt&&mt.getSlotName(b.slotKey)?(0,X.BX)("span",{children:[(0,X.tZ)(Ut.Z,{size:2,src:(0,N.Hp)(b.setKey,b.slotKey)}),null==mt?void 0:mt.getSlotName(b.slotKey)]}):f(we||(we=Ie`editor.unknownPieceName`))})})})]}),(0,X.BX)(lt.Z,{component:"div",display:"flex",gap:1,children:[(0,X.tZ)(pt.Z,{startIcon:null!=b&&b.mainStatKey?(0,X.tZ)(Nt.C,{statKey:b.mainStatKey}):void 0,title:(0,X.tZ)("b",{children:b?(0,X.tZ)(It.w0,{statKey:b.mainStatKey}):f(Se||(Se=Ie`mainStat`))}),disabled:!mt,color:Ht,children:a.yh[Bt].map((t=>(0,X.tZ)(ut.Z,{selected:(null==b?void 0:b.mainStatKey)===t,disabled:(null==b?void 0:b.mainStatKey)===t,onClick:()=>vt({mainStatKey:t}),children:(0,X.tZ)(It.Rl,{statKey:t})},t)))}),(0,X.tZ)(K.s8,{bgt:"light",sx:{p:1,flexGrow:1},children:(0,X.tZ)(dt.Z,{color:"text.secondary",children:b?(0,C.R1)(b.mainStatKey,Ct,Kt):f(ke||(ke=Ie`mainStat`))})}),(0,X.tZ)(ot.Z,{disabled:!b,onClick:()=>vt({lock:!(null!=b&&b.lock)}),color:null!=b&&b.lock?"success":"primary",children:null!=b&&b.lock?(0,X.tZ)(W.Z,{}):(0,X.tZ)(H.Z,{})})]}),(0,X.tZ)(ge.W,{location:null!=(u=null==b?void 0:b.location)?u:"",setLocation:t=>vt({location:t}),autoCompleteProps:{disabled:!b}}),(0,X.tZ)(Vt,{valid:wt,efficiency:Pt,t:f}),Pt!==Xt&&(0,X.tZ)(Vt,{max:!0,valid:wt,efficiency:Xt,t:f}),n&&(0,X.tZ)(K.s8,{bgt:"light",children:(0,X.tZ)(at.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,X.BX)(yt.Suspense,{fallback:(0,X.tZ)(ct.Z,{width:"100%",height:"100"}),children:[(0,X.BX)(rt.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,X.tZ)(rt.ZP,{item:!0,flexGrow:1,children:(0,X.BX)("label",{htmlFor:"contained-button-file",children:[(0,X.tZ)(Ge,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:M}),(0,X.tZ)(ot.Z,{component:"span",startIcon:(0,X.tZ)(z.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),pe.dG&&A&&(0,X.tZ)(rt.ZP,{item:!0,children:(0,X.tZ)(Ue,{imgs:A})}),(0,X.tZ)(rt.ZP,{item:!0,children:(0,X.tZ)(ot.Z,{color:"info",sx:{px:2,minWidth:0},onClick:()=>w(!0),children:(0,X.tZ)(J.Z,{})})})]}),I&&(0,X.tZ)(lt.Z,{display:"flex",justifyContent:"center",children:(0,X.tZ)(lt.Z,{component:"img",src:I,width:"100%",maxWidth:350,height:"auto",alt:D||"Screenshot to parse for artifact values"})}),!!G&&(0,X.tZ)(ht.Z,{variant:"buffer",value:100*S/G,valueBuffer:100*(S+B)/G}),!!G&&(0,X.tZ)(K.s8,{sx:{pl:2},children:(0,X.BX)(lt.Z,{display:"flex",alignItems:"center",children:[!!B&&(0,X.tZ)(ft.Z,{size:"1em"}),(0,X.tZ)(dt.Z,{sx:{flexGrow:1,ml:1},children:(0,X.BX)("span",{children:["Screenshots in file-queue:",(0,X.tZ)("b",{children:G})]})}),(0,X.tZ)(ot.Z,{size:"small",color:"error",onClick:F,children:"Clear file-queue"})]})})]})})})]}),(0,X.BX)(rt.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((t=>(0,X.tZ)(ce,{index:t,artifact:T,setSubstat:xt},t))),L&&(0,X.tZ)(K.s8,{bgt:"light",children:(0,X.BX)(at.Z,{children:[(0,X.tZ)("div",{children:L.slotKey}),(0,X.tZ)("div",{children:L.mainStatKey}),(0,X.tZ)("div",{children:L.mainStatVal}),(0,X.tZ)("div",{children:L.rarity}),(0,X.tZ)("div",{children:L.level}),(0,X.tZ)("div",{children:L.lock}),(0,X.tZ)("div",{children:L.substats}),(0,X.tZ)("div",{children:L.setKey}),(0,X.tZ)("div",{children:L.location})]})})]})]}),_&&(0,X.BX)(rt.ZP,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[(0,X.tZ)(rt.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,X.BX)(K.s8,{bgt:"light",children:[(0,X.tZ)(dt.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:f("edit"!==O?"duplicate"===O?Ce||(Ce=Ie`editor.dupArt`):Ke||(Ke=Ie`editor.upArt`):Be||(Be=Ie`editor.beforeEdit`))}),(0,X.tZ)(Wt.Z,{artifactObj:_})]})}),Lt&&(0,X.tZ)(rt.ZP,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,X.tZ)(K.s8,{bgt:"light",sx:{display:"flex"},children:(0,X.tZ)(V.Z,{sx:{fontSize:40}})})}),(0,X.tZ)(rt.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,X.BX)(K.s8,{bgt:"light",children:[(0,X.tZ)(dt.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:f(Pe||(Pe=Ie`editor.preview`))}),(0,X.tZ)(Wt.Z,{artifactObj:T})]})})]}),!wt&&(0,X.tZ)(Zt.Z,{variant:"filled",severity:"error",children:tt.map(((t,e)=>(0,X.tZ)("div",{children:t},e)))}),(0,X.BX)(rt.ZP,{container:!0,spacing:2,children:[(0,X.tZ)(rt.ZP,{item:!0,children:"edit"===O?(0,X.tZ)(ot.Z,{startIcon:(0,X.tZ)(Y.Z,{}),onClick:()=>{b&&Z.arts.set(_.id,b),l||(y(!1),e()),bt()},disabled:!b||!wt,color:"primary",children:f(Xe||(Xe=Ie`editor.btnSave`))}):(0,X.tZ)(ot.Z,{startIcon:(0,X.tZ)(Y.Z,{}),onClick:()=>{Z.arts.new(b),l||(y(!1),e()),bt()},disabled:!b||!wt,color:"duplicate"===O?"warning":"primary",children:f(Ee||(Ee=Ie`editor.btnAdd`))})}),(0,X.tZ)(rt.ZP,{item:!0,flexGrow:1,children:l&&(0,X.tZ)(ot.Z,{startIcon:(0,X.tZ)(Q.Z,{}),disabled:!b,onClick:()=>{window.confirm(f(ve||(ve=Ie`editor.clearPrompt`)))&&bt()},color:"error",children:f(Re||(Re=Ie`editor.btnClear`))})}),(0,X.tZ)(rt.ZP,{item:!0,children:!1}),_&&"edit"!==O&&(0,X.tZ)(rt.ZP,{item:!0,children:(0,X.tZ)(ot.Z,{startIcon:(0,X.tZ)(q.Z,{}),onClick:()=>{b&&Z.arts.set(_.id,b),l?bt():y(!1)},disabled:!b||!wt,color:"success",children:f(De||(De=Ie`editor.btnUpdate`))})})]})]})]})})}function Ue({imgs:t}){const[e,n]=(0,yt.useState)(!1);return(0,X.BX)(X.HY,{children:[(0,X.tZ)(ot.Z,{color:"warning",onClick:()=>n(!0),children:"DEBUG"}),(0,X.tZ)(Ft.Z,{open:e,onClose:()=>n(!1),children:(0,X.tZ)(K.s8,{children:(0,X.tZ)(at.Z,{children:(0,X.tZ)(mt.Z,{spacing:1,children:Object.entries(t).map((([t,e])=>(0,X.BX)(lt.Z,{children:[(0,X.tZ)(dt.Z,{children:t}),(0,X.tZ)(lt.Z,{component:"img",src:e,maxWidth:"100%"})]},t)))})})})})]})}}}]);