import{b as T,at as Pe,as as Fe,au as pe,aY as K,av as N,e as i,aw as et,ax as qe,cd as Jt,ay as ke,j as I,az as He,aV as tn,aU as an,ce as ha,c as Se,a$ as nn,b0 as mt,cf as rn,T as L,Z as on,p as e,cg as sn,ch as ln,ci as cn,bC as dn,F as un,r as je,i as Ie,n as p,U as re,B as A,cj as hn,aT as pn,ca as mn,ap as We,K as g,d as me,aB as Lt,s as kt,C as P,am as we,J as S,bL as pa,a9 as tt,q as ge,ck as fn,bM as ft,bp as ce,l as St,bF as gn,cl as Cn,t as ue,bj as xn,bi as bn,a2 as yn,cm as vn,aR as wn,cn as Zt,co as _n,cp as st,cq as it,cr as lt,bx as Rn,a3 as at,D as xe,bf as ma,aA as ee,aC as Ce,aN as $t,u as Y,br as Qt,bs as ea,bq as ta,X as Be,Q as he,o as Ne,k as le,bh as ve,v as Ge,V as Ve,bt as Ln,cs as fa,ct as kn,cu as Sn,cv as ga,cw as $n,cx as Un,cy as Tn,cz as Mn,b8 as jn,cA as In,_ as Ca,af as xa,ae as Bn,bH as Dn,cB as An,aE as ba,W as ya,bd as zn,bk as On,cC as gt,ar as Ct,cD as Nn,m as xt,f as Ut,cE as En,cF as ct,h as Wn,bY as Pn,aG as va}from"./index-9c68f8ff.js";import{t as Tt,s as Mt,v as jt,i as wa,j as Fn,k as qn,C as F,H as Hn,w as Gn,x as Vn,c as aa,u as Kn,g as Yn,y as Xn,T as Jn,d as na,z as Zn}from"./TeamCard-db06d173.js";import{D as X}from"./DataContext-24efc50e.js";import{p as de,g as oe,u as D,E as It,S as Bt,d as Qn,B as _a,x as Ra,y as er,v as tr,w as La,n as ar,q as nr,r as ra,z as rr,A as or,C as sr,D as ir,a as oa,b as sa,F as lr}from"./index-a095a856.js";import{B as Ke,d as ka}from"./BootstrapTooltip-3f439c90.js";import{C as Ye}from"./CloseButton-552ed0ff.js";import{I as De,i as Ae,C as nt,B as cr}from"./ColoredText-32888d78.js";import{a as Sa,C as dr,L as ur,b as hr,T as se,A as pr,W as $a,c as mr}from"./WeaponEditor-759518a5.js";import{S as Q}from"./SqBadge-37836f6a.js";import{b as fr,c as Ua,e as Dt,C as gr,T as At,u as Ta,a as Ma,S as ja,f as zt,s as Ia,d as Ba,g as Cr}from"./StarDisplay-2b7821d5.js";import{C as Xe}from"./CardActionArea-45dd1cfe.js";import{F as Ot,C as Nt,A as Da}from"./ConditionalWrapper-41621922.js";import{u as bt,f as xr,A as Ze,d as br,i as yr,b as vr}from"./ArtifactSort-4efc662a.js";import{b as Qe,c as wr,d as _r,w as Rr,W as Lr}from"./WeaponCard-62765df1.js";import{a as Aa,d as za}from"./CheckBoxOutlineBlank-c6991ad2.js";import{A as kr}from"./Artifact-1563ceba.js";import{g as Oa,a as Sr,b as $r}from"./index-f53de289.js";import{g as Et,W as Na}from"./index-ca31d352.js";import{u as Ur}from"./useWeapon-d1726cca.js";import{C as Tr}from"./CardHeader-68c542f8.js";import{C as Mr,a as jr,K as Ir,M as Ea,D as Br}from"./DropdownButton-e03c32a1.js";import{S as Dr}from"./SlotIcon-a0329edd.js";import{C as Wa}from"./ChevronRight-942d52b0.js";import{T as Me,S as rt,h as Wt,a as Ar}from"./SolidToggleButtonGroup-7b890876.js";import zr from"./WeaponSelectionModal-d953ef3c.js";import{c as ia}from"./totalUtils-9df07a07.js";function Je(t){const a=T();return fr(a.optConfigs,t)}function Or(t){const{badgeContent:a,invisible:n=!1,max:o=99,showZero:s=!1}=t,r=Ua({badgeContent:a,max:o});let l=n;n===!1&&a===0&&!s&&(l=!0);const{badgeContent:c,max:f=o}=l?r:t,d=c&&Number(c)>f?`${f}+`:c;return{badgeContent:c,invisible:l,max:f,displayValue:d}}function Nr(t){return Fe("MuiBadge",t)}const Er=Pe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),be=Er,Wr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],dt=10,ut=4,Pr=t=>{const{color:a,anchorOrigin:n,invisible:o,overlap:s,variant:r,classes:l={}}=t,c={root:["root"],badge:["badge",r,o&&"invisible",`anchorOrigin${K(n.vertical)}${K(n.horizontal)}`,`anchorOrigin${K(n.vertical)}${K(n.horizontal)}${K(s)}`,`overlap${K(s)}`,a!=="default"&&`color${K(a)}`]};return He(c,Nr,l)},Fr=pe("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),qr=pe("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${K(n.anchorOrigin.vertical)}${K(n.anchorOrigin.horizontal)}${K(n.overlap)}`],n.color!=="default"&&a[`color${K(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>N({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:dt*2,lineHeight:1,padding:"0 6px",height:dt*2,borderRadius:dt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:ut,height:ut*2,minWidth:ut*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${be.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${be.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${be.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${be.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${be.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${be.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${be.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${be.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),Hr=i.forwardRef(function(a,n){var o,s,r,l,c,f;const d=et({props:a,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:m,component:C,components:h={},componentsProps:x={},children:b,overlap:y="rectangular",color:k="default",invisible:R=!1,max:U=99,badgeContent:E,slots:M,slotProps:j,showZero:W=!1,variant:w="standard"}=d,v=qe(d,Wr),{badgeContent:B,invisible:_,max:q,displayValue:te}=Or({max:U,invisible:R,badgeContent:E,showZero:W}),J=Ua({anchorOrigin:u,color:k,overlap:y,variant:w,badgeContent:E}),V=_||B==null&&w!=="dot",{color:Z=k,overlap:H=y,anchorOrigin:G=u,variant:z=w}=V?J:d,ae=z!=="dot"?te:void 0,_e=N({},d,{badgeContent:B,invisible:V,max:q,displayValue:ae,showZero:W,anchorOrigin:G,color:Z,overlap:H,variant:z}),$e=Pr(_e),Re=(o=(s=M==null?void 0:M.root)!=null?s:h.Root)!=null?o:Fr,ne=(r=(l=M==null?void 0:M.badge)!=null?l:h.Badge)!=null?r:qr,ie=(c=j==null?void 0:j.root)!=null?c:x.root,Ue=(f=j==null?void 0:j.badge)!=null?f:x.badge,$=Jt({elementType:Re,externalSlotProps:ie,externalForwardedProps:v,additionalProps:{ref:n,as:C},ownerState:_e,className:ke(ie==null?void 0:ie.className,$e.root,m)}),O=Jt({elementType:ne,externalSlotProps:Ue,ownerState:_e,className:ke($e.badge,Ue==null?void 0:Ue.className)});return I.jsxs(Re,N({},$,{children:[b,I.jsx(ne,N({},O,{children:ae}))]}))}),Gr=Hr;function Vr(t){return Fe("PrivateSwitchBase",t)}Pe("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Kr=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Yr=t=>{const{classes:a,checked:n,disabled:o,edge:s}=t,r={root:["root",n&&"checked",o&&"disabled",s&&`edge${K(s)}`],input:["input"]};return He(r,Vr,a)},Xr=pe(tn)(({ownerState:t})=>N({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),Jr=pe("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Zr=i.forwardRef(function(a,n){const{autoFocus:o,checked:s,checkedIcon:r,className:l,defaultChecked:c,disabled:f,disableFocusRipple:d=!1,edge:u=!1,icon:m,id:C,inputProps:h,inputRef:x,name:b,onBlur:y,onChange:k,onFocus:R,readOnly:U,required:E=!1,tabIndex:M,type:j,value:W}=a,w=qe(a,Kr),[v,B]=an({controlled:s,default:!!c,name:"SwitchBase",state:"checked"}),_=ha(),q=z=>{R&&R(z),_&&_.onFocus&&_.onFocus(z)},te=z=>{y&&y(z),_&&_.onBlur&&_.onBlur(z)},J=z=>{if(z.nativeEvent.defaultPrevented)return;const ae=z.target.checked;B(ae),k&&k(z,ae)};let V=f;_&&typeof V>"u"&&(V=_.disabled);const Z=j==="checkbox"||j==="radio",H=N({},a,{checked:v,disabled:V,disableFocusRipple:d,edge:u}),G=Yr(H);return I.jsxs(Xr,N({component:"span",className:ke(G.root,l),centerRipple:!0,focusRipple:!d,disabled:V,tabIndex:null,role:void 0,onFocus:q,onBlur:te,ownerState:H,ref:n},w,{children:[I.jsx(Jr,N({autoFocus:o,checked:s,defaultChecked:c,className:G.input,disabled:V,id:Z?C:void 0,name:b,onChange:J,readOnly:U,ref:x,required:E,ownerState:H,tabIndex:M,type:j},j==="checkbox"&&W===void 0?{}:{value:W},h)),v?r:m]}))}),Qr=Zr,eo=Se(I.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),to=Se(I.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ao=Se(I.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function no(t){return Fe("MuiCheckbox",t)}const ro=Pe("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ht=ro,oo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],so=t=>{const{classes:a,indeterminate:n,color:o,size:s}=t,r={root:["root",n&&"indeterminate",`color${K(o)}`,`size${K(s)}`]},l=He(r,no,a);return N({},a,l)},io=pe(Qr,{shouldForwardProp:t=>nn(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.indeterminate&&a.indeterminate,n.color!=="default"&&a[`color${K(n.color)}`]]}})(({theme:t,ownerState:a})=>N({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mt(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${ht.checked}, &.${ht.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${ht.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),lo=I.jsx(to,{}),co=I.jsx(eo,{}),uo=I.jsx(ao,{}),ho=i.forwardRef(function(a,n){var o,s;const r=et({props:a,name:"MuiCheckbox"}),{checkedIcon:l=lo,color:c="primary",icon:f=co,indeterminate:d=!1,indeterminateIcon:u=uo,inputProps:m,size:C="medium",className:h}=r,x=qe(r,oo),b=d?u:f,y=d?u:l,k=N({},r,{color:c,indeterminate:d,size:C}),R=so(k);return I.jsx(io,N({type:"checkbox",inputProps:N({"data-indeterminate":d},m),icon:i.cloneElement(b,{fontSize:(o=b.props.fontSize)!=null?o:C}),checkedIcon:i.cloneElement(y,{fontSize:(s=y.props.fontSize)!=null?s:C}),ownerState:k,ref:n,className:ke(R.root,h)},x,{classes:R}))}),po=ho;function mo(t){return Fe("MuiFormControlLabel",t)}const fo=Pe("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ee=fo,go=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Co=t=>{const{classes:a,disabled:n,labelPlacement:o,error:s,required:r}=t,l={root:["root",n&&"disabled",`labelPlacement${K(o)}`,s&&"error",r&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return He(l,mo,a)},xo=pe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[{[`& .${Ee.label}`]:a.label},a.root,a[`labelPlacement${K(n.labelPlacement)}`]]}})(({theme:t,ownerState:a})=>N({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ee.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ee.label}`]:{[`&.${Ee.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),bo=pe("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,a)=>a.asterisk})(({theme:t})=>({[`&.${Ee.error}`]:{color:(t.vars||t).palette.error.main}})),yo=i.forwardRef(function(a,n){var o,s;const r=et({props:a,name:"MuiFormControlLabel"}),{className:l,componentsProps:c={},control:f,disabled:d,disableTypography:u,label:m,labelPlacement:C="end",required:h,slotProps:x={}}=r,b=qe(r,go),y=ha(),k=(o=d??f.props.disabled)!=null?o:y==null?void 0:y.disabled,R=h??f.props.required,U={disabled:k,required:R};["checked","name","onChange","value","inputRef"].forEach(v=>{typeof f.props[v]>"u"&&typeof r[v]<"u"&&(U[v]=r[v])});const E=rn({props:r,muiFormControl:y,states:["error"]}),M=N({},r,{disabled:k,labelPlacement:C,required:R,error:E.error}),j=Co(M),W=(s=x.typography)!=null?s:c.typography;let w=m;return w!=null&&w.type!==L&&!u&&(w=I.jsx(L,N({component:"span"},W,{className:ke(j.label,W==null?void 0:W.className),children:w}))),I.jsxs(xo,N({className:ke(j.root,l),ownerState:M,ref:n},b,{children:[i.cloneElement(f,U),R?I.jsxs(on,{direction:"row",alignItems:"center",children:[w,I.jsxs(bo,{ownerState:M,"aria-hidden":!0,className:j.asterisk,children:["â€‰","*"]})]}):w]}))}),vo=yo;function wo({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(un,{...a});case"plume":return e(dn,{...a});case"sands":return e(cn,{...a});case"goblet":return e(ln,{...a});case"circlet":return e(sn,{...a})}}var Pt={},_o=Ie;Object.defineProperty(Pt,"__esModule",{value:!0});var yt=Pt.default=void 0,Ro=_o(je()),Lo=I,ko=(0,Ro.default)((0,Lo.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");yt=Pt.default=ko;function So({title:t,children:a,id:n="dropdownbtn",...o}){const[s,r]=i.useState(null),l=!!s,c=i.useCallback(d=>r(d.currentTarget),[r]),f=i.useCallback(()=>r(null),[r]);return p(i.Suspense,{fallback:e(A,{endIcon:e(yt,{}),...o,children:e(re,{width:50})}),children:[e(A,{...o,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:c,endIcon:e(yt,{}),children:t}),e(mn,{id:"basic-menu",anchorEl:s,open:l,placement:"bottom-start",transition:!0,onClick:f,sx:{zIndex:1500},children:({TransitionProps:d,placement:u})=>e(hn,{...d,style:{transformOrigin:u==="bottom-start"?"left top":"left bottom"},children:e(pn,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Mr,{onClickAway:f,children:p("div",{children:[" ",e(i.Suspense,{fallback:e(re,{width:"100%",height:"1000"}),children:e(jr,{"aria-labelledby":n,children:a})})]})})})})})]})}const Pa=Se(I.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),Ft=Se(I.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),$o=Se(I.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),Uo=Se(I.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),To=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Mo=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,jo=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Io=""+new URL("splash_amber-51176566.png",import.meta.url).href,Bo=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,Do=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,Ao=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,zo=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,Oo=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,No=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,Eo=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,Wo=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,Po=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,Fo=""+new URL("splash_chiori-0fd0d497.png",import.meta.url).href,qo=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,Ho=""+new URL("splash_collei-504a299e.png",import.meta.url).href,Go=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,Vo=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,Ko=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,Yo=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,Xo=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,Jo=""+new URL("splash_eula-1491affb.png",import.meta.url).href,Zo=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,Qo=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,es=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,ts=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,as=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,ns=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,rs=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,os=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,ss=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,is=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,ls=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,cs=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,ds=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,us=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,hs=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,ps=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,ms=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,fs=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,gs=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Cs=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,xs=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,bs=""+new URL("splash_lumine-51240648.png",import.meta.url).href,ys=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,vs=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,ws=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,_s=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Rs=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,Ls=""+new URL("splash_navia-749d043e.png",import.meta.url).href,ks=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Ss=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,$s=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,Us=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Ts=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Ms=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,js=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Is=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Bs=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,Ds=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,As=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,zs=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,Os=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,Ns=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,Es=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,Ws=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,Ps=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,Fs=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,qs=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,Hs=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,Gs=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,Vs=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,Ks=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,Ys=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,Xs=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,Js=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,Zs=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,Qs=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,ei=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,ti=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,ai={Albedo:Mo,Alhaitham:jo,Amber:Io,AratakiItto:is,Baizhu:Ao,Barbara:zo,Beidou:Oo,Bennett:No,Candace:Eo,Charlotte:Wo,Chevreuse:Po,Chiori:Fo,Chongyun:qo,Collei:Ho,Cyno:Go,Dehya:Vo,Diluc:Ko,Diona:Yo,Dori:Xo,Eula:Jo,Faruzan:Zo,Fischl:Qo,Freminet:es,Furina:ts,Gaming:as,Ganyu:ns,Gorou:rs,HuTao:ss,Jean:ls,KaedeharaKazuha:us,Kaeya:cs,KamisatoAyaka:Bo,KamisatoAyato:Do,Kaveh:ds,Keqing:hs,Kirara:ps,Klee:ms,KujouSara:Bs,KukiShinobu:gs,Layla:Cs,Lisa:xs,Lynette:ys,Lyney:vs,Mika:ws,Mona:_s,Nahida:Rs,Navia:Ls,Neuvillette:ks,Nilou:Ss,Ningguang:$s,Noelle:Us,Qiqi:Ts,RaidenShogun:Ms,Razor:js,Rosaria:Is,SangonomiyaKokomi:fs,Sayu:Ds,Shenhe:As,ShikanoinHeizou:os,Sucrose:zs,Tartaglia:Os,Thoma:Ns,Tighnari:Es,TravelerF:bs,TravelerM:To,Venti:Ws,Wanderer:Ps,Wriothesley:Fs,Xiangling:qs,Xianyun:Hs,Xiao:Gs,Xingqiu:Vs,Xinyan:Ks,YaeMiko:Ys,Yanfei:Xs,Yaoyao:Js,Yelan:Zs,Yoimiya:Qs,YunJin:ei,Zhongli:ti};function ni(t,a){return ai[We(t,a)]??""}function qt(t){const a=T();return i.useCallback(n=>{if(!t)return;const o=a.chars.get(t);o&&a.chars.set(t,{...o,...n})},[t,a])}function Fa(){const{data:t}=i.useContext(X);return p(g,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(a=>e(Sa,{node:a},JSON.stringify(a.info))),t.get(de.special).info.name&&p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(L,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(de.special).info.icon,e(L,{children:t.get(de.special).info.name})]})]})}function ri({characterKey:t,onClick:a,onClickHeader:n,footer:o,hideStats:s}){var k;const r=T(),l=Tt(t),c=Mt(t),{gender:f}=me(),d=oe(t,f),u=qt(t),m=(k=l==null?void 0:l[t])==null?void 0:k.target,C=i.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),h=i.useCallback(R=>e(Xe,{onClick:C,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:R}),[C]),x=i.useMemo(()=>c&&d&&{character:c,characterSheet:d,characterDispatch:u},[c,d,u]),b=i.useMemo(()=>m&&l&&{data:m,teamData:l},[m,l]),{favorite:y}=jt(t);return e(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:s?300:600}),children:p(kt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(g,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(Lt,{sx:{p:.5},onClick:R=>r.charMeta.set(t,{favorite:!y}),children:y?e(Ot,{}):e(Ft,{})})}),e(Nt,{condition:!!a,wrapper:h,children:c&&b&&x?e(oi,{characterContextObj:x,dataContextObj:b,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:s}):e(si,{characterKey:t})}),o]})})}function oi({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:o,onClickHeader:s,hideStats:r}){return e(F.Provider,{value:t,children:p(X.Provider,{value:a,children:[e(wa,{characterKey:n,onClick:o?void 0:s,children:e(Fn,{characterKey:n})}),p(g,{sx:l=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:r?`${l.spacing(1)}!important`:void 0}),children:[e(qn,{}),!r&&e(Fa,{})]})]})})}function si({characterKey:t}){return p(we,{children:[e(wa,{characterKey:t,children:e(Hn,{characterKey:t})}),e(P,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const ii=i.createContext({});var Ht={},li=Ie;Object.defineProperty(Ht,"__esModule",{value:!0});var qa=Ht.default=void 0,ci=li(je()),di=I,ui=(0,ci.default)((0,di.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");qa=Ht.default=ui;const hi=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,pi=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,mi=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,fi=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,gi=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Ci=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,xi=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,bi=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,yi=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,vi=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,wi=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,_i=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Ri=""+new URL("Character_Chiori_Card-190184e6.jpg",import.meta.url).href,Li=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,ki=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Si=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,$i=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Ui=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Ti=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,Mi=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,ji=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Ii=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Bi=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Di=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Ai=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,zi=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Oi=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,Ni=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Ei=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,Wi=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,Pi=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,Fi=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,qi=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,Hi=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,Gi=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,Vi=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,Ki=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,Yi=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,Xi=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,Ji=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,Zi=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,Qi=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,el=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,tl=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,al=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,nl=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,rl=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,ol=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,sl=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,il=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,ll=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,cl=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,dl=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,ul=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,hl=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,pl=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,ml=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,fl=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,gl=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,Cl=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,xl=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,bl=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,yl=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,vl=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,wl=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,_l=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Rl=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Ll=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,kl=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Sl=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,$l=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Ul=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Tl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,Ml=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,jl=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Il=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Bl=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Dl=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Al=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,zl=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Ol=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,Nl=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,la={Albedo:hi,Alhaitham:pi,Aloy:mi,Amber:fi,AratakiItto:gi,Baizhu:Ci,Barbara:xi,Beidou:bi,Bennett:yi,Candace:vi,Charlotte:wi,Chevreuse:_i,Chiori:Ri,Chongyun:Li,Collei:ki,Cyno:Si,Dehya:$i,Diluc:Ui,Diona:Ti,Dori:Mi,Eula:ji,Faruzan:Ii,Fischl:Bi,Freminet:Di,Furina:Ai,Gaming:zi,Ganyu:Oi,Gorou:Ni,HuTao:Ei,Jean:Wi,KaedeharaKazuha:Gi,Kaeya:Pi,KamisatoAyaka:Fi,KamisatoAyato:qi,Kaveh:Hi,Keqing:Vi,Kirara:Ki,Klee:Yi,KujouSara:Xi,KukiShinobu:Ji,Layla:Zi,Lisa:Qi,Lyney:tl,Lynette:el,Mika:al,Mona:nl,Nahida:rl,Navia:ol,Neuvillette:sl,Nilou:il,Ningguang:ll,Noelle:cl,Qiqi:dl,RaidenShogun:ul,Razor:hl,Rosaria:pl,SangonomiyaKokomi:ml,Sayu:fl,Shenhe:gl,ShikanoinHeizou:Cl,Somnia:xl,Sucrose:bl,Tartaglia:yl,Thoma:vl,Tighnari:wl,TravelerF:Ol,TravelerM:Nl,Venti:_l,Wanderer:Rl,Wriothesley:Ll,Xiangling:kl,Xianyun:Sl,Xiao:$l,Xingqiu:Ul,Xinyan:Tl,YaeMiko:Ml,Yanfei:jl,Yaoyao:Il,Yelan:Bl,Yoimiya:Dl,YunJin:Al,Zhongli:zl};function El(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return la[`Traveler${a}`]??"";default:return la[t]??""}}function qd(){const{characterSheet:t}=i.useContext(F),{data:a}=i.useContext(X),n={auto:a.get(D.total.auto).value,skill:a.get(D.total.skill).value,burst:a.get(D.total.burst).value},o={auto:a.get(D.total.autoBoost).value,skill:a.get(D.total.skillBoost).value,burst:a.get(D.total.burstBoost).value};return e(g,{children:e(S,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var r;return e(S,{item:!0,xs:4,children:e(Gr,{badgeContent:n[s],color:o[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(g,{component:"img",src:(r=t.getTalentOfKey(s))==null?void 0:r.img,width:"100%",height:"auto"})})},s)})})})}function Wl(){const{characterSheet:t,character:{key:a}}=i.useContext(F),{data:n}=i.useContext(X),o=qt(a),s=n.get(D.constellation).value;return e(S,{container:!0,spacing:1,children:pa(1,6).map(r=>{var l;return e(S,{item:!0,xs:4,children:e(Xe,{onClick:()=>o({constellation:r===s?r-1:r}),children:e(g,{component:"img",src:(l=t.getTalentOfKey(`constellation${r}`))==null?void 0:l.img,sx:{...s>=r?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},r)})})}function Pl(){const{silly:t}=i.useContext(tt),{character:{key:a}}=i.useContext(F),{gender:n}=me(),{data:o}=i.useContext(X),s=o.get(D.lvl).value,r=o.get(D.asc).value,l=ni(a,n),c=El(a,n);return t&&l?e(Fl,{src:l,level:s,ascension:r}):e(ql,{src:c,level:s,ascension:r})}function Fl({src:t,level:a,ascension:n}){const{characterSheet:o}=i.useContext(F);return p(g,{sx:{position:"relative"},children:[e(g,{src:t,component:"img",width:"100%",height:"auto"}),p(g,{sx:{width:"100%",height:"100%"},children:[e(g,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ha,{})}),e(L,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Dt,{stars:o.rarity,colored:!0})}),e(Va,{}),e(Ga,{level:a,ascension:n})]})]})}function ql({src:t,level:a,ascension:n}){const{characterSheet:o}=i.useContext(F);return p(g,{sx:{position:"relative"},children:[p(g,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(L,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Dt,{stars:o.rarity,colored:!0})}),e(g,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(Ha,{})}),e(Va,{}),e(Ga,{level:a,ascension:n})]}),e(g,{src:t,component:"img",width:"100%",height:"auto"})]})}function Ha(){var n;const{characterSheet:t}=i.useContext(F),a=t.elementKey;return e(ge,{color:a,sx:{height:"auto"},label:p(L,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(It,{ele:a}),e(g,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e(De,{src:(n=Ae.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function Ga({level:t,ascension:a}){return e(L,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(Q,{children:fn(t,a)})})}function Va(){const{character:{key:t}}=i.useContext(F),a=T(),{favorite:n}=jt(t);return e(g,{sx:{position:"absolute",left:0,top:0},children:e(Lt,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(Ot,{}):e(Ft,{})})})}var Gt={},Hl=Ie;Object.defineProperty(Gt,"__esModule",{value:!0});var ze=Gt.default=void 0,Gl=Hl(je()),Vl=I,Kl=(0,Gl.default)((0,Vl.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");ze=Gt.default=Kl;var Vt={},Yl=Ie;Object.defineProperty(Vt,"__esModule",{value:!0});var Ka=Vt.default=void 0,Xl=Yl(je()),Jl=I,Zl=(0,Xl.default)((0,Jl.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");Ka=Vt.default=Zl;function Ya({characterKey:t}){const{gender:a}=me();if(!t)return null;const n=oe(t,a);return n?e(Ke,{placement:"right-end",title:e(L,{children:n.name}),children:e(gr,{characterKey:t,sideMargin:!0})}):null}function Ql({statKey:t,disableIcon:a=!1}){return p(g,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Bt,{statKey:t,iconProps:ce}),p("span",{children:[ft.get(t),ft.unit(t)]})]})}function Xa({statKey:t,disableIcon:a=!1}){return e(nt,{color:ft.getVariant(t),children:e(Ql,{statKey:t,disableIcon:a})})}function vt({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:o=!1,onClick:s,BGComponent:r=ue}){const l=bt(t),c=T(),f=i.useCallback(U=>e(Xe,{onClick:s,sx:{height:"100%"},children:U}),[s]),d=St();if(!l)return e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Ae.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:u,rarity:m,level:C,mainStatKey:h,substats:x,location:b}=l,y=Math.max(Math.min(n,m*4),C),k=gn.find(U=>l.mainStatKey.includes(U)),R=k?mt(d.palette[k].main,.6):mt(d.palette.secondary.main,.6);return e(r,{sx:{height:"100%"},children:e(Nt,{condition:!!s,wrapper:f,children:p(g,{display:"flex",height:"100%",children:[p(g,{className:`grad-${m}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(Gn,{art:l,children:e(g,{component:"img",src:Qn(l.setKey,u),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),p(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ge,{size:"small",label:e("strong",{children:` +${C}`}),color:kr.levelVariant(C)}),o&&e(ge,{size:"small",label:b?e(Ya,{characterKey:b&&c.chars.LocationToCharacterKey(b)}):e(_a,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(ge,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:R,p:1},icon:e(Ke,{placement:"top",title:e(L,{children:e(Xa,{statKey:h})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(Bt,{statKey:h,iconProps:{style:{padding:"4px"}}})})}),label:e(L,{sx:{mx:-.7},children:e(nt,{color:y!==C?"warning":void 0,children:Cn(h,m,y)})})})]}),e(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:x.map((U,E)=>e(ec,{stat:U},E+U.key))})]})})})}function ec({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${yn(a,1,6)}`,o=xn(t.key);return e(g,{display:"flex",gap:1,alignContent:"center",children:p(L,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(Ke,{placement:"top",title:e(L,{children:t.key&&e(Xa,{statKey:t.key})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(Bt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${bn(t.value,o)}${o}`})]})})}function tc(t){return Fe("MuiMasonry",t)}Pe("MuiMasonry",["root"]);const ac=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],ye=t=>Number(t.replace("px","")),nc={flexBasis:"100%",width:0,margin:0,padding:0},rc=t=>{const{classes:a}=t;return He({root:["root"]},tc,a)},oc=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const o={};if(t.isSSR){const d={},u=ye(a.spacing(t.defaultSpacing));for(let m=1;m<=t.defaultColumns;m+=1)d[`&:nth-of-type(${t.defaultColumns}n+${m%t.defaultColumns})`]={order:m};return o.height=t.defaultHeight,o.margin=-(u/2),o["& > *"]=N({},n["& > *"],d,{margin:u/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${u}px)`}),N({},n,o)}const s=Zt({values:t.spacing,breakpoints:a.breakpoints.values}),r=_n(a);n=st(n,it({theme:a},s,d=>{let u;if(typeof d=="string"&&!Number.isNaN(Number(d))||typeof d=="number"){const m=Number(d);u=lt(r,m)}else u=d;return N({margin:`calc(0px - (${u} / 2))`,"& > *":{margin:`calc(${u} / 2)`}},t.maxColumnHeight&&{height:typeof u=="number"?Math.ceil(t.maxColumnHeight+ye(u)):`calc(${t.maxColumnHeight}px + ${u})`})}));const c=Zt({values:t.columns,breakpoints:a.breakpoints.values});return n=st(n,it({theme:a},c,d=>{const m=`${(100/Number(d)).toFixed(2)}%`,C=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?lt(r,Number(s)):"0px";return{"& > *":{width:`calc(${m} - ${C})`}}})),typeof s=="object"&&(n=st(n,it({theme:a},s,(d,u)=>{if(u){const m=Number(d),C=Object.keys(c).pop(),h=lt(r,m);return{"& > *":{width:`calc(${`${(100/(typeof c=="object"?c[u]||c[C]:c)).toFixed(2)}%`} - ${h})`}}}return null}))),n},sc=pe("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(oc),ic=i.forwardRef(function(a,n){const o=et({props:a,name:"MuiMasonry"}),{children:s,className:r,component:l="div",columns:c=4,spacing:f=1,defaultColumns:d,defaultHeight:u,defaultSpacing:m}=o,C=qe(o,ac),h=i.useRef(),[x,b]=i.useState(),y=!x&&u&&d!==void 0&&m!==void 0,[k,R]=i.useState(y?d-1:0),U=N({},o,{spacing:f,columns:c,maxColumnHeight:x,defaultColumns:d,defaultHeight:u,defaultSpacing:m,isSSR:y}),E=rc(U),M=w=>{if(!h.current||!w||w.length===0)return;const v=h.current,B=h.current.firstChild,_=v.clientWidth,q=B.clientWidth;if(_===0||q===0)return;const te=window.getComputedStyle(B),J=ye(te.marginLeft),V=ye(te.marginRight),Z=Math.round(_/(q+J+V)),H=new Array(Z).fill(0);let G=!1;v.childNodes.forEach(z=>{if(z.nodeType!==Node.ELEMENT_NODE||z.dataset.class==="line-break"||G)return;const ae=window.getComputedStyle(z),_e=ye(ae.marginTop),$e=ye(ae.marginBottom),Re=ye(ae.height)?Math.ceil(ye(ae.height))+_e+$e:0;if(Re===0){G=!0;return}for(let ne=0;ne<z.childNodes.length;ne+=1){const ie=z.childNodes[ne];if(ie.tagName==="IMG"&&ie.clientHeight===0){G=!0;break}}if(!G){const ne=H.indexOf(Math.min(...H));H[ne]+=Re;const ie=ne+1;z.style.order=ie}}),G||Rn.flushSync(()=>{b(Math.max(...H)),R(Z>0?Z-1:0)})};vn(()=>{if(typeof ResizeObserver>"u")return;let w;const v=new ResizeObserver(()=>{w=requestAnimationFrame(M)});return h.current&&h.current.childNodes.forEach(B=>{v.observe(B)}),()=>{w&&window.cancelAnimationFrame(w),v&&v.disconnect()}},[c,f,s]);const j=wn(n,h),W=new Array(k).fill("").map((w,v)=>I.jsx("span",{"data-class":"line-break",style:N({},nc,{order:v+1})},v));return I.jsxs(sc,N({as:l,className:ke(E.root,r),ref:j,ownerState:U},C,{children:[s,W]}))}),lc=ic,cc=i.createContext(void 0),Te={title:e(nt,{color:"warning",children:"ERROR"})},dc={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(pa(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function uc(t,a,n){if(!a)return Te;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[o,s]=a.split(":");if(o==="artifact"){const r=Oa(s);return r?{title:r.name,icon:Sr(s)}:Te}else if(o==="weapon"){const r=Et(s);if(!r)return Te;const l=t.get(de.weapon.asc).value;return{title:r.name,icon:Ra(s,l>=2)}}}else{const o=t.get(de.charKey).value;if(!o)return Te;const s=oe(o,n.gender),r=["normal","charged","plunging"].includes(a)?"auto":a,l=s==null?void 0:s.getTalentOfKey(r);if(!l)return Te;const c=dc[a];return{icon:l.img,title:l.name,action:c}}return Te}function hc(t){const a=t.getDisplay(),n=Object.entries(a),o=n.filter(([d])=>d==="basic"),s=n.filter(([d])=>d==="reaction"),r=n.filter(([d])=>d==="custom"),l=n.filter(([d])=>d.startsWith("weapon")),c=n.filter(([d])=>d.startsWith("artifact")),f=n.filter(([d])=>d!=="basic"&&d!=="reaction"&&!d.startsWith("weapon")&&!d.startsWith("artifact")&&d!=="custom");return[...o,...s,...r,...f,...l,...c]}function pc({columns:t={xs:1,sm:2,md:3,xl:4}}){const{data:a}=i.useContext(X),n=i.useMemo(()=>hc(a).filter(([,o])=>Object.values(o).some(s=>!s.isEmpty)),[a]);return e(g,{sx:{mr:-1,mb:-1},children:e(lc,{columns:t,spacing:1,children:n.map(([o,s])=>e(mc,{displayNs:s,sectionKey:o},o))})})}function mc({displayNs:t,sectionKey:a}){const n=i.useContext(cc),{data:o,oldData:s}=i.useContext(X),r=T(),l=i.useMemo(()=>uc(o,a,r),[r,o,a]),c=i.useMemo(()=>at(t,(m,C)=>er(["display",a,C])),[t,a]);if(!l)return e(ue,{});const{title:f,icon:d,action:u}=l;return p(ue,{children:[e(dr,{avatar:d&&e(De,{size:2,src:d}),title:f,action:u&&e(Q,{children:u})}),e(xe,{}),e(hr,{sx:{m:0},children:Object.entries(t).map(([m,C])=>e(Sa,{node:C,oldValue:s?s.get(c[m]).value:void 0,component:ur,emphasize:JSON.stringify(n)===JSON.stringify([a,m])},m))})]})}function wt({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:o=ue,weaponTypeKey:s="sword"}){const r=Ur(t),l=(r==null?void 0:r.key)&&Et(r.key);return!r||!l?e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Ae.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e(fc,{weapon:r,weaponSheet:l,onClick:n,showLocation:a,BGComponent:o})}function fc({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:o,BGComponent:s=ue}){const r=T(),{refinement:l,location:c}=t,f=i.useCallback(u=>e(Xe,{sx:{height:"100%"},onClick:o,children:u}),[o]),d=i.useMemo(()=>a&&t&&tr([a.data,La(t)]),[a,t]);return e(s,{sx:{height:"100%"},children:e(Nt,{condition:!!o,wrapper:f,children:p(g,{display:"flex",height:"100%",alignItems:"stretch",children:[p(g,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(Vn,{sheet:a,children:e(g,{component:"img",src:Ra(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),p(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ge,{size:"small",label:e("strong",{children:Na.getLevelString(t)}),color:"primary"}),n&&e(ge,{size:"small",label:c?e(Ya,{characterKey:r.chars.LocationToCharacterKey(c)}):e(_a,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(ge,{size:"small",color:"info",label:p("strong",{children:["R",l]})})})]}),p(g,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(ca,{node:d.get(de.weapon.main)}),e(ca,{node:d.get(de.weapon.sub)})]})]})})})}function ca({node:t}){return t.info.name?e(g,{display:"flex",gap:1,alignContent:"center",children:p(L,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(Ke,{placement:"top",title:e(L,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:ar(t)})]})}):null}function gc({equipChangeProps:t,showPrompt:a,OnHidePrompt:n,onEquip:o}){const[s,r]=i.useState(""),[l,c]=i.useState(!1),f=T(),{teamCharId:d,teamChar:{key:u}}=i.useContext(se),m=ma(u).weaponType,C=()=>{l&&f.teamChars.newBuild(d,{name:s!==""?s:`Duplicate of ${t.currentName}`,artifactIds:t.currentArtifacts,weaponId:t.currentWeapon}),o(),r(""),c(!1),n()};return e($t,{open:a,onClose:n,children:p(ee,{children:[e(Tr,{title:p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Pa,{}),p("span",{children:["Confirm Equipment Changes for"," ",e("strong",{children:t.currentName})]})]}),action:e(Ye,{onClick:n})}),e(xe,{}),e(P,{sx:{display:"flex",flexDirection:"column"},children:p(g,{children:[p(ee,{bgt:"light",children:[e(g,{sx:{pl:2,pt:2},children:e(Ce,{color:"success",children:"Current Equipment"})}),e(P,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:p(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(S,{item:!0,xs:1,children:e(wt,{weaponId:t.currentWeapon,weaponTypeKey:m})}),Object.entries(t.currentArtifacts).map(([h,x])=>e(S,{item:!0,xs:1,children:e(vt,{artifactId:x,slotKey:h})},x||h))]})})]}),e(g,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",padding:2,children:e(Ir,{sx:{fontSize:40}})}),p(ee,{bgt:"light",children:[e(g,{sx:{pl:2,pt:2},children:e(Ce,{color:"success",children:"New Equipment"})}),e(P,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:p(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(S,{item:!0,xs:1,children:e(wt,{weaponId:t.newWeapon,weaponTypeKey:m})}),Object.entries(t.newArtifacts).map(([h,x])=>e(S,{item:!0,xs:1,children:e(vt,{artifactId:x,slotKey:h})},x||h))]})})]})]})}),p(P,{sx:{pt:"0",display:"flex",flexDirection:"column"},children:[e(L,{sx:{fontSize:20},children:"Do you want to make the changes shown above?"}),e(vo,{label:p(we,{children:["Copy the current equipment in"," ",e("strong",{children:t.currentName})," to a new build. Otherwise, they will be overwritten."]}),control:e(po,{checked:l,onChange:h=>c(h.target.checked),color:l?"success":"secondary"})}),l&&e(At,{label:"Build Name",placeholder:`Duplicate of ${t.currentName}`,value:s,onChange:h=>r(h.target.value),size:"small",sx:{width:"75%",marginX:4}}),p(g,{sx:{display:"flex",justifyContent:"flex-end",gap:1,marginTop:4},children:[e(A,{color:"error",onClick:n,children:"Cancel"}),e(A,{color:"success",onClick:C,children:"Equip"})]})]})]})})}function Cc({artifacts:t}){const a=i.useMemo(()=>{const n=t.filter(o=>o).reduce((o,s)=>(o[s.setKey]?o[s.setKey].push(s.slotKey):o[s.setKey]=[s.slotKey],o),{});return Object.keys(n).forEach(o=>{var s;((s=n[o])==null?void 0:s.length)===1&&delete n[o]}),n},[t]);return e(we,{children:Object.entries(a).sort(([n,o],[s,r])=>r.length-o.length).map(([n,o])=>e(xc,{setKey:n,slotarr:o},n))})}function xc({setKey:t,slotarr:a}){const n=Oa(t),o=a.length,s=Object.keys(n.setEffects).map(r=>parseInt(r)).filter(r=>r<=o);return e(g,{children:e(xr,{artifactSheet:n,numInSet:o,children:e(Q,{sx:{height:"100%"},color:"primary",children:p(L,{children:[a.map(r=>e(Dr,{slotKey:r,iconProps:ce},r))," ",n.name??"",s.map((r,l)=>e(Q,{sx:{ml:.5},color:"success",children:r},""+r+l))]})})})})}var Kt={},bc=Ie;Object.defineProperty(Kt,"__esModule",{value:!0});var _t=Kt.default=void 0,yc=bc(je()),vc=I,wc=(0,yc.default)((0,vc.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");_t=Kt.default=wc;var Yt={},_c=Ie;Object.defineProperty(Yt,"__esModule",{value:!0});var Rt=Yt.default=void 0,Rc=_c(je()),Lc=I,kc=(0,Rc.default)((0,Lc.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");Rt=Yt.default=kc;function Sc({setKey:t,buttonGroupSx:a}){const{t:n}=Y("sheet"),{teamChar:{optConfigId:o}}=i.useContext(se),{artSetExclusion:s}=Je(o),r=(s==null?void 0:s[t])??[],l=r.includes(2),c=r.includes(4),f=T();return p(cr,{sx:a,fullWidth:!0,children:[e(A,{startIcon:l?e(Qt,{}):e(ea,{}),onClick:()=>f.optConfigs.set(o,{artSetExclusion:ta(s,t,2)}),color:l?"secondary":"success",endIcon:l?e(_t,{}):e(Rt,{}),children:n`2set`}),e(A,{startIcon:c?e(Qt,{}):e(ea,{}),onClick:()=>f.optConfigs.set(o,{artSetExclusion:ta(s,t,4)}),color:c?"secondary":"success",endIcon:c?e(_t,{}):e(Rt,{}),children:n`4set`})]})}function $c({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:o}){var Ue;const{loadoutDatum:{buildType:s,buildId:r},teamChar:{optConfigId:l,buildIds:c=[]}}=i.useContext(se),{character:{key:f,equippedArtifacts:d,equippedWeapon:u}}=i.useContext(F),{mainStatAssumptionLevel:m,allowLocationsState:C}=Je(l)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},h=T(),{data:x,oldData:b}=i.useContext(X),[y,k]=Be();i.useEffect(()=>{const $=c.map(O=>h.builds.follow(O,k));return()=>$.forEach(O=>O())},[h,c,k]);const R=i.useMemo(()=>{var $;return{oldId:($=b==null?void 0:b.get(D.weapon.id))==null?void 0:$.value,newId:x.get(D.weapon.id).value??""}},[x,b]),[U,E,M]=he(!1),j=i.useMemo(()=>Ne(le,$=>{var O;return{oldId:(O=b==null?void 0:b.get(D.art[$].id))==null?void 0:O.value,newId:x.get(D.art[$].id).value??""}}),[x,b]),[W,w]=i.useState(),v=i.useCallback(()=>w(void 0),[w]),B=r&&s==="real",_=i.useCallback(()=>{if(B){h.builds.set(r,{weaponId:x.get(D.weapon.id).value,artifactIds:Ne(le,fe=>{var Le;return(Le=x.get(D.art[fe].id).value)==null?void 0:Le.toString()})});return}const $=h.chars.get(f);if(!$)return;le.forEach(fe=>{var Oe;const Le=(Oe=x.get(D.art[fe].id).value)==null?void 0:Oe.toString();if(Le)h.arts.set(Le,{location:ve(f)});else{const ot=$.equippedArtifacts[fe];ot&&h.arts.get(ot)&&h.arts.set(ot,{location:""})}});const O=x.get(D.weapon.id).value;O&&h.weapons.set(O,{location:ve(f)})},[f,B,r,x,h]),q=i.useMemo(()=>Object.fromEntries(le.map($=>{var O;return[$,(O=x.get(D.art[$].id).value)==null?void 0:O.toString()]})),[x]),te=i.useMemo(()=>q&&Object.values(q).map($=>h.arts.get($)).filter($=>$),[q,h.arts]),J=i.useMemo(()=>e(S,{item:!0,xs:1,children:e(wt,{showLocation:!0,weaponId:x.get(D.weapon.id).value,onClick:E})}),[x,E]),V=i.useMemo(()=>le.map($=>e(S,{item:!0,xs:1,children:e(vt,{showLocation:!0,slotKey:$,artifactId:q[$],mainStatAssumptionLevel:m,onClick:()=>{const O=j[$].oldId,fe=j[$].newId;w({oldId:O!==fe?O:void 0,newId:fe})}})},$)),[w,j,m,q]),Z=le.every($=>q[$]===d[$])&&x.get(D.weapon.id).value===u,H=i.useMemo(()=>y&&c.filter($=>{const O=h.builds.get($);if(!O)return!1;const{artifactIds:fe,weaponId:Le}=O;return le.every(Oe=>q[Oe]===fe[Oe])&&x.get(D.weapon.id).value===Le}),[y,h,c,q,x]),G=s==="real"&&H.includes(r),z=G||s==="equipped"&&Z,ae=i.useMemo(()=>y&&s==="real"?h.builds.get(r).weaponId:y&&s==="equipped"?u:"",[y,h,s,r,u]),_e=i.useMemo(()=>y&&s==="real"?h.builds.get(r).artifactIds:y&&s==="equipped"?d:Ne(le,()=>""),[y,h,s,r,d]),[$e,Re,ne]=he(),ie={currentName:s==="real"?h.builds.get(r).name:"Equipped",currentWeapon:ae,currentArtifacts:_e,newWeapon:x.get(D.weapon.id).value,newArtifacts:Ne(le,$=>x.get(D.art[$].id).value)};return e(kt,{sx:{boxShadow:z?"0px 0px 0px 2px green inset":void 0},children:p(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:600}),children:[R&&e(Uc,{newOld:R,showWeapon:U,onClose:M}),W&&e(Tc,{newOld:W,mainStatAssumptionLevel:m,onClose:v,allowLocationsState:C}),p(P,{sx:{display:"flex",flexDirection:"column",gap:1},children:[p(g,{display:"flex",gap:1,flexWrap:"wrap",children:[t!==void 0&&e(Ce,{color:Z?"success":"info",children:p(L,{sx:{display:"flex",gap:1},children:[e("strong",{children:t}),Z&&e("span",{children:"(Equipped)"})]})}),!!H.length&&e(Ce,{color:G?"success":"info",children:p(L,{sx:{display:"flex",gap:1},children:[e(aa,{}),e("span",{children:(Ue=h.builds.get(G?r:H[0]))==null?void 0:Ue.name}),G&&e("span",{children:"(current build)"}),H.length>1&&e(Ge,{arrow:!0,title:e(g,{children:H.map($=>{var O;return p(L,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(aa,{}),(O=h.builds.get($))==null?void 0:O.name]})})}),children:e(ka,{})})]})}),e(Cc,{artifacts:te}),e(g,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(gc,{equipChangeProps:ie,showPrompt:$e,onEquip:_,OnHidePrompt:ne}),e(A,{size:"small",color:"success",onClick:Re,disabled:o||G,startIcon:e(Pa,{}),children:"Equip to Current Build"}),a]}),e(g,{children:p(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[J,V]})}),e(pc,{})]})]})})}function Uc({newOld:{newId:t,oldId:a},showWeapon:n,onClose:o}){const s=T(),r=a!==t,l=i.useCallback(c=>s.weapons.remove(c),[s]);return e(Ve,{open:n,onClose:o,containerProps:{maxWidth:r?"md":"xs"},children:e(ue,{children:p(P,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[r&&p(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ee,{bgt:"light",sx:{p:1},children:e(L,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(L,{variant:"h6",textAlign:"center",color:"info",children:e(Ce,{children:"TC Weapon"})}):e(Qe,{weaponId:a,onDelete:l})]}),r&&e(g,{display:"flex",flexGrow:1}),r&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Wa,{sx:{fontSize:40}})}),r&&e(g,{display:"flex",flexGrow:1}),p(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ee,{bgt:"light",sx:{p:1},children:e(L,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(Qe,{weaponId:t,onDelete:l})]})]})})})}function Tc({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:o,allowLocationsState:s}){var m;const r=T(),{character:{key:l}}=i.useContext(F),c=((m=r.arts.get(t))==null?void 0:m.location)??"",f=bt(t),d=bt(a),u=i.useCallback(C=>r.arts.remove(C),[r]);return e(Ve,{open:!!t,onClose:o,containerProps:{maxWidth:a?"md":"xs"},children:e(ue,{children:p(P,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&p(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ee,{bgt:"light",sx:{p:1},children:e(L,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(L,{variant:"h6",textAlign:"center",color:"info",children:e(Ce,{children:"TC Artifact"})}):e(Ze,{artifactId:a,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:d==null?void 0:d.slotKey}}),a!=="tc"&&e(da,{id:a})]}),a&&e(g,{display:"flex",flexGrow:1}),a&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(Wa,{sx:{fontSize:40}})}),a&&e(g,{display:"flex",flexGrow:1}),p(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(ee,{bgt:"light",sx:{p:1},children:e(L,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(Ze,{artifactId:t,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:f==null?void 0:f.slotKey}}),f&&e(da,{id:t}),c&&c!==ve(l)&&s!=="all"&&e(Mc,{locationKey:c}),f&&Ln.includes(f.setKey)&&e(Sc,{setKey:f.setKey})]})]})})})}function da({id:t}){const{t:a}=Y("page_character_optimize"),{teamChar:{optConfigId:n}}=i.useContext(se),o=T(),{artExclusion:s}=Je(n),r=s.includes(t),l=i.useCallback(()=>o.optConfigs.set(n,{artExclusion:fa(s,t)}),[t,s,o,n]);return n?e(Ke,{title:e(g,{children:e(L,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(A,{onClick:l,color:r?"secondary":"success",size:"small",startIcon:r?e(Aa,{}):e(za,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Mc({locationKey:t}){const{t:a}=Y("page_character_optimize"),{teamChar:{optConfigId:n}}=i.useContext(se),o=T(),s=oe(o.chars.LocationToCharacterKey(t)),{excludedLocations:r}=Je(n)??{excludedLocations:[]},l=r.includes(t),c=i.useCallback(()=>o.optConfigs.set(n,{excludedLocations:fa(r,t)}),[t,r,o,n]);return n?e(A,{onClick:c,color:l?"secondary":"success",size:"small",startIcon:l?e(Aa,{}):e(za,{}),children:p("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}function jc(t=0,a,n){const{teamId:o,teamCharId:s}=i.useContext(se);return Ic(o,s,t,a,n)}function Ic(t,a,n=0,o,s){const r=T(),[l,c]=Be(),f=i.useDeferredValue(l),{gender:d}=me(),{loadoutData:u}=Kn(t)??{loadoutData:[]},m=i.useMemo(()=>f&&Bc(r,t,d,a,n,o,s),[f,d,t,r,n,a,o,s]);return i.useEffect(()=>t?r.teams.follow(t,c):void 0,[t,c,r]),i.useEffect(()=>{if(!l)return()=>{};const C=u.map(h=>{if(!h)return()=>{};const x=r.teamChars.follow(h.teamCharId,c),b=r.teamChars.followChar(h.teamCharId,c),y=r.teams.followLoadoutDatum(h,c);return()=>{x(),b(),y()}});return()=>{C.forEach(h=>h())}},[l,r,u,c]),m}function Bc(t,a,n,o,s=0,r,l){if(!a)return;const c=t.teams.getActiveTeamChar(a);if(!c)return;const{teamData:f,teamBundle:d}=Dc(t,a,o,s,r,l)??{};if(!f||!d)return;const u=nr(f,n,c.key);return kn(u,(C,h)=>{const{data:x,...b}=d[h];return{...C,...b}})}function Dc(t,a,n,o=0,s,r){if(!a)return;const l=t.teams.get(a);if(!l)return;const{loadoutData:c,enemyOverride:f,conditional:d}=l,u=c.map(h=>{if(!h)return;const{teamCharId:x,buildType:b,buildTcId:y}=h,k=t.teamChars.get(x);if(!k)return;const{key:R,infusionAura:U,customMultiTargets:E,conditional:M,bonusStats:j,hitMode:W,reaction:w}=k,v=t.chars.get(R);if(!v)return;const{key:B,level:_,constellation:q,ascension:te,talent:J}=v,V=x===n,Z=(()=>r&&V?r:t.teams.getLoadoutWeapon(h))(),H=(()=>s&&V?s:b==="tc"&&y?Yn(t.buildTcs.get(y)):Object.values(t.teams.getLoadoutArtifacts(h)).filter(z=>z))(),G=(()=>o&&V?o:0)();return Ac(t,V,G,{key:B,level:_,constellation:q,ascension:te,talent:J,infusionAura:U,customMultiTargets:E,conditional:{...M,...d},bonusStats:j,enemyOverride:f,hitMode:W,reaction:w},Z,H)}).filter(h=>h),m=Object.fromEntries(u.filter(h=>h).map(h=>[h.character.key,h]));return{teamData:at(m,({data:h})=>h),teamBundle:m}}function Ac(t,a=!1,n,o,s,r){const l=t.chars.get(o.key),c=oe(o.key,t.gender);if(!c)return;const f=Et(s.key);if(!f)return;const d=Na.getAllDataOfType(c.weaponTypeKey),u=a?(()=>{const{display:x,...b}=f.data;return ra([b,d])})():f.data,m=ra([c.data,u,$r]),h=[...Array.isArray(r)?r.map(x=>rr(x,n)):[r],or(o,a?m:void 0),La(s),m,sr,Xn];return{character:l,weapon:s,characterSheet:c,weaponSheet:f,data:h}}const pt={mx:.25,px:.25};function zc({reaction:t}){const{t:a}=Y("sheet_gen"),n=t==="spread"?"dendro":"electro";return p(g,{display:"flex",alignItems:"center",children:[e(nt,{color:t,children:a(`reaction.${t}`)}),e(Q,{sx:pt,color:"dendro",children:e(Sn,{...ce})}),"+",e(Q,{sx:pt,color:"electro",children:e(ga,{...ce})}),"+",e(Q,{sx:pt,color:n,children:e(It,{ele:n,iconProps:ce})})]})}const ua={"":e("span",{children:"No Team Melee Infusion"}),pyro:p("span",{children:[e($n,{...ce})," ",e(Q,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:p("span",{children:[e(Un,{...ce})," ",e(Q,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:p("span",{children:[e(Tn,{...ce})," ",e(Q,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:p("span",{children:[e(ga,{...ce})," ",e(Q,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Hd(t){const{teamCharId:a,teamChar:{infusionAura:n}}=i.useContext(se),{character:{key:o}}=i.useContext(F),s=T();return Mn(o)?e(Br,{title:ua[n||""],color:n||"secondary",disableElevation:!0,disabled:!a,...t,children:Object.entries(ua).map(([r,l])=>e(Ea,{sx:r?{color:`${r}.main`}:void 0,selected:r===n,disabled:r===n,onClick:()=>s.teamChars.set(a,{infusionAura:r}),children:l},r))}):null}function Oc(t){const{t:a}=Y("page_character"),{teamCharId:n,teamChar:{reaction:o}}=i.useContext(se),s=T(),{data:r}=i.useContext(X),l=r.get(D.charEle).value,c=r.get(ir).value,f=[...new Set([...oa[l]??[],...oa[c]??[],...sa[l]??[],...sa[c]??[]])];return p(rt,{exclusive:!0,baseColor:"secondary",value:o,onChange:(d,u)=>s.teamChars.set(n,{reaction:u}),disabled:!n,...t,children:[e(Me,{value:"",disabled:!o,children:a`noReaction`}),f.map(d=>e(Me,{value:d,disabled:o===d,children:[...jn].includes(d)?e(pr,{reaction:d}):e(zc,{reaction:d})},d))]})}function Nc(t){const{t:a}=Y("page_character"),{teamCharId:n,teamChar:{hitMode:o="avgHit"}}=i.useContext(se),s=T();return e(rt,{exclusive:!0,baseColor:"secondary",value:o,onChange:(r,l)=>s.teamChars.set(n,{hitMode:l}),disabled:!n,...t,children:In.map(r=>e(Me,{value:r,disabled:o===r,children:a(`hitmode.${r}`)},r))})}function Ja({artId:t,weaponId:a}){const{t:n}=Y("page_character"),[o,s,r]=he(!1);return p(we,{children:[e($t,{open:o,onClose:r,containerProps:{maxWidth:"xl"},children:e(Ec,{artId:t,weaponId:a,onHide:r})}),e(Ge,{title:e(L,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(br,{})})})]})}function Ec(t){var o;const a=i.useContext(se),n=i.useContext(F);return(o=a==null?void 0:a.teamChar)!=null&&o.optConfigId?e(Wc,{...t}):n!=null&&n.character?e(Pc,{...t}):null}function Wc({artId:t,weaponId:a,onHide:n}){const o=T(),{character:{key:s}}=i.useContext(F),{loadoutDatum:r,teamChar:{optConfigId:l}}=i.useContext(se),{mainStatAssumptionLevel:c}=Je(l),{data:f}=i.useContext(X),d=i.useMemo(()=>{const C=o.arts.get(t??""),h=o.teams.getLoadoutArtifacts(r),x=at(h,(b,y)=>y===(C==null?void 0:C.slotKey)?C:b);return Object.values(x).filter(b=>b)},[o,r,t]),u=jc(c,d,a?o.weapons.get(a):void 0),m=i.useMemo(()=>u&&{data:u[s].target,teamData:u,oldData:f},[s,u,f]);return m?e(Za,{dataProviderValue:m,onHide:n}):null}function Pc({artId:t,weaponId:a,onHide:n}){const o=T(),{character:{key:s,equippedArtifacts:r}}=i.useContext(F),{data:l}=i.useContext(X),c=i.useMemo(()=>{const u=o.arts.get(t??""),m=at(r,(C,h)=>h===(u==null?void 0:u.slotKey)?u:o.arts.get(C));return Object.values(m).filter(C=>C)},[o,r,t]),f=Tt(s,0,c,a?o.weapons.get(a):void 0),d=i.useMemo(()=>f&&{data:f[s].target,teamData:f,oldData:l},[s,f,l]);if(d)return e(Za,{dataProviderValue:d,onHide:n})}function Za({dataProviderValue:t,onHide:a}){return e(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:600}),children:t&&e(X.Provider,{value:t,children:e($c,{extraButtonsLeft:p(we,{children:[e(Nc,{size:"small"}),e(Oc,{size:"small"})]}),extraButtonsRight:e(A,{size:"small",color:"error",onClick:a,children:e(Ka,{})})})})})}const Fc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},qc=i.lazy(()=>Ca(()=>import("./ArtifactEditor-0525cf39.js"),["./ArtifactEditor-0525cf39.js","./index-9c68f8ff.js","./index-74c8357a.css","./ArtifactRarityDropdown-e881fb3f.js","./index-f53de289.js","./index-a095a856.js","./ColoredText-32888d78.js","./SqBadge-37836f6a.js","./ConditionalWrapper-41621922.js","./StarDisplay-2b7821d5.js","./DropdownButton-e03c32a1.js","./ArtifactStatKeyDisplay-e61cce8f.js","./Artifact-1563ceba.js","./InfoTooltip-2ef780ca.js","./BootstrapTooltip-3f439c90.js","./LockOpen-26e8775d.js","./SlotIcon-a0329edd.js","./CloseButton-552ed0ff.js","./ArtifactSort-4efc662a.js","./CardActionArea-45dd1cfe.js","./TextButton-a4d4549b.js","./CardHeader-68c542f8.js","./ChevronRight-942d52b0.js"],import.meta.url)),Hc=i.lazy(()=>Ca(()=>import("./ArtifactFilterDisplay-4d0ff8ec.js").then(t=>t.b),["./ArtifactFilterDisplay-4d0ff8ec.js","./index-9c68f8ff.js","./index-74c8357a.css","./LockOpen-26e8775d.js","./useDisplayArtifact-fb4b1320.js","./SolidToggleButtonGroup-7b890876.js","./totalUtils-9df07a07.js","./BootstrapTooltip-3f439c90.js","./StarDisplay-2b7821d5.js","./DropdownButton-e03c32a1.js","./ColoredText-32888d78.js","./index-a095a856.js","./SqBadge-37836f6a.js","./ArtifactStatKeyDisplay-e61cce8f.js","./Artifact-1563ceba.js","./ConditionalWrapper-41621922.js","./index-f53de289.js","./SlotIcon-a0329edd.js"],import.meta.url));function Qa({onChangeId:t,slotKey:a,show:n,onClose:o}){const{t:s}=Y(["page_character","artifact"]),r=T(),l=i.useCallback(w=>{t(w),o()},[t,o]),c=i.useCallback((w,v)=>({...w,...v,slotKeys:[a]}),[a]),[f,d,u]=he(!1),[m,C]=i.useReducer(c,{...yr(),slotKeys:[a]}),[h,x]=Be();i.useEffect(()=>r.arts.followAny(x),[r,x]);const b=Ta(),y=i.useMemo(()=>vr(),[]),k=r.arts.values.filter(w=>w.slotKey===m.slotKeys[0]).length,R=i.useMemo(()=>{const w=zt(m,y);return h&&r.arts.values.filter(w).map(v=>v.id)},[h,r,y,m]),{numShow:U,setTriggerElement:E}=Ma(Fc[b],R.length),M=i.useMemo(()=>R.slice(0,U),[R,U]),j=R.length!==k?`${R.length}/${k}`:`${k}`,W={numShowing:M.length,total:j,t:s,namespace:"artifact"};return e(Ve,{open:n,onClose:o,containerProps:{maxWidth:"xl"},children:p(ue,{children:[e(i.Suspense,{fallback:!1,children:e(qc,{artifactIdToEdit:f?"new":"",cancelEdit:u,allowUpload:!0,allowEmpty:!0,fixedSlotKey:m.slotKeys[0]})}),p(P,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p(L,{variant:"h6",children:[a?e(De,{src:Ae.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(Ye,{onClick:o})]}),e(xe,{}),e(P,{children:e(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:200}),children:e(Hc,{filterOption:m,filterOptionDispatch:C,filteredIds:R,disableSlotFilter:!0})})}),e(xe,{}),p(P,{children:[e(g,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(ja,{showingTextProps:W})}),e(A,{fullWidth:!0,onClick:d,color:"info",startIcon:e(Da,{}),children:s("artifact:addNew")}),e(g,{mt:1,children:e(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:300}),children:e(S,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:M.map(w=>e(S,{item:!0,xs:1,children:e(Ze,{artifactId:w,extraButtons:e(Ja,{artId:w}),onClick:l})},w))})})}),R.length!==M.length&&e(re,{ref:w=>{w&&E(w)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const Gc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Vc=Wt([...xa]);function Xt({onChangeId:t,weaponTypeKey:a,show:n,onClose:o}){const{t:s}=Y(["page_character","page_weapon","weaponNames_gen"]),r=T(),[l,c]=i.useState(!1),f=i.useCallback(_=>{t(_),o()},[t,o]),[d,u]=i.useState(""),m=i.useCallback(_=>{u(r.weapons.new(Bn(_)))},[r,u]),C=i.useCallback(()=>u(""),[]),[h,x]=Be();i.useEffect(()=>r.weapons.followAny(x),[x,r]);const b=Ta(),[y,k]=i.useState([5,4,3]),[R,U]=i.useState(""),E=i.useDeferredValue(R),M=i.useMemo(()=>(h&&r.weapons.values.filter(zt({weaponType:a,rarity:y,name:E},wr())).sort(Ia(Rr.level??[],!1,_r())).map(_=>_.id))??[],[h,r,y,a,E]),{numShow:j,setTriggerElement:W}=Ma(Gc[b],M.length),w=i.useMemo(()=>M.slice(0,j),[M,j]),v=`${M.length}`,B={numShowing:w.length,total:v,t:s,namespace:"page_weapon"};return e(Ve,{open:n,onClose:o,children:p(ue,{children:[e(i.Suspense,{fallback:!1,children:e(zr,{show:l,onHide:()=>c(!1),onSelect:m,weaponTypeFilter:a})}),e(i.Suspense,{fallback:!1,children:e($a,{weaponId:d,footer:!0,onClose:C})}),e(P,{sx:{py:1},children:p(S,{container:!0,children:[e(S,{item:!0,flexGrow:1,children:p(L,{variant:"h6",children:[a?e(De,{src:Ae.weaponTypes[a]}):null," ",s`page_character:tabEquip.swapWeapon`]})}),e(S,{item:!0,children:e(Ye,{onClick:o})})]})}),e(xe,{}),p(P,{sx:{display:"flex",flexDirection:"column",gap:1},children:[p(S,{container:!0,spacing:1,children:[e(S,{item:!0,children:e(rt,{sx:{height:"100%"},value:y,size:"small",children:xa.map(_=>e(Me,{value:_,onClick:()=>k(Vc(y,_)),children:p(g,{display:"flex",children:[e("strong",{children:_}),e(Ba,{})]})},_))})}),e(S,{item:!0,flexGrow:1,children:e(At,{autoFocus:!0,size:"small",value:R,onChange:_=>U(_.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(g,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(ja,{showingTextProps:B})}),e(A,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:e(Da,{}),children:s("page_weapon:addWeapon")}),e(S,{container:!0,spacing:1,children:w.map(_=>e(S,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(Qe,{weaponId:_,onClick:f,extraButtons:e(Ja,{weaponId:_})})},_))}),M.length!==w.length&&e(re,{ref:_=>{_&&W(_)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})}const Kc={xs:1,sm:2,md:3,lg:3,xl:3};function Yc({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:o,setArtifact:s}){const r=T(),[l,c]=i.useState("");i.useEffect(()=>{a&&l&&l!==a&&c(a)},[l,a]);const f=i.useCallback(()=>a&&c(a),[a]),d=i.useCallback(()=>c(""),[]);return p(g,{children:[e($a,{weaponId:l,footer:!0,onClose:d,extraButtons:e(ed,{weaponTypeKey:t,onChangeId:o})}),p(S,{item:!0,columns:Kc,container:!0,spacing:1,children:[e(S,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&r.weapons.keys.includes(a)?e(Qe,{weaponId:a,onEdit:f,extraButtons:e(Qc,{weaponTypeKey:t,onChangeId:o})}):e(Xc,{weaponTypeKey:t,onChangeId:o})}),!!n&&Object.entries(n).map(([u,m])=>e(S,{item:!0,xs:1,children:r.arts.keys.includes(m)?e(Ze,{artifactId:m,extraButtons:e(Zc,{slotKey:u,onChangeId:C=>s(u,C)}),editorProps:{}}):e(Jc,{slotKey:u,onChangeId:C=>s(u,C)})},m||u))]})]})}function Xc({weaponTypeKey:t,onChangeId:a}){const[n,o,s]=he();return p(ee,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(P,{children:p(L,{children:[e(De,{src:Ae.weaponTypes[t]})," ",t]})}),e(xe,{}),p(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(Xt,{weaponTypeKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:e(ze,{sx:{height:100,width:100}})})]})]})}function Jc({slotKey:t,onChangeId:a}){const[n,o,s]=he(),{t:r}=Y("artifact");return p(ee,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(P,{children:p(L,{children:[e(wo,{iconProps:ce,slotKey:t})," ",r(`slotName.${t}`)]})}),e(xe,{}),p(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(Qa,{slotKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:e(ze,{sx:{height:100,width:100}})})]})]})}function Zc({slotKey:t,onChangeId:a}){const{t:n}=Y("page_character"),[o,s,r]=he();return p(we,{children:[e(Ge,{title:e(L,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(ze,{})})}),e(Qa,{slotKey:t,show:o,onClose:r,onChangeId:a})]})}function Qc({weaponTypeKey:t,onChangeId:a}){const{t:n}=Y("page_character"),[o,s,r]=he();return p(we,{children:[e(Ge,{title:e(L,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(ze,{})})}),e(Xt,{weaponTypeKey:t,onChangeId:a,show:o,onClose:r})]})}function ed({weaponTypeKey:t,onChangeId:a}){const{t:n}=Y("page_character"),[o,s,r]=he();return p(we,{children:[e(A,{color:"info",onClick:s,startIcon:e(ze,{}),children:n`tabEquip.swapWeapon`}),e(Xt,{weaponTypeKey:t,onChangeId:a,show:o,onClose:r})]})}function td({talentKey:t,dropDownButtonProps:a}){const{t:n}=Y("sheet_gen"),{character:{talent:o,key:s}}=i.useContext(F),r=T(),{data:l}=i.useContext(X),c=l.get(de.total[`${t}Boost`]).value,f=l.get(de.total[t]).value,d=l.get(de.asc).value;return e(So,{fullWidth:!0,title:n("talentLvl",{level:f}),color:c?"info":"primary",...a,children:Dn(1,An[d]).map(u=>e(Ea,{selected:o[t]===u,disabled:o[t]===u,onClick:()=>r.chars.set(s,m=>{m.talent[t]=u}),children:n("talentLvl",{level:u+c})},u))})}function ad(){const{t}=Y("ui"),a=T(),{character:n}=i.useContext(F),{key:o}=n,{gender:s}=me(),r=i.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return o.startsWith("Traveler")?p(A,{onClick:r,startIcon:s==="F"?e($o,{}):e(Uo,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function nd({onClose:t}){const{t:a}=Y(["page_character","sillyWisher_charNames","charNames_gen"]),n=ba(),o=T(),{character:s,character:{key:r},characterSheet:l}=i.useContext(F),{gender:c}=me(),{silly:f}=i.useContext(tt),d=i.useCallback(async()=>{let u=oe(r,c).name;typeof u=="object"&&(u=a(`${f?"sillyWisher_charNames":"charNames_gen"}:${We(r,c)}`)),window.confirm(a("removeCharacter",{value:u}))&&(o.chars.remove(r),n("/characters"))},[o,n,r,c,f,a]);return p(g,{display:"flex",flexDirection:"column",gap:1,children:[p(g,{display:"flex",gap:1,children:[e(ad,{}),e(A,{color:"error",onClick:()=>d(),startIcon:e(ya,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(Ye,{onClick:t})]}),e(g,{children:p(S,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(S,{item:!0,xs:8,sm:5,md:4,lg:3,children:p(ee,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Pl,{}),e(g,{sx:{px:1},children:e(mr,{level:s.level,ascension:s.ascension,setBoth:u=>o.chars.set(r,u)})}),e(g,{sx:{px:2},children:e(Fa,{})}),e(L,{sx:{textAlign:"center",pb:-1},variant:"h6",children:l.constellationName}),e(Wl,{})]})}),p(S,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(g,{children:e(S,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(u=>{var m;return e(S,{item:!0,xs:1,children:e(td,{talentKey:u,dropDownButtonProps:{startIcon:e(De,{src:(m=l.getTalentOfKey(u))==null?void 0:m.img,size:1.75,sideMargin:!0})}},u)},u)})})}),e(rd,{}),e(sd,{})]})]})})]})}function rd(){const{character:{key:t}}=i.useContext(F),{data:a}=i.useContext(X),n=T(),o=ma(t).weaponType,s=a.get(D.weapon.id).value,r=i.useMemo(()=>Ne(le,l=>a.get(D.art[l].id).value),[a]);return e(g,{children:e(Yc,{weaponTypeKey:o,weaponId:s,artifactIds:r,setWeapon:l=>{n.weapons.set(l,{location:ve(t)})},setArtifact:(l,c)=>{n.arts.set(c,{location:ve(t)})}})})}const od={xs:1,md:2};function sd(){const t=ba(),{character:{key:a}}=i.useContext(F),n=T(),{gender:o}=me(),[s,r]=Be(),l=i.useMemo(()=>{const m={};return n.teamChars.entries.map(([C,h])=>{h.key===a&&(m[C]||(m[C]=[]))}),n.teams.entries.forEach(([C,h])=>{const x=h.loadoutData.find(b=>{var y;return b&&((y=n.teamChars.get(b==null?void 0:b.teamCharId))==null?void 0:y.key)===a});x&&m[x==null?void 0:x.teamCharId].push(C)}),s&&m},[s,a,n]);i.useEffect(()=>n.teams.followAny(()=>r()),[n,r]),i.useEffect(()=>n.teamChars.followAny(()=>r()),[n,r]);const c=m=>{const C=n.teams.new();n.teams.set(C,h=>{h.loadoutData[0]={teamCharId:m}}),t(`/teams/${C}`,{state:{openSetting:!0}})},f=()=>{const m=n.teams.new(),C=n.teamChars.new(a);n.teams.set(m,h=>{h.loadoutData[0]={teamCharId:C}}),t(`/teams/${m}`,{state:{openSetting:!0}})},d=m=>{window.confirm("The loadouts and data (such as multi-opts) on this character will be deleted.")&&n.teamChars.remove(m)},u=m=>{n.teamChars.duplicate(m)};return p(g,{sx:{display:"flex",flexDirection:"column",gap:1},children:[p(L,{variant:"h6",children:["Team Loadouts with"," ",e(zn,{characterKey:a,gender:o})]}),Object.entries(l).map(([m,C])=>{const{name:h,description:x,buildIds:b,buildTcIds:y,customMultiTargets:k}=n.teamChars.get(m);return p(ee,{bgt:"light",children:[e(P,{children:p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(L,{children:h}),e(On,{title:e(L,{children:x}),children:e(ka,{})}),p(Ce,{color:b.length?"primary":"secondary",children:[b.length," Builds"]}),p(Ce,{color:y.length?"primary":"secondary",children:[y.length," TC Builds"]}),p(Ce,{color:k.length?"primary":"secondary",children:[k.length," Multi-Opt"]}),e(A,{color:"info",onClick:()=>u(m),sx:{ml:"auto"},children:e(qa,{})}),e(A,{color:"error",onClick:()=>d(m),children:e(ya,{})})]})}),e(xe,{}),e(P,{children:p(S,{container:!0,columns:od,spacing:1,children:[C.map(R=>e(S,{item:!0,xs:1,children:e(Jn,{teamId:R,onClick:U=>t(`/teams/${R}${U?`/${U}`:""}`)})},R)),e(S,{item:!0,xs:1,children:e(A,{fullWidth:!0,sx:{height:"100%"},onClick:()=>c(m),color:"info",startIcon:e(na,{}),children:"Add new Team"})})]})})]},m)}),e(A,{fullWidth:!0,onClick:()=>f(),color:"info",startIcon:e(na,{}),children:"Add new Loadout+Team"}),e(ee,{bgt:"light"})]})}function Gd({characterKey:t,onClose:a}){return e($t,{open:!!t,onClose:a,children:e(i.Suspense,{fallback:e(re,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(id,{characterKey:t,onClose:a},t)})})}function id({characterKey:t,onClose:a}){const n=Mt(t),{gender:o}=me(),s=oe(t,o),r=Tt(t),{target:l}=(r==null?void 0:r[t])??{},c=qt((n==null?void 0:n.key)??""),f=i.useMemo(()=>{if(!(!r||!l))return{data:l,teamData:r,oldData:void 0}},[l,r]),d=i.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:c}},[n,s,c]),[u,m]=i.useState(),[C,h]=i.useState(),x=i.useMemo(()=>({chartData:u,setChartData:m,graphBuilds:C,setGraphBuilds:h}),[u,C]);return i.useEffect(()=>{m(void 0),h(void 0)},[t]),e(ee,{children:e(P,{sx:{display:"flex",flexDirection:"column",gap:1},children:f&&d&&x?e(F.Provider,{value:d,children:e(X.Provider,{value:f,children:e(ii.Provider,{value:x,children:e(nd,{onClose:a})})})}):e(re,{variant:"rectangular",width:"100%",height:1e3})})})}function ld(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>gt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${We(n,t.gender)}`).toString(),level:n=>{const o=t.chars.get(n);return o?o.level*(o.ascension+1):0},rarity:n=>Ct.char.data[ve(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function cd(t,a){return{element:(n,o)=>o.includes(Nn(n)),weaponType:(n,o)=>o.includes(Ct.char.data[ve(n)].weaponType),rarity:(n,o)=>o.includes(Ct.char.data[ve(n)].rarity),name:(n,o)=>o===void 0||gt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${We(n,t.gender)}`).toLowerCase().includes(o.toLowerCase())||a&&gt.t(`charNames_gen:${We(n,t.gender)}`).toLowerCase().includes(o.toLowerCase()),new:(n,o)=>o===void 0||o===(t.chars.get(n)?"no":"yes")}}const en={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},dd=pe(Me,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),ud=dd,hd=Wt([...Ut]);function pd({value:t,totals:a,onChange:n,...o}){const s=St(),r=!xt(s.breakpoints.up("md")),l=!xt(s.breakpoints.up("sm"));return e(Ar,{exclusive:!0,value:t,...o,children:Ut.map(c=>p(ud,{value:c,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex"},selectedColor:c,onClick:()=>n(hd(t,c)),children:[e(It,{ele:c,iconProps:{fontSize:r&&!l?"inherit":void 0}}),!l&&e(ge,{sx:{ml:.5},label:a[c],size:"small"})]},c))})}const md=Object.keys(en);function Vd({show:t,onHide:a,onSelect:n,filter:o=()=>!0,newFirst:s=!1}){const{t:r}=Y(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:l}=i.useContext(tt),c=T(),[f,d]=i.useState(()=>c.displayCharacter.get());i.useEffect(()=>c.displayCharacter.follow((v,B)=>d(B)),[c,d]);const{gender:u}=me(),[m,C]=Be();i.useEffect(()=>c.charMeta.followAny(()=>C()),[C,c]);const[h,x]=i.useState(""),b=i.useDeferredValue(h),y=i.useDeferredValue(f),k=i.useDeferredValue(m),R=i.useMemo(()=>{const{element:v,weaponType:B,sortType:_,ascending:q}=y,te=[...s?["new"]:[],...en[_]??[]];return k&&ct.filter(J=>o(J,c.chars.get(J),oe(J,u))).filter(zt({element:v,weaponType:B,name:b},cd(c,l))).sort(Ia(te,q,ld(c,l),["new","favorite"]))},[y,s,k,b,c,l,o,u]),U=i.useMemo(()=>ia(Wn,v=>ct.forEach(B=>{const _=oe(B,c.gender).weaponTypeKey;v[_].total++,R.includes(B)&&v[_].current++})),[R,c]),E=i.useMemo(()=>ia(Ut,v=>ct.forEach(B=>{const _=oe(B,c.gender).elementKey;v[_].total++,R.includes(B)&&v[_].current++})),[R,c]),{weaponType:M,element:j,sortType:W,ascending:w}=f;return e(Ve,{open:t,onClose:()=>{x(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:p(ue,{children:[p(P,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e(Lr,{sx:{height:"100%"},onChange:v=>c.displayCharacter.set({weaponType:v}),value:M,totals:U,size:"small"}),e(pd,{sx:{height:"100%"},onChange:v=>c.displayCharacter.set({element:v}),value:j,totals:E,size:"small"}),e(g,{flexGrow:1,children:e(At,{autoFocus:!0,value:h,onChange:v=>x(v.target.value),label:r("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),e(Cr,{sx:{height:"100%"},sortKeys:md,value:W,onChange:v=>c.displayCharacter.set({sortType:v}),ascending:w,onChangeAsc:v=>c.displayCharacter.set({ascending:v})}),e(Ye,{onClick:()=>{x(""),a()}})]}),e(xe,{}),e(X.Provider,{value:{teamData:void 0},children:e(P,{children:e(S,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:R.map(v=>e(S,{item:!0,xs:1,children:e(gd,{characterKey:v,onClick:()=>{x(""),a(),n==null||n(v)}})},v))})})})]})})}const fd=pe(({className:t,...a})=>e(Ge,{...a,classes:{popper:t}}))({[`& .${En.tooltip}`]:{padding:0}});function gd({characterKey:t,onClick:a}){const{gender:n}=me(),o=oe(t,n),s=Mt(t),{favorite:r}=jt(t),l=T(),{silly:c}=i.useContext(tt),[f,d,u]=he(),{level:m=1,ascension:C=0,constellation:h=0}=s??{},x=lr(t,"banner",n);return e(fd,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:f,onClose:u,onOpen:d,title:e(g,{sx:{width:300},children:e(ri,{hideStats:!0,characterKey:t})}),children:e(g,{children:p(kt,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(g,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(Lt,{sx:{p:.25},onClick:b=>{u(),l.charMeta.set(t,{favorite:!r})},children:r?e(Ot,{}):e(Ft,{})})}),e(Xe,{onClick:a,children:p(g,{display:"flex",position:"relative",className:x?void 0:`grad-${o==null?void 0:o.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${x})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(g,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(g,{component:"img",src:Zn(t,n,c),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),p(g,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(L,{variant:"body2",sx:{flexGrow:1},children:e(Q,{color:o==null?void 0:o.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:o==null?void 0:o.name})}),s?p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[p(g,{sx:{textShadow:"0 0 5px gray"},children:[p(L,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",m]}),p(L,{variant:"body2",component:"span",color:"text.secondary",children:["/",Pn[C]]})]}),p(L,{variant:"body2",children:["C",h]})]}):e(L,{component:"span",variant:"body2",children:e(Q,{children:"NEW"})}),e(Dt,{stars:(o==null?void 0:o.rarity)??1,colored:!0})]})]})})]})})})}const Cd=Wt([...va]);function Kd({value:t,totals:a,onChange:n,...o}){const s=St(),r=!xt(s.breakpoints.up("sm"));return e(rt,{exclusive:!0,value:t,...o,children:va.map(l=>e(Me,{value:l,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex",gap:r?0:1},onClick:()=>n(Cd(t,l)),children:p(g,{display:"flex",children:[e("strong",{children:l}),e(Ba,{}),!r&&e(ge,{label:a[l],size:"small"})]})},l))})}export{zc as A,$c as B,Kd as C,So as D,pd as E,qd as F,ii as G,Nc as H,Wl as I,pc as J,qt as K,Ka as L,lc as M,Hd as N,cc as O,Ic as P,Oc as R,wo as S,td as T,wt as W,ri as a,cd as b,en as c,ld as d,Gd as e,Vd as f,hc as g,uc as h,qa as i,ua as j,vt as k,gc as l,Yc as m,fc as n,Ql as o,Bc as p,Rt as q,_t as r,Sc as s,Cc as t,Je as u,Xa as v,Dc as w,Fa as x,jc as y,Pl as z};
