import{b as D,u as ta,bi as Da,bh as Ta,p as d,q as t,bL as W,c2 as R,T as f,de as ja,r as E,i as F,j as H,d as y,a5 as ka,az as M,c4 as $a,ad as T,df as Ma,aP as z,c5 as N,cS as za,dg as Ia,co as ea,cU as Aa,bx as A,cb as _a,d8 as Oa,cJ as wa,a2 as S,ac as Ba,Q as m,bg as Wa,$ as P,v as $,c1 as Na,bf as Ra,k as na,I as Ea,cn as Fa,bu as U,cq as Ha,cw as Pa,cp as qa,b7 as La,b8 as Va,O as C,bX as v,l as Ga,ax as q,bc as Ka,dh as Xa,cv as sa,ak as ra,ba as ia,s as j,cm as oa,a8 as Ya,f as la,di as Ua,bp as Ja,o as ca,cB as Qa,a9 as ua,ck as da,cd as Za,cl as at,dj as tt,bF as I,bj as et,bJ as J,by as nt,dk as st,ce as rt,cf as it,X as ot,Z as ha}from"./index-dd31b874.js";import{d as lt}from"./Info-b5c4ed48.js";import{j as _,A as ct,w as ut,x as dt,y as ht,z as pt,B as ft,D as mt,E as gt,F as xt,H as yt,I as vt,J as bt,K as St,M as Ct,N as Dt,O as Tt,P as jt,Q as kt,R as $t,U as Mt,V as zt,W as It,X as At,Y as _t,Z as Ot,_ as wt,$ as Bt,a0 as Wt,a1 as Nt,a2 as Rt,a3 as Et,a4 as Ft,a5 as Ht,a6 as Pt,a7 as qt,a8 as Lt,a9 as Vt,aa as Gt,ab as Kt,ac as Xt,ad as Yt,ae as Ut,af as Jt,ag as Qt,ah as Zt,ai as ae,aj as te,ak as ee,al as ne,am as se,an as re,ao as ie,ap as oe,aq as le,ar as ce,as as ue,at as de,au as he,av as pe,aw as fe,ax as me,ay as ge,az as xe,aA as ye,aB as ve,aC as be,aD as Se,aE as Ce,aF as De,aG as Te,aH as je,aI as ke,aJ as $e,aK as Me,aL as ze,aM as Ie,aN as Ae,aO as _e,aP as Oe,aQ as we,aR as Be,aS as We,aT as Ne,aU as Re,aV as Ee,aW as Fe,aX as He,aY as Pe,aZ as qe,a_ as Le,g as pa,o as Ve,p as Ge,q as Ke,m as L,v as Xe,C as fa,l as Ye}from"./LocationName-65aa0d4f.js";import{D as O}from"./DataContext-316cf834.js";import{b as ma}from"./util-3e22b532.js";import{S as Ue}from"./SlotIcon-ae45965c.js";import{i as V}from"./index-fd2c938e.js";import{W as Je,u as Qe}from"./Trans-49281b8c.js";import{C as k}from"./CardActionArea-5c5ed533.js";function Ze(a){const e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(e,(s,o,i,r)=>o+o+i+i+r+r);const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function Zn(a,e){if(a)return`rgba(${a.r},${a.g},${a.b},${e})`}function an(a){const e=D();return _(e.charMeta,a)}function ga(a){const e=D();return _(e.chars,a)}function tn(a){const e=D();return _(e.teams,a)}function en(a){const e=D();return _(e.teamChars,a)}function nn({statKey:a,value:e,color:n,prefix:s="",typographyProps:o={}}){const{t:i}=ta("statKey_gen"),r=Da(a),l=Ta(e,r);return d(f,{color:n?`${n}.main`:void 0,...o,children:[t(R,{statKey:a,iconProps:W})," ",i(a)," ",t("strong",{children:`${s}${l}${r}`})]},a)}const sn={Albedo:ct,Alhaitham:ut,Aloy:dt,Amber:ht,AratakiItto:pt,Baizhu:ft,Barbara:mt,Beidou:gt,Bennett:xt,Candace:yt,Charlotte:vt,Chevreuse:bt,Chiori:St,Chongyun:Ct,Collei:Dt,Cyno:Tt,Dehya:jt,Diluc:kt,Diona:$t,Dori:Mt,Eula:zt,Faruzan:It,Fischl:At,Freminet:_t,Furina:Ot,Gaming:wt,Ganyu:Bt,Gorou:Wt,HuTao:Nt,Jean:Rt,KaedeharaKazuha:Et,Kaeya:Ft,KamisatoAyaka:Ht,KamisatoAyato:Pt,Kaveh:qt,Keqing:Lt,Kirara:Vt,Klee:Gt,KujouSara:Kt,KukiShinobu:Xt,Layla:Yt,Lisa:Ut,Lynette:Jt,Lyney:Qt,Mika:Zt,Mona:ae,Nahida:te,Navia:ee,Neuvillette:ne,Nilou:se,Ningguang:re,Noelle:ie,Qiqi:oe,RaidenShogun:le,Razor:ce,Rosaria:ue,SangonomiyaKokomi:de,Sayu:he,Shenhe:pe,ShikanoinHeizou:fe,Somnia:me,Sucrose:ge,Tartaglia:xe,Thoma:ye,Tighnari:ve,TravelerAnemoF:be,TravelerGeoF:Se,TravelerElectroF:Ce,TravelerDendroF:De,TravelerAnemoM:Te,TravelerGeoM:je,TravelerElectroM:ke,TravelerDendroM:$e,TravelerHydroF:Me,TravelerHydroM:ze,Venti:Ie,Wanderer:Ae,Wriothesley:_e,Xiangling:Oe,Xianyun:we,Xiao:Be,Xingqiu:We,Xinyan:Ne,YaeMiko:Re,Yanfei:Ee,Yaoyao:Fe,Yelan:He,Yoimiya:Pe,YunJin:qe,Zhongli:Le};function rn(a,e){return sn[on(a,e)]}function on(a,e){return ja.includes(a)?`${a}${e}`:a}var G={},ln=F;Object.defineProperty(G,"__esModule",{value:!0});var xa=G.default=void 0,cn=ln(E()),un=H,dn=(0,cn.default)((0,un.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");xa=G.default=dn;const hn=y.createContext({});function pn(a,e=0,n,s){const o=D(),[i,r]=ka(),l=y.useDeferredValue(i),{gender:h}=M(),p=y.useMemo(()=>l&&mn(o,a,e,h,n,s),[l,h,a,o,e,n,s]);return y.useEffect(()=>a?o.chars.follow(a,r):void 0,[a,r,o]),p}class fn{constructor(e){this.data={},e.chars.followAny(n=>{this.removeData(n)})}getData(e){return this.data[e]}cacheData(e,n){this.data[e]=n}removeData(e){delete this.data[e]}}const B=new Map,Q=a=>{if(B.has(a))return B.get(a);const e=new fn(a);return B.set(a,e),e};function mn(a,e,n=0,s,o,i){if(!e)return;if(!n&&!o&&!i){const c=Q(a).getData(e);if(c)return c}const{teamData:r,teamBundle:l}=gn(a,e,n,o,i)??{};if(!r||!l)return;const h=$a(r,s,e),p=T(h,(c,u)=>{const{data:g,...x}=l[u];return{...c,...x}});return!n&&!o&&!i&&Q(a).cacheData(e,p),p}function gn(a,e,n=0,s,o){if(!e)return;const i=a.chars.get(e);if(!i)return;const r=xn(a,!0,n,i,o||(a.weapons.get(i.equippedWeapon)??Ma()),s??Object.values(i.equippedArtifacts).map(p=>a.arts.get(p)).filter(p=>p));if(!r)return;const l={[e]:r};return{teamData:{[e]:r.data},teamBundle:l}}function xn(a,e=!1,n,s,o,i){const r=rn(s.key,a.gender);if(!r)return;const l=pa(o.key);if(!l)return;const h=Ve[z(s.key).weaponType],p=e?(()=>{const{display:x,...b}=l.data;return N([b,h])})():l.data,c=N([r.data,p,Ge]),g=[...Array.isArray(i)?i.map(x=>za(x,n)):[i],Ia(s),ea(o),c,Aa,Ke];return{character:s,weapon:o,characterSheet:r,weaponSheet:l,data:g}}function yn({art:a,children:e}){const n=t(m,{children:t(P,{variant:"rectangular",width:100,height:100})}),s=t(y.Suspense,{fallback:n,children:t(vn,{art:a})});return t(A,{placement:"top",title:s,disableInteractive:!0,children:e})}function vn({art:a}){const{t:e}=ta("statKey_gen"),{setKey:n,slotKey:s,level:o,rarity:i,mainStatKey:r,substats:l}=a,h=_a.getVariant(r);return d(m,{p:1,children:[d(f,{variant:"h6",children:[t(Ue,{slotKey:s,iconProps:W})," ",t(Oa,{setKey:n,slotKey:s})]}),d(f,{variant:"subtitle1",color:`${h}.main`,children:[t(R,{statKey:r,iconProps:W})," ",e(r)," ",wa(r,i,o)]}),d(f,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(L,{stars:i}),d(S,{color:ma(o),children:["+",o]})," "]}),t(m,{py:1,children:l.map(({value:p,key:c,rolls:u})=>!!(p&&c)&&t(nn,{statKey:c,value:p,color:`roll${Ba(u.length,1,6)}`,prefix:"+"},c))}),t(f,{color:"success.main",children:t(Wa,{setKey:n})}),t(Xe,{color:"secondary.main",location:a.location})]})}function bn({artifactObj:a,slotKey:e}){if(!a)return t($,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:t(m,{sx:{width:"100%",pb:"100%",position:"relative"},children:t(m,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:V.slot[e]})})});const{mainStatKey:n,rarity:s,level:o}=a,r=Na.find(l=>a.mainStatKey.includes(l))??"secondary";return t(yn,{art:a,children:d($,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[t(m,{component:"img",className:`grad-${s}star`,src:Ra(a.setKey,a.slotKey),maxWidth:"100%",maxHeight:"100%"}),t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(S,{sx:{p:.5},color:ma(o),children:d("strong",{children:["+",o]})})})}),t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t(S,{color:r,sx:{p:.5},children:t(R,{statKey:n,iconProps:{fontSize:"inherit"}})})})]})})}function Sn({weaponKey:a,addlText:e,children:n}){const s=d(y.Suspense,{fallback:t(P,{variant:"text",width:100}),children:[d(f,{children:[t(Ea,{src:V.weaponTypes[na(a).weaponType],size:1.5})," ",t(Je,{weaponKey:a})]}),e]});return t(A,{placement:"top",title:s,disableInteractive:!0,children:n})}function Cn({weaponId:a}){const e=Qe(a);return e?t(ya,{weapon:e}):null}function ya({weapon:a}){const e=(a==null?void 0:a.key)&&pa(a.key),n=y.useMemo(()=>e&&a&&Fa([e.data,ea(a)]),[e,a]);if(!a||!e||!n)return null;const s=d(m,{children:[t(Z,{node:n.get(U.weapon.main)}),t(Z,{node:n.get(U.weapon.sub)})]});return d($,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[t(m,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${na(a.key).rarity}star`,children:t(Sn,{weaponKey:a.key,addlText:s,children:t(m,{component:"img",src:Ha(a.key,a.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(S,{color:"primary",children:Pa(a.level,a.ascension)})})}),qa(a.key)&&t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:d(S,{color:"secondary",children:["R",a.refinement]})})})]})}function Z({node:a}){const{icon:e}=La(a.info);return d(f,{children:[e," ",Va(a)]})}function Dn({hideWeapon:a=!1}){var n;const{data:e}=y.useContext(O);return t(m,{children:d(C,{container:!0,columns:a?5:6,spacing:.5,children:[!a&&t(C,{item:!0,xs:1,height:"100%",children:t(Cn,{weaponId:((n=e.get(v.weapon.id).value)==null?void 0:n.toString())??""})}),t(Tn,{})]})})}function Tn(){const a=D(),{data:e}=y.useContext(O),n=Ga.map(s=>{var o;return[s,a.arts.get(((o=e.get(v.art[s].id).value)==null?void 0:o.toString())??"")]});return t(q,{children:n.map(([s,o])=>t(C,{item:!0,xs:1,children:t(bn,{artifactObj:o,slotKey:s})},s))})}function jn({weapon:a}){return t(m,{children:d(C,{container:!0,columns:a?6:5,spacing:.5,sx:{},children:[a&&t(C,{item:!0,xs:1,height:"100%",children:t(ya,{weapon:a})}),t(C,{item:!0,xs:5,children:t(Ka,{sx:{backgroundColor:"info.main",height:"44px",display:"flex",justifyContent:"center",alignItems:"center"},children:t(f,{children:"TC Build"})})})]})})}function va(a,e,n){const s=Xa(a,e),o=sa(a,"icon",e);return n&&s?s:o||""}function kn({children:a,characterKey:e,onClick:n}){const{gender:s}=M(),{silly:o}=y.useContext(ra),i=z(e),r=y.useCallback(h=>t(k,{onClick:n,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:h}),[n]),l=sa(e,"banner",s);return t(fa,{condition:!!n,wrapper:r,children:d(m,{display:"flex",position:"relative",className:l?void 0:`grad-${i.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[t(m,{flexShrink:1,component:"img",src:va(e,s,o),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),t(m,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:a})]})})}function $n({characterKey:a}){const{gender:e}=M(),{data:n}=y.useContext(O),s=n.get(v.charEle).value,o=n.get(v.lvl).value,i=n.get(v.constellation).value,r=n.get(v.asc).value,l=n.get(v.total.autoBoost).value,h=n.get(v.total.skillBoost).value,p=n.get(v.total.burstBoost).value,c=n.get(v.total.auto).value,u=n.get(v.total.skill).value,g=n.get(v.total.burst).value,x=z(a);return d(q,{children:[t(j,{label:t(f,{variant:"subtitle1",children:t(ia,{characterKey:a,gender:e})}),size:"small",color:s,sx:{opacity:.85}}),d(m,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[d(m,{children:[d(f,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",o]}),d(f,{component:"span",variant:"h6",color:"text.secondary",children:["/",oa[r]]})]}),t(f,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:t(S,{color:`roll${i<3?3:i}`,children:t(Ya,{color:"white",children:d("strong",{children:["C",i]})})})})]}),d(m,{display:"flex",gap:1,sx:{opacity:.85},children:[t(j,{size:"small",color:l?"info":"secondary",label:t("strong",{children:c})}),t(j,{size:"small",color:h?"info":"secondary",label:t("strong",{children:u})}),t(j,{size:"small",color:p?"info":"secondary",label:t("strong",{children:g})})]}),t(f,{variant:"h6",lineHeight:1,children:t(L,{stars:x.rarity,colored:!0,inline:!0})})]})}function as({characterKey:a}){const{gender:e}=M(),n=z(a);return d(q,{children:[t(j,{label:t(f,{variant:"subtitle1",children:t(ia,{characterKey:a,gender:e})}),size:"small",color:la(a),sx:{opacity:.85}}),t(m,{mt:1,children:t(f,{variant:"h4",children:t(S,{children:"NEW"})})}),t(f,{mt:1.5,children:t(L,{stars:n.rarity,colored:!0})})]})}var K={},Mn=F;Object.defineProperty(K,"__esModule",{value:!0});var ba=K.default=void 0,zn=Mn(E()),In=H,An=(0,zn.default)((0,In.jsx)("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom");ba=K.default=An;const aa=Ua(Ja({dyn:{...v.art,...v.artSet}})),_n={art:ca([...Qa,...ua],a=>aa.dyn[a]),artSet:T(v.artSet,(a,e)=>aa.dyn[e])};function ts(a,e,n){const s={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},o=new Set;for(const i of a){const r=da(i.mainStatKey,i.rarity,Math.max(Math.min(e,Za[i.rarity]),i.level)),l={id:i.id,set:i.setKey,values:{[i.setKey]:1,[i.mainStatKey]:r,...Object.fromEntries(i.substats.map(h=>[h.key,h.key.endsWith("_")?h.accurateValue/100:h.accurateValue]))}};delete l.values[""],s.values[i.slotKey].push(l),Object.keys(l.values).forEach(h=>o.add(h))}if(s.base=ca([...o],i=>0),n)for(const i of Object.values(s.values))i.push({id:"",values:{}});return s}function es(a,e,n){var c;const{artifact:{sets:s},optimization:{target:o,minTotal:i}}=n;if(!o)return{};const r=(c=a[e])==null?void 0:c.target.data[0];if(!r)return{};Object.assign(r,N([r,_n]));const l=et(r.display??{},o);if(!l)return{};const h=Object.keys(i).map(u=>r.total[u]).filter(u=>u);let p=J([l,...h],r,({path:[u]})=>u!=="dyn");return p=nt(p,u=>{if(u.operation==="read"&&u.path[0]==="dyn"){const g=s[u.path[1]];if(g)return I(g);if(!ua.includes(u.path[1]))return I(0)}return u},u=>u),p=J(p,{},u=>!1),{nodes:p}}function ns(a){const e=new Set;return st(a,{},n=>{const s=n.path[1];return e.add(s),s},1),e}function ss(a){const{artifact:{slots:e,substats:{stats:n,type:s,rarity:o}}}=a,i=T(n,(h,p)=>Math.ceil(n[p]/rt(p,o,s))),r=Bn(e),l=wn(e);return{minSubLines:l,minOtherRolls:On(Object.entries(i),r,l)}}function On(a,e,n=4*5){const s=a.reduce((o,[i,r])=>{const l=5-(e[i]??0);return o+Math.min(r,l)},0);return n-s}function wn(a){return Object.values(a).reduce((e,{rarity:n,level:s})=>{const{high:o,low:i}=it[n];return e+(s>=4?o:i)},0)}function Bn(a){const e={};return Object.values(a).forEach(({statKey:n})=>{e[n]=(e[n]??0)+1},0),e}function Wn(a){const{artifact:{slots:e,substats:{stats:n},sets:s}}=a,o=T(n,(i,r)=>at(i,r));return Object.values(e).forEach(({statKey:i,rarity:r,level:l})=>o[i]=(o[i]??0)+da(i,r,l)),{art:T(o,(i,r)=>r.endsWith("_")?tt(i):I(i)),artSet:T(s,i=>I(i))}}function rs(a){const{weapon:{key:e,level:n,ascension:s,refinement:o}}=a;return{id:"",location:"",key:e,level:n,ascension:s,refinement:o,lock:!1}}var X={},Nn=F;Object.defineProperty(X,"__esModule",{value:!0});var Sa=X.default=void 0,Rn=Nn(E()),En=H,Fn=(0,Rn.default)((0,En.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");Sa=X.default=Fn;function Hn({characterKey:a,onClick:e,onMouseDown:n,onMouseEnter:s,hoverChild:o,hideFav:i}){const r=ga(a),{favorite:l}=an(a),{gender:h}=M(),{silly:p}=y.useContext(ra),c=y.useCallback(()=>e==null?void 0:e(a),[a,e]),u=y.useCallback(w=>t(k,{onClick:c,onMouseDown:n,onMouseEnter:s,children:w}),[c,n,s]),[g,x,b]=ot();return t(A,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:!!o&&g,onClose:b,onOpen:x,title:o,children:t($,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:d(fa,{condition:!!e||!!n||!!s,wrapper:u,children:[t(m,{display:"flex",className:`grad-${z(a).rarity}star`,children:t(m,{component:"img",src:va(a,h,p),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),r&&t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:t("strong",{children:d(S,{color:"primary",children:[r.level,"/",oa[r.ascension]]})})}),!i&&t(m,{sx:{position:"absolute",top:0,right:0},children:l?t(Ye,{fontSize:"small"}):t(xa,{fontSize:"small"})}),r&&t(f,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:d(S,{color:"secondary",children:["C",r.constellation]})})})]})})})}function Pn({index:a}){return t($,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:t(m,{component:"img",src:V.team[`team${a+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function is({teamId:a,onClick:e,hoverCard:n=!1,bgt:s}){const o=tn(a),{name:i,description:r,loadoutData:l}=o,h=D(),p=l.map(c=>{if(!c)return;const u=h.teamChars.get(c.teamCharId);if(u)return la(u.key)});return t(ha,{bgt:s,sx:{height:"100%"},children:d(m,{sx:c=>({height:"100%",display:"flex",flexDirection:"column",background:`linear-gradient(to right, ${p.map(g=>{if(!g)return"rgba(0,0,0,0)";const x=c.palette[g].main,b=Ze(x);return b?`rgba(${b.r},${b.g},${b.b},0.25)`:"rgba(0,0,0,0)"}).map((g,x)=>`${g} ${x*25+12.5}%`).join(", ")})`}),children:[t(k,{onClick:()=>e(),sx:{p:1},children:d(f,{sx:{display:"flex",gap:1},children:[t("span",{children:i})," ",r&&t(A,{title:t(f,{children:r}),children:t(lt,{})})]})}),t(m,{sx:{p:1,marginTop:"auto"},children:t(C,{container:!0,columns:4,spacing:1,children:l.map((c,u)=>{var b;const g=c==null?void 0:c.teamCharId,x=g&&((b=h.teamChars.get(g))==null?void 0:b.key);return t(C,{item:!0,xs:1,height:"100%",children:x?t(k,{onClick:()=>e(x),children:t(Hn,{characterKey:x,hoverChild:n&&t(qn,{characterKey:x,teamCharId:g,teamId:a}),hideFav:!0})}):t(k,{onClick:()=>e(),children:t(Pn,{index:u})})},u)})})})]})})}function qn({characterKey:a,teamId:e,teamCharId:n}){var b;const s=D(),o=ga(a),{name:i}=en(n),r=s.teams.getLoadoutDatum(e,n),l=s.teams.getActiveBuildName(r),h=(()=>s.teams.getLoadoutWeapon(r))(),p=(()=>{const{buildType:w,buildTcId:Y}=r;return w==="tc"&&Y?Wn(s.buildTcs.get(Y)):Object.values(s.teams.getLoadoutArtifacts(r)).filter(Ca=>Ca)})(),c=pn(a,void 0,p,h),u=(b=c==null?void 0:c[a])==null?void 0:b.target,g=y.useMemo(()=>o&&{character:o},[o]),x=y.useMemo(()=>u&&c&&{data:u,teamData:c},[u,c]);return!g||!x?null:t(hn.Provider,{value:g,children:t(O.Provider,{value:x,children:t(m,{sx:{width:300,m:-1},children:t(y.Suspense,{fallback:t(P,{variant:"rectangular",width:"100%",height:300}),children:d(ha,{children:[t(kn,{characterKey:a,children:t($n,{characterKey:a})}),d(m,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:[d(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t(Sa,{}),t("span",{children:i})]}),d(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t(ba,{}),t("span",{children:l})]}),(r==null?void 0:r.buildType)==="tc"&&(r!=null&&r.buildTcId)?t(jn,{weapon:h}):t(Dn,{})]})]})})})})})}export{bn as A,hn as C,as as H,is as T,Cn as W,ba as a,Hn as b,kn as c,Sa as d,$n as e,Dn as f,Wn as g,ts as h,_n as i,rn as j,ss as k,ns as l,rs as m,Ze as n,es as o,Zn as p,en as q,ga as r,pn as s,an as t,tn as u,xa as v,yn as w,Sn as x,va as y};
