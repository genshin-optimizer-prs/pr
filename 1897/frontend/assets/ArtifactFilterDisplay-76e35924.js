import{eq as ze,d as o,p as c,Q as v,ax as Ee,q as e,D as L,ac as B,ab as $,bc as he,r as qe,i as Be,j as $e,u as k,cB as fe,cb as ne,c2 as N,s as T,bQ as Ne,I as Pe,cC as je,a9 as R,b as ge,az as He,ak as Ve,aB as We,aR as Ge,de as Me,f as Fe,aA as be,$ as Qe,B as Q,bL as ie,o as Ue,O as F,er as q,dd as U,l as J,V as _,bx as Je,ay as Xe}from"./index-11cd6f10.js";import{G as P,c as Ye,L as Ze,m as xe,n as De}from"./LocationName-f70ea058.js";import{u as Oe}from"./useDisplayArtifact-e26ebeb3.js";import{S as et}from"./SlotIcon-797d7d81.js";import{d as tt,a as at}from"./LockOpen-a9b6343b.js";import{T as A,S as I,h as z}from"./SolidToggleButtonGroup-1d973a93.js";import{b as lt}from"./totalUtils-e59ac86d.js";import{S as ye,s as st,A as ce}from"./ArtifactStatKeyDisplay-f8f97229.js";import{a as Se}from"./util-3e22b532.js";const ot=ze(),w=ot;function rt({levelLow:d,levelHigh:s,setLow:i,setHigh:m,setBoth:a,dark:u=!1,disabled:b=!1,showLevelText:h=!1}){const[r,l]=o.useState(d),[y,S]=o.useState(s),C=o.useCallback((x,f)=>{if(typeof f=="number")throw new TypeError;const[n,g]=f;l(n),S(g)},[l,S]);return o.useEffect(()=>l(d),[l,d]),o.useEffect(()=>S(s),[S,s]),c(he,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:u?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[c(v,{sx:{width:h?100:55,height:32,display:"flex"},children:[h?c(Ee,{children:[e("span",{style:{padding:0,width:"55%",borderRadius:"4px 0 0 4px",display:"flex",justifyContent:"center",alignItems:"center",color:"rgba(255,255,255,0.9)",backgroundColor:"rgb(30,120,200)"},children:"Level"}),e(L,{orientation:"vertical",flexItem:!0})]}):void 0,e($,{value:r,onChange:x=>i(B(x??0,0,s)),sx:{px:1,width:h?"45%":"100%",borderRadius:h?0:"4px 0 0 4px"},inputProps:{sx:{textAlign:h?"right":"center"}},disabled:b})]}),e(ye,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>"Arifact Level Range",value:[r,y],onChange:C,onChangeCommitted:(x,f)=>a(f[0],f[1]),valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:b}),e($,{value:y,onChange:x=>m(B(x??0,d,20)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:b})]})}var Y={},nt=Be;Object.defineProperty(Y,"__esModule",{value:!0});var Ce=Y.default=void 0,it=nt(qe()),ue=$e,ct=(0,it.default)([(0,ue.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,ue.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");Ce=Y.default=ct;function ut({mainStatKeys:d,setMainStatKeys:s,totals:i}){const{t:m}=k("artifact"),{t:a}=k("statKey_gen"),u=o.useMemo(()=>fe.map(l=>({key:l,label:`${a(l)}${Se(l)}`,variant:ne.getVariant(l)})),[a]),b=o.useCallback(l=>e(N,{statKey:l,iconProps:{sx:{ml:1,color:ne.getVariant(l)}}}),[]),h=o.useCallback(l=>e("strong",{children:i[l]}),[i]),r=o.useCallback(l=>e(T,{size:"small",label:i[l]}),[i]);return e(P,{options:u,valueKeys:d,onChange:s,toImg:b,toExLabel:h,toExItemLabel:r,label:m("autocompleteLabels.mainStats")})}function dt({artSetKeys:d,setArtSetKeys:s,totals:i}){const{t:m}=k(["artifact","artifactNames_gen"]),a=o.useCallback(r=>e(Pe,{src:Ne(r),size:3}),[]),u=o.useCallback(r=>e("strong",{children:i[r]}),[i]),b=o.useCallback(r=>e(T,{size:"small",label:i[r]}),[i]),h=o.useMemo(()=>Object.entries(Ye).flatMap(([r,l])=>l.map(y=>({key:y,grouper:+r,label:m(`artifactNames_gen:${y}`)}))).sort(st),[m]);return e(P,{options:h,valueKeys:d,label:m("artifact:autocompleteLabels.sets"),toImg:a,toExLabel:u,toExItemLabel:b,onChange:s,groupBy:r=>{var l;return((l=r.grouper)==null?void 0:l.toString())??""},renderGroup:r=>r.group&&c(je,{component:v,children:[c(Ze,{sx:{top:"-1em"},children:[r.group," ",e(xe,{stars:+r.group,inline:!0})]},`${r.group}Header`),r.children]},r.group)})}function pt({substatKeys:d,setSubstatKeys:s,totals:i}){const{t:m}=k("artifact"),{t:a}=k("statKey_gen"),u=o.useMemo(()=>R.map(l=>({key:l,label:`${a(l)}${Se(l)}`})),[a]),b=o.useCallback(l=>e(N,{statKey:l,iconProps:{sx:{ml:1}}}),[]),h=o.useCallback(l=>e("strong",{children:i[l]}),[i]),r=o.useCallback(l=>e(T,{size:"small",label:i[l]}),[i]);return e(P,{options:u,toImg:b,toExLabel:h,toExItemLabel:r,valueKeys:d,onChange:s,label:m("autocompleteLabels.substats")})}function mt({locations:d,setLocations:s,totals:i,disabled:m}){const{t:a}=k(["artifact","sillyWisher_charNames","charNames_gen"]),u=ge(),{gender:b}=He(),{silly:h}=o.useContext(Ve),r=o.useCallback((n,g)=>a(`${g?"sillyWisher_charNames":"charNames_gen"}:${We(u.chars.LocationToCharacterKey(n),b)}`),[u,b,a]),l=o.useCallback(n=>e(Ge,{characterKey:u.chars.LocationToCharacterKey(n)}),[u]),y=o.useCallback(n=>e("strong",{children:i[n]}),[i]),S=o.useCallback(n=>e(T,{size:"small",label:i[n]}),[i]),C=o.useCallback(n=>n==="Traveler"?Me.some(g=>u.charMeta.get(g).favorite):n?u.charMeta.get(n).favorite:!1,[u]),x=o.useCallback(n=>Fe(u.chars.LocationToCharacterKey(n)),[u]),f=o.useMemo(()=>be.filter(n=>u.chars.get(u.chars.LocationToCharacterKey(n))).map(n=>({key:n,label:r(n,h),favorite:C(n),color:x(n),alternateNames:[r(n,!1)]})).sort((n,g)=>n.favorite&&!g.favorite?-1:!n.favorite&&g.favorite?1:n.label.localeCompare(g.label)),[u.chars,C,x,h,r]);return e(o.Suspense,{fallback:e(Qe,{variant:"text",width:100}),children:e(P,{disabled:m,options:f,valueKeys:d,onChange:n=>s(n),toImg:l,toExLabel:y,toExItemLabel:S,label:a`artifact:filterLocation.location`,chipProps:{variant:"outlined"}})})}function ht({rvLow:d,rvHigh:s,useMaxRV:i,switchFilter:m,setLow:a,setHigh:u,setBoth:b,dark:h=!1,disabled:r=!1}){const[l,y]=o.useState(i),[S,C]=o.useState(d),[x,f]=o.useState(s),n=o.useCallback((g,K)=>{if(typeof K=="number")throw new TypeError;const[j,H]=K;C(j),f(H)},[C,f]);return o.useEffect(()=>C(d),[C,d]),o.useEffect(()=>f(s),[f,s]),o.useEffect(()=>y(i),[y,i]),c(he,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:h?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[c(v,{sx:{width:100,height:32,display:"flex"},children:[e(Q,{onClick:()=>m(!i),sx:{p:0,minWidth:0,width:"55%",borderRadius:"4px 0 0 4px",fontWeight:400,fontSize:"16px",display:"inline",textAlign:"center",color:"rgba(255,255,255,0.9)"},children:l?"MRV":"RV"}),e(L,{orientation:"vertical",flexItem:!0}),e($,{value:S,onChange:g=>a(B(g??0,0,x)),sx:{pr:1,width:"45%"},inputProps:{sx:{textAlign:"right"}},disabled:r})]}),e(ye,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:()=>`Arifact ${l?"Max RV":"RV"} Range`,value:[S,x],onChange:n,onChangeCommitted:(g,K)=>b(K[0],K[1]),valueLabelDisplay:"auto",min:0,max:900,disabled:r}),e($,{value:x,onChange:g=>u(B(g??0,S,900)),sx:{px:1,width:50,borderRadius:"0 4px 4px 0"},inputProps:{sx:{textAlign:"center"}},disabled:r})]})}const de=z([...R]),pe=R.slice(0,6),me=R.slice(6);function ft({selectedKeys:d,onChange:s}){const i=d.filter(a=>pe.includes(a)),m=d.filter(a=>me.includes(a));return c(v,{display:"flex",gap:1,flexWrap:"wrap",children:[e(I,{value:i,sx:{flexGrow:1},children:pe.map(a=>e(A,{sx:{flexGrow:1},size:"small",value:a,onClick:()=>s(de(d,a)),children:c(v,{display:"flex",gap:1,alignItems:"center",children:[e(N,{statKey:a,iconProps:ie}),e(ce,{statKey:a})]})},a))}),e(I,{value:m,sx:{flexGrow:1},children:me.map(a=>e(A,{sx:{flexGrow:1},size:"small",value:a,onClick:()=>s(de(d,a)),children:c(v,{display:"flex",gap:1,alignItems:"center",children:[e(N,{statKey:a,iconProps:ie}),e(ce,{statKey:a})]})},a))})]})}const X=["locked","unlocked"],gt=z([...U]),bt=z([...J]),xt=z([...X]),yt=z([1,2,3,4]);function St({filterOption:d,filterOptionDispatch:s,filteredIds:i,disableSlotFilter:m=!1}){const{t:a}=k(["artifact","ui"]),u=o.useMemo(()=>Ue(i,t=>!0),[i]),{artSetKeys:b=[],mainStatKeys:h=[],rarity:r=[],slotKeys:l=[],levelLow:y=0,levelHigh:S=20,substats:C=[],locations:x,showEquipped:f,showInventory:n,locked:g=[...X],rvLow:K=0,rvHigh:j=900,useMaxRV:H=!1,lines:Z=[]}=d,V=ge(),{rarityTotal:ve,slotTotal:Te,lockedTotal:Ke,linesTotal:ke,equippedTotal:D,setTotal:we,mainStatTotal:Le,subStatTotal:Ae,locationTotal:Ie}=o.useMemo(()=>{const t={rarityTotal:U,slotTotal:J,lockedTotal:["locked","unlocked"],linesTotal:[0,1,2,3,4],equippedTotal:["equipped","unequipped"],setTotal:Xe,mainStatTotal:fe,subStatTotal:R,locationTotal:[...be,""]};return lt(t,p=>Object.entries(V.arts.data).forEach(([O,E])=>{const{rarity:ee,slotKey:te,location:W,setKey:ae,mainStatKey:le,substats:Re}=E,se=E.lock?"locked":"unlocked",oe=E.substats.filter(G=>G.value).length,re=W?"equipped":"unequipped";(!m||E.slotKey===d.slotKeys[0])&&(p.rarityTotal[ee].total++,p.slotTotal[te].total++,p.lockedTotal[se].total++,p.linesTotal[oe].total++,p.equippedTotal[re].total++,p.setTotal[ae].total++,p.mainStatTotal[le].total++,Re.forEach(G=>{const M=G.key;M&&(p.subStatTotal[M].total++,u[O]&&p.subStatTotal[M].current++)}),p.locationTotal[W].total++),u[O]&&(p.rarityTotal[ee].current++,p.slotTotal[te].current++,p.lockedTotal[se].current++,p.linesTotal[oe].current++,p.equippedTotal[re].current++,p.setTotal[ae].current++,p.mainStatTotal[le].current++,p.locationTotal[W].current++)}))},[V,m,u,d]),{effFilter:_e}=Oe();return c(F,{container:!0,spacing:1,children:[c(F,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[c(v,{p:1,children:[e(_,{t:a,i18nKey:"subheadings.general"}),c(w,{spacing:1,children:[e(L,{sx:{bgcolor:q.palette.contentNormal.light}}),e(rt,{showLevelText:!0,levelLow:y,levelHigh:S,setLow:t=>s({levelLow:t}),setHigh:t=>s({levelHigh:t}),setBoth:(t,p)=>s({levelLow:t,levelHigh:p})}),e(I,{fullWidth:!0,value:r,size:"small",children:U.map(t=>c(A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({rarity:gt(r,t)}),children:[e(xe,{stars:t,inline:!0}),e(T,{label:ve[t],size:"small"})]},t))}),e(I,{fullWidth:!0,value:l,size:"small",disabled:m,children:J.map(t=>c(A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({slotKeys:bt(l,t)}),children:[e(et,{slotKey:t}),e(T,{label:Te[t],size:"small"})]},t))})]}),c(w,{spacing:1.5,pt:1.5,children:[e(ut,{totals:Le,mainStatKeys:h,setMainStatKeys:t=>s({mainStatKeys:t})}),e(dt,{totals:we,artSetKeys:b,setArtSetKeys:t=>s({artSetKeys:t})})]})]}),c(v,{p:1,children:[e(_,{t:a,i18nKey:"subheadings.substats"}),e(L,{sx:{bgcolor:q.palette.contentNormal.light,marginBottom:1}}),c(w,{spacing:1.5,children:[e(I,{fullWidth:!0,value:Z,size:"small",children:[1,2,3,4].map(t=>c(A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},value:t,onClick:()=>s({lines:yt(Z,t)}),children:[e(v,{whiteSpace:"nowrap",children:a("sub",{count:t})}),e(T,{label:ke[t],size:"small"})]},t))}),e(pt,{totals:Ae,substatKeys:C,setSubstatKeys:t=>s({substats:t})})]})]})]}),c(F,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[c(v,{p:1,children:[e(_,{t:a,i18nKey:"subheadings.inventory"}),c(w,{spacing:1,children:[e(L,{sx:{bgcolor:q.palette.contentNormal.light}}),e(I,{fullWidth:!0,value:g,size:"small",children:X.map((t,p)=>c(A,{value:t,sx:{display:"flex",gap:1},onClick:()=>s({locked:xt(g,t)}),children:[p?e(tt,{}):e(at,{}),e(_,{i18nKey:`ui:${t}`,t:a}),e(T,{label:Ke[p?"unlocked":"locked"],size:"small"})]},t))}),c(Q,{startIcon:e(De,{}),color:n?"success":"secondary",onClick:()=>s({showInventory:!n}),children:[a`artInInv`," ",e(T,{sx:{ml:1},label:D.unequipped,size:"small"})]}),c(Q,{startIcon:e(Ce,{}),color:f?"success":"secondary",onClick:()=>s({showEquipped:!f}),children:[a`equippedArt`," ",e(T,{sx:{ml:1},label:D.equipped,size:"small"})]})]}),e(w,{spacing:1.5,pt:1.5,children:e(o.Suspense,{fallback:null,children:e(Je,{title:f?a`locationsTooltip`:"",placement:"top",children:e("span",{children:e(mt,{totals:Ie,locations:f?[]:x,setLocations:t=>s({locations:t}),disabled:f})})})})})]}),c(v,{p:1,children:[e(_,{t:a,i18nKey:"subheadings.rollvalue"}),c(w,{spacing:1,children:[e(L,{sx:{bgcolor:q.palette.contentNormal.light}}),e(ht,{showLevelText:!0,rvLow:K,rvHigh:j,useMaxRV:H,switchFilter:t=>s({useMaxRV:t}),setLow:t=>s({rvLow:t}),setHigh:t=>s({rvHigh:t}),setBoth:(t,p)=>s({rvLow:t,rvHigh:p})}),e(ft,{selectedKeys:_e,onChange:t=>V.displayArtifact.set({effFilter:t})})]})]})]})]})}const _t=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));export{St as A,w as S,rt as a,_t as b};
