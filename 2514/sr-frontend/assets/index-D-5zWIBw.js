import{N as b,n as e,q as o,E as m,H as u,X as C,G as x,L as d,r as l,ak as w,$ as f,Y as k}from"./index-DscSh-gh.js";import{u as v,C as D}from"./useForceUpdate-B9Fm6SrV.js";import{u as I,a as S}from"./useInfScroll-CRzzuLcR.js";import{I as T}from"./InfoTooltip-CveDdGOn.js";import{C as E}from"./CardActionArea-vdhzhafy.js";function G({teamId:r,bgTheme:n="light",onClick:i}){const{database:h}=b(),t=h.combos.get(r);return e(d,{bgt:n,sx:{height:"100%",border:"1px rgba(200,200,200,0.4) solid"},children:o(m,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(m,{sx:{display:"flex",flexDirection:"row"},children:e(E,{onClick:()=>i(),sx:{p:1},children:o(u,{sx:{display:"flex",gap:1,alignItems:"center"},variant:"h6",children:[e("span",{children:t.name})," ",t.description&&e(T,{title:t.description})]})})}),e(C,{children:e(x,{container:!0,columns:4,gap:1,children:t.comboMetadata.map((c,a)=>c?e(d,{sx:{flexGrow:1},children:e(u,{children:c.characterKey})},a):e(d,{sx:{flexGrow:1},children:e(u,{children:"Empty"})},a))})})]})})}const H={xs:1,sm:2,md:3,lg:3,xl:4},M={xs:5,sm:5,md:10,lg:10,xl:10};function $(){const{database:r}=b(),[n,i]=v();l.useEffect(()=>r.combos.followAny(i),[r,i]);const h=w(),{comboIds:t}=l.useMemo(()=>{const s=r.combos.keys;return n&&{comboIds:s}},[r,n]),c=I(),{numShow:a,setTriggerElement:y}=S(M[c],t.length),g=l.useMemo(()=>t.slice(0,a),[t,a]);return e(l.Suspense,{fallback:e(f,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:o(d,{bgt:"dark",children:[e(D,{title:"Combos"}),o(C,{children:[e(k,{onClick:()=>r.combos.new(),children:"Create Combo"}),o(m,{sx:{overflow:"auto",maxHeight:"50vh"},my:1,display:"flex",flexDirection:"column",gap:1,children:[e(x,{container:!0,spacing:1,columns:H,children:g.map(s=>e(x,{item:!0,xs:1,children:e(G,{teamId:s,onClick:p=>h(`${s}${p?`/${p}`:""}`)})},s))}),t.length!==g.length&&e(f,{ref:s=>{s&&y(s)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})]})})}function P(){return e(m,{sx:{mt:1},children:e($,{})})}export{P as default};
