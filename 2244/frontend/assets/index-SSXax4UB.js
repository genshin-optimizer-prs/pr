import{r as u,br as j,bs as E,bt as P,bu as R,bv as U,bw as K,j as D,bx as H,by as V,bz as _,bA as st,bB as ne,bC as nt,c as ot,bD as it,v as lt,w as ct,a as ve,bE as xe,z as ee,bF as ke,bG as J,aI as Te,d as b,O as F,b as e,bc as Q,aT as I,az as W,bH as X,bI as we,bk as Ce,S as z,f as T,X as A,bJ as Re,bK as Me,ai as be,bg as Y,bL as ye,K as dt,L as pt,bM as Se,bN as ze,aB as ut,bO as ht,M as bt,bP as yt,bQ as Pe,aj as je,ak as Ee,G as $,h as Z,al as Ue,T as O,bR as gt,b0 as Ke,ae as Ve,bS as se,g as Fe,bT as mt,V as ft,Y as pe,H as oe,bU as vt,aH as Ge,I as B,bV as qe,bW as xt,bX as Je,bY as Tt,bZ as wt,b_ as Ct,b$ as St,c0 as ae,c1 as $t,c2 as kt,c3 as Rt,c4 as Qe,c5 as Xe,c6 as Ye,c7 as ie,c8 as Mt,c9 as fe,ca as ge,b6 as Lt,cb as Le,cc as Dt,cd as Ot,ce as Nt,P as Bt,cf as _t,Z as At,W as It,U as Wt,N as Ht,cg as zt,ch as re,ci as Pt}from"./index-D_w1AWvd.js";const jt=u.createContext(),Ze=jt;function Et(t){return j("MuiTable",t)}E("MuiTable",["root","stickyHeader"]);const Ut=["className","component","padding","size","stickyHeader"],Kt=t=>{const{classes:a,stickyHeader:o}=t;return V({root:["root",o&&"stickyHeader"]},Et,a)},Vt=P("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>R({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":R({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),De="table",Ft=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTable"}),{className:c,component:i=De,padding:h="normal",size:r="medium",stickyHeader:l=!1}=n,y=K(n,Ut),g=R({},n,{component:i,padding:h,size:r,stickyHeader:l}),m=Kt(g),k=u.useMemo(()=>({padding:h,size:r,stickyHeader:l}),[h,r,l]);return D.jsx(Ze.Provider,{value:k,children:D.jsx(Vt,R({as:i,role:i===De?null:"table",ref:o,className:H(m.root,c),ownerState:g},y))})}),le=Ft,Gt=u.createContext(),ue=Gt;function qt(t){return j("MuiTableBody",t)}E("MuiTableBody",["root"]);const Jt=["className","component"],Qt=t=>{const{classes:a}=t;return V({root:["root"]},qt,a)},Xt=P("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),Yt={variant:"body"},Oe="tbody",Zt=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTableBody"}),{className:c,component:i=Oe}=n,h=K(n,Jt),r=R({},n,{component:i}),l=Qt(r);return D.jsx(ue.Provider,{value:Yt,children:D.jsx(Xt,R({className:H(l.root,c),as:i,ref:o,role:i===Oe?null:"rowgroup",ownerState:r},h))})}),ce=Zt;function ea(t){return j("MuiTableCell",t)}const ta=E("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),aa=ta,ra=["align","className","component","padding","scope","size","sortDirection","variant"],sa=t=>{const{classes:a,variant:o,align:n,padding:c,size:i,stickyHeader:h}=t,r={root:["root",o,h&&"stickyHeader",n!=="inherit"&&`align${_(n)}`,c!=="normal"&&`padding${_(c)}`,`size${_(i)}`]};return V(r,ea,a)},na=P("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant],a[`size${_(o.size)}`],o.padding!=="normal"&&a[`padding${_(o.padding)}`],o.align!=="inherit"&&a[`align${_(o.align)}`],o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>R({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?st(ne(t.palette.divider,1),.88):nt(ne(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},a.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},a.variant==="body"&&{color:(t.vars||t).palette.text.primary},a.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},a.size==="small"&&{padding:"6px 16px",[`&.${aa.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},a.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},a.padding==="none"&&{padding:0},a.align==="left"&&{textAlign:"left"},a.align==="center"&&{textAlign:"center"},a.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},a.align==="justify"&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),oa=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTableCell"}),{align:c="inherit",className:i,component:h,padding:r,scope:l,size:y,sortDirection:g,variant:m}=n,k=K(n,ra),C=u.useContext(Ze),x=u.useContext(ue),d=x&&x.variant==="head";let w;h?w=h:w=d?"th":"td";let S=l;w==="td"?S=void 0:!S&&d&&(S="col");const p=m||x&&x.variant,s=R({},n,{align:c,component:w,padding:r||(C&&C.padding?C.padding:"normal"),size:y||(C&&C.size?C.size:"medium"),sortDirection:g,stickyHeader:p==="head"&&C&&C.stickyHeader,variant:p}),f=sa(s);let M=null;return g&&(M=g==="asc"?"ascending":"descending"),D.jsx(na,R({as:w,ref:o,className:H(f.root,i),"aria-sort":M,scope:S,ownerState:s},k))}),v=oa;function ia(t){return j("MuiTableHead",t)}E("MuiTableHead",["root"]);const la=["className","component"],ca=t=>{const{classes:a}=t;return V({root:["root"]},ia,a)},da=P("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),pa={variant:"head"},Ne="thead",ua=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTableHead"}),{className:c,component:i=Ne}=n,h=K(n,la),r=R({},n,{component:i}),l=ca(r);return D.jsx(ue.Provider,{value:pa,children:D.jsx(da,R({as:i,className:H(l.root,c),ref:o,role:i===Ne?null:"rowgroup",ownerState:r},h))})}),de=ua;function ha(t){return j("MuiTableRow",t)}const ba=E("MuiTableRow",["root","selected","hover","head","footer"]),Be=ba,ya=["className","component","hover","selected"],ga=t=>{const{classes:a,selected:o,hover:n,head:c,footer:i}=t;return V({root:["root",o&&"selected",n&&"hover",c&&"head",i&&"footer"]},ha,a)},ma=P("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.head&&a.head,o.footer&&a.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Be.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Be.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:ne(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:ne(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),_e="tr",fa=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTableRow"}),{className:c,component:i=_e,hover:h=!1,selected:r=!1}=n,l=K(n,ya),y=u.useContext(ue),g=R({},n,{component:i,hover:h,selected:r,head:y&&y.variant==="head",footer:y&&y.variant==="footer"}),m=ga(g);return D.jsx(ma,R({as:i,ref:o,className:H(m.root,c),role:i===_e?null:"row",ownerState:g},l))}),L=fa,va=ot(D.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function xa(t){return j("MuiTableSortLabel",t)}const Ta=E("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),me=Ta,wa=["active","children","className","direction","hideSortIcon","IconComponent"],Ca=t=>{const{classes:a,direction:o,active:n}=t,c={root:["root",n&&"active"],icon:["icon",`iconDirection${_(o)}`]};return V(c,xa,a)},Sa=P(it,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.active&&a.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${me.icon}`]:{opacity:.5}},[`&.${me.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${me.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),$a=P("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.icon,a[`iconDirection${_(o.direction)}`]]}})(({theme:t,ownerState:a})=>R({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},a.direction==="desc"&&{transform:"rotate(0deg)"},a.direction==="asc"&&{transform:"rotate(180deg)"})),ka=u.forwardRef(function(a,o){const n=U({props:a,name:"MuiTableSortLabel"}),{active:c=!1,children:i,className:h,direction:r="asc",hideSortIcon:l=!1,IconComponent:y=va}=n,g=K(n,wa),m=R({},n,{active:c,direction:r,hideSortIcon:l,IconComponent:y}),k=Ca(m);return D.jsxs(Sa,R({className:H(k.root,h),component:"span",disableRipple:!0,ownerState:m,ref:o},g,{children:[i,l&&!c?null:D.jsx($a,{as:y,className:H(k.icon),ownerState:m})]}))}),et=ka;var $e={},Ra=ct;Object.defineProperty($e,"__esModule",{value:!0});var he=$e.default=void 0,Ma=Ra(lt()),La=D,Da=(0,Ma.default)((0,La.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");he=$e.default=Da;const Ae=[5,4,3];function Oa(){const t=ve(),a=xe(t.displayArchive),[o,n]=u.useState(""),c=u.useDeferredValue(o),i=Y([...Ae]),{t:h}=ee(ke.map(d=>`artifact_${d}_gen`)),{artifact:r}=a,l=u.useCallback(d=>t.displayArchive.set({artifact:{...r,...d}}),[t,r]),y=u.useMemo(()=>ke.filter(d=>{const{rarities:w}=ye(d);if(!r.rarity.includes(Math.max(...w)))return!1;const S=J.t(`artifactNames_gen:${d}`).toLocaleLowerCase(),p=h("setEffects.4",{ns:`artifact_${d}_gen`}).toLocaleLowerCase(),s=h("setEffects.2",{ns:`artifact_${d}_gen`}).toLocaleLowerCase();return!(c&&!S.includes(c.toLocaleLowerCase())&&!s.includes(c.toLocaleLowerCase())&&!p.includes(c.toLocaleLowerCase()))}),[r,c,h]),g=u.useMemo(()=>y.filter(d=>!d.startsWith("Prayers")),[y]),m=u.useMemo(()=>y.filter(d=>d.startsWith("Prayers")),[y]),{numShow:k,setTriggerElement:C}=Te(10,g.length),x=u.useMemo(()=>g.slice(0,k),[g,k]);return b(T,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:Ae.map(d=>e(Q,{value:d,onClick:()=>l({rarity:i(r.rarity,d)}),children:e(I,{color:`rarity${d}`,children:e(W,{sx:{verticalAlign:"text-top"}})})},d))}),e(Ce,{fullWidth:!0,variant:"outlined",value:o,onChange:d=>n(d.target.value),InputProps:{startAdornment:e(we,{position:"start",children:e(he,{})})}})]}),b(le,{children:[e(de,{children:b(L,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"2-piece Bonus"}),e(v,{children:"4-piece Bonus"})]})}),b(ce,{children:[x.map(d=>{const{rarities:w}=ye(d);return e(u.Suspense,{fallback:e(L,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:b(L,{children:[e(v,{children:b(T,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:Re(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(T,{display:"flex",children:w.sort().reverse().map(S=>e(I,{color:`rarity${S}`,children:e(W,{})},S))})}),e(v,{children:e(be,{ns:`artifact_${d}_gen`,key18:"setEffects.2"})}),e(v,{children:e(be,{ns:`artifact_${d}_gen`,key18:"setEffects.4"})})]},d)})}),g.length!==x.length&&e(L,{children:e(v,{colSpan:4,children:e(z,{ref:d=>{d&&C(d)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]}),m.length!==0&&b(le,{sx:{mt:2},children:[e(de,{children:b(L,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"1-piece Bonus"})]})}),e(ce,{children:m.map(d=>{const{rarities:w}=ye(d);return b(L,{children:[e(v,{children:b(T,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:Re(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(T,{display:"flex",children:w.sort().reverse().map(S=>e(I,{color:`rarity${S}`,children:e(W,{})},S))})}),e(v,{width:"90%",children:e(be,{ns:`artifact_${d}_gen`,key18:"setEffects.1"})})]},d)})})]})]})}const G={xs:12,sm:6,md:4};function Na({show:t,character:a,onClose:o}){const{t:n}=ee("sheet_gen"),c=dt(),i=pt(c.breakpoints.up("lg")),{key:h,constellation:r,ascension:l}=a,{gender:y}=Se(),g=ze(h,y),m=[["auto",n("talents.auto")],["skill",n("talents.skill")],["burst",n("talents.burst")]],k=[["passive1",n("unlockPassive1"),1],["passive2",n("unlockPassive2"),4],["passive3",n("unlockPassive3"),0]],C=u.useMemo(()=>ut(1,ht).map(x=>e(q,{characterKey:h,talentKey:`constellation${x}`,subtitle:n("constellationLvl",{level:x})})),[n,h]);return e(Ue,{open:t,onClose:o,containerProps:{maxWidth:"xl"},children:b(Z,{children:[e(bt,{title:b(T,{children:[e(yt,{characterKey:h,sideMargin:!0}),e(T,{sx:{pl:1},component:"span",children:e(Pe,{characterKey:h,gender:y})})]}),action:e(je,{onClick:o,children:e(Ee,{})})}),e(F,{children:b($,{container:!0,spacing:1,children:[i&&e($,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:C.map((x,d)=>e(T,{sx:{opacity:r>=d+1?1:.5},children:x},d))}),b($,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[m.map(([x,d])=>e($,{item:!0,...G,children:e(q,{characterKey:h,talentKey:x,subtitle:d})},x)),!!g.getTalentOfKey("sprint")&&e($,{item:!0,...G,children:e(q,{characterKey:h,talentKey:"sprint",subtitle:n("talents.altSprint")})}),!!g.getTalentOfKey("passive")&&e($,{item:!0,...G,children:e(q,{characterKey:h,talentKey:"passive",subtitle:"Passive"})}),k.map(([x,d,w])=>{const S=l>=w;return g.getTalentOfKey(x)?e($,{item:!0,style:{opacity:S?1:.5},...G,children:e(q,{characterKey:h,talentKey:x,subtitle:d})},x):null})]}),!i&&e($,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:C.map((x,d)=>e($,{item:!0,sx:{opacity:r>=d+1?1:.5},...G,children:x},d))})]})})]})})}function q({characterKey:t,talentKey:a,subtitle:o}){const{gender:n}=Se(),i=ze(t,n).getTalentOfKey(a);return e(Z,{bgt:"light",sx:{height:"100%"},children:b(F,{children:[b($,{container:!0,sx:{flexWrap:"nowrap"},children:[e($,{item:!0,children:e(T,{component:"img",src:i==null?void 0:i.img,sx:{width:60,height:"auto"}})}),b($,{item:!0,flexGrow:1,sx:{pl:1},children:[e(O,{variant:"h6",children:i==null?void 0:i.name}),e(O,{variant:"subtitle1",children:o})]})]}),i!=null&&i.sections?e(gt,{sections:i.sections,hideDesc:!0}):null]})})}const Ie=[5,4];function Ba(){const{silly:t}=u.useContext(Ke),a=ve(),o=xe(a.displayArchive),n=Y([...Ie]),c=Y([...oe]),[i,h]=u.useState(""),r=u.useDeferredValue(i),{character:l}=o,y=u.useCallback(p=>a.displayArchive.set({character:{...l,...p}}),[a,l]),g=u.useMemo(()=>vt.filter(p=>{const{rarity:s,weaponType:f}=se(p);if(!l.rarity.includes(s)||!l.weaponType.includes(f))return!1;const M=J.t(`charNames_gen:${p}`),N=t&&J.exists(`sillyWisher_charNames:${p}`)?J.t(`sillyWisher_charNames:${p}`):"";return!(r&&!M.toLocaleLowerCase().includes(r.toLocaleLowerCase())&&!N.toLocaleLowerCase().includes(r.toLocaleLowerCase()))}),[l,r,t]),{numShow:m,setTriggerElement:k}=Te(10,g.length),C=p=>{const s=l.sortOrderBy===p&&l.sortOrder==="asc";y({sortOrder:s?"desc":"asc",sortOrderBy:p})},{t:x}=ee("charNames_gen"),d=u.useMemo(()=>Ge([l.sortOrderBy],l.sortOrder==="asc",{name:p=>x(p),rarity:p=>se(p).rarity,element:p=>Fe(p),type:p=>se(p).weaponType}),[l.sortOrder,l.sortOrderBy,x]),w=u.useMemo(()=>g.sort(d).slice(0,m),[g,m,d]),S=[{key:"name",label:"Name",width:40},{key:"rarity",label:"Rarity",width:20},{key:"element",label:"Element",width:20},{key:"type",label:"Type",width:20}];return b(T,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:l.rarity,children:Ie.map(p=>e(Q,{value:p,onClick:()=>y({rarity:n(l.rarity,p)}),children:e(I,{color:`rarity${p}`,children:e(W,{sx:{verticalAlign:"text-top"}})})},p))}),e(X,{value:l.weaponType,children:oe.map(p=>{var s;return e(Q,{value:p,onClick:()=>y({weaponType:c(l.weaponType,p)}),children:e(A,{src:(s=pe.weaponTypes)==null?void 0:s[p],size:2})},p)})}),e(Ce,{fullWidth:!0,variant:"outlined",value:i,onChange:p=>h(p.target.value),InputProps:{startAdornment:e(we,{position:"start",children:e(he,{})})}})]}),b(le,{children:[e(de,{children:e(L,{children:S.map(({key:p,label:s,width:f})=>e(v,{sortDirection:l.sortOrderBy===p?l.sortOrder:!1,width:`${f}%`,children:e(et,{active:l.sortOrderBy===p,direction:l.sortOrderBy===p?l.sortOrder:"asc",onClick:()=>C(p),children:s})}))})}),b(ce,{children:[w.map(p=>e(_a,{characterKey:p},p)),w.length!==g.length&&e(L,{children:e(v,{colSpan:5,children:e(z,{ref:p=>{p&&k(p)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const _a=u.memo(function({characterKey:a}){var m;const{silly:o}=u.useContext(Ke),{gender:n}=Se(),[c,i,h]=Ve(),{rarity:r,weaponType:l}=se(a),y=Fe(a),g=u.useMemo(()=>({key:a,level:90,ascension:6,constellation:6,talent:{auto:10,skill:10,burst:10}}),[a]);return b(u.Suspense,{fallback:e(L,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(Na,{show:c,character:g,onClose:h}),b(L,{hover:!0,onClick:i,sx:{cursor:"pointer"},children:[e(v,{children:b(T,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:mt(a,n,o)}),e(Pe,{characterKey:a,gender:n})]})}),e(v,{children:e(T,{display:"flex",children:e(I,{color:`rarity${r}`,children:e(W,{})})})}),e(v,{children:e(ft,{ele:y,iconProps:{color:y}})}),e(v,{children:e(A,{src:(m=pe.weaponTypes)==null?void 0:m[l],size:3,sideMargin:!0})})]})]})});function Aa({show:t,weaponUIData:a,weapon:o,onClose:n}){const{key:c,level:i=0,refinement:h=1,ascension:r=0}=o,l=c&&B(c),y=c?qe(c,r>=2):"";return e(Ue,{open:t,onClose:n,containerProps:{maxWidth:"md"},children:e(Z,{children:e(F,{children:l&&a&&b($,{container:!0,spacing:1.5,children:[e($,{item:!0,xs:12,sm:3,children:b($,{container:!0,spacing:1.5,children:[e($,{item:!0,xs:6,sm:12,children:e(T,{sx:{position:"relative",display:"flex"},children:e(T,{component:"img",src:y,className:`grad-${l.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})})}),e($,{item:!0,xs:6,sm:12,children:e(O,{children:e("small",{children:c&&e(xt,{weaponKey:c})})})})]})}),b($,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[b(T,{display:"flex",gap:1,flexWrap:"wrap",children:[e(O,{variant:"h5",children:e(Je,{weaponKey:c})}),n&&e(je,{onClick:n,sx:{marginLeft:"auto"},children:e(Ee,{})})]}),b(O,{children:["Lv. ",Tt(i,r)," R",h]}),e(wt,{stars:l.rarity}),e(O,{variant:"subtitle1",children:e("strong",{children:c&&e(Ct,{weaponKey:c})})}),e(O,{gutterBottom:!0,children:c&&e(St,{weaponKey:c,refineIndex:(a.get(ae.weapon.refinement).value??1)-1})}),e(T,{display:"flex",flexDirection:"column",gap:1,children:e(Z,{bgt:"light",children:e($t,{bgt:"light",children:[ae.weapon.main,ae.weapon.sub,ae.weapon.sub2].map(g=>{const m=a.get(g);return m.isEmpty||!m.value?null:e(kt,{calcRes:m,component:Rt},JSON.stringify(m.info))})})})})]})]})})})})}const We=[5,4,3,2,1];function Ia(){const t=ve(),a=xe(t.displayArchive),o=Y([...We]),n=Y([...oe]),[c,i]=u.useState(""),h=u.useDeferredValue(c),{weapon:r}=a,l=u.useCallback(s=>t.displayArchive.set({weapon:{...r,...s}}),[t,r]),y=u.useMemo(()=>ge.filter(s=>{const{rarity:f,subStat:M,weaponType:N}=B(s);if(!r.rarity.includes(f)||r.subStat.length&&(!M||!r.subStat.includes(M.type))||!r.weaponType.includes(N))return!1;const te=J.t(`weaponNames_gen:${s}`);return!(h&&!te.toLocaleLowerCase().includes(h.toLocaleLowerCase()))}),[r,h]),g=s=>{const f=r.sortOrderBy===s&&r.sortOrder==="asc";l({sortOrder:f?"desc":"asc",sortOrderBy:s})},m=u.useMemo(()=>{const s=new Map;return ge.forEach(f=>{const{rarity:M}=B(f),N={id:"invalid",ascension:M>2?6:4,key:f,level:M>2?90:70,refinement:1,location:"",lock:!1},te=Qe([Xe(f).data,Ye(N)]),at=te.get(ie.weapon.main),rt=te.get(ie.weapon.sub);s.set(f,{main:fe(at).valueString,sub:fe(rt).valueString})}),s},[]),{t:k}=ee("weaponNames_gen"),C=u.useMemo(()=>Ge(r.sortOrderBy==="sub"?["subType",r.sortOrderBy]:[r.sortOrderBy],r.sortOrder==="asc",{name:s=>k(`weaponNames_gen:${s}`),type:s=>B(s).weaponType,rarity:s=>B(s).rarity,main:s=>{var f;return((f=m.get(s))==null?void 0:f.main)??""},sub:s=>{var f;return((f=m.get(s))==null?void 0:f.sub)??""},subType:s=>{var f;return((f=B(s).subStat)==null?void 0:f.type)??""}}),[k,r.sortOrder,r.sortOrderBy,m]),{numShow:x,setTriggerElement:d}=Te(10,y.length),w=u.useMemo(()=>y.sort(C).slice(0,x),[y,C,x]),S=u.useMemo(()=>Lt(Le,s=>ge.forEach(f=>{const{subStat:M}=B(f);if(!M)return;const{type:N}=M;s[N].total++,y.includes(f)&&s[N].current++})),[y]),p=[{key:"name",label:"Name",width:30},{key:"type",label:"Type",width:10},{key:"rarity",label:"Rarity",width:10},{key:"main",label:"Main",width:20},{key:"sub",label:"Secondary",width:30}];return b(T,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:We.map(s=>e(Q,{value:s,onClick:()=>l({rarity:o(r.rarity,s)}),children:e(I,{color:`rarity${s}`,children:e(W,{sx:{verticalAlign:"text-top"}})})},s))}),e(X,{value:r.weaponType,children:oe.map(s=>{var f;return e(Q,{value:s,onClick:()=>l({weaponType:n(r.weaponType,s)}),children:e(A,{src:(f=pe.weaponTypes)==null?void 0:f[s],size:2})},s)})}),e(Dt,{fullWidth:!0,substatKeys:r.subStat,setSubstatKeys:s=>{l({subStat:s})},totals:S,allSubstatKeys:[...Le]}),e(Ce,{fullWidth:!0,variant:"outlined",value:c,onChange:s=>i(s.target.value),InputProps:{startAdornment:e(we,{position:"start",children:e(he,{})})}})]}),b(le,{children:[e(de,{children:e(L,{children:p.map(({key:s,label:f,width:M})=>e(v,{sortDirection:r.sortOrderBy===s?r.sortOrder:!1,width:`${M}%`,children:e(et,{active:r.sortOrderBy===s,direction:r.sortOrderBy===s?r.sortOrder:"asc",onClick:()=>g(s),children:f})}))})}),b(ce,{children:[w.map(s=>e(Wa,{weaponKey:s},s)),y.length!==w.length&&e(L,{children:e(v,{colSpan:5,children:e(z,{ref:s=>{s&&d(s)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Wa=u.memo(function({weaponKey:a}){var m;const[o,n,c]=Ve(),{rarity:i,weaponType:h}=B(a),r=u.useMemo(()=>({id:"invalid",ascension:i>2?6:4,key:a,level:i>2?90:70,refinement:1,location:"",lock:!1}),[i,a]),l=u.useMemo(()=>Qe([Xe(a).data,Ye(r)]),[a,r]),y=l.get(ie.weapon.main),g=l.get(ie.weapon.sub);return b(u.Suspense,{fallback:e(L,{children:e(v,{colSpan:5,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(Aa,{show:o,weaponUIData:l,weapon:r,onClose:c}),b(L,{hover:!0,onClick:n,sx:{cursor:"pointer"},children:[e(v,{children:b(T,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:qe(a,!0)}),e(Je,{weaponKey:a})]})}),e(v,{children:e(A,{src:(m=pe.weaponTypes)==null?void 0:m[h],size:3,sideMargin:!0})}),e(v,{children:e(T,{display:"flex",children:e(I,{color:`rarity${i}`,children:e(W,{})})})}),e(v,{children:e(He,{node:y})}),e(v,{children:e(He,{node:g})})]})]})});function He({node:t}){const{name:a,icon:o}=Mt(t.info);return Number.isNaN(t.value)?null:b(T,{sx:{display:"flex"},children:[b(O,{flexGrow:1,children:[o," ",a]}),e(O,{children:fe(t).valueString})]})}const Ha={i18Key:"tabs.artifacts",icon:e(At,{}),value:"artifacts",to:"/artifacts"},za={i18Key:"tabs.weapons",icon:e(It,{}),value:"weapons",to:"/weapons"},Pa={i18Key:"tabs.characters",icon:e(Wt,{}),value:"characters",to:"/characters"},tt=[Ha,za,Pa],ja=tt.map(({value:t})=>t);function Ua(){const{t}=ee("ui"),{params:{tab:a}}=Ot({path:"/archive/:tab",end:!1})??{params:{}},o=u.useMemo(()=>ja.find(c=>c===a)??"artifacts",[a]);return b(Z,{children:[e(_t,{variant:"fullWidth",value:o,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px"}},children:tt.map(({i18Key:n,icon:c,value:i,to:h})=>e(Nt,{icon:c,iconPosition:"start",value:i,label:t(n),component:Bt,to:`/archive${h}`},i))}),e(Ht,{}),e(u.Suspense,{fallback:e(z,{variant:"rectangular",width:"100%",height:1e3}),children:b(zt,{children:[e(re,{path:"artifacts",element:e(Oa,{})}),e(re,{path:"weapons",element:e(Ia,{})}),e(re,{path:"characters",element:e(Ba,{})}),e(re,{path:"*",element:e(Pt,{to:"artifacts",replace:!0})})]})})]})}export{Ua as default};
