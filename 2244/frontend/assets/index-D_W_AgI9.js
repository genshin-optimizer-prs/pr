import{r as u,br as j,bs as E,bt as z,bu as $,bv as U,bw as K,j as M,bx as H,by as V,bz as I,bA as tt,bB as re,bC as at,c as rt,bD as st,v as nt,w as ot,a as me,bE as ve,z as ce,bF as Re,bG as J,aI as xe,d as b,O as F,b as e,bc as Q,aT as W,az as B,bH as X,bI as Te,bk as Ce,S as O,f as x,X as A,bJ as $e,bK as ke,ai as he,bg as Y,bL as be,K as it,L as lt,bM as we,bN as Oe,aB as ct,bO as dt,M as pt,bP as ut,bQ as ze,aj as Pe,ak as je,G as S,h as Z,al as Ee,T as D,bR as ht,b0 as Ue,ae as Ke,bS as Ve,g as bt,bT as gt,V as yt,Y as de,H as se,bU as ft,I as _,bV as Fe,bW as mt,bX as Ge,bY as vt,bZ as xt,b_ as Tt,b$ as Ct,c0 as te,c1 as wt,c2 as St,c3 as Rt,c4 as qe,c5 as Je,c6 as Qe,c7 as ne,c8 as $t,c9 as fe,ca as ge,aH as kt,b6 as Mt,cb as Me,cc as Lt,cd as Dt,ce as Nt,P as _t,cf as It,Z as At,W as Wt,U as Bt,N as Ht,cg as Ot,ch as ae,ci as zt}from"./index--leCPocW.js";const Pt=u.createContext(),Xe=Pt;function jt(t){return j("MuiTable",t)}E("MuiTable",["root","stickyHeader"]);const Et=["className","component","padding","size","stickyHeader"],Ut=t=>{const{classes:a,stickyHeader:n}=t;return V({root:["root",n&&"stickyHeader"]},jt,a)},Kt=z("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>$({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":$({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),Le="table",Vt=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTable"}),{className:c,component:o=Le,padding:p="normal",size:r="medium",stickyHeader:h=!1}=s,g=K(s,Et),f=$({},s,{component:o,padding:p,size:r,stickyHeader:h}),m=Ut(f),R=u.useMemo(()=>({padding:p,size:r,stickyHeader:h}),[p,r,h]);return M.jsx(Xe.Provider,{value:R,children:M.jsx(Kt,$({as:o,role:o===Le?null:"table",ref:n,className:H(m.root,c),ownerState:f},g))})}),oe=Vt,Ft=u.createContext(),pe=Ft;function Gt(t){return j("MuiTableBody",t)}E("MuiTableBody",["root"]);const qt=["className","component"],Jt=t=>{const{classes:a}=t;return V({root:["root"]},Gt,a)},Qt=z("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),Xt={variant:"body"},De="tbody",Yt=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTableBody"}),{className:c,component:o=De}=s,p=K(s,qt),r=$({},s,{component:o}),h=Jt(r);return M.jsx(pe.Provider,{value:Xt,children:M.jsx(Qt,$({className:H(h.root,c),as:o,ref:n,role:o===De?null:"rowgroup",ownerState:r},p))})}),ie=Yt;function Zt(t){return j("MuiTableCell",t)}const ea=E("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ta=ea,aa=["align","className","component","padding","scope","size","sortDirection","variant"],ra=t=>{const{classes:a,variant:n,align:s,padding:c,size:o,stickyHeader:p}=t,r={root:["root",n,p&&"stickyHeader",s!=="inherit"&&`align${I(s)}`,c!=="normal"&&`padding${I(c)}`,`size${I(o)}`]};return V(r,Zt,a)},sa=z("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,a[n.variant],a[`size${I(n.size)}`],n.padding!=="normal"&&a[`padding${I(n.padding)}`],n.align!=="inherit"&&a[`align${I(n.align)}`],n.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>$({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?tt(re(t.palette.divider,1),.88):at(re(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},a.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},a.variant==="body"&&{color:(t.vars||t).palette.text.primary},a.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},a.size==="small"&&{padding:"6px 16px",[`&.${ta.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},a.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},a.padding==="none"&&{padding:0},a.align==="left"&&{textAlign:"left"},a.align==="center"&&{textAlign:"center"},a.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},a.align==="justify"&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),na=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTableCell"}),{align:c="inherit",className:o,component:p,padding:r,scope:h,size:g,sortDirection:f,variant:m}=s,R=K(s,aa),T=u.useContext(Xe),d=u.useContext(pe),i=d&&d.variant==="head";let C;p?C=p:C=i?"th":"td";let w=h;C==="td"?w=void 0:!w&&i&&(w="col");const N=m||d&&d.variant,l=$({},s,{align:c,component:C,padding:r||(T&&T.padding?T.padding:"normal"),size:g||(T&&T.size?T.size:"medium"),sortDirection:f,stickyHeader:N==="head"&&T&&T.stickyHeader,variant:N}),v=ra(l);let L=null;return f&&(L=f==="asc"?"ascending":"descending"),M.jsx(sa,$({as:C,ref:n,className:H(v.root,o),"aria-sort":L,scope:w,ownerState:l},R))}),y=na;function oa(t){return j("MuiTableHead",t)}E("MuiTableHead",["root"]);const ia=["className","component"],la=t=>{const{classes:a}=t;return V({root:["root"]},oa,a)},ca=z("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),da={variant:"head"},Ne="thead",pa=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTableHead"}),{className:c,component:o=Ne}=s,p=K(s,ia),r=$({},s,{component:o}),h=la(r);return M.jsx(pe.Provider,{value:da,children:M.jsx(ca,$({as:o,className:H(h.root,c),ref:n,role:o===Ne?null:"rowgroup",ownerState:r},p))})}),le=pa;function ua(t){return j("MuiTableRow",t)}const ha=E("MuiTableRow",["root","selected","hover","head","footer"]),_e=ha,ba=["className","component","hover","selected"],ga=t=>{const{classes:a,selected:n,hover:s,head:c,footer:o}=t;return V({root:["root",n&&"selected",s&&"hover",c&&"head",o&&"footer"]},ua,a)},ya=z("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.head&&a.head,n.footer&&a.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${_e.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${_e.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:re(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:re(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),Ie="tr",fa=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTableRow"}),{className:c,component:o=Ie,hover:p=!1,selected:r=!1}=s,h=K(s,ba),g=u.useContext(pe),f=$({},s,{component:o,hover:p,selected:r,head:g&&g.variant==="head",footer:g&&g.variant==="footer"}),m=ga(f);return M.jsx(ya,$({as:o,ref:n,className:H(m.root,c),role:o===Ie?null:"row",ownerState:f},h))}),k=fa,ma=rt(M.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function va(t){return j("MuiTableSortLabel",t)}const xa=E("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),ye=xa,Ta=["active","children","className","direction","hideSortIcon","IconComponent"],Ca=t=>{const{classes:a,direction:n,active:s}=t,c={root:["root",s&&"active"],icon:["icon",`iconDirection${I(n)}`]};return V(c,va,a)},wa=z(st,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.active&&a.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${ye.icon}`]:{opacity:.5}},[`&.${ye.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${ye.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),Sa=z("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.icon,a[`iconDirection${I(n.direction)}`]]}})(({theme:t,ownerState:a})=>$({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},a.direction==="desc"&&{transform:"rotate(0deg)"},a.direction==="asc"&&{transform:"rotate(180deg)"})),Ra=u.forwardRef(function(a,n){const s=U({props:a,name:"MuiTableSortLabel"}),{active:c=!1,children:o,className:p,direction:r="asc",hideSortIcon:h=!1,IconComponent:g=ma}=s,f=K(s,Ta),m=$({},s,{active:c,direction:r,hideSortIcon:h,IconComponent:g}),R=Ca(m);return M.jsxs(wa,$({className:H(R.root,p),component:"span",disableRipple:!0,ownerState:m,ref:n},f,{children:[o,h&&!c?null:M.jsx(Sa,{as:g,className:H(R.icon),ownerState:m})]}))}),$a=Ra;var Se={},ka=ot;Object.defineProperty(Se,"__esModule",{value:!0});var ue=Se.default=void 0,Ma=ka(nt()),La=M,Da=(0,Ma.default)((0,La.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");ue=Se.default=Da;const Ae=[5,4,3];function Na(){const t=me(),a=ve(t.displayArchive),[n,s]=u.useState(""),c=u.useDeferredValue(n),o=Y([...Ae]),{t:p}=ce(Re.map(i=>`artifact_${i}_gen`)),{artifact:r}=a,h=u.useCallback(i=>t.displayArchive.set({artifact:{...r,...i}}),[t,r]),g=u.useMemo(()=>Re.filter(i=>{const{rarities:C}=be(i);if(!r.rarity.includes(Math.max(...C)))return!1;const w=J.t(`artifactNames_gen:${i}`).toLocaleLowerCase(),N=p("setEffects.4",{ns:`artifact_${i}_gen`}).toLocaleLowerCase(),l=p("setEffects.2",{ns:`artifact_${i}_gen`}).toLocaleLowerCase();return!(c&&!w.includes(c.toLocaleLowerCase())&&!l.includes(c.toLocaleLowerCase())&&!N.includes(c.toLocaleLowerCase()))}),[r,c,p]),f=u.useMemo(()=>g.filter(i=>!i.startsWith("Prayers")),[g]),m=u.useMemo(()=>g.filter(i=>i.startsWith("Prayers")),[g]),{numShow:R,setTriggerElement:T}=xe(10,f.length),d=u.useMemo(()=>f.slice(0,R),[f,R]);return b(x,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:Ae.map(i=>e(Q,{value:i,onClick:()=>h({rarity:o(r.rarity,i)}),children:e(W,{color:`rarity${i}`,children:e(B,{sx:{verticalAlign:"text-top"}})})},i))}),e(Ce,{fullWidth:!0,variant:"outlined",value:n,onChange:i=>s(i.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(ue,{})})}})]}),b(oe,{children:[e(le,{children:b(k,{children:[e(y,{children:"Set"}),e(y,{children:"Rarity"}),e(y,{children:"2-piece Bonus"}),e(y,{children:"4-piece Bonus"})]})}),b(ie,{children:[d.map(i=>{const{rarities:C}=be(i);return e(u.Suspense,{fallback:e(k,{children:e(y,{colSpan:4,children:e(O,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:b(k,{children:[e(y,{children:b(x,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:$e(i)}),e(ke,{setKey:i})]})}),e(y,{children:e(x,{display:"flex",children:C.sort().reverse().map(w=>e(W,{color:`rarity${w}`,children:e(B,{})},w))})}),e(y,{children:e(he,{ns:`artifact_${i}_gen`,key18:"setEffects.2"})}),e(y,{children:e(he,{ns:`artifact_${i}_gen`,key18:"setEffects.4"})})]},i)})}),f.length!==d.length&&e(k,{children:e(y,{colSpan:4,children:e(O,{ref:i=>{i&&T(i)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]}),m.length!==0&&b(oe,{sx:{mt:2},children:[e(le,{children:b(k,{children:[e(y,{children:"Set"}),e(y,{children:"Rarity"}),e(y,{children:"1-piece Bonus"})]})}),e(ie,{children:m.map(i=>{const{rarities:C}=be(i);return b(k,{children:[e(y,{children:b(x,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:$e(i)}),e(ke,{setKey:i})]})}),e(y,{children:e(x,{display:"flex",children:C.sort().reverse().map(w=>e(W,{color:`rarity${w}`,children:e(B,{})},w))})}),e(y,{width:"90%",children:e(he,{ns:`artifact_${i}_gen`,key18:"setEffects.1"})})]},i)})})]})]})}const G={xs:12,sm:6,md:4};function _a({show:t,character:a,onClose:n}){const{t:s}=ce("sheet_gen"),c=it(),o=lt(c.breakpoints.up("lg")),{key:p,constellation:r,ascension:h}=a,{gender:g}=we(),f=Oe(p,g),m=[["auto",s("talents.auto")],["skill",s("talents.skill")],["burst",s("talents.burst")]],R=[["passive1",s("unlockPassive1"),1],["passive2",s("unlockPassive2"),4],["passive3",s("unlockPassive3"),0]],T=u.useMemo(()=>ct(1,dt).map(d=>e(q,{characterKey:p,talentKey:`constellation${d}`,subtitle:s("constellationLvl",{level:d})})),[s,p]);return e(Ee,{open:t,onClose:n,containerProps:{maxWidth:"xl"},children:b(Z,{children:[e(pt,{title:b(x,{children:[e(ut,{characterKey:p,sideMargin:!0}),e(x,{sx:{pl:1},component:"span",children:e(ze,{characterKey:p,gender:g})})]}),action:e(Pe,{onClick:n,children:e(je,{})})}),e(F,{children:b(S,{container:!0,spacing:1,children:[o&&e(S,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:T.map((d,i)=>e(x,{sx:{opacity:r>=i+1?1:.5},children:d},i))}),b(S,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[m.map(([d,i])=>e(S,{item:!0,...G,children:e(q,{characterKey:p,talentKey:d,subtitle:i})},d)),!!f.getTalentOfKey("sprint")&&e(S,{item:!0,...G,children:e(q,{characterKey:p,talentKey:"sprint",subtitle:s("talents.altSprint")})}),!!f.getTalentOfKey("passive")&&e(S,{item:!0,...G,children:e(q,{characterKey:p,talentKey:"passive",subtitle:"Passive"})}),R.map(([d,i,C])=>{const w=h>=C;return f.getTalentOfKey(d)?e(S,{item:!0,style:{opacity:w?1:.5},...G,children:e(q,{characterKey:p,talentKey:d,subtitle:i})},d):null})]}),!o&&e(S,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:T.map((d,i)=>e(S,{item:!0,sx:{opacity:r>=i+1?1:.5},...G,children:d},i))})]})})]})})}function q({characterKey:t,talentKey:a,subtitle:n}){const{gender:s}=we(),o=Oe(t,s).getTalentOfKey(a);return e(Z,{bgt:"light",sx:{height:"100%"},children:b(F,{children:[b(S,{container:!0,sx:{flexWrap:"nowrap"},children:[e(S,{item:!0,children:e(x,{component:"img",src:o==null?void 0:o.img,sx:{width:60,height:"auto"}})}),b(S,{item:!0,flexGrow:1,sx:{pl:1},children:[e(D,{variant:"h6",children:o==null?void 0:o.name}),e(D,{variant:"subtitle1",children:n})]})]}),o!=null&&o.sections?e(ht,{sections:o.sections,hideDesc:!0}):null]})})}const We=[5,4];function Ia(){const{silly:t}=u.useContext(Ue),a=me(),n=ve(a.displayArchive),s=Y([...We]),c=Y([...se]),[o,p]=u.useState(""),r=u.useDeferredValue(o),{character:h}=n,g=u.useCallback(d=>a.displayArchive.set({character:{...h,...d}}),[a,h]),f=u.useMemo(()=>ft.filter(d=>{const{rarity:i,weaponType:C}=Ve(d);if(!h.rarity.includes(i)||!h.weaponType.includes(C))return!1;const w=J.t(`charNames_gen:${d}`),N=t&&J.exists(`sillyWisher_charNames:${d}`)?J.t(`sillyWisher_charNames:${d}`):"";return!(r&&!w.toLocaleLowerCase().includes(r.toLocaleLowerCase())&&!N.toLocaleLowerCase().includes(r.toLocaleLowerCase()))}),[h,r,t]),{numShow:m,setTriggerElement:R}=xe(10,f.length),T=u.useMemo(()=>f.slice(0,m),[f,m]);return b(x,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:h.rarity,children:We.map(d=>e(Q,{value:d,onClick:()=>g({rarity:s(h.rarity,d)}),children:e(W,{color:`rarity${d}`,children:e(B,{sx:{verticalAlign:"text-top"}})})},d))}),e(X,{value:h.weaponType,children:se.map(d=>{var i;return e(Q,{value:d,onClick:()=>g({weaponType:c(h.weaponType,d)}),children:e(A,{src:(i=de.weaponTypes)==null?void 0:i[d],size:2})},d)})}),e(Ce,{fullWidth:!0,variant:"outlined",value:o,onChange:d=>p(d.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(ue,{})})}})]}),b(oe,{children:[e(le,{children:b(k,{children:[e(y,{children:"Name"}),e(y,{children:"Rarity"}),e(y,{children:"Element"}),e(y,{children:"Type"})]})}),b(ie,{children:[T.map(d=>e(Aa,{characterKey:d},d)),T.length!==f.length&&e(k,{children:e(y,{colSpan:5,children:e(O,{ref:d=>{d&&R(d)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Aa=u.memo(function({characterKey:a}){var m;const{silly:n}=u.useContext(Ue),{gender:s}=we(),[c,o,p]=Ke(),{rarity:r,weaponType:h}=Ve(a),g=bt(a),f=u.useMemo(()=>({key:a,level:90,ascension:6,constellation:6,talent:{auto:10,skill:10,burst:10}}),[a]);return b(u.Suspense,{fallback:e(k,{children:e(y,{colSpan:4,children:e(O,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(_a,{show:c,character:f,onClose:p}),b(k,{hover:!0,onClick:o,sx:{cursor:"pointer"},children:[e(y,{children:b(x,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:gt(a,s,n)}),e(ze,{characterKey:a,gender:s})]})}),e(y,{children:e(x,{display:"flex",children:e(W,{color:`rarity${r}`,children:e(B,{})})})}),e(y,{children:e(yt,{ele:g,iconProps:{color:g}})}),e(y,{children:e(A,{src:(m=de.weaponTypes)==null?void 0:m[h],size:3,sideMargin:!0})})]})]})});function Wa({show:t,weaponUIData:a,weapon:n,onClose:s}){const{key:c,level:o=0,refinement:p=1,ascension:r=0}=n,h=c&&_(c),g=c?Fe(c,r>=2):"";return e(Ee,{open:t,onClose:s,containerProps:{maxWidth:"md"},children:e(Z,{children:e(F,{children:h&&a&&b(S,{container:!0,spacing:1.5,children:[e(S,{item:!0,xs:12,sm:3,children:b(S,{container:!0,spacing:1.5,children:[e(S,{item:!0,xs:6,sm:12,children:e(x,{sx:{position:"relative",display:"flex"},children:e(x,{component:"img",src:g,className:`grad-${h.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})})}),e(S,{item:!0,xs:6,sm:12,children:e(D,{children:e("small",{children:c&&e(mt,{weaponKey:c})})})})]})}),b(S,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[b(x,{display:"flex",gap:1,flexWrap:"wrap",children:[e(D,{variant:"h5",children:e(Ge,{weaponKey:c})}),s&&e(Pe,{onClick:s,sx:{marginLeft:"auto"},children:e(je,{})})]}),b(D,{children:["Lv. ",vt(o,r)," R",p]}),e(xt,{stars:h.rarity}),e(D,{variant:"subtitle1",children:e("strong",{children:c&&e(Tt,{weaponKey:c})})}),e(D,{gutterBottom:!0,children:c&&e(Ct,{weaponKey:c,refineIndex:(a.get(te.weapon.refinement).value??1)-1})}),e(x,{display:"flex",flexDirection:"column",gap:1,children:e(Z,{bgt:"light",children:e(wt,{bgt:"light",children:[te.weapon.main,te.weapon.sub,te.weapon.sub2].map(f=>{const m=a.get(f);return m.isEmpty||!m.value?null:e(St,{calcRes:m,component:Rt},JSON.stringify(m.info))})})})})]})]})})})})}const Be=[5,4,3,2,1];function Ba(){const t=me(),a=ve(t.displayArchive),n=Y([...Be]),s=Y([...se]),[c,o]=u.useState(""),p=u.useDeferredValue(c),{weapon:r}=a,h=u.useCallback(l=>t.displayArchive.set({weapon:{...r,...l}}),[t,r]),g=u.useMemo(()=>ge.filter(l=>{const{rarity:v,subStat:L,weaponType:P}=_(l);if(!r.rarity.includes(v)||r.subStat.length&&(!L||!r.subStat.includes(L.type))||!r.weaponType.includes(P))return!1;const ee=J.t(`weaponNames_gen:${l}`);return!(p&&!ee.toLocaleLowerCase().includes(p.toLocaleLowerCase()))}),[r,p]),f=l=>{const v=r.sortOrderBy===l&&r.sortOrder==="asc";h({sortOrder:v?"desc":"asc",sortOrderBy:l})},m=u.useMemo(()=>{const l=new Map;return ge.forEach(v=>{const{rarity:L}=_(v),P={id:"invalid",ascension:L>2?6:4,key:v,level:L>2?90:70,refinement:1,location:"",lock:!1},ee=qe([Je(v).data,Qe(P)]),Ze=ee.get(ne.weapon.main),et=ee.get(ne.weapon.sub);l.set(v,{main:fe(Ze).valueString,sub:fe(et).valueString})}),l},[]),{t:R}=ce("weaponNames_gen"),T=u.useMemo(()=>kt(r.sortOrderBy==="sub"?["subType",r.sortOrderBy]:[r.sortOrderBy],r.sortOrder==="asc",{name:l=>R(`weaponNames_gen:${l}`),type:l=>_(l).weaponType,rarity:l=>_(l).rarity,main:l=>{var v;return((v=m.get(l))==null?void 0:v.main)??""},sub:l=>{var v;return((v=m.get(l))==null?void 0:v.sub)??""},subType:l=>{var v;return((v=_(l).subStat)==null?void 0:v.type)??""}}),[R,r.sortOrder,r.sortOrderBy,m]),{numShow:d,setTriggerElement:i}=xe(10,g.length),C=u.useMemo(()=>g.sort(T).slice(0,d),[g,T,d]),w=u.useMemo(()=>Mt(Me,l=>ge.forEach(v=>{const{subStat:L}=_(v);if(!L)return;const{type:P}=L;l[P].total++,g.includes(v)&&l[P].current++})),[g]),N=[{key:"name",label:"Name"},{key:"type",label:"Type"},{key:"rarity",label:"Rarity"},{key:"main",label:"Main"},{key:"sub",label:"Secondary"}];return b(x,{children:[b(F,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:Be.map(l=>e(Q,{value:l,onClick:()=>h({rarity:n(r.rarity,l)}),children:e(W,{color:`rarity${l}`,children:e(B,{sx:{verticalAlign:"text-top"}})})},l))}),e(X,{value:r.weaponType,children:se.map(l=>{var v;return e(Q,{value:l,onClick:()=>h({weaponType:s(r.weaponType,l)}),children:e(A,{src:(v=de.weaponTypes)==null?void 0:v[l],size:2})},l)})}),e(Lt,{fullWidth:!0,substatKeys:r.subStat,setSubstatKeys:l=>{h({subStat:l})},totals:w,allSubstatKeys:[...Me]}),e(Ce,{fullWidth:!0,variant:"outlined",value:c,onChange:l=>o(l.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(ue,{})})}})]}),b(oe,{children:[e(le,{children:e(k,{children:N.map(({key:l,label:v})=>e(y,{sortDirection:r.sortOrderBy===l?r.sortOrder:!1,children:e($a,{active:r.sortOrderBy===l,direction:r.sortOrderBy===l?r.sortOrder:"asc",onClick:()=>f(l),children:v})}))})}),b(ie,{children:[C.map(l=>e(Ha,{weaponKey:l},l)),g.length!==C.length&&e(k,{children:e(y,{colSpan:5,children:e(O,{ref:l=>{l&&i(l)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Ha=u.memo(function({weaponKey:a}){var m;const[n,s,c]=Ke(),{rarity:o,weaponType:p}=_(a),r=u.useMemo(()=>({id:"invalid",ascension:o>2?6:4,key:a,level:o>2?90:70,refinement:1,location:"",lock:!1}),[o,a]),h=u.useMemo(()=>qe([Je(a).data,Qe(r)]),[a,r]),g=h.get(ne.weapon.main),f=h.get(ne.weapon.sub);return b(u.Suspense,{fallback:e(k,{children:e(y,{colSpan:5,children:e(O,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(Wa,{show:n,weaponUIData:h,weapon:r,onClose:c}),b(k,{hover:!0,onClick:s,sx:{cursor:"pointer"},children:[e(y,{children:b(x,{sx:{display:"flex",alignItems:"center"},children:[e(A,{size:4,src:Fe(a,!0)}),e(Ge,{weaponKey:a})]})}),e(y,{children:e(A,{src:(m=de.weaponTypes)==null?void 0:m[p],size:3,sideMargin:!0})}),e(y,{children:e(x,{display:"flex",children:e(W,{color:`rarity${o}`,children:e(B,{})})})}),e(y,{children:e(He,{node:g})}),e(y,{children:e(He,{node:f})})]})]})});function He({node:t}){const{name:a,icon:n}=$t(t.info);return Number.isNaN(t.value)?null:b(x,{sx:{display:"flex"},children:[b(D,{flexGrow:1,children:[n," ",a]}),e(D,{children:fe(t).valueString})]})}const Oa={i18Key:"tabs.artifacts",icon:e(At,{}),value:"artifacts",to:"/artifacts"},za={i18Key:"tabs.weapons",icon:e(Wt,{}),value:"weapons",to:"/weapons"},Pa={i18Key:"tabs.characters",icon:e(Bt,{}),value:"characters",to:"/characters"},Ye=[Oa,za,Pa],ja=Ye.map(({value:t})=>t);function Ua(){const{t}=ce("ui"),{params:{tab:a}}=Dt({path:"/archive/:tab",end:!1})??{params:{}},n=u.useMemo(()=>ja.find(c=>c===a)??"artifacts",[a]);return b(Z,{children:[e(It,{variant:"fullWidth",value:n,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px"}},children:Ye.map(({i18Key:s,icon:c,value:o,to:p})=>e(Nt,{icon:c,iconPosition:"start",value:o,label:t(s),component:_t,to:`/archive${p}`},o))}),e(Ht,{}),e(u.Suspense,{fallback:e(O,{variant:"rectangular",width:"100%",height:1e3}),children:b(Ot,{children:[e(ae,{path:"artifacts",element:e(Na,{})}),e(ae,{path:"weapons",element:e(Ba,{})}),e(ae,{path:"characters",element:e(Ia,{})}),e(ae,{path:"*",element:e(zt,{to:"artifacts",replace:!0})})]})})]})}export{Ua as default};
