import{b as $,p as e,cP as st,cQ as rt,cR as it,cS as ct,cT as lt,cU as dt,cV as ut,cW as ht,cX as pt,cY as ft,bv as mt,bt as gt,bc as ue,cn as ne,cZ as vt,cp as ae,c_ as W,cm as oe,cl as A,co as J,c$ as se,u as we,bb as ye,ba as xt,n as r,Q as D,T as p,r as Q,i as Y,j as T,bI as Ie,c as yt,e as d,f as re,d0 as Ct,a4 as St,Z as Dt,d as j,ck as bt,d1 as _t,bd as wt,cc as It,a1 as Bt,K as u,W as Z,t as F,J as G,k as Rt,an as X,aa as Be,b7 as he,bY as Re,q as H,bR as $e,aD as ke,aC as ie,s as $t,C as kt,b8 as Mt,by as Et,b4 as Nt,B as jt,aB as zt,D as Ce,Y as Wt}from"./index-8eba1ac1.js";import{B as U,a as At}from"./Help-7d3ea731.js";import{u as pe,d as Ht,S as Ft,L as Gt,p as Tt,F as Ot,C as ce}from"./StarDisplay-c3afb67e.js";import{i as fe,I as Vt}from"./ColoredText-2539bbe9.js";import{E as Me,s as Ee,J as C,K as w,L as I,M as f,C as B,p as h,N as O,O as V,P as qt,Q as Pt,T as Ne,R as N,V as le,q as Lt,g as K,r as Se,D as Jt,W as Ut,w as je,G as Qt,S as ze,d as Yt,v as Zt,u as De,x as Xt,n as Kt,I as We}from"./index-6594c7f8.js";import{S as E}from"./SqBadge-4c9a487a.js";import{D as q,a as en}from"./FieldDisplay-d06eb0da.js";import{b as tn,g as nn}from"./index-9afebfde.js";import{g as Ae,W as He}from"./index-843eb4ae.js";import{A as Fe}from"./Artifact-d79a0cb7.js";import{S as an}from"./SlotIcon-ad055eac.js";import{u as on}from"./useWeapon-32d9a0ee.js";import{C as ee}from"./CardActionArea-da835556.js";function Ge(t){const n=$();return pe(n.charMeta,t)}function Te(t){const n=$();return pe(n.chars,t)}function sn(t){const n=$();return pe(n.teams,t)}function rn({statKey:t,iconProps:n={}}){switch(t){case"hp":case"hp_":case"base_hp":return e(gt,{...n});case"atk":case"atk_":case"base_atk":return e(mt,{...n});case"def":case"def_":case"base_def":return e(ft,{...n});case"eleMas":return e(pt,{...n});case"critRate_":return e(ht,{...n});case"critDMG_":return e(ut,{...n});case"enerRech_":return e(dt,{...n});case"incHeal_":return e(lt,{...n});case"heal_":return e(ct,{...n});case"cdRed_":return e(it,{...n});case"shield_":return e(rt,{...n});case"stamina":return e(st,{...n})}const a=t.split("_")[0];return ue.includes(a)?e(cn,{ele:a,iconProps:n}):null}function cn({ele:t,iconProps:n={}}){switch(t){case"anemo":return e(se,{...n});case"cryo":return e(J,{...n});case"dendro":return e(A,{...n});case"electro":return e(oe,{...n});case"geo":return e(W,{...n});case"hydro":return e(ae,{...n});case"physical":return e(vt,{...n});case"pyro":return e(ne,{...n})}}function ln({statKey:t,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:c}=we("statKey_gen"),i=ye(t),l=xt(n,ye(t));return r(p,{color:a?`${a}.main`:void 0,...s,children:[e(rn,{statKey:t,iconProps:D})," ",c(t)," ",e("strong",{children:`${o}${l}${i}`})]},t)}function dn({condition:t,wrapper:n,falseWrapper:a,children:o}){return t?n(o):a?a(o):o}var me={},un=Y;Object.defineProperty(me,"__esModule",{value:!0});var Oe=me.default=void 0,hn=un(Q()),pn=T,fn=(0,hn.default)((0,pn.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");Oe=me.default=fn;const Ve=({stars:t=1,colored:n=!1,inline:a=!1})=>e(Ie,{color:n?"warning":void 0,children:[...Array(t).keys()].map((o,s)=>e(Ht,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},s))}),mn=yt(T.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");var ge={},gn=Y;Object.defineProperty(ge,"__esModule",{value:!0});var vn=ge.default=void 0,xn=gn(Q()),yn=T,Cn=(0,xn.default)((0,yn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");vn=ge.default=Cn;const Sn=d.createContext({});function Dn({iconProps:t}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),e(Me,{ele:re[n%re.length],iconProps:t})}const v=t=>e(Ne,{ns:"elementalResonance_gen",key18:t}),de=t=>e(Ne,{ns:"elementalResonance",key18:t}),S=Ee(...re.map(t=>C[t])),qe=Ct(ue,t=>[`${t}_res_`,w(h.charKey,f(C.ele,4,B(.15)),I.info(`${t}_res_`))]),bn={name:v("ProtectiveCanopy.name"),desc:v("ProtectiveCanopy.desc"),icon:r("span",{children:[e(Dn,{iconProps:D})," x4"]}),canShow:t=>t.get(C.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(qe).map(([t,n])=>({node:n}))}]},[_n,wn]=w(h.charKey,f(S,4,f(C.pyro,2,B(.25))),I.info("atk_")),In={name:v("FerventFlames.name"),desc:v("FerventFlames.desc"),icon:r("span",{children:[e(ne,{...D})," ",e(ne,{...D})]}),canShow:t=>t.get(C.pyro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.cryo"),value:-40,unit:"%"},{node:_n}]}]},[Bn,Rn]=w(h.charKey,f(S,4,f(C.hydro,2,B(.25))),I.info("hp_")),$n={name:v("SoothingWater.name"),desc:v("SoothingWater.desc"),icon:r("span",{children:[e(ae,{...D})," ",e(ae,{...D})]}),canShow:t=>t.get(C.hydro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.pyro"),value:-40,unit:"%"},{node:Bn}]}]},Pe=["resonance","ShatteringIce"],Le=O(Pe),[kn,Mn]=w(h.charKey,f(S,4,f(C.cryo,2,V(Le,"on",B(.15)))),I.info("critRate_")),En={name:v("ShatteringIce.name"),desc:v("ShatteringIce.desc"),icon:r("span",{children:[e(J,{...D})," ",e(J,{...D})]}),canShow:t=>t.get(C.cryo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:Pe,value:Le,name:N("enemyAffected.frozenOrCryo"),header:{title:v("ShatteringIce.name"),icon:e(J,{})},states:{on:{fields:[{node:kn}]}}}]},Nn={name:v("HighVoltage.name"),desc:v("HighVoltage.desc"),icon:r("span",{children:[e(oe,{...D})," ",e(oe,{...D})]}),canShow:t=>t.get(C.electro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.hydro"),value:-40,unit:"%"}]}]},[jn,zn]=w(h.charKey,f(S,4,f(C.anemo,2,B(-.15))),I.info("staminaDec_")),[Wn,An]=w(h.charKey,f(S,4,f(C.anemo,2,B(.1))),I.info("moveSPD_")),[Hn,Fn]=w(h.charKey,f(S,4,f(C.anemo,2,B(-.05))),I.info("cdRed_")),Gn={name:v("ImpetuousWinds.name"),desc:v("ImpetuousWinds.desc"),icon:r("span",{children:[e(se,{...D})," ",e(se,{...D})]}),canShow:t=>t.get(C.anemo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{node:jn},{node:Wn},{node:Hn}]}]},Je=["resonance","EnduringRock"],Ue=O(Je),Qe=["resonance","EnduringRockHit"],Ye=O(Qe),[Tn,On]=w(h.charKey,f(S,4,f(C.geo,2,B(.15))),I.info("shield_")),[Vn,qn]=w(h.charKey,f(S,4,f(C.geo,2,V(Ue,"on",B(.15)))),I.info("all_dmg_")),[Pn,Ln]=w(h.charKey,f(S,4,f(C.geo,2,V(Ye,"on",B(-.2)))),I.info("geo_enemyRes_")),Jn={name:v("EnduringRock.name"),desc:v("EnduringRock.desc"),icon:r("span",{children:[e(W,{...D})," ",e(W,{...D})]}),canShow:t=>t.get(C.geo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:v("EnduringRock.desc"),fields:[{node:Tn}]},{teamBuff:!0,path:Je,value:Ue,header:{title:v("EnduringRock.name"),icon:e(W,{})},name:N("protectedByShield"),states:{on:{fields:[{node:Vn}]}}},{teamBuff:!0,path:Qe,value:Ye,header:{title:v("EnduringRock.name"),icon:e(W,{})},name:de("EnduringRock.hitCond"),states:{on:{fields:[{node:Pn},{text:le("duration"),value:15,unit:"s"}]}}}]},Ze=["resonance","SprawlingCanopy2ele"],Xe=O(Ze),Ke=["resonance","SprawlingCanopy3ele"],et=O(Ke),[Un,Qn]=w(h.charKey,f(S,4,f(C.dendro,2,50)),I.info("eleMas")),[Yn,Zn]=w(h.charKey,f(S,4,f(C.dendro,2,V(Xe,"on",30))),I.info("eleMas")),[Xn,Kn]=w(h.charKey,f(S,4,f(C.dendro,2,V(et,"on",20))),I.info("eleMas")),ea={name:v("SprawlingGreenery.name"),desc:v("SprawlingGreenery.desc"),icon:r("span",{children:[e(A,{...D})," ",e(A,{...D})]}),canShow:t=>t.get(C.dendro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:v("SprawlingGreenery.desc"),fields:[{node:Un}]},{teamBuff:!0,path:Ze,value:Xe,header:{title:v("SprawlingGreenery.name"),icon:e(A,{})},name:de("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:Yn},{text:le("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:Ke,value:et,header:{title:v("SprawlingGreenery.name"),icon:e(A,{})},name:de("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:Xn},{text:le("duration"),value:6,unit:"s"}]}}}]},qa=[bn,In,$n,En,Nn,Gn,Jn,ea],ta=qt({teamBuff:{premod:{...St(qe,([t,n])=>n),atk_:wn,hp_:Rn,staminaDec_:zn,moveSPD_:An,cdRed_:Fn,shield_:On,all_dmg_:qn,geo_enemyRes_:Ln,eleMas:Pt(Ee(Qn,Zn,Kn),{pivot:!0})},total:{critRate_:Mn}}});function na(t,n=0,a,o){const s=$(),[c,i]=Dt(),l=d.useDeferredValue(c),{gender:g}=j(),x=d.useMemo(()=>l&&oa(s,t,n,g,a,o),[l,g,t,s,n,a,o]);return d.useEffect(()=>t?s.chars.follow(t,i):void 0,[t,i,s]),x}class aa{constructor(n){this.data={},n.chars.followAny(a=>{this.removeData(a)})}getData(n){return this.data[n]}cacheData(n,a){this.data[n]=a}removeData(n){delete this.data[n]}}const te=new Map,be=t=>{if(te.has(t))return te.get(t);const n=new aa(t);return te.set(t,n),n};function oa(t,n,a=0,o,s,c){if(!n)return;if(!a&&!s&&!c){const m=be(t).getData(n);if(m)return m}const{teamData:i,teamBundle:l}=sa(t,n,a,s,c)??{};if(!i||!l)return;const g=Lt(i,o,n),x=bt(g,(m,b)=>{const{data:y,..._}=l[b];return{...m,..._}});return!a&&!s&&!c&&be(t).cacheData(n,x),x}function sa(t,n,a=0,o,s){if(!n)return;const c=t.chars.get(n);if(!c)return;const i=ra(t,!0,a,c,s||(t.weapons.get(c.equippedWeapon)??_t()),o??Object.values(c.equippedArtifacts).map(x=>t.arts.get(x)).filter(x=>x));if(!i)return;const l={[n]:i};return{teamData:{[n]:i.data},teamBundle:l}}function ra(t,n=!1,a,o,s,c){const i=K(o.key,t.gender);if(!i)return;const l=Ae(s.key);if(!l)return;const g=He.getAllDataOfType(i.weaponTypeKey),x=n?(()=>{const{display:_,...R}=l.data;return Se([R,g])})():l.data,m=Se([i.data,x,tn]),y=[...Array.isArray(c)?c.map(_=>Jt(_,a)):[c],Ut(o),je(s),m,Qt,ta];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:y}}function ia(t){const n=$();return d.useCallback(a=>{if(!t)return;const o=n.chars.get(t);o&&n.chars.set(t,{...o,...a})},[t,n])}function ca({art:t,children:n}){const a=e(u,{children:e(Z,{variant:"rectangular",width:100,height:100})}),o=e(d.Suspense,{fallback:a,children:e(la,{art:t})});return e(U,{placement:"top",title:o,disableInteractive:!0,children:n})}function la({art:t}){const{t:n}=we("statKey_gen"),a=nn(t.setKey),{slotKey:o,level:s,rarity:c,mainStatKey:i,substats:l}=t,g=a.getSlotName(o),x=wt.getVariant(i);return r(u,{p:1,children:[r(p,{variant:"h6",children:[e(an,{slotKey:o,iconProps:D})," ",g]}),r(p,{variant:"subtitle1",color:`${x}.main`,children:[e(ze,{statKey:i,iconProps:D})," ",n(i)," ",It(i,c,s)]}),r(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(Ft,{stars:c}),r(E,{color:Fe.levelVariant(s),children:["+",s]})," "]}),e(u,{py:1,children:l.map(({value:m,key:b,rolls:y})=>!!(m&&b)&&e(ln,{statKey:b,value:m,color:`roll${Bt(y.length,1,6)}`,prefix:"+"},b))}),e(p,{color:"success.main",children:a.name}),e(Gt,{color:"secondary.main",location:t.location})]})}function da({artifactObj:t,slotKey:n}){if(!t)return e(F,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e(u,{sx:{width:"100%",pb:"100%",position:"relative"},children:e(u,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:fe.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=t,i=ue.find(l=>t.mainStatKey.includes(l))??"secondary";return e(ca,{art:t,children:r(F,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[e(u,{component:"img",className:`grad-${o}star`,src:Yt(t.setKey,t.slotKey),maxWidth:"100%",maxHeight:"100%"}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{sx:{p:.5},color:Fe.levelVariant(s),children:r("strong",{children:["+",s]})})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e(E,{color:i,sx:{p:.5},children:e(ze,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function ua({sheet:t,addlText:n,children:a}){const o=r(d.Suspense,{fallback:e(Z,{variant:"text",width:100}),children:[r(p,{children:[e(Vt,{src:fe.weaponTypes[t.weaponType],size:1.5})," ",t.name]}),n]});return e(U,{placement:"top",title:o,disableInteractive:!0,children:a})}function ha({weaponId:t}){const n=on(t),a=(n==null?void 0:n.key)&&Ae(n.key),o=d.useMemo(()=>a&&n&&Zt([a.data,je(n)]),[a,n]);if(!n||!a||!o)return null;const s=r(u,{children:[e(_e,{node:o.get(De.weapon.main)}),e(_e,{node:o.get(De.weapon.sub)})]});return r(F,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[e(u,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:e(ua,{sheet:a,addlText:s,children:e(u,{component:"img",src:Xt(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{color:"primary",children:He.getLevelString(n)})})}),a.hasRefinement&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["R",n.refinement]})})})]})}function _e({node:t}){return r(p,{children:[t.info.icon," ",Kt(t)]})}function pa({hideWeapon:t=!1}){var a;const{data:n}=d.useContext(q);return e(u,{children:r(G,{container:!0,columns:t?5:6,spacing:.5,children:[!t&&e(G,{item:!0,xs:1,height:"100%",children:e(ha,{weaponId:((a=n.get(h.weapon.id).value)==null?void 0:a.toString())??""})}),e(fa,{})]})})}function fa(){const t=$(),{data:n}=d.useContext(q),a=Rt.map(o=>{var s;return[o,t.arts.get(((s=n.get(h.art[o].id).value)==null?void 0:s.toString())??"")]});return e(X,{children:a.map(([o,s])=>e(G,{item:!0,xs:1,children:e(da,{artifactObj:s,slotKey:o})},o))})}function tt(t,n,a){const o=Tt(t,n),s=We(t,"icon",n);return a&&o?o:s||""}function nt({children:t,characterKey:n,onClick:a}){const{gender:o}=j(),{silly:s}=d.useContext(Be),c=he(n),i=d.useCallback(g=>e(ee,{onClick:a,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[a]),l=We(n,"banner",o);return e(dn,{condition:!!a,wrapper:i,children:r(u,{display:"flex",position:"relative",className:l?void 0:`grad-${c.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(u,{flexShrink:1,component:"img",src:tt(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),e(u,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:t})]})})}function ma({characterKey:t}){const{gender:n}=j(),{data:a}=d.useContext(q),o=a.get(h.charEle).value,s=a.get(h.lvl).value,c=a.get(h.constellation).value,i=a.get(h.asc).value,l=a.get(h.total.autoBoost).value,g=a.get(h.total.skillBoost).value,x=a.get(h.total.burstBoost).value,m=a.get(h.total.auto).value,b=a.get(h.total.skill).value,y=a.get(h.total.burst).value,_=he(t);return r(X,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Re,{characterKey:t,gender:n})}),size:"small",color:o,sx:{opacity:.85}}),r(u,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[r(u,{children:[r(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),r(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",$e[i]]})]}),e(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:e(ke,{color:`roll${c<3?3:c}`,children:e(Ie,{color:"white",children:r("strong",{children:["C",c]})})})})]}),r(u,{display:"flex",gap:1,sx:{opacity:.85},children:[e(H,{size:"small",color:l?"info":"secondary",label:e("strong",{children:m})}),e(H,{size:"small",color:g?"info":"secondary",label:e("strong",{children:b})}),e(H,{size:"small",color:x?"info":"secondary",label:e("strong",{children:y})})]}),e(p,{variant:"h6",lineHeight:1,children:e(Ve,{stars:_.rarity,colored:!0,inline:!0})})]})}function ga({characterKey:t}){const{gender:n}=j(),a=he(t),o=K(t,n);return r(X,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Re,{characterKey:t,gender:n})}),size:"small",color:o.elementKey,sx:{opacity:.85}}),e(u,{mt:1,children:e(p,{variant:"h4",children:e(ke,{children:"NEW"})})}),e(p,{mt:1.5,children:e(Ve,{stars:a.rarity,colored:!0})})]})}function va(){const{data:t}=d.useContext(q);return r(u,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(n=>e(en,{node:n},JSON.stringify(n.info))),t.get(h.special).info.name&&r(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(h.special).info.icon,e(p,{children:t.get(h.special).info.name})]})]})}function xa({characterKey:t,onClick:n,onClickHeader:a,footer:o,hideStats:s}){var P;const c=$(),i=na(t),l=Te(t),{gender:g}=j(),x=K(t,g),m=ia(t),b=(P=i==null?void 0:i[t])==null?void 0:P.target,y=d.useCallback(()=>t&&(n==null?void 0:n(t)),[t,n]),_=d.useCallback(L=>e(ee,{onClick:y,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:L}),[y]),R=d.useMemo(()=>l&&x&&{character:l,characterSheet:x,characterDispatch:m},[l,x,m]),k=d.useMemo(()=>b&&i&&{data:b,teamData:i},[b,i]),{favorite:M}=Ge(t);return e(d.Suspense,{fallback:e(Z,{variant:"rectangular",width:"100%",height:s?300:600}),children:r($t,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(u,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(ie,{sx:{p:.5},onClick:L=>c.charMeta.set(t,{favorite:!M}),children:M?e(Ot,{}):e(mn,{})})}),e(ce,{condition:!!n,wrapper:_,children:l&&k&&R?e(ya,{characterContextObj:R,dataContextObj:k,characterKey:t,onClick:n,onClickHeader:()=>a(t),hideStats:s}):e(Ca,{characterKey:t})}),o]})})}function ya({characterContextObj:t,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,hideStats:c}){return e(Sn.Provider,{value:t,children:r(q.Provider,{value:n,children:[e(nt,{characterKey:a,onClick:o?void 0:s,children:e(ma,{characterKey:a})}),r(u,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${i.spacing(1)}!important`:void 0}),children:[e(pa,{}),!c&&e(va,{})]})]})})}function Ca({characterKey:t}){return r(X,{children:[e(nt,{characterKey:t,children:e(ga,{characterKey:t})}),e(kt,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}var ve={},Sa=Y;Object.defineProperty(ve,"__esModule",{value:!0});var at=ve.default=void 0,Da=Sa(Q()),ba=T,_a=(0,Da.default)((0,ba.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");at=ve.default=_a;var xe={},wa=Y;Object.defineProperty(xe,"__esModule",{value:!0});var ot=xe.default=void 0,Ia=wa(Q()),Ba=T,Ra=(0,Ia.default)((0,Ba.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");ot=xe.default=Ra;function $a({characterKey:t,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:c=!1}){const i=Te(t),{favorite:l}=Ge(t),{gender:g}=j(),{silly:x}=d.useContext(Be),m=K(t,g),b=d.useCallback(()=>n==null?void 0:n(t),[t,n]),y=d.useCallback(z=>e(ee,{onClick:b,onMouseDown:a,onMouseEnter:o,children:z}),[b,a,o]),[_,R]=d.useState(!1),k=d.useCallback(()=>!c&&R(!0),[c]),M=d.useCallback(()=>R(!1),[]);d.useEffect(()=>{c&&R(!1)},[c]);const P=d.useCallback(z=>e(U,{placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(d.Suspense,{fallback:e(Z,{width:300,height:400}),children:r(p,{children:[m.elementKey&&e(Me,{ele:m.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${m.elementKey}.main`}}})," ",m.name]})}),children:z}),[m.elementKey,m.name,c,M,k,_]),L=d.useCallback(z=>e(U,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(u,{sx:{width:300,m:-1},children:e(xa,{hideStats:!0,characterKey:t})}),children:z}),[t,c,M,k,_]);return e(ce,{condition:s,wrapper:P,falseWrapper:L,children:e(F,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:r(ce,{condition:!!n||!!a||!!o,wrapper:y,children:[e(u,{display:"flex",className:`grad-${m.rarity}star`,children:e(u,{component:"img",src:tt(t,g,x),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:e("strong",{children:r(E,{color:"primary",children:[i.level,"/",$e[i.ascension]]})})}),e(u,{sx:{position:"absolute",top:0,right:0},children:l?e(Oe,{fontSize:"small"}):e(ot,{fontSize:"small"})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["C",i.constellation]})})})]})})})}function ka({index:t}){return e(F,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:e(u,{component:"img",src:fe.team[`team${t+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function Pa({teamId:t,onClick:n,bgt:a,disableButtons:o=!1}){const s=sn(t),{name:c,description:i,teamCharIds:l}=s,g=$(),x=()=>{window.confirm("Do you want to remove this team? This will delete all loadouts and data (such as multi-opts) in this team as well.")&&g.teams.remove(t)},m=()=>{const y=g.teams.export(t),_=JSON.stringify(y);navigator.clipboard.writeText(_).then(()=>alert("Copied team data to clipboard.")).catch(console.error)},b=()=>g.teams.duplicate(t);return r(zt,{bgt:a,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(ee,{onClick:n,sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",flexGrow:1},children:r(u,{sx:{height:"100%",p:1,display:"flex",flexDirection:"column",gap:1},children:[r(p,{sx:{display:"flex",gap:1},children:[e("span",{children:c})," ",e(Mt,{title:e(p,{children:i}),children:e(At,{})})]}),e(u,{sx:{marginTop:"auto"},children:e(G,{container:!0,columns:4,spacing:1,children:Et(0,3).map(y=>e(G,{item:!0,xs:1,height:"100%",children:l[y]?e($a,{characterKey:g.teamChars.get(l[y]).key}):e(ka,{index:y})},y))})})]})}),!o&&r(u,{sx:{display:"flex",gap:1,marginTop:"auto",p:1},children:[e(jt,{color:"info",variant:"text",sx:{flexGrow:1},startIcon:e(Nt,{}),disabled:l.every(y=>!y),onClick:m,children:"Export"}),e(Ce,{orientation:"vertical"}),e(ie,{color:"info",disabled:l.every(y=>!y),onClick:b,children:e(at,{})}),e(Ce,{orientation:"vertical"}),e(ie,{color:"error",size:"small",onClick:x,children:e(Wt,{})})]})]})}export{da as A,xa as C,mn as F,rn as S,Pa as T,ua as W,at as a,Sn as b,$a as c,vn as d,nt as e,ma as f,pa as g,va as h,Te as i,oa as j,sn as k,Ge as l,ca as m,ta as n,na as o,tt as p,qa as r,ia as u};
