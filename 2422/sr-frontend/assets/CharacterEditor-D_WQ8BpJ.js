import{bw as w,bx as z,by as y,bz as S,bA as k,bB as J,bC as X,bD as q,r as m,bE as Q,bF as Y,j as Z,f as K,bG as ee,bH as se,bI as ne,bJ as _,s as te,u as ie,a1 as x,D as t,aB as oe,bK as le,H as a,$ as P,X as l,aA as h,ae as u,a8 as $,ab as ae,a7 as re,bL as de,W as p,a9 as j,bM as A,bN as B}from"./index-BofO6yIs.js";import{s as ce,c as ue}from"./index-OYhB0wNt.js";import{C as pe}from"./CardActionArea-Bm11DRO7.js";import{M as L,D as M,T}from"./DropdownButton-BOzMj5DR.js";const me=["component","direction","spacing","divider","children","className","useFlexGap"],fe=w(),ve=z("div",{name:"MuiStack",slot:"Root",overridesResolver:(s,e)=>e.root});function he(s){return ee({props:s,name:"MuiStack",defaultTheme:fe})}function be(s,e){const n=m.Children.toArray(s).filter(Boolean);return n.reduce((i,r,o)=>(i.push(r),o<n.length-1&&i.push(m.cloneElement(e,{key:`separator-${o}`})),i),[])}const ge=s=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[s],Ce=({ownerState:s,theme:e})=>{let n=y({display:"flex",flexDirection:"column"},S({theme:e},k({values:s.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i})));if(s.spacing){const i=J(e),r=Object.keys(e.breakpoints.values).reduce((d,c)=>((typeof s.spacing=="object"&&s.spacing[c]!=null||typeof s.direction=="object"&&s.direction[c]!=null)&&(d[c]=!0),d),{}),o=k({values:s.direction,base:r}),f=k({values:s.spacing,base:r});typeof o=="object"&&Object.keys(o).forEach((d,c,b)=>{if(!o[d]){const C=c>0?o[b[c-1]]:"column";o[d]=C}}),n=X(n,S({theme:e},f,(d,c)=>s.useFlexGap?{gap:_(i,d)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${ge(c?o[c]:s.direction)}`]:_(i,d)}}))}return n=q(e.breakpoints,n),n};function ke(s={}){const{createStyledComponent:e=ve,useThemeProps:n=he,componentName:i="MuiStack"}=s,r=()=>se({root:["root"]},d=>ne(i,d),{}),o=e(Ce);return m.forwardRef(function(d,c){const b=n(d),g=Q(b),{component:C="div",direction:V="column",spacing:G=0,divider:D,children:R,className:N,useFlexGap:H=!1}=g,O=Y(g,me),W={direction:V,spacing:G,useFlexGap:H},U=r();return Z.jsx(o,y({as:C,ownerState:W,ref:c,className:K(U.root,N)},O,{children:D?be(R,D):R}))})}const xe=ke({createStyledComponent:te("div",{name:"MuiStack",slot:"Root",overridesResolver:(s,e)=>e.root}),useThemeProps:s=>ie({props:s,name:"MuiStack"})}),F=xe;function I(s=""){const{database:e}=x(),[n,i]=m.useState(e.chars.get(s));return m.useEffect(()=>i(e.chars.get(s)),[e,s]),m.useEffect(()=>s?e.chars.follow(s,(r,o,f)=>o==="update"&&i(f)):void 0,[s,i,e]),n}function v({characterKey:s,abilityKey:e}){const n=I(s),{database:i}=x(),r=e.charAt(0).toUpperCase()+e.slice(1);return t(M,{title:`${r} Lv. ${(n==null?void 0:n[e])??1}`,disabled:!n,children:!!s&&oe(1,le[e][(n==null?void 0:n.ascension)??0]).map(o=>a(L,{selected:(n==null?void 0:n[e])===o,disabled:(n==null?void 0:n[e])===o,onClick:()=>i.chars.set(s,{[e]:o}),children:[r," Lv. ",o]},`${e}_${o}`))})}function je({character:s,onClick:e}){const n=ce(ue(s));return t(F,{children:t(P,{children:a($,{children:[e?t(pe,{onClick:e,children:t(l,{variant:"h4",children:s.key})}):t(l,{variant:"h4",children:s.key}),t(h,{}),a(l,{children:["Eidolon: ",s.eidolon]}),a(l,{children:["Level: ",s.level]}),a(l,{children:["ATK: ",n.compute(u.final.atk).val]}),a(l,{children:["Break effect: ",n.compute(u.final.brEff_).val]}),a(l,{children:["CRIT Rate: ",n.compute(u.final.crit_).val]}),a(l,{children:["CRIT DMG: ",n.compute(u.final.crit_dmg_).val]}),a(l,{children:["DEF: ",n.compute(u.final.def).val]}),a(l,{children:["Effect Hit Rate: ",n.compute(u.final.eff_).val]}),a(l,{children:["Effect RES: ",n.compute(u.final.eff_res_).val]}),a(l,{children:["Energy Regeneration Rate: ",n.compute(u.final.enerRegen_).val]}),a(l,{children:["Heal Boost: ",n.compute(u.final.heal_).val]}),a(l,{children:["HP: ",n.compute(u.final.hp).val]}),a(l,{children:["Speed: ",n.compute(u.final.spd).val]})]})})})}function Ae({characterKey:s,onClose:e}){return t(re,{open:!!s,onClose:e,children:t(m.Suspense,{fallback:t(ae,{variant:"rectangular",width:"100%",height:1e3}),children:s&&t(Ee,{characterKey:s})})})}function Ee({characterKey:s}){const e=I(s),{database:n}=x();return t(P,{children:a($,{sx:{display:"flex",flexDirection:"column",gap:1},children:[t(l,{variant:"h2",children:s}),t(T,{type:"number",label:"Level",variant:"outlined",inputProps:{min:1,max:90},value:(e==null?void 0:e.level)||0,onChange:i=>n.chars.set(s,{level:parseInt(i.target.value)}),disabled:!e}),t(T,{type:"number",label:"Ascension",variant:"outlined",inputProps:{min:0,max:6},value:(e==null?void 0:e.ascension)||0,onChange:i=>n.chars.set(s,{ascension:parseInt(i.target.value)}),disabled:!e}),t(M,{title:`Eidolon Lv. ${(e==null?void 0:e.eidolon)??0}`,fullWidth:!1,disabled:!e,children:de.map(i=>a(L,{selected:(e==null?void 0:e.eidolon)===i,disabled:(e==null?void 0:e.eidolon)===i,onClick:()=>n.chars.set(s,{eidolon:i}),children:["Eidolon Lv. ",i]},i))}),a(F,{spacing:1,children:[t(l,{variant:"h6",children:"Abilites"}),t(h,{}),a(p,{container:!0,gap:1,children:[t(p,{item:!0,children:t(v,{characterKey:s,abilityKey:"basic"})}),t(p,{item:!0,children:t(v,{characterKey:s,abilityKey:"skill"})}),t(p,{item:!0,children:t(v,{characterKey:s,abilityKey:"ult"})}),t(p,{item:!0,children:t(v,{characterKey:s,abilityKey:"talent"})})]}),t(l,{variant:"h6",children:"Bonus Abilities"}),t(h,{}),t(p,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.bonusAbilities)??{}).map(([i,r])=>t(p,{item:!0,children:t(j,{color:r?"success":"primary",onClick:()=>{n.chars.set(s,{bonusAbilities:{...e==null?void 0:e.bonusAbilities,[i]:!r}})},startIcon:r?t(A,{}):t(B,{}),children:i})},i))}),t(l,{variant:"h6",children:"Stat Boosts"}),t(h,{}),t(p,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.statBoosts)??{}).map(([i,r])=>t(p,{item:!0,children:t(j,{color:r?"success":"primary",onClick:()=>{n.chars.set(s,{statBoosts:{...e==null?void 0:e.statBoosts,[i]:!r}})},startIcon:r?t(A,{}):t(B,{}),children:i})},i))})]})]})})}export{Ae as C,F as S,je as a,I as u};
