import{a as ee,g as te,s as T,_ as k,r as d,u as ae,ao as At,ap as Nt,e as re,a5 as Me,aq as Bt,m as Et,j as M,f as U,h as oe,ar as Oe,P as jt,i as Lt,as as Ot,at as Se,b as E,au as we,x as Wt,l as Kt,d as qt,H as g,D as o,X as w,U as S,C as _,av as Ce,a1 as P,aw as Vt,aa as nt,ax as We,a8 as O,$ as j,W as I,ay as Gt,ab as Re,G as ge,az as Ut,z as ne,A as se,aA as st,aB as be,aC as Ht,aD as he,aE as Jt,a9 as Z,ae as _e,aF as Ft,aG as Xt,O as Ke,N as qe,L as Qt,aH as it,aI as ct,aJ as de,aK as Yt,an as lt,a6 as dt,aL as Zt,I as ea,a7 as ta,aM as aa,aN as Ve,F as ra,aO as De,aP as ut,aQ as oa,aR as Ge,aS as na,aT as sa,aU as ia,aV as ca,aW as la,aX as da,aY as Ue}from"./index-LnWuo6AV.js";import{d as ua,b as pa,u as pt,S as ye,C as fa,a as ma}from"./CharacterEditor-CMEOmcTp.js";import{u as ha,C as ga}from"./useForceUpdate-20IgzzyH.js";import{s as ba,t as va,w as xa,c as Ca,l as ya,r as ka,a as $a,d as Ma}from"./index-D5oHzvXe.js";import{u as Sa}from"./useLightCone-CxnBRh9q.js";import{T as wa,d as Ra,M as Te,D as Pe}from"./DropdownButton-Dszw79mJ.js";import{G as _a,d as ft}from"./LocationAutocomplete-BvTgWTeu.js";import{C as mt}from"./CardActionArea-CiEl7L1W.js";import{u as Da,R as Ta,D as Pa}from"./RelicCard-BhGCDEAy.js";import{I as Ia}from"./InfoTooltip-k0tHFa1l.js";function za(e){return ee("MuiCollapse",e)}te("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Aa=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Na=e=>{const{orientation:t,classes:a}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return oe(r,za,a)},Ba=T("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.orientation],a.state==="entered"&&t.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>k({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&k({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Ea=T("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>k({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ja=T("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>k({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ht=d.forwardRef(function(t,a){const r=ae({props:t,name:"MuiCollapse"}),{addEndListener:n,children:s,className:i,collapsedSize:l="0px",component:c,easing:u,in:p,onEnter:f,onEntered:m,onEntering:h,onExit:v,onExited:b,onExiting:y,orientation:$="vertical",style:R,timeout:C=At.standard,TransitionComponent:z=Nt}=r,J=re(r,Aa),W=k({},r,{orientation:$,collapsedSize:l}),A=Na(W),F=Me(),ve=Bt(),N=d.useRef(null),X=d.useRef(),K=typeof l=="number"?`${l}px`:l,L=$==="horizontal",Q=L?"width":"height",ce=d.useRef(null),wt=Et(a,ce),q=x=>D=>{if(x){const B=ce.current;D===void 0?x(B):x(B,D)}},xe=()=>N.current?N.current[L?"clientWidth":"clientHeight"]:0,Rt=q((x,D)=>{N.current&&L&&(N.current.style.position="absolute"),x.style[Q]=K,f&&f(x,D)}),_t=q((x,D)=>{const B=xe();N.current&&L&&(N.current.style.position="");const{duration:Y,easing:le}=Oe({style:R,timeout:C,easing:u},{mode:"enter"});if(C==="auto"){const Le=F.transitions.getAutoHeightDuration(B);x.style.transitionDuration=`${Le}ms`,X.current=Le}else x.style.transitionDuration=typeof Y=="string"?Y:`${Y}ms`;x.style[Q]=`${B}px`,x.style.transitionTimingFunction=le,h&&h(x,D)}),Dt=q((x,D)=>{x.style[Q]="auto",m&&m(x,D)}),Tt=q(x=>{x.style[Q]=`${xe()}px`,v&&v(x)}),Pt=q(b),It=q(x=>{const D=xe(),{duration:B,easing:Y}=Oe({style:R,timeout:C,easing:u},{mode:"exit"});if(C==="auto"){const le=F.transitions.getAutoHeightDuration(D);x.style.transitionDuration=`${le}ms`,X.current=le}else x.style.transitionDuration=typeof B=="string"?B:`${B}ms`;x.style[Q]=K,x.style.transitionTimingFunction=Y,y&&y(x)}),zt=x=>{C==="auto"&&ve.start(X.current||0,x),n&&n(ce.current,x)};return M.jsx(z,k({in:p,onEnter:Rt,onEntered:Dt,onEntering:_t,onExit:Tt,onExited:Pt,onExiting:It,addEndListener:zt,nodeRef:ce,timeout:C==="auto"?null:C},J,{children:(x,D)=>M.jsx(Ba,k({as:c,className:U(A.root,i,{entered:A.entered,exited:!p&&K==="0px"&&A.hidden}[x]),style:k({[L?"minWidth":"minHeight"]:K},R),ref:wt},D,{ownerState:k({},W,{state:x}),children:M.jsx(Ea,{ownerState:k({},W,{state:x}),className:A.wrapper,ref:N,children:M.jsx(ja,{ownerState:k({},W,{state:x}),className:A.wrapperInner,children:s})})}))}))});ht.muiSupportAuto=!0;const gt=ht,La=d.createContext({}),bt=La;function Oa(e){return ee("MuiAccordion",e)}const Wa=te("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),ue=Wa,Ka=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],qa=e=>{const{classes:t,square:a,expanded:r,disabled:n,disableGutters:s}=e;return oe({root:["root",!a&&"rounded",r&&"expanded",n&&"disabled",!s&&"gutters"],region:["region"]},Oa,t)},Va=T(jt,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${ue.region}`]:t.region},t.root,!a.square&&t.rounded,!a.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ue.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ue.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${ue.expanded}`]:{margin:"16px 0"}}}]})),Ga=d.forwardRef(function(t,a){const r=ae({props:t,name:"MuiAccordion"}),{children:n,className:s,defaultExpanded:i=!1,disabled:l=!1,disableGutters:c=!1,expanded:u,onChange:p,square:f=!1,slots:m={},slotProps:h={},TransitionComponent:v,TransitionProps:b}=r,y=re(r,Ka),[$,R]=Lt({controlled:u,default:i,name:"Accordion",state:"expanded"}),C=d.useCallback(L=>{R(!$),p&&p(L,!$)},[$,p,R]),[z,...J]=d.Children.toArray(n),W=d.useMemo(()=>({expanded:$,disabled:l,disableGutters:c,toggle:C}),[$,l,c,C]),A=k({},r,{square:f,disabled:l,disableGutters:c,expanded:$}),F=qa(A),ve=k({transition:v},m),N=k({transition:b},h),[X,K]=Da("transition",{elementType:gt,externalForwardedProps:{slots:ve,slotProps:N},ownerState:A});return M.jsxs(Va,k({className:U(F.root,s),ref:a,ownerState:A,square:f},y,{children:[M.jsx(bt.Provider,{value:W,children:z}),M.jsx(X,k({in:$,timeout:"auto"},K,{children:M.jsx("div",{"aria-labelledby":z.props.id,id:z.props["aria-controls"],role:"region",className:F.region,children:J})}))]}))}),He=Ga;function Ua(e){return ee("MuiAccordionDetails",e)}te("MuiAccordionDetails",["root"]);const Ha=["className"],Ja=e=>{const{classes:t}=e;return oe({root:["root"]},Ua,t)},Fa=T("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Xa=d.forwardRef(function(t,a){const r=ae({props:t,name:"MuiAccordionDetails"}),{className:n}=r,s=re(r,Ha),i=r,l=Ja(i);return M.jsx(Fa,k({className:U(l.root,n),ref:a,ownerState:i},s))}),Je=Xa;function Qa(e){return ee("MuiAccordionSummary",e)}const Ya=te("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),V=Ya,Za=["children","className","expandIcon","focusVisibleClassName","onClick"],er=e=>{const{classes:t,expanded:a,disabled:r,disableGutters:n}=e;return oe({root:["root",a&&"expanded",r&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},Qa,t)},tr=T(Ot,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${V.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${V.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${V.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${V.expanded}`]:{minHeight:64}}}]}}),ar=T("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${V.expanded}`]:{margin:"20px 0"}}}]})),rr=T("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${V.expanded}`]:{transform:"rotate(180deg)"}})),or=d.forwardRef(function(t,a){const r=ae({props:t,name:"MuiAccordionSummary"}),{children:n,className:s,expandIcon:i,focusVisibleClassName:l,onClick:c}=r,u=re(r,Za),{disabled:p=!1,disableGutters:f,expanded:m,toggle:h}=d.useContext(bt),v=$=>{h&&h($),c&&c($)},b=k({},r,{expanded:m,disabled:p,disableGutters:f}),y=er(b);return M.jsxs(tr,k({focusRipple:!1,disableRipple:!0,disabled:p,component:"div","aria-expanded":m,className:U(y.root,s),focusVisibleClassName:U(y.focusVisible,l),onClick:v,ref:a,ownerState:b},u,{children:[M.jsx(ar,{className:y.content,ownerState:b,children:n}),i&&M.jsx(rr,{className:y.expandIconWrapper,ownerState:b,children:i})]}))}),Fe=or;function nr(e){return ee("MuiLinearProgress",e)}te("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const sr=["className","color","value","valueBuffer","variant"];let H=e=>e,Xe,Qe,Ye,Ze,et,tt;const ke=4,ir=Se(Xe||(Xe=H`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),cr=Se(Qe||(Qe=H`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),lr=Se(Ye||(Ye=H`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),dr=e=>{const{classes:t,variant:a,color:r}=e,n={root:["root",`color${E(r)}`,a],dashed:["dashed",`dashedColor${E(r)}`],bar1:["bar",`barColor${E(r)}`,(a==="indeterminate"||a==="query")&&"bar1Indeterminate",a==="determinate"&&"bar1Determinate",a==="buffer"&&"bar1Buffer"],bar2:["bar",a!=="buffer"&&`barColor${E(r)}`,a==="buffer"&&`color${E(r)}`,(a==="indeterminate"||a==="query")&&"bar2Indeterminate",a==="buffer"&&"bar2Buffer"]};return oe(n,nr,t)},Ie=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Kt(e.palette[t].main,.62):qt(e.palette[t].main,.5),ur=T("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`color${E(a.color)}`],t[a.variant]]}})(({ownerState:e,theme:t})=>k({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Ie(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),pr=T("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.dashed,t[`dashedColor${E(a.color)}`]]}})(({ownerState:e,theme:t})=>{const a=Ie(t,e.color);return k({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${a} 0%, ${a} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},we(Ze||(Ze=H`
    animation: ${0} 3s infinite linear;
  `),lr)),fr=T("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.bar,t[`barColor${E(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&t.bar1Indeterminate,a.variant==="determinate"&&t.bar1Determinate,a.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>k({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${ke}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${ke}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&we(et||(et=H`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),ir)),mr=T("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.bar,t[`barColor${E(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&t.bar2Indeterminate,a.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>k({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:Ie(t,e.color),transition:`transform .${ke}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&we(tt||(tt=H`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),cr)),hr=d.forwardRef(function(t,a){const r=ae({props:t,name:"MuiLinearProgress"}),{className:n,color:s="primary",value:i,valueBuffer:l,variant:c="indeterminate"}=r,u=re(r,sr),p=k({},r,{color:s,variant:c}),f=dr(p),m=Wt(),h={},v={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&i!==void 0){h["aria-valuenow"]=Math.round(i),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let b=i-100;m&&(b=-b),v.bar1.transform=`translateX(${b}%)`}if(c==="buffer"&&l!==void 0){let b=(l||0)-100;m&&(b=-b),v.bar2.transform=`translateX(${b}%)`}return M.jsxs(ur,k({className:U(f.root,n),ownerState:p,role:"progressbar"},h,{ref:a},u,{children:[c==="buffer"?M.jsx(pr,{className:f.dashed,ownerState:p}):null,M.jsx(fr,{className:f.bar1,ownerState:p,style:v.bar1}),c==="determinate"?null:M.jsx(mr,{className:f.bar2,ownerState:p,style:v.bar2})]}))}),gr=hr;function br({avatar:e,title:t,action:a}){return g(S,{display:"flex",gap:1,p:2,alignItems:"center",children:[e,o(w,{variant:"subtitle1",sx:{flexGrow:1},children:t}),a&&o(w,{variant:"caption",children:a})]})}function vr({condition:e,wrapper:t,falseWrapper:a,children:r}){return e?t(r):a?a(r):r}function at({value:e,onChange:t,...a}){const[r,n]=d.useState(e);d.useEffect(()=>{n(e)},[e]);const s=()=>t(r);return o(wa,{value:r,onChange:i=>n(i.target.value),onBlur:s,onKeyDown:i=>i.key==="Enter"&&!a.multiline&&s(),...a})}function xr(e){const{t}=_("ui"),a=Ce({path:"/:page/*"}),r=t("pageTitle"),n=e??((a==null?void 0:a.params.page)&&t(`tabs.${a==null?void 0:a.params.page}`));d.useEffect(()=>{n?document.title=`${n} - ${r}`:document.title=r},[t,r,n])}function ze(e,t){const[a,r]=ha(),n=d.useMemo(()=>a&&e.get(t),[a,e,t]);return d.useEffect(()=>e.follow(t,r),[e,t,r]),n}function Cr(e){const{database:t}=P();return ze(t.builds,e??"")}function vt(e){const t=d.useMemo(()=>e||Vt(nt,()=>""),[e]),{database:a}=P(),[r,n]=d.useState(()=>We(t,s=>a.relics.get(s)));return d.useEffect(()=>{n(We(t,i=>a.relics.get(i)));const s=Object.values(t).map(i=>a.relics.follow(i,(l,c,u)=>{c==="update"&&n(p=>({...p,[u.slotKey]:u})),c==="remove"&&n(p=>({...p,[u.slotKey]:void 0}))}));return()=>s.forEach(i=>i())},[a,t]),r}function G(e){const{database:t}=P();return ze(t.loadouts,e??"")}function xt(e){const{database:t}=P();return ze(t.teams,e)}function yr({slot:e}){const{t}=_("relic");return o(j,{sx:{height:"100%"},children:g(O,{children:[g(w,{children:[t("slot"),": ",e]}),o(w,{children:t("empty")})]})})}function kr({build:e}){const t=vt(e);return o(I,{container:!0,columns:3,spacing:1,children:nt.map(a=>{const r=t[a];return o(I,{item:!0,xs:1,children:r?o(Ta,{relic:r}):o(yr,{slot:a})},`${a}_${r==null?void 0:r.id}`)})})}function $r({charKey:e,setCharKey:t}){const{t:a}=_(["character","charNames_gen"]),{database:r}=P(),n=d.useCallback(l=>!!r.chars.get(l),[r.chars]),s=d.useCallback(l=>r.charMeta.get(l).favorite,[r.charMeta]),i=d.useMemo(()=>[{key:"",label:a("character:autocomplete.none")},...Gt.map(l=>({key:l,label:a(`charNames_gen:${l}`),favorite:s(l),color:n(l)?void 0:"secondary"}))],[n,s,a]);return o(d.Suspense,{fallback:o(Re,{variant:"text",width:100}),children:o(_a,{options:i,toImg:()=>o(ge,{children:" "}),valueKey:e,onChange:l=>t(l??"")})})}const Mr={RuanMei:Ut};var Ae={},Sr=se;Object.defineProperty(Ae,"__esModule",{value:!0});var me=Ae.default=void 0,wr=Sr(ne()),Rr=M,_r=(0,wr.default)((0,Rr.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}),"Groups");me=Ae.default=_r;function Dr({document:e,bgt:t="normal",collapse:a=!1,setConditional:r}){switch(e.type){case"fields":return o(Tr,{fieldsDocument:e,bgt:t});case"text":return a?o(Pr,{textDocument:e}):o(Ct,{textDocument:e});case"conditional":return o(Ir,{conditional:e.conditional,setConditional:r,bgt:t});default:return null}}function Tr({fieldsDocument:e,bgt:t="normal"}){return g(j,{bgt:t,children:[e.header&&o(yt,{header:e.header,hideDivider:e.fields.length===0}),o(st,{bgt:t,fields:e.fields})]})}function Ct({textDocument:e}){const t=d.useContext(be);return t?o("div",{children:Ht(e.text,t)}):null}function Pr({textDocument:e}){const[t,a]=d.useState(!1),[r,n]=d.useState(!1);return g(S,{sx:{position:"relative"},children:[!t&&o(S,{sx:{pointerEvents:"none",position:"absolute",mx:"auto",width:"100%",display:"flex",justifyContent:"center",height:"100%",alignItems:"flex-end",zIndex:"10",transition:"transform 0.3s ease",transform:r?"translate(0,-5px)":void 0},children:o(Ra,{})}),o(gt,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),collapsedSize:55,onClick:()=>a(s=>!s),in:t,sx:{cursor:"pointer",position:"relative",maskImage:t?void 0:"linear-gradient(to bottom, black 0%, transparent 100%)","&:hover":{maskImage:t?void 0:"linear-gradient(to bottom, black 50%, transparent 100%)"}},children:o(Ct,{textDocument:e})})]})}function yt({header:e,hideDivider:t}){const{icon:a,text:r,additional:n}=e;return g(ge,{children:[o(br,{avatar:a,title:r,action:n}),!t&&o(he,{})]})}function Ir({conditional:e,bgt:t="normal",setConditional:a}){const{header:r,fields:n}=e;return g(j,{bgt:t,children:[!!r&&o(yt,{header:r}),o(zr,{conditional:e,setConditional:a}),!!n&&o(st,{bgt:t,fields:n})]})}function zr({conditional:e,setConditional:t}){switch(e.metadata.type){case"bool":return o(Ar,{conditional:e,setConditional:t});default:return null}}function Ar({conditional:e,setConditional:t}){const a=d.useContext(be),{label:r,badge:n}=e,{sheet:s,name:i}=e.metadata;if(!s||!i)throw new Error("metadata missing");const l="all",c=a==null?void 0:a.compute(Jt({et:"own",qt:"cond",sheet:s,q:i,src:l,dst:a.cache.tag.src},"max")).val;return g(Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:c?"success":"primary",onClick:()=>t(l,s,i,+!c),startIcon:c?o(ua,{}):o(pa,{}),children:[r," ",n]})}function ie(){return d.useContext(be)}function kt({optTarget:e,setOptTarget:t}){const{t:a}=_("optimize"),r=ie();return o(Pe,{title:`${a("optTarget")}${e?`: ${e.tag.name||e.tag.q}`:""}`,children:r==null?void 0:r.listFormulas(_e.listing.formulas).map((n,s)=>o(Te,{onClick:()=>t(n),children:n.tag.name||n.tag.q},`${s}_${n.tag.name||n.tag.q}`))})}function Nr({statFilters:e,setStatFilters:t,disabled:a=!1}){const r=d.useCallback((c,u,p)=>{const f={...e},m=JSON.stringify(u),h=u?[...e[m]]:void 0,v=JSON.stringify(c),b=[...e[v]??[]];p!==void 0&&h?b.push(h[p]):b.push({minValue:0,maxValue:0,disabled:!1}),f[v]=b,p!==void 0&&h&&(h.splice(p,1),h.length?f[m]=h:delete f[m]),t({...f})},[t,e]),n=d.useCallback((c,u)=>{const p={...e},f=JSON.stringify(c),m=[...e[f]];m.splice(u,1),m.length?p[f]=m:delete p[f],t({...p})},[t,e]),s=d.useCallback((c,u,p)=>{const f={...e},m=JSON.stringify(c),h=[...e[m]];h[u]={...h[u],minValue:p},f[m]=h,t({...f})},[t,e]),i=d.useCallback((c,u,p)=>{const f={...e},m=JSON.stringify(c),h=[...e[m]];h[u]={...h[u],maxValue:p},f[m]=h,t({...f})},[t,e]),l=d.useCallback((c,u,p)=>{const f={...e},m=JSON.stringify(c),h=[...e[m]];h[u]={...h[u],disabled:p},f[m]=h,t({...f})},[t,e]);return g(ge,{children:[Object.entries(e).flatMap(([c,u])=>u==null?void 0:u.map((p,f)=>o(rt,{path:JSON.parse(c),setting:p,index:f,setTarget:r,delTarget:n,setMinValue:s,setMaxValue:i,setDisabled:l,disabled:a},c+f))),o(rt,{delTarget:n,setTarget:r,setMinValue:s,setMaxValue:i,setDisabled:l,disabled:a})]})}function rt({path:e,setting:t,index:a,delTarget:r,setMinValue:n,setMaxValue:s,setDisabled:i,disabled:l}){const{t:c}=_("page_character_optimize"),u=d.useCallback(v=>e&&a!==void 0&&n(e,a,v??0),[n,e,a]),p=d.useCallback(v=>e&&a!==void 0&&s(e,a,v??1/0),[s,e,a]),[f,m]=d.useState(void 0),h={p:1,flexBasis:30,flexGrow:0,flexShrink:0};return g(Qt,{sx:{"& .MuiButtonGroup-grouped":{minWidth:24},width:"100%"},children:[!!t&&!!e&&a!==void 0&&o(Z,{sx:h,color:t.disabled?"secondary":"success",onClick:()=>i(e,a,!t.disabled),disabled:l,children:t.disabled?o(Ft,{}):o(Xt,{})}),o(qe,{sx:{flexBasis:150,flexGrow:1},children:o(Ke,{float:!0,disabled:!e||l,value:t==null?void 0:t.minValue,placeholder:c("buildConstraint.minStatValue"),onChange:u,sx:{px:1},inputProps:{sx:{"& + .MuiOutlinedInput-notchedOutline":{borderRadius:0},textAlign:"right"}}})}),o(kt,{optTarget:f,setOptTarget:m}),o(qe,{sx:{flexBasis:150,flexGrow:1},children:o(Ke,{float:!0,disabled:!e||l,value:t==null?void 0:t.maxValue,placeholder:c("buildConstraint.maxStatValue"),onChange:p,sx:{px:1},inputProps:{sx:{"& + .MuiOutlinedInput-notchedOutline":{borderRadius:0},textAlign:"left"}}})}),!!e&&a!==void 0&&o(Z,{sx:h,color:"error",onClick:()=>r(e,a),disabled:l,children:o(Pa,{fontSize:"small"})})]})}function Br({disabled:e=!1}){const{t}=_("page_character_optimize"),[a,r]=d.useState({});return o(S,{children:g(j,{bgt:"light",children:[o(O,{sx:{display:"flex",gap:1,justifyContent:"space-between",flexDirection:"column"},children:g(S,{display:"flex",justifyContent:"space-between",children:[o(w,{sx:{fontWeight:"bold"},children:t`constraintFilter.title`}),o(Ia,{title:o(w,{children:t`constraintFilter.tooltip`})})]})}),o(he,{}),o(S,{display:"flex",flexDirection:"column",gap:.5,children:o(Nr,{statFilters:a,setStatFilters:r,disabled:e})})]})})}function Er({numWorkers:e,setNumWorkers:t}){const{t:a}=_("optimize"),r=navigator.hardwareConcurrency||8;return o(Pe,{title:`${a("numWorkers")}: ${e}`,children:it(1,r).map(n=>o(Te,{onClick:()=>t(n),children:a("workers",{count:n})},n))})}function jr({teamId:e,src:t,children:a}){var b,y,$,R;const r=xt(e),n=G((b=r.loadoutMetadata[0])==null?void 0:b.loadoutId),s=G((y=r.loadoutMetadata[1])==null?void 0:y.loadoutId),i=G(($=r.loadoutMetadata[2])==null?void 0:$.loadoutId),l=G((R=r.loadoutMetadata[3])==null?void 0:R.loadoutId),c=d.useMemo(()=>{const C={all:"all"};return n&&(C[n.key]="0"),s&&(C[s.key]="1"),i&&(C[i.key]="2"),l&&(C[l.key]="3"),C},[n,s,i,l]),u=pe(r.loadoutMetadata[0],c),p=pe(r.loadoutMetadata[1],c),f=pe(r.loadoutMetadata[2],c),m=pe(r.loadoutMetadata[3],c),h=d.useMemo(()=>ba([...va(r.loadoutMetadata.map((C,z)=>C===void 0?void 0:ct[z]).filter(C=>!!C)),...u?fe(0,u):[],...p?fe(1,p):[],...f?fe(2,f):[],...m?fe(3,m):[],de.common.lvl.add(80),de.common.res.add(.1),de.common.isBroken.add(0),de.common.maxToughness.add(100),Yt.common.critMode.add("avg")]),[u,p,f,m,r.loadoutMetadata]),v=d.useMemo(()=>(h==null?void 0:h.withTag({src:t}))??null,[h,t]);return o(be.Provider,{value:v,children:a})}function pe(e,t){const a=G(e==null?void 0:e.loadoutId),r=pt(a==null?void 0:a.key),n=Cr(e==null?void 0:e.buildId),s=Sa(n==null?void 0:n.lightConeId),i=vt(n==null?void 0:n.relicIds),l=d.useMemo(()=>Object.fromEntries(Object.entries((a==null?void 0:a.conditional)??{}).map(([c,u])=>[t[c],u])),[a,t]);return d.useMemo(()=>({character:r,lightCone:s,relics:i,conditionals:l}),[r,s,l,i])}function fe(e,{character:t,lightCone:a,relics:r,conditionals:n}){return t?[...xa(`${e}`,...Ca(t),...ya(a),...ka(Object.values(r).filter(s=>!!s).map(s=>({set:s.setKey,stats:[...s.substats.filter(({key:i})=>i!=="").map(i=>({key:i.key,value:i.accurateValue})),{key:s.mainStatKey,value:s.mainStatVal}]})))),...$a(`${e}`,n)]:[]}var Ne={},Lr=se;Object.defineProperty(Ne,"__esModule",{value:!0});var $t=Ne.default=void 0,Or=Lr(ne()),Wr=M,Kr=(0,Or.default)((0,Wr.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");$t=Ne.default=Kr;var Be={},qr=se;Object.defineProperty(Be,"__esModule",{value:!0});var Mt=Be.default=void 0,Vr=qr(ne()),Gr=M,Ur=(0,Vr.default)((0,Gr.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");Mt=Be.default=Ur;function Hr({teamId:e,charKey:t,tab:a=""}){const{t:r}=_("page_team"),n=lt(),{database:s}=P(),i=s.teams.get(e),{loadoutMetadata:l}=i,c=Me(),u=dt(c.breakpoints.down("md")),[p,f]=d.useState(!1),m=v=>{s.teams.set(e,{name:v})},h=v=>{s.teams.set(e,{description:v})};return g(S,{sx:()=>({borderBottom:"1px rgb(200,200,200,0.3) solid","& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px",backgroundColor:"rgb(200,200,200,0.5)"}}),children:[o(mt,{onClick:()=>f(!0),children:o(Zt,{placement:"top",title:g(S,{children:[g(S,{sx:{display:"flex",color:"info.light",gap:1},children:[o($t,{}),o(w,{children:o("strong",{children:r`team.editNameDesc`})})]}),!!i.description&&o(w,{children:i.description})]}),children:o(O,{sx:{display:"flex",justifyContent:"center","&:hover":{color:"info.light"}},children:g(w,{variant:"h5",sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",textShadow:"#000 0 0 10px !important"},children:[o(me,{}),i.name]})})})}),o(ta,{open:p,onClose:()=>f(!1),children:g(j,{children:[o(ga,{title:r`team.editNameDesc`,avatar:o(me,{}),titleTypographyProps:{variant:"h6"},action:o(ea,{onClick:()=>f(!1),children:o(ft,{})})}),o(he,{}),o(O,{children:g(S,{display:"flex",flexDirection:"column",gap:2,sx:{mt:2},children:[o(at,{label:r`team.name`,value:i.name,onChange:v=>m(v),autoFocus:!0}),o(at,{label:r`team.desc`,value:i.description,onChange:v=>h(v),multiline:!0,minRows:4})]})})]})}),o(he,{}),g(aa,{variant:"fullWidth",value:t??"team",orientation:u?"vertical":"horizontal",children:[o(Ve,{icon:o(me,{}),iconPosition:"start",value:"team",label:"Team Settings",onClick:()=>n(`/teams/${e}/`)}),l.map((v,b)=>{var $;const y=v&&(($=s.loadouts.get(v==null?void 0:v.loadoutId))==null?void 0:$.key);return o(Ve,{icon:o(Mt,{}),iconPosition:"start",value:y??b,disabled:!l[b],label:y?o(w,{children:r(`charNames_gen:${y}`)}):`Character ${b+1}`,onClick:()=>y&&n(`/teams/${e}/${y}/${a}`)},b)})]})]})}function Jr({teamId:e}){const{database:t}=P(),a=t.teams.get(e);return g(S,{children:[e,a.loadoutMetadata.map((r,n)=>o(Fr,{loadoutMetadataIndex:n,teamId:e},`${n}_${r==null?void 0:r.loadoutId}`))]})}function Fr({loadoutMetadataIndex:e,teamId:t}){var l;const{database:a}=P(),r=a.teams.get(t),n=(l=r.loadoutMetadata[e])==null?void 0:l.loadoutId,s=a.loadouts.get(n);function i(c){if(c===""){a.teams.set(t,p=>p.loadoutMetadata[e]=void 0);return}a.chars.getOrCreate(c);const u=r.loadoutMetadata.findIndex(p=>{var f;return p&&((f=a.loadouts.get(p.loadoutId))==null?void 0:f.key)===c});if(u===-1){let p=a.loadouts.keys.find(f=>a.loadouts.get(f).key===c);p||(p=a.loadouts.new(c)),a.teams.set(t,f=>{f.loadoutMetadata[e]={loadoutId:p}})}else{if(u===e)return;const p=r.loadoutMetadata[u],f=r.loadoutMetadata[e];a.teams.set(t,m=>{m.loadoutMetadata[e]=p,m.loadoutMetadata[u]=f})}}return o($r,{charKey:(s==null?void 0:s.key)??"",setCharKey:i})}var Ee={},Xr=se;Object.defineProperty(Ee,"__esModule",{value:!0});var $e=Ee.default=void 0,Qr=Xr(ne()),Yr=M,Zr=(0,Qr.default)((0,Yr.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");$e=Ee.default=Zr;const eo=5e4;class to{constructor(t,a,r,n,s){this.calc=t,this.optTarget=a,this.relicsBySlot=r,this.numWorkers=n,this.setProgress=s,this.worker=new Worker(new URL(""+new URL("parentWorker-CAAYnoOP.js",import.meta.url).href,import.meta.url),{type:"module"})}async optimize(){return await new Promise((a,r)=>{this.worker.onmessage=({data:s})=>{switch(s.resultType){case"progress":this.setProgress(s.progress);break;case"done":a(s.buildResults);break;case"err":console.log(s),r();break}};const n={command:"start",relicsBySlot:this.relicsBySlot,detachedNodes:this.detachNodes(),numWorkers:this.numWorkers};this.worker.postMessage(n)})}async terminate(){const t={command:"terminate"};this.worker.postMessage(t),await new Promise((a,r)=>{this.worker.onmessage=({data:n})=>{switch(n.resultType){case"terminated":a();break;case"err":console.log(n),r();break}}}),this.worker.terminate()}detachNodes(){const t=new Set(ra);return Ma([this.optTarget],this.calc,r=>{if(r.src==="0"&&r.et==="own"){if(r.sheet==="dyn"&&r.qt==="premod")return{q:r.q};if(r.q==="count"&&t.has(r.sheet))return{q:r.sheet}}})}}var je={},ao=se;Object.defineProperty(je,"__esModule",{value:!0});var St=je.default=void 0,ro=ao(ne()),oo=M,no=(0,ro.default)((0,oo.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");St=je.default=no;function so(){const{t:e}=_("optimize"),{database:t}=P(),a=ie(),[r,n]=d.useState(8),[s,i]=d.useState(void 0),[l,c]=d.useState(void 0),u=d.useMemo(()=>t.relics.values.reduce((R,C)=>(R[C.slotKey].push(C),R),{head:[],hands:[],feet:[],body:[],sphere:[],rope:[]}),[t.relics.values]),p=Object.values(u).reduce((R,C)=>R*C.length,1),[f,m]=d.useState(void 0),[h,v]=d.useState(!1),b=d.useRef(()=>{});d.useEffect(()=>()=>b.current(),[]);const y=d.useCallback(async()=>{if(!l||!a)return;const R=new Promise(J=>b.current=J);i(void 0),v(!0);const C=new to(a,l,u,r,i);R.then(async()=>await C.terminate());const z=await C.optimize();await C.terminate(),b.current=()=>{},v(!1),m(z[0])},[a,r,l,u]),$=d.useCallback(()=>{b.current(),v(!1)},[b]);return o(j,{bgt:"dark",children:g(O,{children:[o(Br,{}),g(ye,{children:[o(w,{variant:"h5",children:e("optimize")}),g(S,{children:[o(kt,{optTarget:l,setOptTarget:c}),o(Er,{numWorkers:r,setNumWorkers:n}),o(Z,{onClick:h?$:y,color:h?"error":"primary",startIcon:h?o(ft,{}):o(St,{}),children:e(h?"cancel":"optimize")})]}),s&&o(io,{progress:s,totalPermutations:p}),f&&g(S,{children:[g(w,{children:["Best: ",f.value]}),o(kr,{build:f.ids})]})]})]})})}function io({progress:e,totalPermutations:t}){const{t:a}=_("optimize");return g(S,{children:[g(w,{children:[a("totalProgress"),": ",e.numBuildsComputed.toLocaleString()," /"," ",t.toLocaleString()]}),g(w,{children:[a("buildsKept"),": ",e.numBuildsKept.toLocaleString()," /"," ",eo.toLocaleString()]}),o(gr,{variant:"determinate",value:e.numBuildsComputed/t*100})]})}const co={xs:12,sm:6,md:4};function lo(){const{loadout:{key:e}}=De(),t=ie(),{t:a}=_("sheet_gen"),r=[["basic",a("talents.basic")],["skill",a("talents.skill")],["ultimate",a("talents.ultimate")]],n=Me(),s=dt(n.breakpoints.up("lg")),i=Mr[e];if(!(!i||!t))return o(ge,{children:g(I,{container:!0,spacing:1,children:[s&&o(I,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:o(ot,{})}),o(I,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:r.map(([l,c])=>{const u=i[l];return u?o(I,{item:!0,...co,children:o(uo,{talentKey:l,subtitle:c,sheetElement:u})},l):null})}),!s&&o(I,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:o(I,{item:!0,xs:12,children:o(ot,{})})})]})})}function uo({sheetElement:e,subtitle:t,onClickTitle:a}){const r=d.useCallback(c=>o(mt,{onClick:a,children:c}),[a]);let n=null;n=null;const{loadoutId:s}=d.useContext(ut),{database:i}=P(),l=d.useCallback((c,u,p,f)=>{i.loadouts.set(s,m=>(m=structuredClone(m),oa(m.conditional,[c,u,p],f),m))},[i,s]);return g(j,{bgt:"light",sx:{height:"100%"},children:[n,g(O,{children:[o(vr,{condition:!!a,wrapper:r,children:g(I,{container:!0,sx:{flexWrap:"nowrap"},children:[o(I,{item:!0,children:o(S,{component:Ge?Ge:"img",src:e==null?void 0:e.img,sx:{width:60,height:"auto"}})}),g(I,{item:!0,flexGrow:1,sx:{pl:1},children:[o(w,{variant:"h6",children:e==null?void 0:e.name}),o(w,{variant:"subtitle1",children:t})]})]})}),e.documents.map((c,u)=>o(Dr,{document:c,collapse:!0,setConditional:l},u))]})]})}function ot(){const{t:e}=_("sheet_gen"),t=ie();if(!t)return null;const a=t.compute(_e.char.eidolon).val;return o(Pe,{fullWidth:!0,title:e("constellationLvl",{level:a}),color:"primary",children:it(0,na).map(r=>o(Te,{selected:a===r,disabled:a===r,onClick:()=>{},children:e("constellationLvl",{level:r})},r))})}function po({tab:e}){const{loadout:{key:t}}=De(),{character:a}=sa(),r=ie(),[n,s]=d.useState(void 0);return g(S,{children:[e,o(fa,{characterKey:n,onClose:()=>s(void 0)}),o(ma,{character:a}),g(ye,{gap:1,pt:1,children:[o(j,{bgt:"dark",children:g(O,{children:[o(Z,{disabled:!t,onClick:()=>t&&s(t),children:"Edit Character"}),g(He,{children:[o(Fe,{expandIcon:o($e,{}),children:"All target values, if sheet is created"}),o(Je,{children:o(ye,{children:r==null?void 0:r.listFormulas(_e.listing.formulas).map((i,l)=>{const c=r.compute(i),u=i.tag.name||i.tag.q;return g(S,{children:[g(w,{children:[u,": ",c.val]}),g(He,{children:[g(Fe,{expandIcon:o($e,{}),children:["debug for ",u]}),o(Je,{children:o(w,{component:"pre",children:JSON.stringify(r.toDebug().compute(i),void 0,2)})})]})]},`${u}${l}`)})})})]})]})}),o(lo,{}),o(so,{})]})]})}const fo=o(Re,{variant:"rectangular",width:"100%",height:1e3});function wo(){const{database:e}=P(),{teamId:t}=ia(),a=!t||!e.teams.keys.includes(t);return d.useEffect(()=>{a||e.teams.set(t,{lastEdit:Date.now()})},[t,e.teams,a]),a?o(la,{to:"/teams"}):o(S,{display:"flex",flexDirection:"column",gap:1,children:o(d.Suspense,{fallback:fo,children:t&&o(mo,{teamId:t})})})}function mo({teamId:e}){var v;const{database:t}=P(),a=lt(),r=xt(e),{loadoutMetadata:n}=r,{params:{characterKey:s}}=Ce({path:"/teams/:teamId/:characterKey",end:!1})??{params:{}},{params:{tab:i}}=Ce({path:"/teams/:teamId/:characterKey/:tab"})??{params:{}},l=d.useMemo(()=>n.findIndex(b=>{var y;return(b==null?void 0:b.loadoutId)&&((y=t.loadouts.get(b.loadoutId))==null?void 0:y.key)===s}),[n,t.loadouts,s]),c=d.useMemo(()=>n[l],[n,l]);d.useEffect(()=>{window.scrollTo({top:0})},[]),d.useEffect(()=>{c||a("",{replace:!0})},[c,a]);const u=c==null?void 0:c.loadoutId,p=(v=t.loadouts.get(u))==null?void 0:v.key,{t:f}=_(["charNames_gen","page_character"]);xr(d.useMemo(()=>{const b=f(p?"charNames_gen:Character":"Team Settings"),y=i?f(`page_character:tabs.${i}`):p?f("Loadout/Build"):i;return`${r.name} - ${b}${y?` - ${y}`:""}`},[p,f,i,r.name]));const m=G(u??""),h=d.useMemo(()=>{if(!(!u||!m||!c))return{teamId:e,team:r,loadoutId:u,loadout:m,loadoutMetadatum:c}},[c,r,m,u,e]);return o(jr,{teamId:e,src:ct[l],children:g(S,{sx:{display:"flex",gap:1,flexDirection:"column",mx:1,mt:2},children:[o(j,{children:o(Hr,{teamId:e,charKey:p,tab:i})}),o(S,{children:h?o(ut.Provider,{value:h,children:o(ho,{})}):o(Jr,{teamId:e})})]})})}function ho({tab:e}){const{loadout:{key:t}}=De(),a=pt(t),r=d.useMemo(()=>a&&{character:a},[a]);return r?o(ca.Provider,{value:r,children:o(da,{children:o(Ue,{path:":characterKey",children:o(Ue,{path:"*",index:!0,element:o(po,{tab:e})})})})}):o(Re,{variant:"rectangular",width:"100%",height:1e3})}export{wo as default};
