"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[47],{56047:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var n=a(45492),r=a(42745),l=a(503),s=a(25452),i=a(85439),c=a(36380),o=a(61391),h=a(60319),Z=a(46342),d=a(93553),p=a(67550),u=a(7671),m=a(41075),y=a(13780),g=a(83249),f=a(79906),x=a(56961),C=a(62197),w=a(85801),b=a(2784),k=a(61877),P=a(11141),v=a(73557),T=a(45269),W=a(24264),$=a(11615),z=a(66146),I=a(42090),S=a(89279),B=a(28265),N=a(23657),j=a(44180),E=a(25616),K=a(2180),M=a(64303),D=a(2313),V=a(52903);let X,_=e=>e;const L=b.lazy((()=>Promise.all([a.e(592),a.e(309)]).then(a.bind(a,37629)))),H={xs:1,sm:2,md:3,lg:4,xl:4},O={xs:6,sm:8,md:12,lg:16,xl:16},A=Object.keys(M.V3);function G(){const{t:e}=(0,P.$G)(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:t}=(0,b.useContext)(N.E),a=(0,s.Wz)(),[G,F]=(0,b.useState)((()=>a.displayCharacter.get()));(0,b.useEffect)((()=>a.displayCharacter.follow(((e,t)=>F(t)))),[a,F]);const[U,q]=(0,b.useState)(""),J=(0,b.useDeferredValue)(U),R=(0,b.useRef)(null),Y=(0,b.useCallback)(((e,t)=>{var n;null==(n=R.current)||n.scrollIntoView({behavior:"smooth"}),a.displayCharacter.set({pageIndex:t-1})}),[a,R]),Q=(0,n.JT)(),ee=O[Q],[te,ae]=(0,b.useState)(!1),[ne,re]=(0,n.NW)();(0,b.useEffect)((()=>(k.ZP.send({hitType:"pageview",page:"/characters"}),a.chars.followAny(((e,t)=>("new"===t||"remove"===t)&&re())))),[re,a]),(0,b.useEffect)((()=>a.charMeta.followAny((e=>re()))),[re,a]);const{gender:le}=(0,s.Hz)(),se=(0,b.useCallback)((async n=>{let r=(0,j.m)(n,le).name;"object"==typeof r&&(r=e(`${t?"sillyWisher_charNames":"charNames_gen"}:${(0,l.Cs)(n,le)}`)),window.confirm(e("removeCharacter",{value:r}))&&a.chars.remove(n)}),[a.chars,le,t,e]),ie=(0,K.Z)(),ce=(0,v.s0)(),oe=(0,b.useDeferredValue)(G),he=(0,b.useDeferredValue)(ne),{charKeyList:Ze,totalCharNum:de}=(0,b.useMemo)((()=>{var e;const n=a.chars.keys.length,{element:l,weaponType:s,rarity:i,sortType:c,ascending:o}=oe,h=a.chars.keys.filter((0,r.CZ)({element:l,weaponType:s,rarity:i,name:J},(0,M.zU)(a,t))).sort((0,r.ef)(null!=(e=M.V3[c])?e:[],o,(0,M._L)(a,t),["new","favorite"]));return he&&{charKeyList:h,totalCharNum:n}}),[a,oe,J,t,he]),{weaponType:pe,element:ue,rarity:me,sortType:ye,ascending:ge,pageIndex:fe=0}=G,{charKeyListToShow:xe,numPages:Ce,currentPageIndex:we}=(0,b.useMemo)((()=>{const e=Math.ceil(Ze.length/ee),t=(0,r.re)(fe,0,e-1);return{charKeyListToShow:Ze.slice(t*ee,(t+1)*ee),numPages:e,currentPageIndex:t}}),[Ze,fe,ee]),be=Ze.length!==de?`${Ze.length}/${de}`:`${de}`,ke=(0,b.useMemo)((()=>(0,D.W)(l.yd,(e=>Object.entries(a.chars.data).forEach((([t,n])=>{const r=a.weapons.get(n.equippedWeapon);if(!r)return;const l=(0,E.ub)(r.key).weaponType;e[l].total++,Ze.includes(t)&&e[l].current++}))))),[a,Ze]),Pe=(0,b.useMemo)((()=>(0,D.W)(l.UB,(e=>Object.entries(a.chars.data).forEach((([t,n])=>{const r=(0,j.m)(n.key,a.gender).elementKey;e[r].total++,Ze.includes(t)&&e[r].current++}))))),[a,Ze]),ve=(0,b.useMemo)((()=>(0,D.W)(l.ZI,(e=>Object.entries(a.chars.data).forEach((([t,n])=>{const r=(0,j.m)(n.key,a.gender).rarity;e[r].total++,Ze.includes(t)&&e[r].current++}))))),[a,Ze]),Te={count:Ce,page:we+1,onChange:Y},We={numShowing:xe.length,total:be,t:e},$e={sortKeys:[...A],value:ye,onChange:e=>a.displayCharacter.set({sortType:e}),ascending:ge,onChangeAsc:e=>a.displayCharacter.set({ascending:e})};return(0,V.BX)(p.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,V.tZ)(b.Suspense,{fallback:!1,children:(0,V.tZ)(L,{newFirst:!0,show:te,onHide:()=>ae(!1),onSelect:ie})}),(0,V.tZ)(W.Z,{ref:R,children:(0,V.BX)(u.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,V.BX)(m.ZP,{container:!0,spacing:1,children:[(0,V.tZ)(m.ZP,{item:!0,children:(0,V.tZ)(B.Z,{sx:{height:"100%"},onChange:e=>a.displayCharacter.set({weaponType:e}),value:pe,totals:ke,size:"small"})}),(0,V.tZ)(m.ZP,{item:!0,children:(0,V.tZ)(S.Z,{sx:{height:"100%"},onChange:e=>a.displayCharacter.set({element:e}),value:ue,totals:Pe,size:"small"})}),(0,V.tZ)(m.ZP,{item:!0,children:(0,V.tZ)(I.Z,{sx:{height:"100%"},onChange:e=>a.displayCharacter.set({rarity:e}),value:me,totals:ve,size:"small"})}),(0,V.tZ)(m.ZP,{item:!0,flexGrow:1}),(0,V.tZ)(m.ZP,{item:!0,children:(0,V.tZ)(y.Z,{autoFocus:!0,value:U,onChange:e=>q(e.target.value),label:e("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,V.tZ)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:(0,V.tZ)(z.Z,{paginationProps:Te,showingTextProps:We,displaySort:!0,sortByButtonProps:$e})})]})}),(0,V.tZ)(g.Z,{fullWidth:!0,onClick:()=>ae(!0),color:"info",startIcon:(0,V.tZ)(d.Z,{}),children:e(X||(X=_`addNew`))}),(0,V.tZ)(b.Suspense,{fallback:(0,V.tZ)(f.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,V.tZ)(m.ZP,{container:!0,spacing:1,columns:H,children:xe.map((t=>(0,V.tZ)(m.ZP,{item:!0,xs:1,children:(0,V.tZ)($.Z,{characterKey:t,onClick:()=>ce(`${t}`),footer:(0,V.BX)(V.HY,{children:[(0,V.tZ)(x.Z,{}),(0,V.BX)(p.Z,{sx:{py:1,px:2,display:"flex",gap:1,justifyContent:"space-between"},children:[(0,V.tZ)(T.Z,{placement:"top",title:(0,V.tZ)(C.Z,{children:e("tabs.talent")}),children:(0,V.tZ)(w.Z,{onClick:()=>ce(`${t}/talent`),children:(0,V.tZ)(i.Z,{})})}),(0,V.tZ)(T.Z,{placement:"top",title:(0,V.tZ)(C.Z,{children:e("tabs.teambuffs")}),children:(0,V.tZ)(w.Z,{onClick:()=>ce(`${t}/teambuffs`),children:(0,V.tZ)(c.Z,{})})}),(0,V.tZ)(T.Z,{placement:"top",title:(0,V.tZ)(C.Z,{children:e("tabs.optimize")}),children:(0,V.tZ)(w.Z,{onClick:()=>ce(`${t}/optimize`),children:(0,V.tZ)(o.Z,{})})}),(0,V.tZ)(T.Z,{placement:"top",title:(0,V.tZ)(C.Z,{children:e("tabs.theorycraft")}),children:(0,V.tZ)(w.Z,{onClick:()=>ce(`${t}/theorycraft`),children:(0,V.tZ)(h.Z,{})})}),(0,V.tZ)(x.Z,{orientation:"vertical"}),(0,V.tZ)(T.Z,{placement:"top",title:(0,V.tZ)(C.Z,{children:e("delete")}),children:(0,V.tZ)(w.Z,{color:"error",onClick:()=>se(t),children:(0,V.tZ)(Z.Z,{})})})]})]})})},t)))})}),Ce>1&&(0,V.tZ)(W.Z,{children:(0,V.BX)(u.Z,{sx:{display:"flex",flexDirection:"row",gap:1},children:[(0,V.tZ)(g.Z,{onClick:()=>ae(!0),color:"info",sx:{minWidth:0},children:(0,V.tZ)(d.Z,{})}),(0,V.tZ)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexGrow:1,children:(0,V.tZ)(z.Z,{paginationProps:Te,showingTextProps:We})})]})})]})}}}]);