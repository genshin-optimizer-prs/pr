import{b as R,p as e,cL as st,cM as rt,cN as it,cO as ct,cP as lt,cQ as dt,cR as ut,cS as ht,cT as pt,cU as ft,bz as mt,bx as gt,bg as ue,cq as ne,cV as vt,cs as ae,cW as W,cp as oe,co as A,cr as U,cX as se,u as we,bf as ye,be as xt,n as r,Q as D,T as p,r as Y,i as Z,j as T,bM as Ie,c as yt,e as d,f as re,cY as Ct,a4 as St,Z as Dt,d as z,cn as bt,cZ as _t,bh as wt,cf as It,a1 as kt,K as u,W as X,t as F,J as G,k as Bt,an as K,aa as ke,ba as he,bc as Be,q as H,bV as Re,aD as $e,aC as ie,s as Rt,C as $t,bC as Mt,b6 as Et,B as Nt,aB as zt,bb as jt,D as Ce,Y as Wt}from"./index-4928e81d.js";import{B as Q,a as At}from"./Help-a1db0a25.js";import{u as pe,d as Ht,b as Ft,L as Gt,p as Ot,F as Tt,C as ce}from"./StarDisplay-9cfa501a.js";import{i as fe,I as Vt}from"./ColoredText-a9b5f03e.js";import{E as Me,s as Ee,J as C,K as w,L as I,M as f,C as k,p as h,N as V,O as q,P as qt,Q as Pt,T as Ne,R as N,V as le,q as Lt,g as ee,r as Se,D as Jt,W as Ut,w as ze,G as Qt,S as je,d as Yt,v as Zt,u as De,x as Xt,n as Kt,I as We}from"./index-7fac742e.js";import{S as E}from"./SqBadge-5abc5a1e.js";import{D as P,a as en}from"./FieldDisplay-501cbbae.js";import{b as tn,g as nn}from"./index-5120b408.js";import{g as Ae,W as He}from"./index-5dc90e7e.js";import{A as Fe}from"./Artifact-eb82d4cc.js";import{S as an}from"./SlotIcon-631f176c.js";import{u as on}from"./useWeapon-bbef8eea.js";import{C as O}from"./CardActionArea-c38e59b8.js";function Ge(t){const n=R();return pe(n.charMeta,t)}function Oe(t){const n=R();return pe(n.chars,t)}function sn(t){const n=R();return pe(n.teams,t)}function rn({statKey:t,iconProps:n={}}){switch(t){case"hp":case"hp_":case"base_hp":return e(gt,{...n});case"atk":case"atk_":case"base_atk":return e(mt,{...n});case"def":case"def_":case"base_def":return e(ft,{...n});case"eleMas":return e(pt,{...n});case"critRate_":return e(ht,{...n});case"critDMG_":return e(ut,{...n});case"enerRech_":return e(dt,{...n});case"incHeal_":return e(lt,{...n});case"heal_":return e(ct,{...n});case"cdRed_":return e(it,{...n});case"shield_":return e(rt,{...n});case"stamina":return e(st,{...n})}const a=t.split("_")[0];return ue.includes(a)?e(cn,{ele:a,iconProps:n}):null}function cn({ele:t,iconProps:n={}}){switch(t){case"anemo":return e(se,{...n});case"cryo":return e(U,{...n});case"dendro":return e(A,{...n});case"electro":return e(oe,{...n});case"geo":return e(W,{...n});case"hydro":return e(ae,{...n});case"physical":return e(vt,{...n});case"pyro":return e(ne,{...n})}}function ln({statKey:t,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:c}=we("statKey_gen"),i=ye(t),l=xt(n,ye(t));return r(p,{color:a?`${a}.main`:void 0,...s,children:[e(rn,{statKey:t,iconProps:D})," ",c(t)," ",e("strong",{children:`${o}${l}${i}`})]},t)}function dn({condition:t,wrapper:n,falseWrapper:a,children:o}){return t?n(o):a?a(o):o}var me={},un=Z;Object.defineProperty(me,"__esModule",{value:!0});var Te=me.default=void 0,hn=un(Y()),pn=T,fn=(0,hn.default)((0,pn.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");Te=me.default=fn;const Ve=({stars:t=1,colored:n=!1,inline:a=!1})=>e(Ie,{color:n?"warning":void 0,children:[...Array(t).keys()].map((o,s)=>e(Ht,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},s))}),mn=yt(T.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");var ge={},gn=Z;Object.defineProperty(ge,"__esModule",{value:!0});var vn=ge.default=void 0,xn=gn(Y()),yn=T,Cn=(0,xn.default)((0,yn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");vn=ge.default=Cn;const Sn=d.createContext({});function Dn({iconProps:t}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),e(Me,{ele:re[n%re.length],iconProps:t})}const x=t=>e(Ne,{ns:"elementalResonance_gen",key18:t}),de=t=>e(Ne,{ns:"elementalResonance",key18:t}),S=Ee(...re.map(t=>C[t])),qe=Ct(ue,t=>[`${t}_res_`,w(h.charKey,f(C.ele,4,k(.15)),I.info(`${t}_res_`))]),bn={name:x("ProtectiveCanopy.name"),desc:x("ProtectiveCanopy.desc"),icon:r("span",{children:[e(Dn,{iconProps:D})," x4"]}),canShow:t=>t.get(C.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(qe).map(([t,n])=>({node:n}))}]},[_n,wn]=w(h.charKey,f(S,4,f(C.pyro,2,k(.25))),I.info("atk_")),In={name:x("FerventFlames.name"),desc:x("FerventFlames.desc"),icon:r("span",{children:[e(ne,{...D})," ",e(ne,{...D})]}),canShow:t=>t.get(C.pyro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.cryo"),value:-40,unit:"%"},{node:_n}]}]},[kn,Bn]=w(h.charKey,f(S,4,f(C.hydro,2,k(.25))),I.info("hp_")),Rn={name:x("SoothingWater.name"),desc:x("SoothingWater.desc"),icon:r("span",{children:[e(ae,{...D})," ",e(ae,{...D})]}),canShow:t=>t.get(C.hydro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.pyro"),value:-40,unit:"%"},{node:kn}]}]},Pe=["resonance","ShatteringIce"],Le=V(Pe),[$n,Mn]=w(h.charKey,f(S,4,f(C.cryo,2,q(Le,"on",k(.15)))),I.info("critRate_")),En={name:x("ShatteringIce.name"),desc:x("ShatteringIce.desc"),icon:r("span",{children:[e(U,{...D})," ",e(U,{...D})]}),canShow:t=>t.get(C.cryo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:Pe,value:Le,name:N("enemyAffected.frozenOrCryo"),header:{title:x("ShatteringIce.name"),icon:e(U,{})},states:{on:{fields:[{node:$n}]}}}]},Nn={name:x("HighVoltage.name"),desc:x("HighVoltage.desc"),icon:r("span",{children:[e(oe,{...D})," ",e(oe,{...D})]}),canShow:t=>t.get(C.electro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.hydro"),value:-40,unit:"%"}]}]},[zn,jn]=w(h.charKey,f(S,4,f(C.anemo,2,k(-.15))),I.info("staminaDec_")),[Wn,An]=w(h.charKey,f(S,4,f(C.anemo,2,k(.1))),I.info("moveSPD_")),[Hn,Fn]=w(h.charKey,f(S,4,f(C.anemo,2,k(-.05))),I.info("cdRed_")),Gn={name:x("ImpetuousWinds.name"),desc:x("ImpetuousWinds.desc"),icon:r("span",{children:[e(se,{...D})," ",e(se,{...D})]}),canShow:t=>t.get(C.anemo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{node:zn},{node:Wn},{node:Hn}]}]},Je=["resonance","EnduringRock"],Ue=V(Je),Qe=["resonance","EnduringRockHit"],Ye=V(Qe),[On,Tn]=w(h.charKey,f(S,4,f(C.geo,2,k(.15))),I.info("shield_")),[Vn,qn]=w(h.charKey,f(S,4,f(C.geo,2,q(Ue,"on",k(.15)))),I.info("all_dmg_")),[Pn,Ln]=w(h.charKey,f(S,4,f(C.geo,2,q(Ye,"on",k(-.2)))),I.info("geo_enemyRes_")),Jn={name:x("EnduringRock.name"),desc:x("EnduringRock.desc"),icon:r("span",{children:[e(W,{...D})," ",e(W,{...D})]}),canShow:t=>t.get(C.geo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:x("EnduringRock.desc"),fields:[{node:On}]},{teamBuff:!0,path:Je,value:Ue,header:{title:x("EnduringRock.name"),icon:e(W,{})},name:N("protectedByShield"),states:{on:{fields:[{node:Vn}]}}},{teamBuff:!0,path:Qe,value:Ye,header:{title:x("EnduringRock.name"),icon:e(W,{})},name:de("EnduringRock.hitCond"),states:{on:{fields:[{node:Pn},{text:le("duration"),value:15,unit:"s"}]}}}]},Ze=["resonance","SprawlingCanopy2ele"],Xe=V(Ze),Ke=["resonance","SprawlingCanopy3ele"],et=V(Ke),[Un,Qn]=w(h.charKey,f(S,4,f(C.dendro,2,50)),I.info("eleMas")),[Yn,Zn]=w(h.charKey,f(S,4,f(C.dendro,2,q(Xe,"on",30))),I.info("eleMas")),[Xn,Kn]=w(h.charKey,f(S,4,f(C.dendro,2,q(et,"on",20))),I.info("eleMas")),ea={name:x("SprawlingGreenery.name"),desc:x("SprawlingGreenery.desc"),icon:r("span",{children:[e(A,{...D})," ",e(A,{...D})]}),canShow:t=>t.get(C.dendro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:x("SprawlingGreenery.desc"),fields:[{node:Un}]},{teamBuff:!0,path:Ze,value:Xe,header:{title:x("SprawlingGreenery.name"),icon:e(A,{})},name:de("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:Yn},{text:le("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:Ke,value:et,header:{title:x("SprawlingGreenery.name"),icon:e(A,{})},name:de("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:Xn},{text:le("duration"),value:6,unit:"s"}]}}}]},qa=[bn,In,Rn,En,Nn,Gn,Jn,ea],ta=qt({teamBuff:{premod:{...St(qe,([t,n])=>n),atk_:wn,hp_:Bn,staminaDec_:jn,moveSPD_:An,cdRed_:Fn,shield_:Tn,all_dmg_:qn,geo_enemyRes_:Ln,eleMas:Pt(Ee(Qn,Zn,Kn),{pivot:!0})},total:{critRate_:Mn}}});function na(t,n=0,a,o){const s=R(),[c,i]=Dt(),l=d.useDeferredValue(c),{gender:m}=z(),y=d.useMemo(()=>l&&oa(s,t,n,m,a,o),[l,m,t,s,n,a,o]);return d.useEffect(()=>t?s.chars.follow(t,i):void 0,[t,i,s]),y}class aa{constructor(n){this.data={},n.chars.followAny(a=>{this.removeData(a)})}getData(n){return this.data[n]}cacheData(n,a){this.data[n]=a}removeData(n){delete this.data[n]}}const te=new Map,be=t=>{if(te.has(t))return te.get(t);const n=new aa(t);return te.set(t,n),n};function oa(t,n,a=0,o,s,c){if(!n)return;if(!a&&!s&&!c){const g=be(t).getData(n);if(g)return g}const{teamData:i,teamBundle:l}=sa(t,n,a,s,c)??{};if(!i||!l)return;const m=Lt(i,o,n),y=bt(m,(g,b)=>{const{data:v,..._}=l[b];return{...g,..._}});return!a&&!s&&!c&&be(t).cacheData(n,y),y}function sa(t,n,a=0,o,s){if(!n)return;const c=t.chars.get(n);if(!c)return;const i=ra(t,!0,a,c,s||(t.weapons.get(c.equippedWeapon)??_t()),o??Object.values(c.equippedArtifacts).map(y=>t.arts.get(y)).filter(y=>y));if(!i)return;const l={[n]:i};return{teamData:{[n]:i.data},teamBundle:l}}function ra(t,n=!1,a,o,s,c){const i=ee(o.key,t.gender);if(!i)return;const l=Ae(s.key);if(!l)return;const m=He.getAllDataOfType(i.weaponTypeKey),y=n?(()=>{const{display:_,...B}=l.data;return Se([B,m])})():l.data,g=Se([i.data,y,tn]),v=[...Array.isArray(c)?c.map(_=>Jt(_,a)):[c],Ut(o),ze(s),g,Qt,ta];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:v}}function ia(t){const n=R();return d.useCallback(a=>{if(!t)return;const o=n.chars.get(t);o&&n.chars.set(t,{...o,...a})},[t,n])}function ca({art:t,children:n}){const a=e(u,{children:e(X,{variant:"rectangular",width:100,height:100})}),o=e(d.Suspense,{fallback:a,children:e(la,{art:t})});return e(Q,{placement:"top",title:o,disableInteractive:!0,children:n})}function la({art:t}){const{t:n}=we("statKey_gen"),a=nn(t.setKey),{slotKey:o,level:s,rarity:c,mainStatKey:i,substats:l}=t,m=a.getSlotName(o),y=wt.getVariant(i);return r(u,{p:1,children:[r(p,{variant:"h6",children:[e(an,{slotKey:o,iconProps:D})," ",m]}),r(p,{variant:"subtitle1",color:`${y}.main`,children:[e(je,{statKey:i,iconProps:D})," ",n(i)," ",It(i,c,s)]}),r(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(Ft,{stars:c}),r(E,{color:Fe.levelVariant(s),children:["+",s]})," "]}),e(u,{py:1,children:l.map(({value:g,key:b,rolls:v})=>!!(g&&b)&&e(ln,{statKey:b,value:g,color:`roll${kt(v.length,1,6)}`,prefix:"+"},b))}),e(p,{color:"success.main",children:a.name}),e(Gt,{color:"secondary.main",location:t.location})]})}function da({artifactObj:t,slotKey:n}){if(!t)return e(F,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e(u,{sx:{width:"100%",pb:"100%",position:"relative"},children:e(u,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:fe.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=t,i=ue.find(l=>t.mainStatKey.includes(l))??"secondary";return e(ca,{art:t,children:r(F,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[e(u,{component:"img",className:`grad-${o}star`,src:Yt(t.setKey,t.slotKey),maxWidth:"100%",maxHeight:"100%"}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{sx:{p:.5},color:Fe.levelVariant(s),children:r("strong",{children:["+",s]})})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e(E,{color:i,sx:{p:.5},children:e(je,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function ua({sheet:t,addlText:n,children:a}){const o=r(d.Suspense,{fallback:e(X,{variant:"text",width:100}),children:[r(p,{children:[e(Vt,{src:fe.weaponTypes[t.weaponType],size:1.5})," ",t.name]}),n]});return e(Q,{placement:"top",title:o,disableInteractive:!0,children:a})}function ha({weaponId:t}){const n=on(t),a=(n==null?void 0:n.key)&&Ae(n.key),o=d.useMemo(()=>a&&n&&Zt([a.data,ze(n)]),[a,n]);if(!n||!a||!o)return null;const s=r(u,{children:[e(_e,{node:o.get(De.weapon.main)}),e(_e,{node:o.get(De.weapon.sub)})]});return r(F,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[e(u,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:e(ua,{sheet:a,addlText:s,children:e(u,{component:"img",src:Xt(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{color:"primary",children:He.getLevelString(n)})})}),a.hasRefinement&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["R",n.refinement]})})})]})}function _e({node:t}){return r(p,{children:[t.info.icon," ",Kt(t)]})}function pa({hideWeapon:t=!1}){var a;const{data:n}=d.useContext(P);return e(u,{children:r(G,{container:!0,columns:t?5:6,spacing:.5,children:[!t&&e(G,{item:!0,xs:1,height:"100%",children:e(ha,{weaponId:((a=n.get(h.weapon.id).value)==null?void 0:a.toString())??""})}),e(fa,{})]})})}function fa(){const t=R(),{data:n}=d.useContext(P),a=Bt.map(o=>{var s;return[o,t.arts.get(((s=n.get(h.art[o].id).value)==null?void 0:s.toString())??"")]});return e(K,{children:a.map(([o,s])=>e(G,{item:!0,xs:1,children:e(da,{artifactObj:s,slotKey:o})},o))})}function tt(t,n,a){const o=Ot(t,n),s=We(t,"icon",n);return a&&o?o:s||""}function nt({children:t,characterKey:n,onClick:a}){const{gender:o}=z(),{silly:s}=d.useContext(ke),c=he(n),i=d.useCallback(m=>e(O,{onClick:a,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:m}),[a]),l=We(n,"banner",o);return e(dn,{condition:!!a,wrapper:i,children:r(u,{display:"flex",position:"relative",className:l?void 0:`grad-${c.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(u,{flexShrink:1,component:"img",src:tt(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),e(u,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:t})]})})}function ma({characterKey:t}){const{gender:n}=z(),{data:a}=d.useContext(P),o=a.get(h.charEle).value,s=a.get(h.lvl).value,c=a.get(h.constellation).value,i=a.get(h.asc).value,l=a.get(h.total.autoBoost).value,m=a.get(h.total.skillBoost).value,y=a.get(h.total.burstBoost).value,g=a.get(h.total.auto).value,b=a.get(h.total.skill).value,v=a.get(h.total.burst).value,_=he(t);return r(K,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Be,{characterKey:t,gender:n})}),size:"small",color:o,sx:{opacity:.85}}),r(u,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[r(u,{children:[r(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),r(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",Re[i]]})]}),e(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:e($e,{color:`roll${c<3?3:c}`,children:e(Ie,{color:"white",children:r("strong",{children:["C",c]})})})})]}),r(u,{display:"flex",gap:1,sx:{opacity:.85},children:[e(H,{size:"small",color:l?"info":"secondary",label:e("strong",{children:g})}),e(H,{size:"small",color:m?"info":"secondary",label:e("strong",{children:b})}),e(H,{size:"small",color:y?"info":"secondary",label:e("strong",{children:v})})]}),e(p,{variant:"h6",lineHeight:1,children:e(Ve,{stars:_.rarity,colored:!0,inline:!0})})]})}function ga({characterKey:t}){const{gender:n}=z(),a=he(t),o=ee(t,n);return r(K,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Be,{characterKey:t,gender:n})}),size:"small",color:o.elementKey,sx:{opacity:.85}}),e(u,{mt:1,children:e(p,{variant:"h4",children:e($e,{children:"NEW"})})}),e(p,{mt:1.5,children:e(Ve,{stars:a.rarity,colored:!0})})]})}function va(){const{data:t}=d.useContext(P);return r(u,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(n=>e(en,{node:n},JSON.stringify(n.info))),t.get(h.special).info.name&&r(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(h.special).info.icon,e(p,{children:t.get(h.special).info.name})]})]})}function xa({characterKey:t,onClick:n,onClickHeader:a,footer:o,hideStats:s}){var L;const c=R(),i=na(t),l=Oe(t),{gender:m}=z(),y=ee(t,m),g=ia(t),b=(L=i==null?void 0:i[t])==null?void 0:L.target,v=d.useCallback(()=>t&&(n==null?void 0:n(t)),[t,n]),_=d.useCallback(J=>e(O,{onClick:v,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:J}),[v]),B=d.useMemo(()=>l&&y&&{character:l,characterSheet:y,characterDispatch:g},[l,y,g]),$=d.useMemo(()=>b&&i&&{data:b,teamData:i},[b,i]),{favorite:M}=Ge(t);return e(d.Suspense,{fallback:e(X,{variant:"rectangular",width:"100%",height:s?300:600}),children:r(Rt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(u,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(ie,{sx:{p:.5},onClick:J=>c.charMeta.set(t,{favorite:!M}),children:M?e(Tt,{}):e(mn,{})})}),e(ce,{condition:!!n,wrapper:_,children:l&&$&&B?e(ya,{characterContextObj:B,dataContextObj:$,characterKey:t,onClick:n,onClickHeader:()=>a(t),hideStats:s}):e(Ca,{characterKey:t})}),o]})})}function ya({characterContextObj:t,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,hideStats:c}){return e(Sn.Provider,{value:t,children:r(P.Provider,{value:n,children:[e(nt,{characterKey:a,onClick:o?void 0:s,children:e(ma,{characterKey:a})}),r(u,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${i.spacing(1)}!important`:void 0}),children:[e(pa,{}),!c&&e(va,{})]})]})})}function Ca({characterKey:t}){return r(K,{children:[e(nt,{characterKey:t,children:e(ga,{characterKey:t})}),e($t,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}var ve={},Sa=Z;Object.defineProperty(ve,"__esModule",{value:!0});var at=ve.default=void 0,Da=Sa(Y()),ba=T,_a=(0,Da.default)((0,ba.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");at=ve.default=_a;var xe={},wa=Z;Object.defineProperty(xe,"__esModule",{value:!0});var ot=xe.default=void 0,Ia=wa(Y()),ka=T,Ba=(0,Ia.default)((0,ka.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");ot=xe.default=Ba;function Ra({characterKey:t,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:c=!1}){const i=Oe(t),{favorite:l}=Ge(t),{gender:m}=z(),{silly:y}=d.useContext(ke),g=ee(t,m),b=d.useCallback(()=>n==null?void 0:n(t),[t,n]),v=d.useCallback(j=>e(O,{onClick:b,onMouseDown:a,onMouseEnter:o,children:j}),[b,a,o]),[_,B]=d.useState(!1),$=d.useCallback(()=>!c&&B(!0),[c]),M=d.useCallback(()=>B(!1),[]);d.useEffect(()=>{c&&B(!1)},[c]);const L=d.useCallback(j=>e(Q,{placement:"top",open:_&&!c,onClose:M,onOpen:$,title:e(d.Suspense,{fallback:e(X,{width:300,height:400}),children:r(p,{children:[g.elementKey&&e(Me,{ele:g.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${g.elementKey}.main`}}})," ",g.name]})}),children:j}),[g.elementKey,g.name,c,M,$,_]),J=d.useCallback(j=>e(Q,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:_&&!c,onClose:M,onOpen:$,title:e(u,{sx:{width:300,m:-1},children:e(xa,{hideStats:!0,characterKey:t})}),children:j}),[t,c,M,$,_]);return e(ce,{condition:s,wrapper:L,falseWrapper:J,children:e(F,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:r(ce,{condition:!!n||!!a||!!o,wrapper:v,children:[e(u,{display:"flex",className:`grad-${g.rarity}star`,children:e(u,{component:"img",src:tt(t,m,y),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:e("strong",{children:r(E,{color:"primary",children:[i.level,"/",Re[i.ascension]]})})}),e(u,{sx:{position:"absolute",top:0,right:0},children:l?e(Te,{fontSize:"small"}):e(ot,{fontSize:"small"})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["C",i.constellation]})})})]})})})}function $a({index:t}){return e(F,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:e(u,{component:"img",src:fe.team[`team${t+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function Pa({teamId:t,onClick:n,bgt:a,disableButtons:o=!1}){const s=sn(t),{name:c,description:i,teamCharIds:l}=s,m=R(),y=()=>{window.confirm("Do you want to remove this team? This will delete all loadouts and data (such as multi-opts) in this team as well.")&&m.teams.remove(t)},g=()=>{const v=m.teams.export(t),_=JSON.stringify(v);navigator.clipboard.writeText(_).then(()=>alert("Copied team data to clipboard.")).catch(console.error)},b=()=>m.teams.duplicate(t);return r(zt,{bgt:a,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r(u,{sx:{height:"100%",p:1,display:"flex",flexDirection:"column",gap:1},children:[r(p,{sx:{display:"flex",gap:1},children:[e("span",{children:c})," ",e(jt,{title:e(p,{children:i}),children:e(At,{})})]}),e(u,{sx:{marginTop:"auto"},children:e(G,{container:!0,columns:4,spacing:1,children:Mt(0,3).map(v=>e(G,{item:!0,xs:1,height:"100%",children:l[v]?e(O,{onClick:()=>n(m.teamChars.get(l[v]).key),children:e(Ra,{characterKey:m.teamChars.get(l[v]).key})}):e(O,{onClick:()=>n(),children:e($a,{index:v})})},v))})})]}),!o&&r(u,{sx:{display:"flex",gap:1,marginTop:"auto",p:1},children:[e(Nt,{color:"info",variant:"text",sx:{flexGrow:1},startIcon:e(Et,{}),disabled:l.every(v=>!v),onClick:g,children:"Export"}),e(Ce,{orientation:"vertical"}),e(ie,{color:"info",disabled:l.every(v=>!v),onClick:b,children:e(at,{})}),e(Ce,{orientation:"vertical"}),e(ie,{color:"error",size:"small",onClick:y,children:e(Wt,{})})]})]})}export{da as A,xa as C,mn as F,rn as S,Pa as T,ha as W,at as a,Sn as b,Ra as c,vn as d,nt as e,ma as f,pa as g,va as h,Oe as i,oa as j,sn as k,Ge as l,ca as m,ua as n,ta as o,na as p,tt as q,qa as r,ia as u};
