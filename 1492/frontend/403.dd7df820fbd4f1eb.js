"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[403],{43403:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(96736),a=n(83568),l=n(67550),c=n(79906),i=n(7671),s=n(2784),o=n(11141),u=n(73557),d=n(13230),h=n(99487),Z=n(48650),v=n(64583),p=n(23657),m=n(44180),f=n(4311),C=n(76260),g=n(23690),x=n(86512),k=n(503),y=n(41075),w=n(22254),B=n(87833),K=n(73611),P=n(46725),b=n(25065),z=n(32404),D=n(42745),M=n(67245),S=n(47513),V=n(52903);function W(){const{character:{key:e}}=(0,s.useContext)(d.K),{data:t}=(0,s.useContext)(h.R),n=(0,a.Wz)(),r=(0,M.Ru)(e).weaponType,c=t.get(z.ri.weapon.id).value,i=(0,s.useMemo)((()=>(0,D.K8)(k.Ex,(e=>t.get(z.ri.art[e].id).value))),[t]);return(0,V.tZ)(l.Z,{children:(0,V.tZ)(S.ZP,{weaponTypeKey:r,weaponId:c,artifactIds:i,setWeapon:t=>{n.weapons.set(t,{location:(0,k.V7)(e)})},setArtifact:t=>{n.arts.set(t,{location:(0,k.V7)(e)})}})})}function I(){const e=(0,s.useRef)(),t=(0,s.useCallback)((()=>{var t;return null==e||null==(t=e.current)||null==t.scrollIntoView?void 0:t.scrollIntoView({behavior:"smooth"})}),[e]);return(0,V.tZ)(l.Z,{children:(0,V.BX)(y.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,V.tZ)(y.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,V.tZ)(K.Z,{})}),(0,V.BX)(y.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,V.tZ)(G,{onClick:t}),(0,V.tZ)(B.Z,{sx:{flexGrow:1,p:1},children:(0,V.tZ)(P.Z,{})}),(0,V.tZ)(l.Z,{ref:e,children:(0,V.tZ)(W,{})})]})]})})}function G({onClick:e}){const{character:{equippedWeapon:t}}=(0,s.useContext)(d.K),{data:n}=(0,s.useContext)(h.R);return(0,V.BX)(y.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,V.tZ)(y.ZP,{item:!0,xs:1,children:(0,V.tZ)(b.Z,{weaponId:t,BGComponent:B.Z,onClick:e})}),k.Ex.map((t=>{var r;return(0,V.tZ)(y.ZP,{item:!0,xs:1,children:(0,V.tZ)(w.Z,{artifactId:null==(r=n.get(z.ri.art[t].id).value)?void 0:r.toString(),slotKey:t,BGComponent:B.Z,onClick:e})},t)}))]})}var X=n(94380),F=n(86569),R=n(76111),$=n(51638),E=n(2180);function H(){const{character:e}=(0,s.useContext)(d.K),{key:t}=e,n=(0,E.Z)();if(!t.startsWith("Traveler"))return null;const r=k.UB.find((e=>t.toLowerCase().includes(e)));return r?(0,V.tZ)(R.Z,{color:r,title:(0,V.tZ)("strong",{children:(0,$.el)(`element.${r}`)}),children:k.DZ.map((e=>(0,V.tZ)(X.Z,{selected:r===e,disabled:r===e,onClick:()=>n((0,k.vd)(e)),children:(0,V.tZ)("strong",{children:(0,V.tZ)(F.Z,{color:e,children:(0,$.el)(`element.${e}`)})})},e)))}):null}var T=n(29798),j=n(52322);const L=(0,T.Z)((0,j.jsx)("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),U=(0,T.Z)((0,j.jsx)("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male");var _=n(83249);function A(){const{t:e}=(0,o.$G)("ui"),t=(0,a.Wz)(),{character:n}=(0,s.useContext)(d.K),{key:r}=n,{gender:l}=(0,a.Hz)(),c=(0,s.useCallback)((()=>t.dbMeta.set({gender:"F"===l?"M":"F"})),[l,t]);return r.startsWith("Traveler")?(0,V.BX)(_.Z,{onClick:c,startIcon:"F"===l?(0,V.tZ)(L,{}):(0,V.tZ)(U,{}),children:[(0,V.tZ)("strong",{children:e(`gender.${l}`)})," "]}):null}function N({character:e,onClose:t}){var n;const r=(0,C.Z)(null!=(n=null==e?void 0:e.key)?n:"");return(0,V.BX)(V.HY,{children:[(0,V.BX)(l.Z,{display:"flex",gap:1,children:[(0,V.tZ)(H,{}),(0,V.tZ)(A,{}),e&&(0,V.tZ)(x.Z,{level:e.level,ascension:e.ascension,setBoth:r}),!!t&&(0,V.tZ)(g.Z,{onClick:t,sx:{marginLeft:"auto"}})]}),(0,V.tZ)(I,{})]})}function q(){const e=(0,u.s0)(),t=(0,a.Wz)(),n=(0,s.useCallback)((()=>e("/characters")),[e]),{characterKey:r}=(0,u.UO)();return!t.chars.keys.includes(r)?(0,V.tZ)(u.Fg,{to:"/characters"}):(0,V.tZ)(l.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,V.tZ)(s.Suspense,{fallback:(0,V.tZ)(c.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,V.tZ)(O,{characterKey:r,onClose:n},r)})})}function O({characterKey:e,onClose:t}){var n,l;const{silly:u}=(0,s.useContext)(p.E),g=(0,a.AU)(e),{gender:x}=(0,a.Hz)(),k=(0,m.m)(e,x),y=(0,f.Z)(e),{target:w}=null!=(n=null==y?void 0:y[e])?n:{},{t:B}=(0,o.$G)(["sillyWisher_charNames","charNames_gen","page_character"]),K=(0,C.Z)(null!=(l=null==g?void 0:g.key)?l:""),P=(0,s.useMemo)((()=>{if(y&&w)return{data:w,teamData:y,oldData:void 0}}),[w,y]),b=(0,s.useMemo)((()=>{if(g&&k)return{character:g,characterSheet:k,characterDispatch:K}}),[g,k,K]),[z,D]=(0,s.useState)(void 0),[M,S]=(0,s.useState)(),W=(0,s.useMemo)((()=>({chartData:z,setChartData:D,graphBuilds:M,setGraphBuilds:S})),[z,M]);return(0,s.useEffect)((()=>{D(void 0),S(void 0)}),[e]),(0,V.tZ)(r.s8,{children:(0,V.tZ)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:P&&b&&W?(0,V.tZ)(d.K.Provider,{value:b,children:(0,V.tZ)(h.R.Provider,{value:P,children:(0,V.tZ)(v.V.Provider,{value:W,children:(0,V.tZ)(Z.B,{children:(0,V.tZ)(N,{character:g,onClose:t})})})})}):(0,V.tZ)(c.Z,{variant:"rectangular",width:"100%",height:1e3})})})}}}]);