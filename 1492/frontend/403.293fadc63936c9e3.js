"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[403],{43403:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Te});var r=n(96736),i=n(67128),a=n(67550),l=n(79906),o=n(7671),c=n(2784),s=n(11141),Z=n(73557),h=n(13230),d=n(99487),u=n(48650),p=n(64583),g=n(23657),x=n(44180),m=n(4311),f=n(76260),v=n(23690),y=n(86512),C=n(72539),w=n(21207),k=n(31653),K=n(10483),b=n(16633),B=n(16068),X=n(66147),P=n(33927),S=n(41075),z=n(75213),V=n(21194),I=n(62197),T=n(66198),W=n(85801),D=n(22254),E=n(87833),G=n(46725),M=n(79410),$=n(12366),H=n(36674),q=n(25065),F=n(32404),j=n(39099),R=n(11845),A=n(45492),_=n(4991),O=n(85469),L=n(56961),N=n(83249),Y=n(23883),U=n(69409),Q=(n(91923),n(79199)),J=(n(71179),n(24264),n(39282),n(69698),n(96580),n(4121),n(69614),n(30706)),ee=n(73501),te=n(51654),ne=n(52903);let re,ie,ae,le=e=>e;const oe=(0,c.lazy)((()=>Promise.resolve().then(n.bind(n,64262))));function ce(){const{character:{equippedWeapon:e,key:t},characterSheet:n}=(0,c.useContext)(h.K),{data:r}=(0,c.useContext)(d.R),[l,o]=(0,c.useState)(""),s=(0,c.useCallback)((()=>o(e)),[e]),Z=(0,c.useCallback)((()=>o("")),[]);(0,c.useEffect)((()=>{l&&l!==e&&o(e)}),[l,e]);const{rvFilter:u}=(0,i.xF)(t),p=(0,c.useDeferredValue)(u),g=(0,c.useMemo)((()=>new Set(p)),[p]);return(0,ne.BX)(a.Z,{children:[(0,ne.tZ)(c.Suspense,{fallback:!1,children:(0,ne.tZ)(oe,{weaponId:l,footer:!0,onClose:Z,extraButtons:(0,ne.tZ)(he,{weaponTypeKey:n.weaponTypeKey})})}),(0,ne.tZ)(S.ZP,{container:!0,spacing:1,children:(0,ne.BX)(S.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,ne.tZ)(S.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,ne.tZ)(ee.Z,{weaponId:e,onEdit:s,canEquip:!0,extraButtons:(0,ne.tZ)(Ze,{weaponTypeKey:n.weaponTypeKey})})}),k.Ex.map((e=>{var t;return(0,ne.tZ)(S.ZP,{item:!0,xs:12,sm:6,md:4,children:r.get(F.ri.art[e].id).value?(0,ne.tZ)(J.Z,{artifactId:null==(t=r.get(F.ri.art[e].id).value)?void 0:t.toString(),effFilter:g,extraButtons:(0,ne.tZ)(de,{slotKey:e}),editorProps:{},canEquip:!0}):(0,ne.tZ)(se,{slotKey:e})},e)}))]})})]})}function se({slotKey:e}){const{character:{key:t}}=(0,c.useContext)(h.K),n=(0,i.Wz)(),[r,l,Z]=(0,A.aV)(),{t:d}=(0,s.$G)("artifact");return(0,ne.BX)(E.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,ne.tZ)(o.Z,{children:(0,ne.BX)(I.Z,{children:[(0,ne.tZ)(Q.Z,{iconProps:_.mX,slotKey:e})," ",d(`slotName.${e}`)]})}),(0,ne.tZ)(L.Z,{}),(0,ne.BX)(a.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,ne.tZ)(U.Z,{slotKey:e,show:r,onClose:Z,onChangeId:e=>n.arts.set(e,{location:(0,k.V7)(t)})}),(0,ne.tZ)(N.Z,{onClick:l,color:"info",sx:{borderRadius:"1em"},children:(0,ne.tZ)(O.Z,{sx:{height:100,width:100}})})]})]})}function Ze({weaponTypeKey:e}){const{t}=(0,s.$G)("page_character"),{character:{key:n}}=(0,c.useContext)(h.K),r=(0,i.Wz)(),[a,l,o]=(0,A.aV)();return(0,ne.BX)(ne.HY,{children:[(0,ne.tZ)(Y.Z,{title:(0,ne.tZ)(I.Z,{children:t(re||(re=le`tabEquip.swapWeapon`))}),placement:"top",arrow:!0,children:(0,ne.tZ)(N.Z,{color:"info",size:"small",onClick:l,children:(0,ne.tZ)(O.Z,{})})}),(0,ne.tZ)(te.Z,{weaponTypeKey:e,onChangeId:e=>r.weapons.set(e,{location:(0,k.V7)(n)}),show:a,onClose:o})]})}function he({weaponTypeKey:e}){const{t}=(0,s.$G)("page_character"),{character:{key:n}}=(0,c.useContext)(h.K),r=(0,i.Wz)(),[a,l,o]=(0,A.aV)();return(0,ne.BX)(ne.HY,{children:[(0,ne.tZ)(N.Z,{color:"info",onClick:l,startIcon:(0,ne.tZ)(O.Z,{}),children:t(ie||(ie=le`tabEquip.swapWeapon`))}),(0,ne.tZ)(te.Z,{weaponTypeKey:e,onChangeId:e=>r.weapons.set(e,{location:(0,k.V7)(n)}),show:a,onClose:o})]})}function de({slotKey:e}){const{t}=(0,s.$G)("page_character"),{character:{key:n}}=(0,c.useContext)(h.K),r=(0,i.Wz)(),[a,l,o]=(0,A.aV)();return(0,ne.BX)(ne.HY,{children:[(0,ne.tZ)(Y.Z,{title:(0,ne.tZ)(I.Z,{children:t(ae||(ae=le`tabEquip.swapArt`))}),placement:"top",arrow:!0,children:(0,ne.tZ)(N.Z,{color:"info",size:"small",onClick:l,children:(0,ne.tZ)(O.Z,{})})}),(0,ne.tZ)(U.Z,{slotKey:e,show:a,onClose:o,onChangeId:e=>r.arts.set(e,{location:(0,k.V7)(n)})})]})}function ue(){const e=(0,c.useRef)(),t=(0,c.useCallback)((()=>{var t;return null==e||null==(t=e.current)||null==t.scrollIntoView?void 0:t.scrollIntoView({behavior:"smooth"})}),[e]);return(0,ne.BX)(P.Z,{spacing:1,children:[(0,ne.tZ)(a.Z,{children:(0,ne.BX)(S.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,ne.tZ)(S.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,ne.tZ)(ge,{})}),(0,ne.BX)(S.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,ne.tZ)(pe,{onClick:t}),(0,ne.tZ)(E.Z,{sx:{flexGrow:1,p:1},children:(0,ne.tZ)(G.Z,{})})]})]})}),(0,ne.tZ)(a.Z,{ref:e,children:(0,ne.tZ)(ce,{})})]})}function pe({onClick:e}){const{character:{equippedWeapon:t}}=(0,c.useContext)(h.K),{data:n}=(0,c.useContext)(d.R);return(0,ne.BX)(S.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,ne.tZ)(S.ZP,{item:!0,xs:1,children:(0,ne.tZ)(q.Z,{weaponId:t,BGComponent:E.Z,onClick:e})}),k.Ex.map((t=>{var r;return(0,ne.tZ)(S.ZP,{item:!0,xs:1,children:(0,ne.tZ)(D.Z,{artifactId:null==(r=n.get(F.ri.art[t].id).value)?void 0:r.toString(),slotKey:t,BGComponent:E.Z,onClick:e})},t)}))]})}function ge(){const{silly:e}=(0,c.useContext)(g.E),{characterSheet:t,character:{key:n}}=(0,c.useContext)(h.K),{gender:r}=(0,i.Hz)(),{data:l}=(0,c.useContext)(d.R),o=(0,f.Z)(n),s=(0,Z.s0)(),u=l.get(F.ri.lvl).value,p=l.get(F.ri.asc).value,x=l.get(F.ri.constellation).value,m={auto:l.get(F.ri.total.auto).value,skill:l.get(F.ri.total.skill).value,burst:l.get(F.ri.total.burst).value},v={auto:l.get(F.ri.total.autoBoost).value,skill:l.get(F.ri.total.skillBoost).value,burst:l.get(F.ri.total.burstBoost).value},y=(0,K.V)(n,r),C=(0,w.r)(n,r);return(0,ne.BX)(E.Z,{sx:{height:"100%"},children:[e&&y?(0,ne.tZ)(xe,{src:y,level:u,ascension:p}):(0,ne.tZ)(me,{src:C,level:u,ascension:p}),(0,ne.BX)(a.Z,{children:[(0,ne.tZ)(z.Z,{sx:{p:1},onClick:()=>s("talent"),children:(0,ne.tZ)(S.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((e=>{var n;return(0,ne.tZ)(S.ZP,{item:!0,xs:4,children:(0,ne.tZ)(V.Z,{badgeContent:m[e],color:v[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,ne.tZ)(a.Z,{component:"img",src:null==(n=t.getTalentOfKey(e))?void 0:n.img,width:"100%",height:"auto"})})},e)}))})}),(0,ne.tZ)(I.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,ne.tZ)(S.ZP,{container:!0,spacing:1,children:(0,R.w6)(1,6).map((e=>{var n;return(0,ne.tZ)(S.ZP,{item:!0,xs:4,children:(0,ne.tZ)(z.Z,{onClick:()=>o({constellation:e===x?e-1:e}),children:(0,ne.tZ)(a.Z,{component:"img",src:null==(n=t.getTalentOfKey(`constellation${e}`))?void 0:n.img,sx:Object.assign({},x>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))})]})]})}function xe({src:e,level:t,ascension:n}){const{characterSheet:r}=(0,c.useContext)(h.K);return(0,ne.BX)(a.Z,{sx:{position:"relative"},children:[(0,ne.tZ)(a.Z,{src:e,component:"img",width:"100%",height:"auto"}),(0,ne.BX)(a.Z,{sx:{width:"100%",height:"100%"},children:[(0,ne.tZ)(a.Z,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,ne.tZ)(fe,{})}),(0,ne.tZ)(I.Z,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:(0,ne.tZ)(H.q,{stars:r.rarity,colored:!0})}),(0,ne.tZ)(ye,{}),(0,ne.tZ)(ve,{level:t,ascension:n})]})]})}function me({src:e,level:t,ascension:n}){const{characterSheet:r}=(0,c.useContext)(h.K);return(0,ne.BX)(a.Z,{sx:{position:"relative"},children:[(0,ne.BX)(a.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,ne.tZ)(I.Z,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:(0,ne.tZ)(H.q,{stars:r.rarity,colored:!0})}),(0,ne.tZ)(a.Z,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,ne.tZ)(fe,{})}),(0,ne.tZ)(ye,{}),(0,ne.tZ)(ve,{level:t,ascension:n})]}),(0,ne.tZ)(a.Z,{src:e,component:"img",width:"100%",height:"auto"})]})}function fe(){var e;const{characterSheet:t}=(0,c.useContext)(h.K),n=t.elementKey;return(0,ne.tZ)(T.Z,{color:n,sx:{height:"auto"},label:(0,ne.BX)(I.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,ne.tZ)(j.Z,{ele:n}),(0,ne.tZ)(a.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,ne.tZ)(M.Z,{src:null==(e=C.CL.weaponTypes)?void 0:e[t.weaponTypeKey]})]})})}function ve({level:e,ascension:t}){return(0,ne.tZ)(I.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,ne.tZ)($.Z,{children:(0,b.wQ)(e,t)})})}function ye(){const{character:{key:e}}=(0,c.useContext)(h.K),t=(0,i.Wz)(),{favorite:n}=(0,i.xF)(e);return(0,ne.tZ)(a.Z,{sx:{position:"absolute",left:0,top:0},children:(0,ne.tZ)(W.Z,{sx:{p:1},color:"error",onClick:()=>t.charMeta.set(e,{favorite:!n}),children:n?(0,ne.tZ)(B.Z,{}):(0,ne.tZ)(X.Z,{})})})}var Ce=n(94380),we=n(86569),ke=n(23485),Ke=n(51638),be=n(2180);function Be(){const{character:e}=(0,c.useContext)(h.K),{key:t}=e,n=(0,be.Z)();if(!t.startsWith("Traveler"))return null;const r=k.UB.find((e=>t.toLowerCase().includes(e)));return r?(0,ne.tZ)(ke.Z,{color:r,title:(0,ne.tZ)("strong",{children:(0,Ke.el)(`element.${r}`)}),children:k.DZ.map((e=>(0,ne.tZ)(Ce.Z,{selected:r===e,disabled:r===e,onClick:()=>n((0,k.vd)(e)),children:(0,ne.tZ)("strong",{children:(0,ne.tZ)(we.Z,{color:e,children:(0,Ke.el)(`element.${e}`)})})},e)))}):null}var Xe=n(29798),Pe=n(52322);const Se=(0,Xe.Z)((0,Pe.jsx)("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),ze=(0,Xe.Z)((0,Pe.jsx)("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male");function Ve(){const{t:e}=(0,s.$G)("ui"),t=(0,i.Wz)(),{character:n}=(0,c.useContext)(h.K),{key:r}=n,{gender:a}=(0,i.Hz)(),l=(0,c.useCallback)((()=>t.dbMeta.set({gender:"F"===a?"M":"F"})),[a,t]);return r.startsWith("Traveler")?(0,ne.BX)(N.Z,{onClick:l,startIcon:"F"===a?(0,ne.tZ)(Se,{}):(0,ne.tZ)(ze,{}),children:[(0,ne.tZ)("strong",{children:e(`gender.${a}`)})," "]}):null}function Ie({character:e,onClose:t}){var n;const r=(0,f.Z)(null!=(n=null==e?void 0:e.key)?n:"");return(0,ne.BX)(ne.HY,{children:[(0,ne.BX)(a.Z,{display:"flex",gap:1,children:[(0,ne.tZ)(Be,{}),(0,ne.tZ)(Ve,{}),e&&(0,ne.tZ)(y.Z,{level:e.level,ascension:e.ascension,setBoth:r}),!!t&&(0,ne.tZ)(v.Z,{onClick:t,sx:{marginLeft:"auto"}})]}),(0,ne.tZ)(ue,{})]})}function Te(){const e=(0,Z.s0)(),t=(0,i.Wz)(),n=(0,c.useCallback)((()=>e("/characters")),[e]),{characterKey:r}=(0,Z.UO)();return!t.chars.keys.includes(r)?(0,ne.tZ)(Z.Fg,{to:"/characters"}):(0,ne.tZ)(a.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,ne.tZ)(c.Suspense,{fallback:(0,ne.tZ)(l.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,ne.tZ)(We,{characterKey:r,onClose:n},r)})})}function We({characterKey:e,onClose:t}){var n,a;const{silly:Z}=(0,c.useContext)(g.E),v=(0,i.AU)(e),{gender:y}=(0,i.Hz)(),C=(0,x.m)(e,y),w=(0,m.ZP)(e),{target:k}=null!=(n=null==w?void 0:w[e])?n:{},{t:K}=(0,s.$G)(["sillyWisher_charNames","charNames_gen","page_character"]),b=(0,f.Z)(null!=(a=null==v?void 0:v.key)?a:""),B=(0,c.useMemo)((()=>{if(w&&k)return{data:k,teamData:w,oldData:void 0}}),[k,w]),X=(0,c.useMemo)((()=>{if(v&&C)return{character:v,characterSheet:C,characterDispatch:b}}),[v,C,b]),[P,S]=(0,c.useState)(void 0),[z,V]=(0,c.useState)(),I=(0,c.useMemo)((()=>({chartData:P,setChartData:S,graphBuilds:z,setGraphBuilds:V})),[P,z]);return(0,c.useEffect)((()=>{S(void 0),V(void 0)}),[e]),(0,ne.tZ)(r.s8,{children:(0,ne.tZ)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:B&&X&&I?(0,ne.tZ)(h.K.Provider,{value:X,children:(0,ne.tZ)(d.R.Provider,{value:B,children:(0,ne.tZ)(p.V.Provider,{value:I,children:(0,ne.tZ)(u.B,{children:(0,ne.tZ)(Ie,{character:v,onClose:t})})})})}):(0,ne.tZ)(l.Z,{variant:"rectangular",width:"100%",height:1e3})})})}}}]);