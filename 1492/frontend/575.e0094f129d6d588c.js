"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[575],{78575:(e,t,n)=>{n.r(t),n.d(t,{default:()=>rt});var a=n(38243),l=n(70274),r=n(67550),o=n(79906),i=n(7671),s=n(2784),c=n(11141),Z=n(73557),h=n(13230),u=n(99487),d=n(48650),p=n(64583),g=n(23657),f=n(44180),m=n(4311),x=n(76260),w=n(23690),y=n(86512),C=n(72539),v=n(21207),b=n(31653),k=n(10483),P=n(16633),B=n(16068),I=n(66147),K=n(33927),S=n(41075),X=n(75213),T=n(21194),W=n(62197),z=n(66198),E=n(85801),$=n(22254),M=n(87833),V=n(46725),G=n(79410),D=n(12366),_=n(36674),j=n(25065),q=n(32404),H=n(39099),A=n(11845),F=n(45492),R=n(4991),O=n(85469),N=n(56961),U=n(83249),L=n(23883),Y=(n(91923),n(79199)),J=(n(71179),n(24264)),Q=(n(39282),n(69698)),ee=(n(96580),n(4121),n(69614),n(30706)),te=n(73501),ne=n(42745),ae=n(66146),le=n(15015),re=n(29687),oe=n(52903);let ie,se=e=>e;function ce({artId:e,weaponId:t}){const{t:n}=(0,c.$G)("page_character"),[a,l,r]=(0,F.aV)(!1);return(0,oe.BX)(oe.HY,{children:[(0,oe.tZ)(Q.Z,{open:a,onClose:r,containerProps:{maxWidth:"xl"},children:(0,oe.tZ)(Ze,{artId:e,weaponId:t,onHide:r})}),(0,oe.tZ)(L.Z,{title:(0,oe.tZ)(W.Z,{children:n(ie||(ie=se`tabEquip.compare`))}),placement:"top",arrow:!0,children:(0,oe.tZ)(U.Z,{color:"info",size:"small",onClick:l,children:(0,oe.tZ)(re.Z,{})})})]})}function Ze({artId:e,weaponId:t,onHide:n}){const a=(0,l.Wz)(),{character:{key:r,equippedArtifacts:i}}=(0,s.useContext)(h.K),{data:c}=(0,s.useContext)(u.R);(0,s.useMemo)((()=>{const t=a.arts.get(null!=e?e:""),n=(0,ne.vU)(i,((e,n)=>n===(null==t?void 0:t.slotKey)?t:a.arts.get(e)));return Object.values(n).filter((e=>e))}),[a,i,e]);return(0,oe.tZ)(s.Suspense,{fallback:(0,oe.tZ)(o.Z,{variant:"rectangular",width:"100%",height:600})})}let he,ue=e=>e;const de={xs:6,sm:6,md:9,lg:12,xl:12},pe=(0,s.lazy)((()=>Promise.all([n.e(497),n.e(537),n.e(113)]).then(n.bind(n,22537))));function ge({onChangeId:e,slotKey:t,show:n,onClose:a}){const{t:Z}=(0,c.$G)("page_character"),h=(0,l.Wz)(),u=(0,s.useCallback)((t=>{e(t),a()}),[e,a]),d=(0,s.useCallback)(((e,n)=>Object.assign({},e,n,{slotKeys:[t]})),[t]),[p,g]=(0,s.useReducer)(d,Object.assign({},(0,le.Af)(),{slotKeys:[t]})),[f,m]=(0,F.NW)();(0,s.useEffect)((()=>h.arts.followAny(m)),[h,m]);const x=(0,F.JT)(),y=de[x],[v,b]=(0,s.useState)(0),k=(0,s.useRef)(null),P=(0,s.useMemo)((()=>(0,le.EM)()),[]),B=h.arts.values.filter((e=>e.slotKey===p.slotKeys[0])).length,I=(0,s.useMemo)((()=>{const e=(0,ne.CZ)(p,P);return f&&h.arts.values.filter(e).map((e=>e.id))}),[f,h,P,p]),{artifactIdsToShow:K,numPages:X,currentPageIndex:T}=(0,s.useMemo)((()=>{const e=Math.ceil(I.length/y),t=(0,ne.re)(v,0,e-1);return{artifactIdsToShow:I.slice(t*y,(t+1)*y),numPages:e,currentPageIndex:t}}),[I,v,y]),z=I.length!==B?`${I.length}/${B}`:`${B}`,E={count:X,page:T+1,onChange:(0,s.useCallback)(((e,t)=>{var n;null==(n=k.current)||n.scrollIntoView({behavior:"smooth"}),b(t-1)}),[b,k])},$={numShowing:K.length,total:z,t:Z,namespace:"artifact"};return(0,oe.tZ)(Q.Z,{open:n,onClose:a,containerProps:{maxWidth:"xl"},children:(0,oe.BX)(J.Z,{children:[(0,oe.BX)(i.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,oe.BX)(W.Z,{variant:"h6",children:[t?(0,oe.tZ)(G.Z,{src:C.CL.slot[t]}):null," ",Z(he||(he=ue`tabEquip.swapArt`))]}),(0,oe.tZ)(w.Z,{onClick:a})]}),(0,oe.tZ)(N.Z,{}),(0,oe.tZ)(i.Z,{children:(0,oe.tZ)(s.Suspense,{fallback:(0,oe.tZ)(o.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,oe.tZ)(pe,{filterOption:p,filterOptionDispatch:g,filteredIds:I,disableSlotFilter:!0})})}),(0,oe.tZ)(N.Z,{}),(0,oe.BX)(i.Z,{children:[(0,oe.tZ)(r.Z,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:(0,oe.tZ)(ae.Z,{paginationProps:E,showingTextProps:$})}),(0,oe.tZ)(r.Z,{mt:1,children:(0,oe.tZ)(s.Suspense,{fallback:(0,oe.tZ)(o.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,oe.tZ)(S.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:K.map((e=>(0,oe.tZ)(S.ZP,{item:!0,xs:1,children:(0,oe.tZ)(ee.Z,{artifactId:e,extraButtons:(0,oe.tZ)(ce,{artId:e}),onClick:u})},e)))})})}),X>1&&(0,oe.tZ)(r.Z,{pt:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,oe.tZ)(ae.Z,{paginationProps:E,showingTextProps:$})})]})]})})}var fe=n(92252),me=n(78437),xe=n(92794),we=n(13780),ye=n(58489),Ce=n(18571),ve=n(64262),be=n(61851),ke=n(54578),Pe=n(7794);let Be,Ie=e=>e;const Ke={xs:6,sm:6,md:9,lg:12,xl:12},Se=(0,be.X)([...b.U1]);function Xe({onChangeId:e,weaponTypeKey:t,show:n,onClose:a}){const{t:o}=(0,c.$G)(["page_character","page_weapon","weaponNames_gen"]),Z=(0,l.Wz)(),[h,u]=(0,s.useState)(!1),d=(0,s.useCallback)((t=>{e(t),a()}),[e,a]),[p,g]=(0,s.useState)(""),f=(0,s.useCallback)((e=>{g(Z.weapons.new((0,Pe.xg)(e)))}),[Z,g]),m=(0,s.useCallback)((()=>g("")),[]),[x,y]=(0,F.NW)();(0,s.useEffect)((()=>Z.weapons.followAny(y)),[y,Z]);const v=(0,F.JT)(),k=Ke[v],[P,B]=(0,s.useState)(0),I=(0,s.useRef)(null),[K,X]=(0,s.useState)([5,4,3]),[T,z]=(0,s.useState)(""),E=(0,s.useDeferredValue)(T),$=(0,s.useMemo)((()=>{var e,n;return null!=(e=x&&Z.weapons.values.filter((0,ne.CZ)({weaponType:t,rarity:K,name:E},(0,ke.Xg)())).sort((0,ne.ef)(null!=(n=ke.gd.level)?n:[],!1,(0,ke.Sn)())).map((e=>e.id)))?e:[]}),[x,Z,K,t,E]),{weaponIdsToShow:M,numPages:V,currentPageIndex:D}=(0,s.useMemo)((()=>{const e=Math.ceil($.length/k),t=(0,ne.re)(P,0,e-1);return{weaponIdsToShow:$.slice(t*k,(t+1)*k),numPages:e,currentPageIndex:t}}),[$,P,k]),_=`${$.length}`,j={count:V,page:D+1,onChange:(0,s.useCallback)(((e,t)=>{var n;null==(n=I.current)||n.scrollIntoView({behavior:"smooth"}),B(t-1)}),[B,I])},q={numShowing:M.length,total:_,t:o,namespace:"page_weapon"};return(0,oe.tZ)(Q.Z,{open:n,onClose:a,children:(0,oe.BX)(J.Z,{children:[(0,oe.tZ)(s.Suspense,{fallback:!1,children:(0,oe.tZ)(Ce.default,{show:h,onHide:()=>u(!1),onSelect:f,weaponTypeFilter:t})}),(0,oe.tZ)(s.Suspense,{fallback:!1,children:(0,oe.tZ)(ve.default,{weaponId:p,footer:!0,onClose:m})}),(0,oe.tZ)(i.Z,{sx:{py:1},children:(0,oe.BX)(S.ZP,{container:!0,children:[(0,oe.tZ)(S.ZP,{item:!0,flexGrow:1,children:(0,oe.BX)(W.Z,{variant:"h6",children:[t?(0,oe.tZ)(G.Z,{src:C.CL.weaponTypes[t]}):null," ",o(Be||(Be=Ie`page_character:tabEquip.swapWeapon`))]})}),(0,oe.tZ)(S.ZP,{item:!0,children:(0,oe.tZ)(w.Z,{onClick:a})})]})}),(0,oe.tZ)(N.Z,{}),(0,oe.BX)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,oe.BX)(S.ZP,{container:!0,spacing:1,children:[(0,oe.tZ)(S.ZP,{item:!0,children:(0,oe.tZ)(ye.Z,{sx:{height:"100%"},value:K,size:"small",children:b.U1.map((e=>(0,oe.tZ)(xe.Z,{value:e,onClick:()=>X(Se(K,e)),children:(0,oe.BX)(r.Z,{display:"flex",children:[(0,oe.tZ)("strong",{children:e}),(0,oe.tZ)(me.Z,{})]})},e)))})}),(0,oe.tZ)(S.ZP,{item:!0,flexGrow:1,children:(0,oe.tZ)(we.Z,{autoFocus:!0,size:"small",value:T,onChange:e=>z(e.target.value),label:o("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,oe.tZ)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,oe.tZ)(ae.Z,{paginationProps:j,showingTextProps:q})}),(0,oe.tZ)(U.Z,{fullWidth:!0,onClick:()=>u(!0),color:"info",startIcon:(0,oe.tZ)(fe.Z,{}),children:o("page_weapon:addWeapon")}),(0,oe.tZ)(S.ZP,{container:!0,spacing:1,children:M.map((e=>(0,oe.tZ)(S.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,oe.tZ)(te.Z,{weaponId:e,onClick:d,extraButtons:(0,oe.tZ)(ce,{weaponId:e})})},e)))}),V>1&&(0,oe.tZ)(r.Z,{pt:1,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,oe.tZ)(ae.Z,{paginationProps:j,showingTextProps:q})})]})]})})}let Te,We,ze,Ee=e=>e;const $e=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,64262))));function Me(){const{character:{equippedWeapon:e,key:t},characterSheet:n}=(0,s.useContext)(h.K),{data:a}=(0,s.useContext)(u.R),[o,i]=(0,s.useState)(""),c=(0,s.useCallback)((()=>i(e)),[e]),Z=(0,s.useCallback)((()=>i("")),[]);(0,s.useEffect)((()=>{o&&o!==e&&i(e)}),[o,e]);const{rvFilter:d}=(0,l.xF)(t),p=(0,s.useDeferredValue)(d),g=(0,s.useMemo)((()=>new Set(p)),[p]);return(0,oe.BX)(r.Z,{children:[(0,oe.tZ)(s.Suspense,{fallback:!1,children:(0,oe.tZ)($e,{weaponId:o,footer:!0,onClose:Z,extraButtons:(0,oe.tZ)(De,{weaponTypeKey:n.weaponTypeKey})})}),(0,oe.tZ)(S.ZP,{container:!0,spacing:1,children:(0,oe.BX)(S.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,oe.tZ)(S.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,oe.tZ)(te.Z,{weaponId:e,onEdit:c,canEquip:!0,extraButtons:(0,oe.tZ)(Ge,{weaponTypeKey:n.weaponTypeKey})})}),b.Ex.map((e=>{var t;return(0,oe.tZ)(S.ZP,{item:!0,xs:12,sm:6,md:4,children:a.get(q.ri.art[e].id).value?(0,oe.tZ)(ee.Z,{artifactId:null==(t=a.get(q.ri.art[e].id).value)?void 0:t.toString(),effFilter:g,extraButtons:(0,oe.tZ)(_e,{slotKey:e}),editorProps:{},canEquip:!0}):(0,oe.tZ)(Ve,{slotKey:e})},e)}))]})})]})}function Ve({slotKey:e}){const{character:{key:t}}=(0,s.useContext)(h.K),n=(0,l.Wz)(),[a,o,Z]=(0,F.aV)(),{t:u}=(0,c.$G)("artifact");return(0,oe.BX)(M.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,oe.tZ)(i.Z,{children:(0,oe.BX)(W.Z,{children:[(0,oe.tZ)(Y.Z,{iconProps:R.mX,slotKey:e})," ",u(`slotName.${e}`)]})}),(0,oe.tZ)(N.Z,{}),(0,oe.BX)(r.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,oe.tZ)(ge,{slotKey:e,show:a,onClose:Z,onChangeId:e=>n.arts.set(e,{location:(0,b.V7)(t)})}),(0,oe.tZ)(U.Z,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:(0,oe.tZ)(O.Z,{sx:{height:100,width:100}})})]})]})}function Ge({weaponTypeKey:e}){const{t}=(0,c.$G)("page_character"),{character:{key:n}}=(0,s.useContext)(h.K),a=(0,l.Wz)(),[r,o,i]=(0,F.aV)();return(0,oe.BX)(oe.HY,{children:[(0,oe.tZ)(L.Z,{title:(0,oe.tZ)(W.Z,{children:t(Te||(Te=Ee`tabEquip.swapWeapon`))}),placement:"top",arrow:!0,children:(0,oe.tZ)(U.Z,{color:"info",size:"small",onClick:o,children:(0,oe.tZ)(O.Z,{})})}),(0,oe.tZ)(Xe,{weaponTypeKey:e,onChangeId:e=>a.weapons.set(e,{location:(0,b.V7)(n)}),show:r,onClose:i})]})}function De({weaponTypeKey:e}){const{t}=(0,c.$G)("page_character"),{character:{key:n}}=(0,s.useContext)(h.K),a=(0,l.Wz)(),[r,o,i]=(0,F.aV)();return(0,oe.BX)(oe.HY,{children:[(0,oe.tZ)(U.Z,{color:"info",onClick:o,startIcon:(0,oe.tZ)(O.Z,{}),children:t(We||(We=Ee`tabEquip.swapWeapon`))}),(0,oe.tZ)(Xe,{weaponTypeKey:e,onChangeId:e=>a.weapons.set(e,{location:(0,b.V7)(n)}),show:r,onClose:i})]})}function _e({slotKey:e}){const{t}=(0,c.$G)("page_character"),{character:{key:n}}=(0,s.useContext)(h.K),a=(0,l.Wz)(),[r,o,i]=(0,F.aV)();return(0,oe.BX)(oe.HY,{children:[(0,oe.tZ)(L.Z,{title:(0,oe.tZ)(W.Z,{children:t(ze||(ze=Ee`tabEquip.swapArt`))}),placement:"top",arrow:!0,children:(0,oe.tZ)(U.Z,{color:"info",size:"small",onClick:o,children:(0,oe.tZ)(O.Z,{})})}),(0,oe.tZ)(ge,{slotKey:e,show:r,onClose:i,onChangeId:e=>a.arts.set(e,{location:(0,b.V7)(n)})})]})}function je(){const e=(0,s.useRef)(),t=(0,s.useCallback)((()=>{var t;return null==e||null==(t=e.current)||null==t.scrollIntoView?void 0:t.scrollIntoView({behavior:"smooth"})}),[e]);return(0,oe.BX)(K.Z,{spacing:1,children:[(0,oe.tZ)(r.Z,{children:(0,oe.BX)(S.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,oe.tZ)(S.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,oe.tZ)(He,{})}),(0,oe.BX)(S.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,oe.tZ)(qe,{onClick:t}),(0,oe.tZ)(M.Z,{sx:{flexGrow:1,p:1},children:(0,oe.tZ)(V.Z,{})})]})]})}),(0,oe.tZ)(r.Z,{ref:e,children:(0,oe.tZ)(Me,{})})]})}function qe({onClick:e}){const{character:{equippedWeapon:t}}=(0,s.useContext)(h.K),{data:n}=(0,s.useContext)(u.R);return(0,oe.BX)(S.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,oe.tZ)(S.ZP,{item:!0,xs:1,children:(0,oe.tZ)(j.Z,{weaponId:t,BGComponent:M.Z,onClick:e})}),b.Ex.map((t=>{var a;return(0,oe.tZ)(S.ZP,{item:!0,xs:1,children:(0,oe.tZ)($.Z,{artifactId:null==(a=n.get(q.ri.art[t].id).value)?void 0:a.toString(),slotKey:t,BGComponent:M.Z,onClick:e})},t)}))]})}function He(){const{silly:e}=(0,s.useContext)(g.E),{characterSheet:t,character:{key:n}}=(0,s.useContext)(h.K),{gender:a}=(0,l.Hz)(),{data:o}=(0,s.useContext)(u.R),i=(0,x.Z)(n),c=(0,Z.s0)(),d=o.get(q.ri.lvl).value,p=o.get(q.ri.asc).value,f=o.get(q.ri.constellation).value,m={auto:o.get(q.ri.total.auto).value,skill:o.get(q.ri.total.skill).value,burst:o.get(q.ri.total.burst).value},w={auto:o.get(q.ri.total.autoBoost).value,skill:o.get(q.ri.total.skillBoost).value,burst:o.get(q.ri.total.burstBoost).value},y=(0,k.V)(n,a),C=(0,v.r)(n,a);return(0,oe.BX)(M.Z,{sx:{height:"100%"},children:[e&&y?(0,oe.tZ)(Ae,{src:y,level:d,ascension:p}):(0,oe.tZ)(Fe,{src:C,level:d,ascension:p}),(0,oe.BX)(r.Z,{children:[(0,oe.tZ)(X.Z,{sx:{p:1},onClick:()=>c("talent"),children:(0,oe.tZ)(S.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((e=>{var n;return(0,oe.tZ)(S.ZP,{item:!0,xs:4,children:(0,oe.tZ)(T.Z,{badgeContent:m[e],color:w[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,oe.tZ)(r.Z,{component:"img",src:null==(n=t.getTalentOfKey(e))?void 0:n.img,width:"100%",height:"auto"})})},e)}))})}),(0,oe.tZ)(W.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,oe.tZ)(S.ZP,{container:!0,spacing:1,children:(0,A.w6)(1,6).map((e=>{var n;return(0,oe.tZ)(S.ZP,{item:!0,xs:4,children:(0,oe.tZ)(X.Z,{onClick:()=>i({constellation:e===f?e-1:e}),children:(0,oe.tZ)(r.Z,{component:"img",src:null==(n=t.getTalentOfKey(`constellation${e}`))?void 0:n.img,sx:Object.assign({},f>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))})]})]})}function Ae({src:e,level:t,ascension:n}){const{characterSheet:a}=(0,s.useContext)(h.K);return(0,oe.BX)(r.Z,{sx:{position:"relative"},children:[(0,oe.tZ)(r.Z,{src:e,component:"img",width:"100%",height:"auto"}),(0,oe.BX)(r.Z,{sx:{width:"100%",height:"100%"},children:[(0,oe.tZ)(r.Z,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,oe.tZ)(Re,{})}),(0,oe.tZ)(W.Z,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:(0,oe.tZ)(_.q,{stars:a.rarity,colored:!0})}),(0,oe.tZ)(Ne,{}),(0,oe.tZ)(Oe,{level:t,ascension:n})]})]})}function Fe({src:e,level:t,ascension:n}){const{characterSheet:a}=(0,s.useContext)(h.K);return(0,oe.BX)(r.Z,{sx:{position:"relative"},children:[(0,oe.BX)(r.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,oe.tZ)(W.Z,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:(0,oe.tZ)(_.q,{stars:a.rarity,colored:!0})}),(0,oe.tZ)(r.Z,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,oe.tZ)(Re,{})}),(0,oe.tZ)(Ne,{}),(0,oe.tZ)(Oe,{level:t,ascension:n})]}),(0,oe.tZ)(r.Z,{src:e,component:"img",width:"100%",height:"auto"})]})}function Re(){var e;const{characterSheet:t}=(0,s.useContext)(h.K),n=t.elementKey;return(0,oe.tZ)(z.Z,{color:n,sx:{height:"auto"},label:(0,oe.BX)(W.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,oe.tZ)(H.Z,{ele:n}),(0,oe.tZ)(r.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,oe.tZ)(G.Z,{src:null==(e=C.CL.weaponTypes)?void 0:e[t.weaponTypeKey]})]})})}function Oe({level:e,ascension:t}){return(0,oe.tZ)(W.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,oe.tZ)(D.Z,{children:(0,P.wQ)(e,t)})})}function Ne(){const{character:{key:e}}=(0,s.useContext)(h.K),t=(0,l.Wz)(),{favorite:n}=(0,l.xF)(e);return(0,oe.tZ)(r.Z,{sx:{position:"absolute",left:0,top:0},children:(0,oe.tZ)(E.Z,{sx:{p:1},color:"error",onClick:()=>t.charMeta.set(e,{favorite:!n}),children:n?(0,oe.tZ)(B.Z,{}):(0,oe.tZ)(I.Z,{})})})}var Ue=n(94380),Le=n(86569),Ye=n(23485),Je=n(51638),Qe=n(2180);function et(){const{character:e}=(0,s.useContext)(h.K),{key:t}=e,n=(0,Qe.Z)();if(!t.startsWith("Traveler"))return null;const a=b.UB.find((e=>t.toLowerCase().includes(e)));return a?(0,oe.tZ)(Ye.Z,{color:a,title:(0,oe.tZ)("strong",{children:(0,Je.el)(`element.${a}`)}),children:b.DZ.map((e=>(0,oe.tZ)(Ue.Z,{selected:a===e,disabled:a===e,onClick:()=>n((0,b.vd)(e)),children:(0,oe.tZ)("strong",{children:(0,oe.tZ)(Le.Z,{color:e,children:(0,Je.el)(`element.${e}`)})})},e)))}):null}var tt=n(2247),nt=n(96608);function at(){const{t:e}=(0,c.$G)("ui"),t=(0,l.Wz)(),{character:n}=(0,s.useContext)(h.K),{key:a}=n,{gender:r}=(0,l.Hz)(),o=(0,s.useCallback)((()=>t.dbMeta.set({gender:"F"===r?"M":"F"})),[r,t]);return a.startsWith("Traveler")?(0,oe.BX)(U.Z,{onClick:o,startIcon:"F"===r?(0,oe.tZ)(tt.Z,{}):(0,oe.tZ)(nt.Z,{}),children:[(0,oe.tZ)("strong",{children:e(`gender.${r}`)})," "]}):null}function lt({character:e,onClose:t}){var n;const a=(0,x.Z)(null!=(n=null==e?void 0:e.key)?n:"");return(0,oe.BX)(oe.HY,{children:[(0,oe.BX)(r.Z,{display:"flex",gap:1,children:[(0,oe.tZ)(et,{}),(0,oe.tZ)(at,{}),e&&(0,oe.tZ)(y.Z,{level:e.level,ascension:e.ascension,setBoth:a}),!!t&&(0,oe.tZ)(w.Z,{onClick:t,sx:{marginLeft:"auto"}})]}),(0,oe.tZ)(je,{})]})}function rt(){const e=(0,Z.s0)(),t=(0,l.Wz)(),n=(0,s.useCallback)((()=>e("/characters")),[e]),{characterKey:a}=(0,Z.UO)();return!t.chars.keys.includes(a)?(0,oe.tZ)(Z.Fg,{to:"/characters"}):(0,oe.tZ)(r.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,oe.tZ)(s.Suspense,{fallback:(0,oe.tZ)(o.Z,{variant:"rectangular",width:"100%",height:1e3}),children:a&&(0,oe.tZ)(ot,{characterKey:a,onClose:n},a)})})}function ot({characterKey:e,onClose:t}){var n,r;const{silly:Z}=(0,s.useContext)(g.E),w=(0,l.AU)(e),{gender:y}=(0,l.Hz)(),C=(0,f.m)(e,y),v=(0,m.ZP)(e),{target:b}=null!=(n=null==v?void 0:v[e])?n:{},{t:k}=(0,c.$G)(["sillyWisher_charNames","charNames_gen","page_character"]),P=(0,x.Z)(null!=(r=null==w?void 0:w.key)?r:""),B=(0,s.useMemo)((()=>{if(v&&b)return{data:b,teamData:v,oldData:void 0}}),[b,v]),I=(0,s.useMemo)((()=>{if(w&&C)return{character:w,characterSheet:C,characterDispatch:P}}),[w,C,P]),[K,S]=(0,s.useState)(void 0),[X,T]=(0,s.useState)(),W=(0,s.useMemo)((()=>({chartData:K,setChartData:S,graphBuilds:X,setGraphBuilds:T})),[K,X]);return(0,s.useEffect)((()=>{S(void 0),T(void 0)}),[e]),(0,oe.tZ)(a.s8,{children:(0,oe.tZ)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:B&&I&&W?(0,oe.tZ)(h.K.Provider,{value:I,children:(0,oe.tZ)(u.R.Provider,{value:B,children:(0,oe.tZ)(p.V.Provider,{value:W,children:(0,oe.tZ)(d.B,{children:(0,oe.tZ)(lt,{character:w,onClose:t})})})})}):(0,oe.tZ)(o.Z,{variant:"rectangular",width:"100%",height:1e3})})})}}}]);