"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[577],{69208:(e,t,n)=>{var i=n(14859);t.Z=void 0;var r=i(n(68671)),l=n(52322),c=(0,r.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=c},5051:(e,t,n)=>{n.d(t,{A:()=>Z,Z:()=>h});var i=n(79906),r=n(33927),l=n(67550),c=n(62197),a=n(2784),o=n(11141),s=n(45269),f=n(12366),d=n(1665),u=n(52903);function h({children:e,artifactSheet:t,numInSet:n=5}){return(0,u.tZ)(s.Z,{placement:"top",title:(0,u.tZ)(Z,{artifactSheet:t,numInSet:n}),disableInteractive:!0,children:e})}function Z({artifactSheet:e,numInSet:t=5}){return(0,u.tZ)(a.Suspense,{fallback:(0,u.tZ)(i.Z,{variant:"rectangular",width:100,height:100}),children:(0,u.tZ)(y,{artifactSheet:e,numInSet:t})})}function y({artifactSheet:e,numInSet:t=5}){const{t:n}=(0,o.$G)("sheet");return(0,u.tZ)(r.Z,{spacing:2,sx:{p:1},children:Object.keys(e.setEffects).map((i=>(0,u.BX)(l.Z,{sx:{opacity:parseInt(i)<=t?1:.5},children:[(0,u.tZ)(c.Z,{children:(0,u.tZ)(f.Z,{color:"success",children:n(`${i}set`)})}),(0,u.tZ)(c.Z,{children:(0,u.tZ)(d.v,{ns:`artifact_${e.key}_gen`,key18:`setEffects.${i}`})})]},i)))})}},6480:(e,t,n)=>{n.d(t,{Rl:()=>h,w0:()=>d});var i=n(4991),r=n(15162),l=n(67550),c=n(11141),a=n(69614),o=n(39099),s=n(86569),f=n(52903);function d({statKey:e}){const{t}=(0,c.$G)("statKey_gen");return(0,f.BX)("span",{children:[t(e),(0,a.V)(e)]})}function u({statKey:e,disableIcon:t=!1}){return(0,f.BX)(l.Z,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!t&&(0,f.tZ)(o.C,{statKey:e,iconProps:i.mX}),(0,f.tZ)(d,{statKey:e})]})}function h({statKey:e,disableIcon:t=!1}){return(0,f.tZ)(s.Z,{color:r.d4.getVariant(e),children:(0,f.tZ)(u,{statKey:e,disableIcon:t})})}},71179:(e,t,n)=>{n.d(t,{Z:()=>y});var i=n(4991),r=n(31653),l=n(67550),c=n(92794),a=n(39099),o=n(61851),s=n(58489),f=n(6480),d=n(52903);const u=(0,o.X)([...r._m]),h=r._m.slice(0,6),Z=r._m.slice(6);function y({selectedKeys:e,onChange:t}){const n=e.filter((e=>h.includes(e))),r=e.filter((e=>Z.includes(e)));return(0,d.BX)(l.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,d.tZ)(s.Z,{value:n,sx:{flexGrow:1},children:h.map((n=>(0,d.tZ)(c.Z,{sx:{flexGrow:1},size:"small",value:n,onClick:()=>t(u(e,n)),children:(0,d.BX)(l.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,d.tZ)(a.C,{statKey:n,iconProps:i.mX}),(0,d.tZ)(f.w0,{statKey:n})]})},n)))}),(0,d.tZ)(s.Z,{value:r,sx:{flexGrow:1},children:Z.map((n=>(0,d.tZ)(c.Z,{sx:{flexGrow:1},size:"small",value:n,onClick:()=>t(u(e,n)),children:(0,d.BX)(l.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,d.tZ)(a.C,{statKey:n,iconProps:i.mX}),(0,d.tZ)(f.w0,{statKey:n})]})},n)))})]})}},12702:(e,t,n)=>{n.d(t,{L:()=>a,Z:()=>c});var i=n(69208),r=n(45269),l=n(52903);function c(e){return(0,l.tZ)(r.Z,Object.assign({placement:"top"},e,{children:(0,l.tZ)(i.Z,{sx:{cursor:"help"}})}))}function a(e){return(0,l.tZ)(r.Z,Object.assign({placement:"top"},e,{children:(0,l.tZ)(i.Z,{fontSize:"inherit",sx:{cursor:"help",verticalAlign:"-10%"}})}))}},96580:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(42745),r=n(12366),l=n(52903);function c({value:e,max:t=1,valid:n}){const[c,a]="number"==typeof e?[`roll${(0,i.re)(Math.floor(e/t*10)-4,1,6)}`,e.toFixed()+"%"]:["secondary",e];return(0,l.tZ)(r.Z,{color:n?c:"error",children:a})}},30706:(e,t,n)=>{n.d(t,{N:()=>q,Z:()=>F});var i=n(4991),r=n(42745),l=n(72539),c=n(31653),a=n(30095),o=n(16633),s=n(54278),f=n(40535),d=n(22698),u=n(29754),h=n(75213),Z=n(67550),y=n(79906),p=n(62197),m=n(85801),x=n(66198),g=n(7671),v=n(83249),b=n(2784),k=n(11141),w=n(5051),E=n(79199),S=n(45269),K=n(87833),B=n(50090),X=n(41653),I=n(86569),C=n(26437),$=n(12702),_=n(96580),G=n(36674),j=n(4121),M=n(69614),A=n(15162),O=n(39099),z=n(52903);let L,P,R,W=e=>e;const D=(0,b.lazy)((()=>Promise.all([n.e(497),n.e(579),n.e(963)]).then(n.bind(n,40947)))),N=new Set(c._m);function F({artifactId:e,artifactObj:t,onClick:n,onDelete:i,mainStatAssumptionLevel:r=0,effFilter:A=N,editorProps:F,canEquip:q=!1,extraButtons:V}){var U,Q;const{t:T}=(0,k.$G)(["artifact","ui"]),{t:J}=(0,k.$G)("statKey_gen"),Y=(0,a.Wz)(),ee=(0,a.$l)(e),te=null==(U=null!=t?t:ee)?void 0:U.setKey,ne=te&&(0,j.Sk)(te),ie=(0,b.useCallback)((t=>e&&Y.arts.set(e,{location:t})),[Y,e]),re=!t,[le,ce]=(0,b.useState)(!1),ae=(0,b.useCallback)((()=>ce(!1)),[ce]),oe=(0,b.useCallback)((()=>re&&ce(!0)),[re,ce]),se=(0,b.useCallback)((t=>(0,z.tZ)(h.Z,{onClick:()=>e&&(null==n?void 0:n(e)),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:t})),[n,e]),fe=(0,b.useCallback)((e=>(0,z.tZ)(Z.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})),[]),de=null!=t?t:ee,{currentEfficiency:ue,maxEfficiency:he,currentEfficiency_:Ze,maxEfficiency_:ye}=(0,b.useMemo)((()=>{if(!de)return{currentEfficiency:0,maxEfficiency:0,currentEfficiency_:0,maxEfficiency_:0};const{currentEfficiency:e,maxEfficiency:t}=M.Z.getArtifactEfficiency(de,A),{currentEfficiency:n,maxEfficiency:i}=M.Z.getArtifactEfficiency(de,new Set(c._m));return{currentEfficiency:e,maxEfficiency:t,currentEfficiency_:n,maxEfficiency_:i}}),[de,A]);if(!de)return null;const{id:pe,lock:me,slotKey:xe,setKey:ge,rarity:ve,level:be,mainStatKey:ke,substats:we,location:Ee=""}=de,Se=Math.max(Math.min(r,4*ve),be),Ke=0!==he,Be=null==ne?void 0:ne.getSlotName(xe),Xe=null==ne?void 0:ne.getSlotDesc(xe),Ie=Xe&&(0,z.tZ)($.Z,{title:(0,z.BX)(Z.Z,{children:[(0,z.tZ)(b.Suspense,{fallback:(0,z.tZ)(y.Z,{variant:"text",width:100}),children:(0,z.tZ)(p.Z,{variant:"h6",children:Be})}),(0,z.tZ)(p.Z,{children:Xe})]})}),Ce=c.fR.find((e=>ke.startsWith(e)));return(0,z.BX)(b.Suspense,{fallback:(0,z.tZ)(y.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[F&&(0,z.tZ)(b.Suspense,{fallback:!1,children:(0,z.tZ)(D,Object.assign({artifactIdToEdit:le?e:"",cancelEdit:ae},F))}),(0,z.BX)(K.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,z.BX)(C.Z,{condition:!!n,wrapper:se,falseWrapper:fe,children:[(0,z.BX)(Z.Z,{className:`grad-${ve}star`,sx:{position:"relative",width:"100%"},children:[!n&&(0,z.tZ)(m.Z,{color:"primary",disabled:!re,onClick:()=>Y.arts.set(pe,{lock:!me}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:me?(0,z.tZ)(s.Z,{}):(0,z.tZ)(f.Z,{})}),(0,z.BX)(Z.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,z.BX)(Z.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:.4,mb:1},children:[(0,z.tZ)(x.Z,{size:"small",label:(0,z.tZ)("strong",{children:` +${be}`}),color:M.Z.levelVariant(be)}),!Be&&(0,z.tZ)(y.Z,{variant:"text",width:100}),Be&&(0,z.tZ)(p.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1.5},children:(0,z.tZ)("strong",{children:Be})}),Ie||(0,z.tZ)(y.Z,{width:10})]}),(0,z.BX)(p.Z,{color:"text.secondary",variant:"body2",sx:{display:"flex",gap:.5,alignItems:"center"},children:[(0,z.tZ)(E.Z,{iconProps:{fontSize:"inherit"},slotKey:xe}),T(`slotName.${xe}`)]}),(0,z.BX)(p.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.tZ)(O.C,{statKey:ke,iconProps:{sx:{color:`${Ce}.main`}}}),(0,z.tZ)("span",{children:J(ke)})]}),(0,z.tZ)(p.Z,{variant:"h5",children:(0,z.tZ)("strong",{children:(0,z.tZ)(I.Z,{color:Se!==be?"warning":void 0,children:(0,o.R1)(ke,ve,Se)})})}),(0,z.tZ)(G.q,{stars:ve,colored:!0})]}),(0,z.tZ)(Z.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,z.tZ)(Z.Z,{component:"img",src:(0,l.Hp)(ge,xe),width:"auto",height:"110%",sx:{float:"right",marginBottom:"-5%",marginTop:"-5%",marginRight:"-5%"}})})]}),(0,z.BX)(g.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:"0!important",width:"100%"},children:[we.map((e=>!!e.value&&(0,z.tZ)(H,{stat:e,effFilter:A,rarity:ve},e.key))),(0,z.BX)(p.Z,{variant:"caption",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,z.tZ)(I.Z,{color:"secondary",sx:{flexGrow:1},children:T(L||(L=W`artifact:editor.curSubEff`))}),(0,z.tZ)(_.Z,{value:ue,max:900,valid:Ke}),ue!==Ze&&(0,z.tZ)("span",{children:"/"}),ue!==Ze&&(0,z.tZ)(_.Z,{value:Ze,max:900,valid:Ke})]}),ue!==he&&(0,z.BX)(p.Z,{variant:"caption",sx:{display:"flex",gap:1},children:[(0,z.tZ)(I.Z,{color:"secondary",sx:{flexGrow:1},children:T(P||(P=W`artifact:editor.maxSubEff`))}),(0,z.tZ)(_.Z,{value:he,max:900,valid:Ke}),he!==ye&&(0,z.tZ)("span",{children:"/"}),he!==ye&&(0,z.tZ)(_.Z,{value:ye,max:900,valid:Ke})]}),(0,z.tZ)(Z.Z,{flexGrow:1}),void 0!==de.probability&&de.probability>=0&&(0,z.BX)("strong",{children:["Probability: ",(100*de.probability).toFixed(2),"%"]}),(0,z.BX)(p.Z,{color:"success.main",children:[null!=(Q=null==ne?void 0:ne.name)?Q:"Artifact Set"," ",ne&&(0,z.tZ)($.L,{title:(0,z.tZ)(w.A,{artifactSheet:ne})})]})]})]}),(0,z.BX)(Z.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[(0,z.tZ)(Z.Z,{sx:{flexGrow:1},children:re&&q?(0,z.tZ)(B.W,{location:Ee,setLocation:ie}):(0,z.tZ)(X.Z,{location:Ee})}),(0,z.BX)(Z.Z,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[re&&F&&(0,z.tZ)(S.Z,{title:(0,z.tZ)(p.Z,{children:T(R||(R=W`artifact:edit`))}),placement:"top",arrow:!0,children:(0,z.tZ)(v.Z,{color:"info",size:"small",onClick:oe,children:(0,z.tZ)(u.Z,{})})}),re&&!!i&&(0,z.tZ)(S.Z,{title:me?T("artifact:cantDeleteLock"):"",placement:"top",children:(0,z.tZ)("span",{children:(0,z.tZ)(v.Z,{color:"error",size:"small",onClick:()=>i(pe),disabled:me,children:(0,z.tZ)(d.Z,{})})})}),V]})]})]})]})}function H({stat:e,effFilter:t,rarity:n}){var l,c,a;const{t:s}=(0,k.$G)("statKey_gen"),f=null!=(l=null==(c=e.rolls)?void 0:c.length)?l:0,d=e.key?(0,o.U9)(e.key):0,u=(0,b.useMemo)((()=>e.key?(0,o.ME)(e.key,n):[]),[e.key,n]),h=7-u.length,y=`roll${(0,r.re)(f,1,6)}`,m=null!=(a=e.efficiency)?a:0,x=e.key&&t.has(e.key),g=(0,r.V2)(.5+m/500*.5),v=A.d4.unit(e.key),w=(0,b.useMemo)((()=>(0,z.tZ)(Z.Z,{display:"flex",gap:.25,height:"1.3em",sx:{opacity:x?1:.3},children:[...e.rolls].sort().map(((e,t)=>(0,z.tZ)(q,{value:100*e/d,color:`roll${(0,r.re)(h+u.indexOf(e),1,6)}.main`},`${t}${e}`)))})),[x,e.rolls,d,u,h]);return(0,z.BX)(Z.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,z.BX)(p.Z,{sx:{flexGrow:1},color:f?`${y}.main`:"error.main",component:"span",children:[(0,z.tZ)(O.C,{statKey:e.key,iconProps:i.mX})," ",s(e.key),`+${(0,o.Jj)(e.value,A.d4.unit(e.key))}${v}`]}),w,(0,z.BX)(p.Z,{sx:{opacity:g,minWidth:40,textAlign:"right"},children:[m.toFixed(),"%"]})]})}function q({color:e="red",value:t=50}){return(0,z.tZ)(Z.Z,{sx:{width:7,height:"100%",bgcolor:e,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,z.tZ)(Z.Z,{sx:{width:10,height:100-(0,r.re)(t,0,100)+"%",bgcolor:"gray"}})})}},15015:(e,t,n)=>{n.d(t,{Af:()=>a,EM:()=>s,OQ:()=>c,t$:()=>f,x3:()=>o});var i=n(31653),r=n(69614),l=n(57928);const c=["rarity","level","artsetkey","efficiency","mefficiency","probability"];function a(){return{artSetKeys:[],rarity:[...i.$W],levelLow:0,levelHigh:20,slotKeys:[...i.Ex],mainStatKeys:[],substats:[],locations:[],showEquipped:!0,showInventory:!0,locked:["locked","unlocked"],rvLow:0,rvHigh:900,lines:[1,2,3,4]}}function o(e,t){return{rarity:e=>{var t;return null!=(t=e.rarity)?t:0},level:e=>{var t;return null!=(t=e.level)?t:0},artsetkey:e=>{var t;return null!=(t=e.setKey)?t:""},efficiency:t=>r.Z.getArtifactEfficiency(t,e).currentEfficiency,mefficiency:t=>r.Z.getArtifactEfficiency(t,e).maxEfficiency,probability:e=>{if(!Object.keys(t).length)return 0;const n=e.probability;return void 0===n?(0,l.B)(e,t):n}}}function s(e=new Set(i._m)){return{locked:(e,t)=>!(!t.includes("locked")&&e.lock)&&!(!t.includes("unlocked")&&!e.lock),locations:(e,t,n)=>!(e.location&&!n.showEquipped)||t.includes(e.location),showEquipped:()=>!0,showInventory:(e,t)=>!!e.location||t,artSetKeys:(e,t)=>!t.length||t.includes(e.setKey),slotKeys:(e,t)=>t.includes(e.slotKey),mainStatKeys:(e,t)=>!t.length||t.includes(e.mainStatKey),levelLow:(e,t)=>t<=e.level,levelHigh:(e,t)=>t>=e.level,rvLow:(t,n)=>0===n||n<=r.Z.getArtifactEfficiency(t,e).currentEfficiency,rvHigh:(t,n)=>900===n||n>=r.Z.getArtifactEfficiency(t,e).currentEfficiency,rarity:(e,t)=>t.includes(e.rarity),substats:(e,t)=>{for(const n of t)if(n&&!e.substats.some((e=>e.key===n)))return!1;return!0},lines:(e,t)=>[0,...t].includes(e.substats.filter((e=>e.value)).length)}}const f={level:["level","rarity","artsetkey"],rarity:["rarity","level","artsetkey"],artsetkey:["artsetkey","rarity","level"],efficiency:["efficiency"],mefficiency:["mefficiency"],probability:["probability"]}},57928:(e,t,n)=>{n.d(t,{B:()=>u});var i=n(42745),r=n(50693),l=n(16633);const c=[3,4,6],a={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},o={};function s(e,t,n,r){if(5!==e.length)for(const i of c)t[i]>0&&s([...e,i],Object.assign({},t,{[i]:t[i]-i}),n-i,r*t[i]/n);else(0,i.SR)(o,e,r)}s([0],{3:6,4:20,6:18},44,1),s([3],{3:3,4:20,6:18},41,1),s([4],{3:6,4:16,6:18},40,1),s([6],{3:6,4:20,6:12},38,1);const f=Array(6).fill(0).map(((e,t)=>{const n=[1];let i=0,r=1;for(;++i<=t;)r*=t-i+1,r/=i,n.push(r);return n})),d=[[1]];for(;d.length<6;){const e=d[d.length-1],t=Array(e.length+3).fill(0);e.forEach(((e,n)=>{for(const i of[0,1,2,3])t[n+i]+=e})),d.push(t.map((e=>e/4)))}for(const h of d){let e=h.reduce(((e,t)=>e+t));h.forEach(((t,n,i)=>{i[n]=e,e-=t}))}function u(e,t){if(e.rarity<=2)return NaN;const{rarity:n,level:s,substats:u}=e,h=Object.assign({},t),Z=new Set(Object.keys(h));let y=0;{const t=e.mainStatKey;if(t in h){const e=4*n;if(r.G2.art.main[n][t][e]<h[t])return 0;delete h[t],Z.delete(t)}}for(const{key:i,value:r}of u)i?Z.has(i)&&(Z.delete(i),h[i]>r?h[i]-=r:delete h[i]):y+=1;if(y+=4-u.length,Z.size>y||Object.keys(h).length>4)return 0;const p=(0,l.NB)(s,n)-y;for(const[i,r]of Object.entries(h))h[i]=Math.max(Math.ceil(10*r/(0,l.U9)(i,n)),1);let m=0;const x=Object.entries(h).map((([e,t])=>{const n=Z.has(e)?1:0,i=Math.ceil(t/10)-n;return m+=i,{target:t,filler:n,minUpgrade:i}})).reverse();if(m>p)return 0;let g={[p]:1};const v=p-m;return x.forEach((({target:e,filler:t,minUpgrade:n},i)=>{const r={};for(let s=n;s<=n+v;s++){const n=e-7*(s+t),u=n>0?d[s+t][n]:1;for(const[e,t]of Object.entries(g)){var l;const n=parseInt(e);if(n<s)continue;const d=(a=s,o=4-i,f[c=n][a]*Math.pow(o-1,c-a)/Math.pow(o,c)),h=n-s;r[h]=(null!=(l=r[h])?l:0)+t*u*d}}var c,a,o;g=r})),function(e,t,n){var r;const l=null!=(r=a[e])?r:0;let s=0;const d={3:2,4:5,6:3};let u=o[l];for(const{key:i}of t)if(i){const e=a[i];u=u[e],d[e]-=1}l&&(d[l]-=1);const h={3:0,4:0,6:0};for(const i of n)h[a[i]]+=1;let Z=0;(0,i.Q1)(u,[],(e=>"number"==typeof e),((e,t)=>{Z+=e;const n={3:0,4:0,6:0};for(const r of t)n[r]+=1;let i=e;for(const r of c){const e=n[r],t=h[r];if(e<t)return;i*=f[e][t]}s+=i}));for(const i of c)s/=f[d[i]][h[i]];return s/Z}(e.mainStatKey,u,Z)*Object.values(g).reduce(((e,t)=>e+t))}}}]);