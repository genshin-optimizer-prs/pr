import{b as R,r as Q,i as X,j as O,p as e,bH as _e,cN as ot,cO as st,cP as rt,cQ as it,cR as ct,cS as lt,cT as dt,cU as ut,cV as ht,cW as pt,bu as ft,bs as mt,bb as ue,cl as ae,cX as gt,cn as oe,cY as H,ck as se,cj as W,cm as U,cZ as re,u as we,ba as ye,b9 as vt,n as r,U as D,T as p,c as xt,e as d,f as ie,c_ as yt,a4 as Ct,$ as St,d as j,ci as Dt,c$ as bt,bc as _t,ca as wt,a1 as It,K as h,X as Z,t as F,J as G,k as $t,an as Y,aa as Ie,b6 as he,bW as $e,q as A,bQ as Be,aD as Re,aC as Bt,s as Rt,C as kt,bx as Mt,b3 as Et,B as te,aB as Nt,b7 as jt,Z as zt}from"./index-f37d7dbf.js";import{B as J,a as Ht}from"./Help-c5a00ad6.js";import{u as pe,d as Wt,S as At,L as Ft,p as Gt,F as Ot,C as ce}from"./StarDisplay-84cabbc2.js";import{i as fe,I as Tt}from"./ColoredText-41417afa.js";import{E as ke,s as Me,J as C,K as w,L as I,M as f,C as $,p as u,N as T,O as V,P as Vt,Q as qt,T as Ee,R as N,V as le,q as Pt,g as K,r as Ce,D as Lt,W as Ut,w as Ne,G as Jt,S as je,d as Qt,v as Xt,u as Se,x as Zt,n as Yt,I as ze}from"./index-8d38a632.js";import{S as E}from"./SqBadge-2716fa7c.js";import{D as q,a as Kt}from"./FieldDisplay-02d6ad43.js";import{b as en,g as tn}from"./index-4530fde9.js";import{g as He,W as We}from"./index-463c46c7.js";import{A as Ae}from"./Artifact-bc6b5ab7.js";import{S as nn}from"./SlotIcon-c93c8d39.js";import{u as an}from"./useWeapon-d2713ab7.js";import{C as ee}from"./CardActionArea-58124b3a.js";function Fe(t){const n=R();return pe(n.charMeta,t)}function Ge(t){const n=R();return pe(n.chars,t)}function on(t){const n=R();return pe(n.teams,t)}function sn({condition:t,wrapper:n,falseWrapper:a,children:o}){return t?n(o):a?a(o):o}var me={},rn=X;Object.defineProperty(me,"__esModule",{value:!0});var Oe=me.default=void 0,cn=rn(Q()),ln=O,dn=(0,cn.default)((0,ln.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");Oe=me.default=dn;const Te=({stars:t=1,colored:n=!1,inline:a=!1})=>e(_e,{color:n?"warning":void 0,children:[...Array(t).keys()].map((o,s)=>e(Wt,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},s))});function un({statKey:t,iconProps:n={}}){switch(t){case"hp":case"hp_":case"base_hp":return e(mt,{...n});case"atk":case"atk_":case"base_atk":return e(ft,{...n});case"def":case"def_":case"base_def":return e(pt,{...n});case"eleMas":return e(ht,{...n});case"critRate_":return e(ut,{...n});case"critDMG_":return e(dt,{...n});case"enerRech_":return e(lt,{...n});case"incHeal_":return e(ct,{...n});case"heal_":return e(it,{...n});case"cdRed_":return e(rt,{...n});case"shield_":return e(st,{...n});case"stamina":return e(ot,{...n})}const a=t.split("_")[0];return ue.includes(a)?e(hn,{ele:a,iconProps:n}):null}function hn({ele:t,iconProps:n={}}){switch(t){case"anemo":return e(re,{...n});case"cryo":return e(U,{...n});case"dendro":return e(W,{...n});case"electro":return e(se,{...n});case"geo":return e(H,{...n});case"hydro":return e(oe,{...n});case"physical":return e(gt,{...n});case"pyro":return e(ae,{...n})}}function pn({statKey:t,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:c}=we("statKey_gen"),i=ye(t),l=vt(n,ye(t));return r(p,{color:a?`${a}.main`:void 0,...s,children:[e(un,{statKey:t,iconProps:D})," ",c(t)," ",e("strong",{children:`${o}${l}${i}`})]},t)}const fn=xt(O.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");var ge={},mn=X;Object.defineProperty(ge,"__esModule",{value:!0});var gn=ge.default=void 0,vn=mn(Q()),xn=O,yn=(0,vn.default)((0,xn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");gn=ge.default=yn;const Cn=d.createContext({});function Sn({iconProps:t}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),e(ke,{ele:ie[n%ie.length],iconProps:t})}const v=t=>e(Ee,{ns:"elementalResonance_gen",key18:t}),de=t=>e(Ee,{ns:"elementalResonance",key18:t}),S=Me(...ie.map(t=>C[t])),Ve=yt(ue,t=>[`${t}_res_`,w(u.charKey,f(C.ele,4,$(.15)),I.info(`${t}_res_`))]),Dn={name:v("ProtectiveCanopy.name"),desc:v("ProtectiveCanopy.desc"),icon:r("span",{children:[e(Sn,{iconProps:D})," x4"]}),canShow:t=>t.get(C.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(Ve).map(([t,n])=>({node:n}))}]},[bn,_n]=w(u.charKey,f(S,4,f(C.pyro,2,$(.25))),I.info("atk_")),wn={name:v("FerventFlames.name"),desc:v("FerventFlames.desc"),icon:r("span",{children:[e(ae,{...D})," ",e(ae,{...D})]}),canShow:t=>t.get(C.pyro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.cryo"),value:-40,unit:"%"},{node:bn}]}]},[In,$n]=w(u.charKey,f(S,4,f(C.hydro,2,$(.25))),I.info("hp_")),Bn={name:v("SoothingWater.name"),desc:v("SoothingWater.desc"),icon:r("span",{children:[e(oe,{...D})," ",e(oe,{...D})]}),canShow:t=>t.get(C.hydro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.pyro"),value:-40,unit:"%"},{node:In}]}]},qe=["resonance","ShatteringIce"],Pe=T(qe),[Rn,kn]=w(u.charKey,f(S,4,f(C.cryo,2,V(Pe,"on",$(.15)))),I.info("critRate_")),Mn={name:v("ShatteringIce.name"),desc:v("ShatteringIce.desc"),icon:r("span",{children:[e(U,{...D})," ",e(U,{...D})]}),canShow:t=>t.get(C.cryo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:qe,value:Pe,name:N("enemyAffected.frozenOrCryo"),header:{title:v("ShatteringIce.name"),icon:e(U,{})},states:{on:{fields:[{node:Rn}]}}}]},En={name:v("HighVoltage.name"),desc:v("HighVoltage.desc"),icon:r("span",{children:[e(se,{...D})," ",e(se,{...D})]}),canShow:t=>t.get(C.electro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.hydro"),value:-40,unit:"%"}]}]},[Nn,jn]=w(u.charKey,f(S,4,f(C.anemo,2,$(-.15))),I.info("staminaDec_")),[zn,Hn]=w(u.charKey,f(S,4,f(C.anemo,2,$(.1))),I.info("moveSPD_")),[Wn,An]=w(u.charKey,f(S,4,f(C.anemo,2,$(-.05))),I.info("cdRed_")),Fn={name:v("ImpetuousWinds.name"),desc:v("ImpetuousWinds.desc"),icon:r("span",{children:[e(re,{...D})," ",e(re,{...D})]}),canShow:t=>t.get(C.anemo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,fields:[{node:Nn},{node:zn},{node:Wn}]}]},Le=["resonance","EnduringRock"],Ue=T(Le),Je=["resonance","EnduringRockHit"],Qe=T(Je),[Gn,On]=w(u.charKey,f(S,4,f(C.geo,2,$(.15))),I.info("shield_")),[Tn,Vn]=w(u.charKey,f(S,4,f(C.geo,2,V(Ue,"on",$(.15)))),I.info("all_dmg_")),[qn,Pn]=w(u.charKey,f(S,4,f(C.geo,2,V(Qe,"on",$(-.2)))),I.info("geo_enemyRes_")),Ln={name:v("EnduringRock.name"),desc:v("EnduringRock.desc"),icon:r("span",{children:[e(H,{...D})," ",e(H,{...D})]}),canShow:t=>t.get(C.geo).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:v("EnduringRock.desc"),fields:[{node:Gn}]},{teamBuff:!0,path:Le,value:Ue,header:{title:v("EnduringRock.name"),icon:e(H,{})},name:N("protectedByShield"),states:{on:{fields:[{node:Tn}]}}},{teamBuff:!0,path:Je,value:Qe,header:{title:v("EnduringRock.name"),icon:e(H,{})},name:de("EnduringRock.hitCond"),states:{on:{fields:[{node:qn},{text:le("duration"),value:15,unit:"s"}]}}}]},Xe=["resonance","SprawlingCanopy2ele"],Ze=T(Xe),Ye=["resonance","SprawlingCanopy3ele"],Ke=T(Ye),[Un,Jn]=w(u.charKey,f(S,4,f(C.dendro,2,50)),I.info("eleMas")),[Qn,Xn]=w(u.charKey,f(S,4,f(C.dendro,2,V(Ze,"on",30))),I.info("eleMas")),[Zn,Yn]=w(u.charKey,f(S,4,f(C.dendro,2,V(Ke,"on",20))),I.info("eleMas")),Kn={name:v("SprawlingGreenery.name"),desc:v("SprawlingGreenery.desc"),icon:r("span",{children:[e(W,{...D})," ",e(W,{...D})]}),canShow:t=>t.get(C.dendro).value>=2&&t.get(S).value>=4,sections:[{teamBuff:!0,text:v("SprawlingGreenery.desc"),fields:[{node:Un}]},{teamBuff:!0,path:Xe,value:Ze,header:{title:v("SprawlingGreenery.name"),icon:e(W,{})},name:de("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:Qn},{text:le("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:Ye,value:Ke,header:{title:v("SprawlingGreenery.name"),icon:e(W,{})},name:de("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:Zn},{text:le("duration"),value:6,unit:"s"}]}}}]},Va=[Dn,wn,Bn,Mn,En,Fn,Ln,Kn],ea=Vt({teamBuff:{premod:{...Ct(Ve,([t,n])=>n),atk_:_n,hp_:$n,staminaDec_:jn,moveSPD_:Hn,cdRed_:An,shield_:On,all_dmg_:Vn,geo_enemyRes_:Pn,eleMas:qt(Me(Jn,Xn,Yn),{pivot:!0})},total:{critRate_:kn}}});function ta(t,n=0,a,o){const s=R(),[c,i]=St(),l=d.useDeferredValue(c),{gender:g}=j(),x=d.useMemo(()=>l&&aa(s,t,n,g,a,o),[l,g,t,s,n,a,o]);return d.useEffect(()=>t?s.chars.follow(t,i):void 0,[t,i,s]),x}class na{constructor(n){this.data={},n.chars.followAny(a=>{this.removeData(a)})}getData(n){return this.data[n]}cacheData(n,a){this.data[n]=a}removeData(n){delete this.data[n]}}const ne=new Map,De=t=>{if(ne.has(t))return ne.get(t);const n=new na(t);return ne.set(t,n),n};function aa(t,n,a=0,o,s,c){if(!n)return;if(!a&&!s&&!c){const m=De(t).getData(n);if(m)return m}const{teamData:i,teamBundle:l}=oa(t,n,a,s,c)??{};if(!i||!l)return;const g=Pt(i,o,n),x=Dt(g,(m,b)=>{const{data:y,..._}=l[b];return{...m,..._}});return!a&&!s&&!c&&De(t).cacheData(n,x),x}function oa(t,n,a=0,o,s){if(!n)return;const c=t.chars.get(n);if(!c)return;const i=sa(t,!0,a,c,s||(t.weapons.get(c.equippedWeapon)??bt()),o??Object.values(c.equippedArtifacts).map(x=>t.arts.get(x)).filter(x=>x));if(!i)return;const l={[n]:i};return{teamData:{[n]:i.data},teamBundle:l}}function sa(t,n=!1,a,o,s,c){const i=K(o.key,t.gender);if(!i)return;const l=He(s.key);if(!l)return;const g=We.getAllDataOfType(i.weaponTypeKey),x=n?(()=>{const{display:_,...B}=l.data;return Ce([B,g])})():l.data,m=Ce([i.data,x,en]),y=[...Array.isArray(c)?c.map(_=>Lt(_,a)):[c],Ut(o),Ne(s),m,Jt,ea];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:y}}function ra(t){const n=R();return d.useCallback(a=>{if(!t)return;const o=n.chars.get(t);o&&n.chars.set(t,{...o,...a})},[t,n])}function ia({art:t,children:n}){const a=e(h,{children:e(Z,{variant:"rectangular",width:100,height:100})}),o=e(d.Suspense,{fallback:a,children:e(ca,{art:t})});return e(J,{placement:"top",title:o,disableInteractive:!0,children:n})}function ca({art:t}){const{t:n}=we("statKey_gen"),a=tn(t.setKey),{slotKey:o,level:s,rarity:c,mainStatKey:i,substats:l}=t,g=a.getSlotName(o),x=_t.getVariant(i);return r(h,{p:1,children:[r(p,{variant:"h6",children:[e(nn,{slotKey:o,iconProps:D})," ",g]}),r(p,{variant:"subtitle1",color:`${x}.main`,children:[e(je,{statKey:i,iconProps:D})," ",n(i)," ",wt(i,c,s)]}),r(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(At,{stars:c}),r(E,{color:Ae.levelVariant(s),children:["+",s]})," "]}),e(h,{py:1,children:l.map(({value:m,key:b,rolls:y})=>!!(m&&b)&&e(pn,{statKey:b,value:m,color:`roll${It(y.length,1,6)}`,prefix:"+"},b))}),e(p,{color:"success.main",children:a.name}),e(Ft,{color:"secondary.main",location:t.location})]})}function la({artifactObj:t,slotKey:n}){if(!t)return e(F,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e(h,{sx:{width:"100%",pb:"100%",position:"relative"},children:e(h,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:fe.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=t,i=ue.find(l=>t.mainStatKey.includes(l))??"secondary";return e(ia,{art:t,children:r(F,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[e(h,{component:"img",className:`grad-${o}star`,src:Qt(t.setKey,t.slotKey),maxWidth:"100%",maxHeight:"100%"}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{sx:{p:.5},color:Ae.levelVariant(s),children:r("strong",{children:["+",s]})})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e(E,{color:i,sx:{p:.5},children:e(je,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function da({sheet:t,addlText:n,children:a}){const o=r(d.Suspense,{fallback:e(Z,{variant:"text",width:100}),children:[r(p,{children:[e(Tt,{src:fe.weaponTypes[t.weaponType],size:1.5})," ",t.name]}),n]});return e(J,{placement:"top",title:o,disableInteractive:!0,children:a})}function ua({weaponId:t}){const n=an(t),a=(n==null?void 0:n.key)&&He(n.key),o=d.useMemo(()=>a&&n&&Xt([a.data,Ne(n)]),[a,n]);if(!n||!a||!o)return null;const s=r(h,{children:[e(be,{node:o.get(Se.weapon.main)}),e(be,{node:o.get(Se.weapon.sub)})]});return r(F,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[e(h,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:e(da,{sheet:a,addlText:s,children:e(h,{component:"img",src:Zt(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{color:"primary",children:We.getLevelString(n)})})}),a.hasRefinement&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["R",n.refinement]})})})]})}function be({node:t}){return r(p,{children:[t.info.icon," ",Yt(t)]})}function ha({hideWeapon:t=!1}){var a;const{data:n}=d.useContext(q);return e(h,{children:r(G,{container:!0,columns:t?5:6,spacing:.5,children:[!t&&e(G,{item:!0,xs:1,height:"100%",children:e(ua,{weaponId:((a=n.get(u.weapon.id).value)==null?void 0:a.toString())??""})}),e(pa,{})]})})}function pa(){const t=R(),{data:n}=d.useContext(q),a=d.useMemo(()=>$t.map(o=>{var s;return[o,t.arts.get(((s=n.get(u.art[o].id).value)==null?void 0:s.toString())??"")]}),[n,t]);return e(Y,{children:a.map(([o,s])=>e(G,{item:!0,xs:1,children:e(la,{artifactObj:s,slotKey:o})},o))})}function et(t,n,a){const o=Gt(t,n),s=ze(t,"icon",n);return a&&o?o:s||""}function tt({children:t,characterKey:n,onClick:a}){const{gender:o}=j(),{silly:s}=d.useContext(Ie),c=he(n),i=d.useCallback(g=>e(ee,{onClick:()=>a==null?void 0:a(),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[a]),l=ze(n,"banner",o);return e(sn,{condition:!!a,wrapper:i,children:r(h,{display:"flex",position:"relative",className:l?void 0:`grad-${c.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(h,{flexShrink:1,component:"img",src:et(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),e(h,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:t})]})})}function fa({characterKey:t}){const{gender:n}=j(),{data:a}=d.useContext(q),o=a.get(u.charEle).value,s=a.get(u.lvl).value,c=a.get(u.constellation).value,i=a.get(u.asc).value,l=a.get(u.total.autoBoost).value,g=a.get(u.total.skillBoost).value,x=a.get(u.total.burstBoost).value,m=a.get(u.total.auto).value,b=a.get(u.total.skill).value,y=a.get(u.total.burst).value,_=he(t);return r(Y,{children:[e(A,{label:e(p,{variant:"subtitle1",children:e($e,{characterKey:t,gender:n})}),size:"small",color:o,sx:{opacity:.85}}),r(h,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[r(h,{children:[r(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),r(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",Be[i]]})]}),e(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:e(Re,{color:`roll${c<3?3:c}`,children:e(_e,{color:"white",children:r("strong",{children:["C",c]})})})})]}),r(h,{display:"flex",gap:1,sx:{opacity:.85},children:[e(A,{size:"small",color:l?"info":"secondary",label:e("strong",{children:m})}),e(A,{size:"small",color:g?"info":"secondary",label:e("strong",{children:b})}),e(A,{size:"small",color:x?"info":"secondary",label:e("strong",{children:y})})]}),e(p,{variant:"h6",lineHeight:1,children:e(Te,{stars:_.rarity,colored:!0,inline:!0})})]})}function ma({characterKey:t}){const{gender:n}=j(),a=he(t),o=K(t,n);return r(Y,{children:[e(A,{label:e(p,{variant:"subtitle1",children:e($e,{characterKey:t,gender:n})}),size:"small",color:o.elementKey,sx:{opacity:.85}}),e(h,{mt:1,children:e(p,{variant:"h4",children:e(Re,{children:"NEW"})})}),e(p,{mt:1.5,children:e(Te,{stars:a.rarity,colored:!0})})]})}function ga(){const{data:t}=d.useContext(q);return r(h,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(n=>e(Kt,{node:n},JSON.stringify(n.info))),t.get(u.special).info.name&&r(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(u.special).info.icon,e(p,{children:t.get(u.special).info.name})]})]})}function va({characterKey:t,onClick:n,onClickHeader:a,footer:o,hideStats:s}){var P;const c=R(),i=ta(t),l=Ge(t),{gender:g}=j(),x=K(t,g),m=ra(t),b=(P=i==null?void 0:i[t])==null?void 0:P.target,y=d.useCallback(()=>t&&(n==null?void 0:n(t)),[t,n]),_=d.useCallback(L=>e(ee,{onClick:y,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:L}),[y]),B=d.useMemo(()=>l&&x&&{character:l,characterSheet:x,characterDispatch:m},[l,x,m]),k=d.useMemo(()=>b&&i&&{data:b,teamData:i},[b,i]),{favorite:M}=Fe(t);return e(d.Suspense,{fallback:e(Z,{variant:"rectangular",width:"100%",height:s?300:600}),children:r(Rt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(h,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(Bt,{sx:{p:.5},onClick:L=>c.charMeta.set(t,{favorite:!M}),children:M?e(Ot,{}):e(fn,{})})}),e(ce,{condition:!!n,wrapper:_,children:l&&k&&B?e(xa,{characterContextObj:B,dataContextObj:k,characterKey:t,onClick:n,onClickHeader:()=>a(t),hideStats:s}):e(ya,{characterKey:t})}),o]})})}function xa({characterContextObj:t,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,hideStats:c}){return e(Cn.Provider,{value:t,children:r(q.Provider,{value:n,children:[e(tt,{characterKey:a,onClick:o?void 0:s,children:e(fa,{characterKey:a})}),r(h,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${i.spacing(1)}!important`:void 0}),children:[e(ha,{}),!c&&e(ga,{})]})]})})}function ya({characterKey:t}){return r(Y,{children:[e(tt,{characterKey:t,children:e(ma,{characterKey:t})}),e(kt,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}var ve={},Ca=X;Object.defineProperty(ve,"__esModule",{value:!0});var nt=ve.default=void 0,Sa=Ca(Q()),Da=O,ba=(0,Sa.default)((0,Da.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");nt=ve.default=ba;var xe={},_a=X;Object.defineProperty(xe,"__esModule",{value:!0});var at=xe.default=void 0,wa=_a(Q()),Ia=O,$a=(0,wa.default)((0,Ia.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");at=xe.default=$a;function Ba({characterKey:t,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:c=!1}){const i=Ge(t),{favorite:l}=Fe(t),{gender:g}=j(),{silly:x}=d.useContext(Ie),m=K(t,g),b=d.useCallback(()=>n==null?void 0:n(t),[t,n]),y=d.useCallback(z=>e(ee,{onClick:b,onMouseDown:a,onMouseEnter:o,children:z}),[b,a,o]),[_,B]=d.useState(!1),k=d.useCallback(()=>!c&&B(!0),[c]),M=d.useCallback(()=>B(!1),[]);d.useEffect(()=>{c&&B(!1)},[c]);const P=d.useCallback(z=>e(J,{placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(d.Suspense,{fallback:e(Z,{width:300,height:400}),children:r(p,{children:[m.elementKey&&e(ke,{ele:m.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${m.elementKey}.main`}}})," ",m.name]})}),children:z}),[m.elementKey,m.name,c,M,k,_]),L=d.useCallback(z=>e(J,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(h,{sx:{width:300,m:-1},children:e(va,{hideStats:!0,characterKey:t})}),children:z}),[t,c,M,k,_]);return e(ce,{condition:s,wrapper:P,falseWrapper:L,children:e(F,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:r(ce,{condition:!!n||!!a||!!o,wrapper:y,children:[e(h,{display:"flex",className:`grad-${m.rarity}star`,children:e(h,{component:"img",src:et(t,g,x),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:e("strong",{children:r(E,{color:"primary",children:[i.level,"/",Be[i.ascension]]})})}),e(h,{sx:{position:"absolute",top:0,right:0},children:l?e(Oe,{fontSize:"small"}):e(at,{fontSize:"small"})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["C",i.constellation]})})})]})})})}function Ra({index:t}){return e(F,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:e(h,{component:"img",src:fe.team[`team${t+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function qa({teamId:t,onClick:n,bgt:a,disableButtons:o=!1}){const s=on(t),{name:c,description:i,teamCharIds:l}=s,g=R(),x=()=>{window.confirm("Do you want to remote this team?")&&g.teams.remove(t)},m=()=>{const y=g.teams.export(t),_=JSON.stringify(y);navigator.clipboard.writeText(_).then(()=>alert("Copied team data to clipboard.")).catch(console.error)},b=()=>g.teams.duplicate(t);return r(Nt,{bgt:a,sx:{height:"100%",p:1,display:"flex",flexDirection:"column",gap:1},children:[r(ee,{onClick:n,sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",flexGrow:1},children:[r(p,{sx:{display:"flex",gap:1},children:[e("span",{children:c})," ",e(jt,{title:e(p,{children:i}),children:e(Ht,{})})]}),e(h,{sx:{marginTop:"auto"},children:e(G,{container:!0,columns:4,spacing:1,children:Mt(0,3).map(y=>e(G,{item:!0,xs:1,height:"100%",children:l[y]?e(Ba,{characterKey:g.teamChars.get(l[y]).key}):e(Ra,{index:y})},y))})})]}),!o&&r(h,{sx:{display:"flex",gap:1,marginTop:"auto"},children:[e(te,{color:"info",sx:{flexGrow:1},startIcon:e(Et,{}),disabled:l.every(y=>!y),onClick:m,children:"Export"}),e(te,{color:"info",disabled:l.every(y=>!y),onClick:b,children:e(nt,{})}),e(te,{color:"error",size:"small",onClick:x,children:e(zt,{})})]})]})}export{la as A,va as C,fn as F,un as S,qa as T,da as W,nt as a,Cn as b,Ba as c,gn as d,tt as e,fa as f,ha as g,ga as h,Ge as i,aa as j,on as k,Fe as l,ia as m,ea as n,ta as o,et as p,Va as r,ra as u};
