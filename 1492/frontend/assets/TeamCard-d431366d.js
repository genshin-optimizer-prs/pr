import{b as $,r as ce,i as le,j as J,p as e,bH as be,cN as nt,cO as at,cP as ot,cQ as st,cR as rt,cS as it,cT as ct,cU as lt,cV as dt,cW as ut,bu as ht,bs as pt,bb as de,cl as ee,cX as ft,cn as te,cY as W,ck as ne,cj as A,cm as L,cZ as ae,u as _e,ba as xe,b9 as mt,n as r,U as D,T as p,c as gt,e as d,f as oe,c_ as xt,a4 as vt,$ as yt,d as j,ci as St,c$ as Ct,bc as Dt,ca as bt,a1 as _t,K as h,X as Q,t as F,J as G,k as wt,an as X,aa as we,b6 as ue,bW as Ie,q as H,bQ as Be,aD as Re,aC as It,s as Bt,C as Rt,bx as $t,b3 as kt,B as ve,aB as Mt,b7 as Et,Z as Nt}from"./index-ef801262.js";import{B as U,a as jt}from"./Help-fd13afff.js";import{u as he,d as zt,S as Wt,L as At,p as Ht,F as Ft,C as se}from"./StarDisplay-6413b051.js";import{i as pe,I as Gt}from"./ColoredText-fdd6554d.js";import{E as $e,s as ke,J as S,K as w,L as I,M as m,C as B,p as u,N as O,O as T,P as Ot,Q as Tt,T as Me,R as N,V as re,q as qt,g as Z,r as ye,D as Vt,W as Pt,w as Ee,G as Lt,S as Ne,d as Ut,v as Jt,u as Se,x as Qt,n as Xt,I as je}from"./index-6a4b3ac4.js";import{S as E}from"./SqBadge-f27a8b7e.js";import{D as q,a as Zt}from"./FieldDisplay-38e3373c.js";import{b as Yt,g as Kt}from"./index-252379d4.js";import{g as ze,W as We}from"./index-798e04b3.js";import{A as Ae}from"./Artifact-48b79978.js";import{S as en}from"./SlotIcon-0314f9d8.js";import{u as tn}from"./useWeapon-59ea267e.js";import{C as Y}from"./CardActionArea-9d607d05.js";function He(t){const n=$();return he(n.charMeta,t)}function Fe(t){const n=$();return he(n.chars,t)}function nn(t){const n=$();return he(n.teams,t)}function an({condition:t,wrapper:n,falseWrapper:a,children:o}){return t?n(o):a?a(o):o}var fe={},on=le;Object.defineProperty(fe,"__esModule",{value:!0});var Ge=fe.default=void 0,sn=on(ce()),rn=J,cn=(0,sn.default)((0,rn.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");Ge=fe.default=cn;const Oe=({stars:t=1,colored:n=!1,inline:a=!1})=>e(be,{color:n?"warning":void 0,children:[...Array(t).keys()].map((o,s)=>e(zt,{fontSize:a?"inherit":void 0,sx:a?{verticalAlign:"text-top"}:void 0},s))});function ln({statKey:t,iconProps:n={}}){switch(t){case"hp":case"hp_":case"base_hp":return e(pt,{...n});case"atk":case"atk_":case"base_atk":return e(ht,{...n});case"def":case"def_":case"base_def":return e(ut,{...n});case"eleMas":return e(dt,{...n});case"critRate_":return e(lt,{...n});case"critDMG_":return e(ct,{...n});case"enerRech_":return e(it,{...n});case"incHeal_":return e(rt,{...n});case"heal_":return e(st,{...n});case"cdRed_":return e(ot,{...n});case"shield_":return e(at,{...n});case"stamina":return e(nt,{...n})}const a=t.split("_")[0];return de.includes(a)?e(dn,{ele:a,iconProps:n}):null}function dn({ele:t,iconProps:n={}}){switch(t){case"anemo":return e(ae,{...n});case"cryo":return e(L,{...n});case"dendro":return e(A,{...n});case"electro":return e(ne,{...n});case"geo":return e(W,{...n});case"hydro":return e(te,{...n});case"physical":return e(ft,{...n});case"pyro":return e(ee,{...n})}}function un({statKey:t,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:c}=_e("statKey_gen"),i=xe(t),l=mt(n,xe(t));return r(p,{color:a?`${a}.main`:void 0,...s,children:[e(ln,{statKey:t,iconProps:D})," ",c(t)," ",e("strong",{children:`${o}${l}${i}`})]},t)}const hn=gt(J.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");var me={},pn=le;Object.defineProperty(me,"__esModule",{value:!0});var fn=me.default=void 0,mn=pn(ce()),gn=J,xn=(0,mn.default)((0,gn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");fn=me.default=xn;const vn=d.createContext({});function yn({iconProps:t}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),e($e,{ele:oe[n%oe.length],iconProps:t})}const x=t=>e(Me,{ns:"elementalResonance_gen",key18:t}),ie=t=>e(Me,{ns:"elementalResonance",key18:t}),C=ke(...oe.map(t=>S[t])),Te=xt(de,t=>[`${t}_res_`,w(u.charKey,m(S.ele,4,B(.15)),I.info(`${t}_res_`))]),Sn={name:x("ProtectiveCanopy.name"),desc:x("ProtectiveCanopy.desc"),icon:r("span",{children:[e(yn,{iconProps:D})," x4"]}),canShow:t=>t.get(S.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(Te).map(([t,n])=>({node:n}))}]},[Cn,Dn]=w(u.charKey,m(C,4,m(S.pyro,2,B(.25))),I.info("atk_")),bn={name:x("FerventFlames.name"),desc:x("FerventFlames.desc"),icon:r("span",{children:[e(ee,{...D})," ",e(ee,{...D})]}),canShow:t=>t.get(S.pyro).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.cryo"),value:-40,unit:"%"},{node:Cn}]}]},[_n,wn]=w(u.charKey,m(C,4,m(S.hydro,2,B(.25))),I.info("hp_")),In={name:x("SoothingWater.name"),desc:x("SoothingWater.desc"),icon:r("span",{children:[e(te,{...D})," ",e(te,{...D})]}),canShow:t=>t.get(S.hydro).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.pyro"),value:-40,unit:"%"},{node:_n}]}]},qe=["resonance","ShatteringIce"],Ve=O(qe),[Bn,Rn]=w(u.charKey,m(C,4,m(S.cryo,2,T(Ve,"on",B(.15)))),I.info("critRate_")),$n={name:x("ShatteringIce.name"),desc:x("ShatteringIce.desc"),icon:r("span",{children:[e(L,{...D})," ",e(L,{...D})]}),canShow:t=>t.get(S.cryo).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:qe,value:Ve,name:N("enemyAffected.frozenOrCryo"),header:{title:x("ShatteringIce.name"),icon:e(L,{})},states:{on:{fields:[{node:Bn}]}}}]},kn={name:x("HighVoltage.name"),desc:x("HighVoltage.desc"),icon:r("span",{children:[e(ne,{...D})," ",e(ne,{...D})]}),canShow:t=>t.get(S.electro).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,fields:[{text:N("effectDuration.hydro"),value:-40,unit:"%"}]}]},[Mn,En]=w(u.charKey,m(C,4,m(S.anemo,2,B(-.15))),I.info("staminaDec_")),[Nn,jn]=w(u.charKey,m(C,4,m(S.anemo,2,B(.1))),I.info("moveSPD_")),[zn,Wn]=w(u.charKey,m(C,4,m(S.anemo,2,B(-.05))),I.info("cdRed_")),An={name:x("ImpetuousWinds.name"),desc:x("ImpetuousWinds.desc"),icon:r("span",{children:[e(ae,{...D})," ",e(ae,{...D})]}),canShow:t=>t.get(S.anemo).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,fields:[{node:Mn},{node:Nn},{node:zn}]}]},Pe=["resonance","EnduringRock"],Le=O(Pe),Ue=["resonance","EnduringRockHit"],Je=O(Ue),[Hn,Fn]=w(u.charKey,m(C,4,m(S.geo,2,B(.15))),I.info("shield_")),[Gn,On]=w(u.charKey,m(C,4,m(S.geo,2,T(Le,"on",B(.15)))),I.info("all_dmg_")),[Tn,qn]=w(u.charKey,m(C,4,m(S.geo,2,T(Je,"on",B(-.2)))),I.info("geo_enemyRes_")),Vn={name:x("EnduringRock.name"),desc:x("EnduringRock.desc"),icon:r("span",{children:[e(W,{...D})," ",e(W,{...D})]}),canShow:t=>t.get(S.geo).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,text:x("EnduringRock.desc"),fields:[{node:Hn}]},{teamBuff:!0,path:Pe,value:Le,header:{title:x("EnduringRock.name"),icon:e(W,{})},name:N("protectedByShield"),states:{on:{fields:[{node:Gn}]}}},{teamBuff:!0,path:Ue,value:Je,header:{title:x("EnduringRock.name"),icon:e(W,{})},name:ie("EnduringRock.hitCond"),states:{on:{fields:[{node:Tn},{text:re("duration"),value:15,unit:"s"}]}}}]},Qe=["resonance","SprawlingCanopy2ele"],Xe=O(Qe),Ze=["resonance","SprawlingCanopy3ele"],Ye=O(Ze),[Pn,Ln]=w(u.charKey,m(C,4,m(S.dendro,2,50)),I.info("eleMas")),[Un,Jn]=w(u.charKey,m(C,4,m(S.dendro,2,T(Xe,"on",30))),I.info("eleMas")),[Qn,Xn]=w(u.charKey,m(C,4,m(S.dendro,2,T(Ye,"on",20))),I.info("eleMas")),Zn={name:x("SprawlingGreenery.name"),desc:x("SprawlingGreenery.desc"),icon:r("span",{children:[e(A,{...D})," ",e(A,{...D})]}),canShow:t=>t.get(S.dendro).value>=2&&t.get(C).value>=4,sections:[{teamBuff:!0,text:x("SprawlingGreenery.desc"),fields:[{node:Pn}]},{teamBuff:!0,path:Qe,value:Xe,header:{title:x("SprawlingGreenery.name"),icon:e(A,{})},name:ie("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:Un},{text:re("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:Ze,value:Ye,header:{title:x("SprawlingGreenery.name"),icon:e(A,{})},name:ie("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:Qn},{text:re("duration"),value:6,unit:"s"}]}}}]},Aa=[Sn,bn,In,$n,kn,An,Vn,Zn],Yn=Ot({teamBuff:{premod:{...vt(Te,([t,n])=>n),atk_:Dn,hp_:wn,staminaDec_:En,moveSPD_:jn,cdRed_:Wn,shield_:Fn,all_dmg_:On,geo_enemyRes_:qn,eleMas:Tt(ke(Ln,Jn,Xn),{pivot:!0})},total:{critRate_:Rn}}});function Kn(t,n=0,a,o){const s=$(),[c,i]=yt(),l=d.useDeferredValue(c),{gender:v}=j(),y=d.useMemo(()=>l&&ta(s,t,n,v,a,o),[l,v,t,s,n,a,o]);return d.useEffect(()=>t?s.chars.follow(t,i):void 0,[t,i,s]),y}class ea{constructor(n){this.data={},n.chars.followAny(a=>{this.removeData(a)})}getData(n){return this.data[n]}cacheData(n,a){this.data[n]=a}removeData(n){delete this.data[n]}}const K=new Map,Ce=t=>{if(K.has(t))return K.get(t);const n=new ea(t);return K.set(t,n),n};function ta(t,n,a=0,o,s,c){if(!n)return;if(!a&&!s&&!c){const g=Ce(t).getData(n);if(g)return g}const{teamData:i,teamBundle:l}=na(t,n,a,s,c)??{};if(!i||!l)return;const v=qt(i,o,n),y=St(v,(g,f)=>{const{data:b,..._}=l[f];return{...g,..._}});return!a&&!s&&!c&&Ce(t).cacheData(n,y),y}function na(t,n,a=0,o,s){if(!n)return;const c=t.chars.get(n);if(!c)return;const i=aa(t,!0,a,c,s||(t.weapons.get(c.equippedWeapon)??Ct()),o??Object.values(c.equippedArtifacts).map(y=>t.arts.get(y)).filter(y=>y));if(!i)return;const l={[n]:i};return{teamData:{[n]:i.data},teamBundle:l}}function aa(t,n=!1,a,o,s,c){const i=Z(o.key,t.gender);if(!i)return;const l=ze(s.key);if(!l)return;const v=We.getAllDataOfType(i.weaponTypeKey),y=n?(()=>{const{display:_,...R}=l.data;return ye([R,v])})():l.data,g=ye([i.data,y,Yt]),b=[...Array.isArray(c)?c.map(_=>Vt(_,a)):[c],Pt(o),Ee(s),g,Lt,Yn];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:b}}function oa(t){const n=$();return d.useCallback(a=>{if(!t)return;const o=n.chars.get(t);o&&n.chars.set(t,{...o,...a})},[t,n])}function sa({art:t,children:n}){const a=e(h,{children:e(Q,{variant:"rectangular",width:100,height:100})}),o=e(d.Suspense,{fallback:a,children:e(ra,{art:t})});return e(U,{placement:"top",title:o,disableInteractive:!0,children:n})}function ra({art:t}){const{t:n}=_e("statKey_gen"),a=Kt(t.setKey),{slotKey:o,level:s,rarity:c,mainStatKey:i,substats:l}=t,v=a.getSlotName(o),y=Dt.getVariant(i);return r(h,{p:1,children:[r(p,{variant:"h6",children:[e(en,{slotKey:o,iconProps:D})," ",v]}),r(p,{variant:"subtitle1",color:`${y}.main`,children:[e(Ne,{statKey:i,iconProps:D})," ",n(i)," ",bt(i,c,s)]}),r(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(Wt,{stars:c}),r(E,{color:Ae.levelVariant(s),children:["+",s]})," "]}),e(h,{py:1,children:l.map(({value:g,key:f,rolls:b})=>!!(g&&f)&&e(un,{statKey:f,value:g,color:`roll${_t(b.length,1,6)}`,prefix:"+"},f))}),e(p,{color:"success.main",children:a.name}),e(At,{color:"secondary.main",location:t.location})]})}function ia({artifactObj:t,slotKey:n}){if(!t)return e(F,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e(h,{sx:{width:"100%",pb:"100%",position:"relative"},children:e(h,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:pe.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=t,i=de.find(l=>t.mainStatKey.includes(l))??"secondary";return e(sa,{art:t,children:r(F,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[e(h,{component:"img",className:`grad-${o}star`,src:Ut(t.setKey,t.slotKey),maxWidth:"100%",maxHeight:"100%"}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{sx:{p:.5},color:Ae.levelVariant(s),children:r("strong",{children:["+",s]})})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e(E,{color:i,sx:{p:.5},children:e(Ne,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function ca({sheet:t,addlText:n,children:a}){const o=r(d.Suspense,{fallback:e(Q,{variant:"text",width:100}),children:[r(p,{children:[e(Gt,{src:pe.weaponTypes[t.weaponType],size:1.5})," ",t.name]}),n]});return e(U,{placement:"top",title:o,disableInteractive:!0,children:a})}function la({weaponId:t}){const n=tn(t),a=(n==null?void 0:n.key)&&ze(n.key),o=d.useMemo(()=>a&&n&&Jt([a.data,Ee(n)]),[a,n]);if(!n||!a||!o)return null;const s=r(h,{children:[e(De,{node:o.get(Se.weapon.main)}),e(De,{node:o.get(Se.weapon.sub)})]});return r(F,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[e(h,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:e(ca,{sheet:a,addlText:s,children:e(h,{component:"img",src:Qt(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:e("strong",{children:e(E,{color:"primary",children:We.getLevelString(n)})})}),a.hasRefinement&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["R",n.refinement]})})})]})}function De({node:t}){return r(p,{children:[t.info.icon," ",Xt(t)]})}function da({hideWeapon:t=!1}){var a;const{data:n}=d.useContext(q);return e(h,{children:r(G,{container:!0,columns:t?5:6,spacing:.5,children:[!t&&e(G,{item:!0,xs:1,height:"100%",children:e(la,{weaponId:((a=n.get(u.weapon.id).value)==null?void 0:a.toString())??""})}),e(ua,{})]})})}function ua(){const t=$(),{data:n}=d.useContext(q),a=d.useMemo(()=>wt.map(o=>{var s;return[o,t.arts.get(((s=n.get(u.art[o].id).value)==null?void 0:s.toString())??"")]}),[n,t]);return e(X,{children:a.map(([o,s])=>e(G,{item:!0,xs:1,children:e(ia,{artifactObj:s,slotKey:o})},o))})}function Ke(t,n,a){const o=Ht(t,n),s=je(t,"icon",n);return a&&o?o:s||""}function et({children:t,characterKey:n,onClick:a}){const{gender:o}=j(),{silly:s}=d.useContext(we),c=ue(n),i=d.useCallback(v=>e(Y,{onClick:()=>a==null?void 0:a(),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:v}),[a]),l=je(n,"banner",o);return e(an,{condition:!!a,wrapper:i,children:r(h,{display:"flex",position:"relative",className:l?void 0:`grad-${c.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(h,{flexShrink:1,component:"img",src:Ke(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),e(h,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:t})]})})}function ha({characterKey:t}){const{gender:n}=j(),{data:a}=d.useContext(q),o=a.get(u.charEle).value,s=a.get(u.lvl).value,c=a.get(u.constellation).value,i=a.get(u.asc).value,l=a.get(u.total.autoBoost).value,v=a.get(u.total.skillBoost).value,y=a.get(u.total.burstBoost).value,g=a.get(u.total.auto).value,f=a.get(u.total.skill).value,b=a.get(u.total.burst).value,_=ue(t);return r(X,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Ie,{characterKey:t,gender:n})}),size:"small",color:o,sx:{opacity:.85}}),r(h,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[r(h,{children:[r(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),r(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",Be[i]]})]}),e(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:e(Re,{color:`roll${c<3?3:c}`,children:e(be,{color:"white",children:r("strong",{children:["C",c]})})})})]}),r(h,{display:"flex",gap:1,sx:{opacity:.85},children:[e(H,{size:"small",color:l?"info":"secondary",label:e("strong",{children:g})}),e(H,{size:"small",color:v?"info":"secondary",label:e("strong",{children:f})}),e(H,{size:"small",color:y?"info":"secondary",label:e("strong",{children:b})})]}),e(p,{variant:"h6",lineHeight:1,children:e(Oe,{stars:_.rarity,colored:!0,inline:!0})})]})}function pa({characterKey:t}){const{gender:n}=j(),a=ue(t),o=Z(t,n);return r(X,{children:[e(H,{label:e(p,{variant:"subtitle1",children:e(Ie,{characterKey:t,gender:n})}),size:"small",color:o.elementKey,sx:{opacity:.85}}),e(h,{mt:1,children:e(p,{variant:"h4",children:e(Re,{children:"NEW"})})}),e(p,{mt:1.5,children:e(Oe,{stars:a.rarity,colored:!0})})]})}function fa(){const{data:t}=d.useContext(q);return r(h,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(n=>e(Zt,{node:n},JSON.stringify(n.info))),t.get(u.special).info.name&&r(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(u.special).info.icon,e(p,{children:t.get(u.special).info.name})]})]})}function ma({characterKey:t,onClick:n,onClickHeader:a,footer:o,hideStats:s}){var V;const c=$(),i=Kn(t),l=Fe(t),{gender:v}=j(),y=Z(t,v),g=oa(t),f=(V=i==null?void 0:i[t])==null?void 0:V.target,b=d.useCallback(()=>t&&(n==null?void 0:n(t)),[t,n]),_=d.useCallback(P=>e(Y,{onClick:b,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:P}),[b]),R=d.useMemo(()=>l&&y&&{character:l,characterSheet:y,characterDispatch:g},[l,y,g]),k=d.useMemo(()=>f&&i&&{data:f,teamData:i},[f,i]),{favorite:M}=He(t);return e(d.Suspense,{fallback:e(Q,{variant:"rectangular",width:"100%",height:s?300:600}),children:r(Bt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(h,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(It,{sx:{p:.5},onClick:P=>c.charMeta.set(t,{favorite:!M}),children:M?e(Ft,{}):e(hn,{})})}),e(se,{condition:!!n,wrapper:_,children:l&&k&&R?e(ga,{characterContextObj:R,dataContextObj:k,characterKey:t,onClick:n,onClickHeader:()=>a(t),hideStats:s}):e(xa,{characterKey:t})}),o]})})}function ga({characterContextObj:t,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,hideStats:c}){return e(vn.Provider,{value:t,children:r(q.Provider,{value:n,children:[e(et,{characterKey:a,onClick:o?void 0:s,children:e(ha,{characterKey:a})}),r(h,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:c?`${i.spacing(1)}!important`:void 0}),children:[e(da,{}),!c&&e(fa,{})]})]})})}function xa({characterKey:t}){return r(X,{children:[e(et,{characterKey:t,children:e(pa,{characterKey:t})}),e(Rt,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}var ge={},va=le;Object.defineProperty(ge,"__esModule",{value:!0});var tt=ge.default=void 0,ya=va(ce()),Sa=J,Ca=(0,ya.default)((0,Sa.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");tt=ge.default=Ca;function Da({characterKey:t,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:c=!1}){const i=Fe(t),{favorite:l}=He(t),{gender:v}=j(),{silly:y}=d.useContext(we),g=Z(t,v),f=d.useCallback(()=>n==null?void 0:n(t),[t,n]),b=d.useCallback(z=>e(Y,{onClick:f,onMouseDown:a,onMouseEnter:o,children:z}),[f,a,o]),[_,R]=d.useState(!1),k=d.useCallback(()=>!c&&R(!0),[c]),M=d.useCallback(()=>R(!1),[]);d.useEffect(()=>{c&&R(!1)},[c]);const V=d.useCallback(z=>e(U,{placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(d.Suspense,{fallback:e(Q,{width:300,height:400}),children:r(p,{children:[g.elementKey&&e($e,{ele:g.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${g.elementKey}.main`}}})," ",g.name]})}),children:z}),[g.elementKey,g.name,c,M,k,_]),P=d.useCallback(z=>e(U,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:_&&!c,onClose:M,onOpen:k,title:e(h,{sx:{width:300,m:-1},children:e(ma,{hideStats:!0,characterKey:t})}),children:z}),[t,c,M,k,_]);return e(se,{condition:s,wrapper:V,falseWrapper:P,children:e(F,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:r(se,{condition:!!n||!!a||!!o,wrapper:b,children:[e(h,{display:"flex",className:`grad-${g.rarity}star`,children:e(h,{component:"img",src:Ke(t,v,y),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:e("strong",{children:r(E,{color:"primary",children:[i.level,"/",Be[i.ascension]]})})}),e(h,{sx:{position:"absolute",top:0,right:0},children:l?e(Ge,{fontSize:"small"}):e(tt,{fontSize:"small"})}),i&&e(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:e("strong",{children:r(E,{color:"secondary",children:["C",i.constellation]})})})]})})})}function ba({index:t}){return e(F,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:e(h,{component:"img",src:pe.team[`team${t+1}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function Ha({teamId:t,onClick:n,bgt:a,disableButtons:o=!1}){const s=nn(t),{name:c,description:i,teamCharIds:l}=s,v=$(),y=()=>{window.confirm("Do you want to remote this team?")&&v.teams.remove(t)},g=()=>{const f=v.teams.export(t),b=JSON.stringify(f);console.log({data:f,dataStr:b}),navigator.clipboard.writeText(b).then(()=>alert("Copied team data to clipboard.")).catch(console.error)};return r(Mt,{bgt:a,sx:{height:"100%",p:1,display:"flex",flexDirection:"column",gap:1},children:[r(Y,{onClick:n,sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",flexGrow:1},children:[r(p,{sx:{display:"flex",gap:1},children:[e("span",{children:c})," ",e(Et,{title:e(p,{children:i}),children:e(jt,{})})]}),e(h,{sx:{marginTop:"auto"},children:e(G,{container:!0,columns:4,spacing:1,children:$t(0,3).map(f=>e(G,{item:!0,xs:1,height:"100%",children:l[f]?e(Da,{characterKey:v.teamChars.get(l[f]).key}):e(ba,{index:f})},f))})})]}),!o&&r(h,{sx:{display:"flex",gap:1,marginTop:"auto"},children:[e(ve,{color:"info",sx:{flexGrow:1},startIcon:e(kt,{}),disabled:l.every(f=>!f),onClick:g,children:"Export"}),e(ve,{color:"error",size:"small",onClick:y,children:e(Nt,{})})]})]})}export{ia as A,ma as C,hn as F,ln as S,Ha as T,ca as W,vn as a,Da as b,et as c,fn as d,ha as e,da as f,fa as g,Fe as h,ta as i,nn as j,He as k,sa as l,Yn as m,Kn as n,Ke as o,Aa as r,oa as u};
