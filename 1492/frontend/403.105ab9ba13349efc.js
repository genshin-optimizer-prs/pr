"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[403],{43403:(t,e,n)=>{n.r(e),n.d(e,{default:()=>vt});var r=n(96736),i=n(30095),l=n(67550),a=n(79906),o=n(7671),c=n(2784),s=n(11141),h=n(73557),Z=n(13230),u=n(99487),d=n(48650),g=n(64583),p=n(23657),v=n(44180),x=n(4311),m=n(76260),f=n(23690),C=n(86512),y=n(72539),k=n(21207),w=n(31653),b=n(10483),B=n(16633),K=n(16068),P=n(66147),S=n(41075),z=n(75213),X=n(21194),M=n(62197),D=n(66198),V=n(85801),W=n(22254),I=n(87833),T=n(46725),R=n(79410),j=n(12366),A=n(36674),F=n(25065),G=n(32404),H=n(39099),$=n(11845),E=n(42745),O=n(50693),L=n(47513),q=n(52903);function N(){const{character:{key:t}}=(0,c.useContext)(Z.K),{data:e}=(0,c.useContext)(u.R),n=(0,i.Wz)(),r=(0,O.Ru)(t).weaponType,a=e.get(G.ri.weapon.id).value,o=(0,c.useMemo)((()=>(0,E.K8)(w.Ex,(t=>e.get(G.ri.art[t].id).value))),[e]);return(0,q.tZ)(l.Z,{children:(0,q.tZ)(L.ZP,{weaponTypeKey:r,weaponId:a,artifactIds:o,setWeapon:e=>{n.weapons.set(e,{location:(0,w.V7)(t)})},setArtifact:e=>{n.arts.set(e,{location:(0,w.V7)(t)})}})})}function U(){const t=(0,c.useRef)(),e=(0,c.useCallback)((()=>{var e;return null==t||null==(e=t.current)||null==e.scrollIntoView?void 0:e.scrollIntoView({behavior:"smooth"})}),[t]);return(0,q.tZ)(l.Z,{children:(0,q.BX)(S.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,q.tZ)(S.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,q.tZ)(Q,{})}),(0,q.BX)(S.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.tZ)(_,{onClick:e}),(0,q.tZ)(I.Z,{sx:{flexGrow:1,p:1},children:(0,q.tZ)(T.Z,{})}),(0,q.tZ)(l.Z,{ref:t,children:(0,q.tZ)(N,{})})]})]})})}function _({onClick:t}){const{character:{equippedWeapon:e}}=(0,c.useContext)(Z.K),{data:n}=(0,c.useContext)(u.R);return(0,q.BX)(S.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,q.tZ)(S.ZP,{item:!0,xs:1,children:(0,q.tZ)(F.Z,{weaponId:e,BGComponent:I.Z,onClick:t})}),w.Ex.map((e=>{var r;return(0,q.tZ)(S.ZP,{item:!0,xs:1,children:(0,q.tZ)(W.Z,{artifactId:null==(r=n.get(G.ri.art[e].id).value)?void 0:r.toString(),slotKey:e,BGComponent:I.Z,onClick:t})},e)}))]})}function Q(){const{silly:t}=(0,c.useContext)(p.E),{characterSheet:e,character:{key:n}}=(0,c.useContext)(Z.K),{gender:r}=(0,i.Hz)(),{data:a}=(0,c.useContext)(u.R),o=(0,m.Z)(n),s=(0,h.s0)(),d=a.get(G.ri.lvl).value,g=a.get(G.ri.asc).value,v=a.get(G.ri.constellation).value,x={auto:a.get(G.ri.total.auto).value,skill:a.get(G.ri.total.skill).value,burst:a.get(G.ri.total.burst).value},f={auto:a.get(G.ri.total.autoBoost).value,skill:a.get(G.ri.total.skillBoost).value,burst:a.get(G.ri.total.burstBoost).value},C=(0,b.V)(n,r),y=(0,k.r)(n,r);return(0,q.BX)(I.Z,{sx:{height:"100%"},children:[t&&C?(0,q.tZ)(Y,{src:C,level:d,ascension:g}):(0,q.tZ)(J,{src:y,level:d,ascension:g}),(0,q.BX)(l.Z,{children:[(0,q.tZ)(z.Z,{sx:{p:1},onClick:()=>s("talent"),children:(0,q.tZ)(S.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((t=>{var n;return(0,q.tZ)(S.ZP,{item:!0,xs:4,children:(0,q.tZ)(X.Z,{badgeContent:x[t],color:f[t]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,q.tZ)(l.Z,{component:"img",src:null==(n=e.getTalentOfKey(t))?void 0:n.img,width:"100%",height:"auto"})})},t)}))})}),(0,q.tZ)(M.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:e.constellationName}),(0,q.tZ)(S.ZP,{container:!0,spacing:1,children:(0,$.w6)(1,6).map((t=>{var n;return(0,q.tZ)(S.ZP,{item:!0,xs:4,children:(0,q.tZ)(z.Z,{onClick:()=>o({constellation:t===v?t-1:t}),children:(0,q.tZ)(l.Z,{component:"img",src:null==(n=e.getTalentOfKey(`constellation${t}`))?void 0:n.img,sx:Object.assign({},v>=t?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},t)}))})]})]})}function Y({src:t,level:e,ascension:n}){const{characterSheet:r}=(0,c.useContext)(Z.K);return(0,q.BX)(l.Z,{sx:{position:"relative"},children:[(0,q.tZ)(l.Z,{src:t,component:"img",width:"100%",height:"auto"}),(0,q.BX)(l.Z,{sx:{width:"100%",height:"100%"},children:[(0,q.tZ)(l.Z,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,q.tZ)(tt,{})}),(0,q.tZ)(M.Z,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:(0,q.tZ)(A.q,{stars:r.rarity,colored:!0})}),(0,q.tZ)(nt,{}),(0,q.tZ)(et,{level:e,ascension:n})]})]})}function J({src:t,level:e,ascension:n}){const{characterSheet:r}=(0,c.useContext)(Z.K);return(0,q.BX)(l.Z,{sx:{position:"relative"},children:[(0,q.BX)(l.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,q.tZ)(M.Z,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:(0,q.tZ)(A.q,{stars:r.rarity,colored:!0})}),(0,q.tZ)(l.Z,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,q.tZ)(tt,{})}),(0,q.tZ)(nt,{}),(0,q.tZ)(et,{level:e,ascension:n})]}),(0,q.tZ)(l.Z,{src:t,component:"img",width:"100%",height:"auto"})]})}function tt(){var t;const{characterSheet:e}=(0,c.useContext)(Z.K),n=e.elementKey;return(0,q.tZ)(D.Z,{color:n,sx:{height:"auto"},label:(0,q.BX)(M.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,q.tZ)(H.Z,{ele:n}),(0,q.tZ)(l.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:e.name}),(0,q.tZ)(R.Z,{src:null==(t=y.CL.weaponTypes)?void 0:t[e.weaponTypeKey]})]})})}function et({level:t,ascension:e}){return(0,q.tZ)(M.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,q.tZ)(j.Z,{children:(0,B.wQ)(t,e)})})}function nt(){const{character:{key:t}}=(0,c.useContext)(Z.K),e=(0,i.Wz)(),{favorite:n}=(0,i.xF)(t);return(0,q.tZ)(l.Z,{sx:{position:"absolute",left:0,top:0},children:(0,q.tZ)(V.Z,{sx:{p:1},color:"error",onClick:()=>e.charMeta.set(t,{favorite:!n}),children:n?(0,q.tZ)(K.Z,{}):(0,q.tZ)(P.Z,{})})})}var rt=n(94380),it=n(86569),lt=n(23485),at=n(51638),ot=n(2180);function ct(){const{character:t}=(0,c.useContext)(Z.K),{key:e}=t,n=(0,ot.Z)();if(!e.startsWith("Traveler"))return null;const r=w.UB.find((t=>e.toLowerCase().includes(t)));return r?(0,q.tZ)(lt.Z,{color:r,title:(0,q.tZ)("strong",{children:(0,at.el)(`element.${r}`)}),children:w.DZ.map((t=>(0,q.tZ)(rt.Z,{selected:r===t,disabled:r===t,onClick:()=>n((0,w.vd)(t)),children:(0,q.tZ)("strong",{children:(0,q.tZ)(it.Z,{color:t,children:(0,at.el)(`element.${t}`)})})},t)))}):null}var st=n(29798),ht=n(52322);const Zt=(0,st.Z)((0,ht.jsx)("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),ut=(0,st.Z)((0,ht.jsx)("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male");var dt=n(83249);function gt(){const{t}=(0,s.$G)("ui"),e=(0,i.Wz)(),{character:n}=(0,c.useContext)(Z.K),{key:r}=n,{gender:l}=(0,i.Hz)(),a=(0,c.useCallback)((()=>e.dbMeta.set({gender:"F"===l?"M":"F"})),[l,e]);return r.startsWith("Traveler")?(0,q.BX)(dt.Z,{onClick:a,startIcon:"F"===l?(0,q.tZ)(Zt,{}):(0,q.tZ)(ut,{}),children:[(0,q.tZ)("strong",{children:t(`gender.${l}`)})," "]}):null}function pt({character:t,onClose:e}){var n;const r=(0,m.Z)(null!=(n=null==t?void 0:t.key)?n:"");return(0,q.BX)(q.HY,{children:[(0,q.BX)(l.Z,{display:"flex",gap:1,children:[(0,q.tZ)(ct,{}),(0,q.tZ)(gt,{}),t&&(0,q.tZ)(C.Z,{level:t.level,ascension:t.ascension,setBoth:r}),!!e&&(0,q.tZ)(f.Z,{onClick:e,sx:{marginLeft:"auto"}})]}),(0,q.tZ)(U,{})]})}function vt(){const t=(0,h.s0)(),e=(0,i.Wz)(),n=(0,c.useCallback)((()=>t("/characters")),[t]),{characterKey:r}=(0,h.UO)();return!e.chars.keys.includes(r)?(0,q.tZ)(h.Fg,{to:"/characters"}):(0,q.tZ)(l.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,q.tZ)(c.Suspense,{fallback:(0,q.tZ)(a.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,q.tZ)(xt,{characterKey:r,onClose:n},r)})})}function xt({characterKey:t,onClose:e}){var n,l;const{silly:h}=(0,c.useContext)(p.E),f=(0,i.AU)(t),{gender:C}=(0,i.Hz)(),y=(0,v.m)(t,C),k=(0,x.ZP)(t),{target:w}=null!=(n=null==k?void 0:k[t])?n:{},{t:b}=(0,s.$G)(["sillyWisher_charNames","charNames_gen","page_character"]),B=(0,m.Z)(null!=(l=null==f?void 0:f.key)?l:""),K=(0,c.useMemo)((()=>{if(k&&w)return{data:w,teamData:k,oldData:void 0}}),[w,k]),P=(0,c.useMemo)((()=>{if(f&&y)return{character:f,characterSheet:y,characterDispatch:B}}),[f,y,B]),[S,z]=(0,c.useState)(void 0),[X,M]=(0,c.useState)(),D=(0,c.useMemo)((()=>({chartData:S,setChartData:z,graphBuilds:X,setGraphBuilds:M})),[S,X]);return(0,c.useEffect)((()=>{z(void 0),M(void 0)}),[t]),(0,q.tZ)(r.s8,{children:(0,q.tZ)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:K&&P&&D?(0,q.tZ)(Z.K.Provider,{value:P,children:(0,q.tZ)(u.R.Provider,{value:K,children:(0,q.tZ)(g.V.Provider,{value:D,children:(0,q.tZ)(d.B,{children:(0,q.tZ)(pt,{character:f,onClose:e})})})})}):(0,q.tZ)(a.Z,{variant:"rectangular",width:"100%",height:1e3})})})}}}]);