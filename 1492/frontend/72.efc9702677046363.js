"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[72,313],{90844:(e,n,t)=>{t.d(n,{Z:()=>m});var a=t(98283),o=t(31653),l=t(78437),i=t(47746),s=t(86432),r=t(92794),c=t(67550),p=t(66198),d=t(61851),u=t(58489),Z=t(52903);const h=["value","totals","onChange"],g=(0,d.X)([...o.U1]);function m(e){let{value:n,totals:t,onChange:d}=e,m=(0,a.Z)(e,h);const w=(0,i.Z)(),y=!(0,s.Z)(w.breakpoints.up("sm"));return(0,Z.tZ)(u.Z,Object.assign({exclusive:!0,value:n},m,{children:o.U1.map((e=>(0,Z.tZ)(r.Z,{value:e,sx:{p:y?1:void 0,minWidth:y?0:"6em",display:"flex",gap:y?0:1},onClick:()=>d(g(n,e)),children:(0,Z.BX)(c.Z,{display:"flex",children:[(0,Z.tZ)("strong",{children:e}),(0,Z.tZ)(l.Z,{}),(0,Z.tZ)(p.Z,{label:t[e],size:"small"})]})},e)))}))}},28265:(e,n,t)=>{t.d(n,{Z:()=>m});var a=t(98283),o=t(72539),l=t(31653),i=t(47746),s=t(86432),r=t(92794),c=t(66198),p=t(61851),d=t(79410),u=t(58489),Z=t(52903);const h=["value","totals","onChange"],g=(0,p.X)([...l.yd]);function m(e){let{value:n,totals:t,onChange:p}=e,m=(0,a.Z)(e,h);const w=(0,i.Z)(),y=!(0,s.Z)(w.breakpoints.up("sm"));return(0,Z.tZ)(u.Z,Object.assign({exclusive:!0,value:n},m,{children:l.yd.map((e=>{var a;return(0,Z.BX)(r.Z,{value:e,sx:{p:y?1:void 0,minWidth:y?0:"6em",display:"flex",gap:y?0:1},onClick:()=>p(g(n,e)),children:[(0,Z.tZ)(d.Z,{src:null==(a=o.CL.weaponTypes)?void 0:a[e],size:2,sideMargin:!0}),(0,Z.tZ)(c.Z,{label:t[e],size:"small"})]},e)}))}))}},73501:(e,n,t)=>{t.d(n,{Z:()=>$});var a=t(72539),o=t(70274),l=t(16633),i=t(54278),s=t(40535),r=t(22698),c=t(29754),p=t(75213),d=t(67550),u=t(79906),Z=t(85801),h=t(62197),g=t(7671),m=t(23883),w=t(83249),y=t(2784),f=t(11141),x=t(87833),v=t(50090),b=t(41653),k=t(26437),C=t(79410),W=t(36674),I=t(25616),B=t(32404),X=t(2754),T=t(15030),P=t(52903);let S,z=e=>e;function $({weaponId:e,onClick:n,onEdit:t,onDelete:$,canEquip:N=!1,extraButtons:j}){const{t:E}=(0,f.$G)(["page_weapon","ui"]),G=(0,o.Wz)(),_=(0,o.tA)(e),D=null!=_&&_.key?(0,I.ub)(_.key):void 0,L=(0,y.useCallback)((e=>e.weaponTypeKey===(null==D?void 0:D.weaponType)),[D]),M=(0,y.useCallback)((t=>(0,P.tZ)(p.Z,{onClick:()=>null==n?void 0:n(e),children:t})),[n,e]),O=(0,y.useCallback)((e=>(0,P.tZ)(d.Z,{children:e})),[]),A=(0,y.useCallback)((n=>e&&G.weapons.set(e,{location:n})),[G,e]),U=(0,y.useMemo)((()=>D&&_&&(0,X.mP)([D.data,(0,X.v0)(_)])),[D,_]);if(!_||!D||!U)return null;const{level:q,ascension:H,refinement:J,id:R,location:K="",lock:V}=_,F=U.get(B.ri.weapon.type).value,Q=[B.ri.weapon.main,B.ri.weapon.sub,B.ri.weapon.sub2].map((e=>U.get(e))),Y=(0,a.Aq)(_.key,H>=2);return(0,P.tZ)(y.Suspense,{fallback:(0,P.tZ)(u.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,P.BX)(x.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,P.BX)(k.Z,{condition:!!n,wrapper:M,falseWrapper:O,children:[(0,P.BX)(d.Z,{className:`grad-${D.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!n&&(0,P.tZ)(Z.Z,{color:"primary",onClick:()=>G.weapons.set(R,{lock:!V}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:V?(0,P.tZ)(i.Z,{}):(0,P.tZ)(s.Z,{})}),(0,P.BX)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,P.BX)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,P.tZ)(C.Z,{size:2,src:a.CL.weaponTypes[F]}),(0,P.tZ)(h.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,P.tZ)("strong",{children:D.name})})]}),(0,P.BX)(h.Z,{component:"span",variant:"h5",children:["Lv. ",q]}),(0,P.BX)(h.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",l.SJ[H]]}),(0,P.BX)(h.Z,{variant:"h6",children:["Refinement ",(0,P.tZ)("strong",{children:J})]}),(0,P.tZ)(W.q,{stars:D.rarity,colored:!0})]}),(0,P.tZ)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,P.tZ)(d.Z,{component:"img",src:null!=Y?Y:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,P.tZ)(g.Z,{children:Q.map((e=>e.info.name?(0,P.BX)(d.Z,{sx:{display:"flex"},children:[(0,P.BX)(h.Z,{flexGrow:1,children:[e.info.icon," ",e.info.name]}),(0,P.tZ)(h.Z,{children:(0,T.p)(e)})]},JSON.stringify(e.info)):null))})]}),(0,P.BX)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[(0,P.tZ)(d.Z,{sx:{flexGrow:1},children:N?(0,P.tZ)(v.W,{location:K,setLocation:A,filter:L,autoCompleteProps:{getOptionDisabled:e=>!e.key}}):(0,P.tZ)(b.Z,{location:K})}),(0,P.BX)(d.Z,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!t&&(0,P.tZ)(m.Z,{title:(0,P.tZ)(h.Z,{children:E(S||(S=z`page_weapon:edit`))}),placement:"top",arrow:!0,children:(0,P.tZ)(w.Z,{color:"info",size:"small",onClick:()=>t(R),children:(0,P.tZ)(c.Z,{})})}),!!$&&(0,P.tZ)(w.Z,{color:"error",size:"small",onClick:()=>$(R),disabled:!!K||V,children:(0,P.tZ)(r.Z,{})}),j]})]})]})})}},35072:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var a=t(45492),o=t(42745),l=t(31653),i=t(70274),s=t(92252),r=t(67550),c=t(7671),p=t(13780),d=t(79906),u=t(83249),Z=t(41075),h=t(2784),g=t(61877),m=t(11141),w=t(24264),y=t(66146),f=t(90844),x=t(28265),v=t(25616),b=t(54578),k=t(7794),C=t(2313),W=t(73501),I=t(52903);const B=h.lazy((()=>t.e(863).then(t.bind(t,18571)))),X=(0,h.lazy)((()=>Promise.all([t.e(282),t.e(262),t.e(188)]).then(t.bind(t,64262)))),T={xs:1,sm:2,md:3,lg:3,xl:4},P={xs:10,sm:12,md:24,lg:24,xl:24},S=Object.keys(b.gd);function z(){const{t:e}=(0,m.$G)(["page_weapon","ui","weaponNames_gen"]),n=(0,i.Wz)(),[t,z]=(0,h.useState)(n.displayWeapon.get());(0,h.useEffect)((()=>n.displayWeapon.follow(((e,n)=>z(n)))),[n]);const[$,N]=(0,h.useState)(!1),[j,E]=(0,a.NW)(),G=(0,h.useRef)(null),[_,D]=(0,h.useState)(0);(0,h.useEffect)((()=>(g.ZP.send({hitType:"pageview",page:"/weapon"}),n.weapons.followAny(((e,n)=>("new"===n||"remove"===n)&&E())))),[E,n]);const L=(0,a.JT)(),M=P[L],O=(0,h.useCallback)((async a=>{const o=n.weapons.get(a);if(!o)return;const l=e(`weaponNames_gen:${o.key}`);window.confirm(e("removeWeapon",{value:l}))&&(n.weapons.remove(a),t.editWeaponId===a&&n.displayWeapon.set({editWeaponId:""}))}),[t.editWeaponId,n,e]),A=(0,h.useCallback)((e=>{n.displayWeapon.set({editWeaponId:e})}),[n]),U=(0,h.useCallback)((e=>{A(n.weapons.new((0,k.xg)(e)))}),[n,A]),[q,H]=(0,h.useState)(""),J=(0,h.useDeferredValue)(q),{sortType:R,ascending:K,weaponType:V,rarity:F}=t,{weaponIdList:Q,totalWeaponNum:Y}=(0,h.useMemo)((()=>{var e;const t=n.weapons.values,a=t.length,l=t.filter((0,o.CZ)({weaponType:V,rarity:F,name:J},(0,b.Xg)())).sort((0,o.ef)(null!=(e=b.gd[R])?e:[],K,(0,b.Sn)())).map((e=>e.id));return j&&{weaponIdList:l,totalWeaponNum:a}}),[j,n,R,K,F,V,J]),{weaponIdsToShow:ee,numPages:ne,currentPageIndex:te}=(0,h.useMemo)((()=>{const e=Math.ceil(Q.length/M),n=(0,o.re)(_,0,e-1);return{weaponIdsToShow:Q.slice(n*M,(n+1)*M),numPages:e,currentPageIndex:n}}),[Q,_,M]),ae=Q.length!==Y?`${Q.length}/${Y}`:`${Y}`,oe=(0,h.useCallback)(((e,n)=>{var t;null==(t=G.current)||t.scrollIntoView({behavior:"smooth"}),D(n-1)}),[D,G]),le=(0,h.useCallback)((()=>n.displayWeapon.set({editWeaponId:""})),[n]),{editWeaponId:ie}=t;(0,h.useEffect)((()=>{ie&&(n.weapons.get(ie)||le())}),[n,ie,le]);const se=(0,h.useMemo)((()=>(0,C.W)(l.yd,(e=>Object.entries(n.weapons.data).forEach((([n,t])=>{const a=(0,v.ub)(t.key).weaponType;e[a].total++,Q.includes(n)&&e[a].current++}))))),[n,Q]),re=(0,h.useMemo)((()=>(0,C.W)(l.U1,(e=>Object.entries(n.weapons.data).forEach((([n,t])=>{const a=(0,v.ub)(t.key).rarity;e[a].total++,Q.includes(n)&&e[a].current++}))))),[n,Q]),ce={count:ne,page:te+1,onChange:oe},pe={numShowing:ee.length,total:ae,t:e,namespace:"page_weapon"},de={sortKeys:[...S],value:R,onChange:e=>n.displayWeapon.set({sortType:e}),ascending:K,onChangeAsc:e=>n.displayWeapon.set({ascending:e})};return(0,I.BX)(r.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,I.tZ)(h.Suspense,{fallback:!1,children:(0,I.tZ)(B,{show:$,onHide:()=>N(!1),onSelect:U})}),(0,I.tZ)(h.Suspense,{fallback:!1,children:(0,I.tZ)(X,{weaponId:ie,footer:!0,onClose:le})}),(0,I.tZ)(w.Z,{ref:G,children:(0,I.BX)(c.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,I.BX)(r.Z,{display:"flex",flexWrap:"wrap",gap:1,alignItems:"stretch",children:[(0,I.tZ)(x.Z,{onChange:e=>n.displayWeapon.set({weaponType:e}),value:V,totals:se,size:"small"}),(0,I.tZ)(f.Z,{sx:{height:"100%"},onChange:e=>n.displayWeapon.set({rarity:e}),value:F,totals:re,size:"small"}),(0,I.tZ)(r.Z,{flexGrow:1}),(0,I.tZ)(p.Z,{autoFocus:!0,size:"small",value:q,onChange:e=>H(e.target.value),label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})]}),(0,I.tZ)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:(0,I.tZ)(y.Z,{paginationProps:ce,showingTextProps:pe,displaySort:!0,sortByButtonProps:de})})]})}),(0,I.BX)(h.Suspense,{fallback:(0,I.tZ)(d.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:[(0,I.tZ)(u.Z,{fullWidth:!0,onClick:()=>N(!0),color:"info",startIcon:(0,I.tZ)(s.Z,{}),children:e("page_weapon:addWeapon")}),(0,I.tZ)(Z.ZP,{container:!0,spacing:1,columns:T,children:ee.map((e=>(0,I.tZ)(Z.ZP,{item:!0,xs:1,children:(0,I.tZ)(W.Z,{weaponId:e,onDelete:O,onEdit:A,canEquip:!0})},e)))})]}),ne>1&&(0,I.tZ)(w.Z,{children:(0,I.tZ)(c.Z,{children:(0,I.tZ)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,I.tZ)(y.Z,{paginationProps:ce,showingTextProps:pe})})})})]})}},54578:(e,n,t)=>{t.d(n,{Sn:()=>l,Xg:()=>i,gd:()=>s});var a=t(50693),o=t(31809);function l(){return{level:e=>{var n;return null!=(n=e.level*(e.ascension+1))?n:0},rarity:e=>a.G2.weapon.data[e.key].rarity,name:e=>o.Z.t(`weaponNames_gen:${e.key}`)}}function i(){return{rarity:(e,n)=>n.includes(a.G2.weapon.data[e.key].rarity),weaponType:(e,n)=>n.includes(a.G2.weapon.data[e.key].weaponType),name:(e,n)=>o.Z.t(`weaponNames_gen:${e.key}`).toLowerCase().includes(n.toLowerCase())}}const s={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]}},7794:(e,n,t)=>{function a(e){switch(e){case"sword":default:return"DullBlade";case"bow":return"HuntersBow";case"claymore":return"WasterGreatsword";case"polearm":return"BeginnersProtector";case"catalyst":return"ApprenticesNotes"}}t.d(n,{Qu:()=>o,mT:()=>a,xg:()=>l});const o=(e="sword")=>l(a(e)),l=e=>({id:"",key:e,level:1,ascension:0,refinement:1,location:"",lock:!1})},2313:(e,n,t)=>{t.d(n,{A:()=>o,W:()=>l});var a=t(42745);function o(e,n){const t=(0,a.vU)(e,(e=>i(e)));return n(t),(0,a.vU)(t,(e=>s(e)))}function l(e,n){const t=i(e);return n(t),s(t)}function i(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}function s(e){return(0,a.vU)(e,(({total:e,current:n})=>n===e?`${e}`:`${n}/${e}`))}}}]);