"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[14],{42861:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z"}),"Difference");e.Z=a},66859:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M8.65 5.82C9.36 4.72 10.6 4 12 4c2.21 0 4 1.79 4 4 0 1.4-.72 2.64-1.82 3.35L8.65 5.82zM20 17.17c-.02-1.1-.63-2.11-1.61-2.62-.54-.28-1.13-.54-1.77-.76L20 17.17zm1.19 4.02L2.81 2.81 1.39 4.22l8.89 8.89c-1.81.23-3.39.79-4.67 1.45-1 .51-1.61 1.54-1.61 2.66V20h13.17l2.61 2.61 1.41-1.42z"}),"PersonOff");e.Z=a},24648:(t,e,i)=>{var r=i(14859);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");e.Z=a},30014:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ot});var r=i(45492),n=i(42745),l=i(30095),a=i(92252),c=i(42861),s=i(67550),o=i(7671),d=i(41075),Z=i(83249),h=i(79906),u=i(2784),f=i(61877),p=i(11141),m=i(83660),y=i(71179),g=i(45269),b=i(24264),x=i(16549),v=i(62197),w=i(56961),P=i(23690),k=i(69698),C=i(1665),I=i(52903);function A({pageKey:t,text:e="",modalTitle:i="",children:l}){const[a,c,s]=(0,r.aV)("true"!==localStorage.getItem(`infoShown_${t}`)),[f]=(0,u.useState)(Array.isArray(e)?(0,n.F_)(e):e),p=(0,u.useCallback)((()=>{s(),localStorage.setItem(`infoShown_${t}`,"true")}),[s,t]);return(0,I.BX)(b.Z,{children:[(0,I.BX)(d.ZP,{container:!0,children:[(0,I.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,I.tZ)(v.Z,{variant:"caption",pl:1,children:f})}),(0,I.tZ)(d.ZP,{item:!0,xs:"auto",children:(0,I.tZ)(Z.Z,{size:"small",color:"info",variant:"contained",onClick:c,startIcon:(0,I.tZ)(x.Z,{}),children:(0,I.tZ)(C.v,{ns:"ui",key18:"info"})})})]}),(0,I.tZ)(k.Z,{containerProps:{maxWidth:"xl"},open:a,onClose:p,children:(0,I.BX)(b.Z,{children:[(0,I.tZ)(o.Z,{sx:{py:1},children:(0,I.BX)(d.ZP,{container:!0,children:[(0,I.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,I.tZ)(v.Z,{variant:"h6",children:i})}),(0,I.tZ)(d.ZP,{item:!0,children:(0,I.tZ)(P.Z,{onClick:p})})]})}),(0,I.tZ)(w.Z,{}),(0,I.tZ)(o.Z,{children:(0,I.tZ)(u.Suspense,{fallback:(0,I.tZ)(h.Z,{variant:"rectangular",width:"100%",height:500}),children:l})}),(0,I.tZ)(w.Z,{}),(0,I.tZ)(o.Z,{sx:{py:1},children:(0,I.tZ)(P.Z,{large:!0,onClick:p})})]})})]})}var B=i(66146);function X(){const t=(0,l.Wz)(),[e,i]=(0,u.useState)(t.displayArtifact.get());return(0,u.useEffect)((()=>t.displayArtifact.follow(((t,e)=>i(e)))),[t]),e}var S=i(30706),z=i(22698),F=i(75927),D=i(93994),W=i(66859),M=i(24648),$=i(12366);const V=(0,u.lazy)((()=>Promise.all([i.e(497),i.e(537),i.e(313)]).then(i.bind(i,22537))));function T({numShowing:t,total:e,artifactIds:i}){const{t:r}=(0,p.$G)(["artifact","ui"]),n=(0,l.Wz)(),{filterOption:a}=X(),c=(0,u.useCallback)((t=>n.displayArtifact.set({filterOption:Object.assign({},a,t)})),[n,a]);return(0,I.tZ)(u.Suspense,{fallback:(0,I.tZ)(h.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,I.tZ)(b.Z,{children:(0,I.BX)(o.Z,{children:[(0,I.BX)(d.ZP,{container:!0,children:[(0,I.tZ)(d.ZP,{item:!0,children:(0,I.tZ)(v.Z,{variant:"h6",children:(0,I.tZ)(p.cC,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,I.tZ)(d.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:t!==e&&(0,I.BX)(v.Z,{children:["Filtered ",(0,I.tZ)("strong",{children:t})," / ",e]})}),(0,I.tZ)(d.ZP,{item:!0,children:(0,I.tZ)(Z.Z,{size:"small",color:"error",onClick:()=>n.displayArtifact.set({action:"reset"}),startIcon:(0,I.tZ)(M.Z,{}),children:(0,I.tZ)(p.cC,{t:r,i18nKey:"ui:reset"})})})]}),(0,I.tZ)(u.Suspense,{fallback:(0,I.tZ)(h.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,I.tZ)(V,{filterOption:a,filterOptionDispatch:c,filteredIds:i})})]})})})}function K({artifactIds:t}){const{t:e}=(0,p.$G)(["artifact","ui"]),i=(0,l.Wz)(),{numDelete:r,numUnequip:n,numUnlock:a,numLock:c}=(0,u.useMemo)((()=>{const e=t.map((t=>i.arts.get(t))),r=e.reduce(((t,e)=>t+(e.lock?0:1)),0),n=e.length-r;return{numDelete:r,numUnequip:e.reduce(((t,e)=>t+(e.location?1:0)),0),numUnlock:r,numLock:n}}),[t,i]);return(0,I.BX)(d.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,I.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,I.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!n,onClick:()=>window.confirm(`Are you sure you want to unequip ${n} artifacts currently equipped on characters?`)&&t.map((t=>i.arts.set(t,{location:""}))),startIcon:(0,I.tZ)(W.Z,{}),children:[(0,I.tZ)(p.cC,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,I.tZ)($.Z,{sx:{ml:1},color:n?"success":"secondary",children:n})]})}),(0,I.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,I.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!r,onClick:()=>window.confirm(`Are you sure you want to delete ${r} artifacts?`)&&t.map((t=>{var e;return!(null!=(e=i.arts.get(t))&&e.lock)&&i.arts.remove(t)})),startIcon:(0,I.tZ)(z.Z,{}),children:[(0,I.tZ)(p.cC,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,I.tZ)($.Z,{sx:{ml:1},color:r?"success":"secondary",children:r})]})}),(0,I.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,I.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:()=>window.confirm(`Are you sure you want to unlock ${c} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!1}))),startIcon:(0,I.tZ)(D.Z,{}),children:[(0,I.tZ)(p.cC,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,I.tZ)($.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,I.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,I.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:()=>window.confirm(`Are you sure you want to lock ${a} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!0}))),startIcon:(0,I.tZ)(F.Z,{}),children:[(0,I.tZ)(p.cC,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,I.tZ)($.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,I.tZ)(d.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-around",children:(0,I.tZ)(v.Z,{variant:"caption",color:"text.secondary",children:(0,I.BX)(p.cC,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only apply to",(0,I.tZ)("b",{children:"currently filtered artifacts"})]})})})]})}var j=i(15015),E=i(33927),O=i(107),G=i(87833);let U,q,H=t=>t;function L({show:t,onHide:e}){const{t:i}=(0,p.$G)("artifact");return(0,I.tZ)(k.Z,{open:t,onClose:e,children:(0,I.BX)(G.Z,{children:[(0,I.BX)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.BX)(v.Z,{variant:"h6",flexGrow:1,children:[(0,I.tZ)(c.Z,{sx:{verticalAlign:"text-top",mr:1}}),i(U||(U=H`showDup`))]}),(0,I.tZ)(P.Z,{onClick:e})]}),(0,I.tZ)(w.Z,{}),(0,I.tZ)(o.Z,{children:(0,I.tZ)(N,{})})]})})}function N(){const{t}=(0,p.$G)("artifact"),e=(0,l.Wz)(),[i,n]=(0,r.NW)();(0,u.useEffect)((()=>e.arts.followAny(n)),[n,e]);const a=(0,u.useMemo)((()=>{const t=i&&[];let r=e.arts.keys;for(;0!==r.length;){const i=r.shift();if(!i)continue;const n=e.arts.get(i);if(!n)continue;const{duplicated:l}=e.arts.findDups(n,r);if(!l.length)continue;const a=l.map((t=>t.id));t.push([i,...a].sort((t=>{var i,r;return null!=(i=null==(r=e.arts.get(t))?void 0:r.location)&&i?-1:1}))),r=r.filter((t=>!a.includes(t)))}return t}),[e,i]),c=(0,u.useMemo)((()=>({})),[]);return(0,I.BX)(E.Z,{spacing:2,children:[a.map((t=>(0,I.tZ)(b.Z,{sx:{overflowX:"scroll"},children:(0,I.tZ)(o.Z,{sx:{display:"flex",gap:1},children:t.map((t=>(0,I.tZ)(s.Z,{sx:{minWidth:300},children:(0,I.tZ)(S.Z,{artifactId:t,canEquip:!0,onDelete:()=>e.arts.remove(t),editorProps:c})},t)))})},t.join()))),!a.length&&(0,I.tZ)(O.Z,{variant:"filled",severity:"success",children:t(q||(q=H`noDupAlert`))})]})}var _=i(31653),R=i(86569),Q=i(68330);const J=[..._._m];function Y({probabilityFilter:t={},setProbabilityFilter:e,disabled:i=!1}){const{t:r}=(0,p.$G)("artifact");return(0,I.BX)(b.Z,{children:[(0,I.tZ)(o.Z,{sx:{py:1},children:(0,I.tZ)(v.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,I.tZ)(w.Z,{}),(0,I.tZ)(o.Z,{children:(0,I.BX)(d.ZP,{container:!0,spacing:1,children:[(0,I.tZ)(d.ZP,{item:!0,xs:12,md:6,children:(0,I.tZ)(G.Z,{children:(0,I.tZ)(o.Z,{children:(0,I.BX)(v.Z,{children:['This UI only pops up when "Sort by"',(0,I.tZ)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,I.BX)(R.Z,{color:"warning",children:[" ","Artifacts that already reach the criteria(100%) or are at 0% are hidden."]})]})})})}),(0,I.tZ)(d.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,I.tZ)(Q.Z,{statKeys:J,statFilters:t,setStatFilters:e,disabled:i,label:r("probabilityFilter.label")})})]})})]})}var tt=i(57928);let et,it,rt,nt=t=>t;const lt=u.lazy((()=>Promise.all([i.e(497),i.e(579)]).then(i.bind(i,40947)))),at=u.lazy((()=>Promise.all([i.e(592),i.e(528)]).then(i.bind(i,76806)))),ct={xs:1,sm:2,md:3,lg:3,xl:4},st={xs:10,sm:12,md:24,lg:24,xl:24};function ot(){const{t}=(0,p.$G)(["artifact","ui"]),e=(0,l.Wz)(),i=X(),[x,v,w]=(0,r.aV)(!1),[P,k,C]=(0,r.aV)(!1),z=(0,r.JT)(),F=st[z],{sortType:D,effFilter:W,ascending:M,probabilityFilter:$}=i,V="probability"===D,[E,O]=(0,u.useState)(0),G=(0,u.useRef)(null),[U,q]=(0,r.NW)(),H=(0,u.useDeferredValue)(U),N=(0,u.useMemo)((()=>new Set(W)),[W]),_=(0,u.useCallback)((t=>e.arts.remove(t)),[e]);(0,u.useEffect)((()=>(f.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((()=>q())))),[e,q]);const R=(0,u.useCallback)((t=>e.displayArtifact.set({probabilityFilter:t})),[e]),Q=(0,u.useMemo)((()=>!e.arts.values.length),[e]),J=(0,u.useMemo)((()=>(0,j.x3)(N,$)),[N,$]),ot=(0,u.useMemo)((()=>(0,j.EM)(N)),[N]),dt=(0,u.useDeferredValue)(i),Zt=(0,u.useDeferredValue)($);(0,u.useEffect)((()=>{if(V)return e.arts.values.forEach((t=>e.arts.setProbability(t.id,(0,tt.B)(t,Zt)))),()=>e.arts.values.forEach((t=>e.arts.setProbability(t.id,-1)))}),[e,V,Zt]);const{artifactIds:ht,totalArtNum:ut}=(0,u.useMemo)((()=>{var t;const{sortType:i=j.OQ[0],ascending:r=!1,filterOption:l}=dt;let a=e.arts.values;V&&(a=a.filter((t=>t.probability&&1!==t.probability)));const c=a.filter((0,n.CZ)(l,ot)).sort((0,n.ef)(null!=(t=j.t$[i])?t:[],r,J)).map((t=>t.id));return Object.assign({artifactIds:c,totalArtNum:a.length},H)}),[dt,H,e,J,ot,V]),{artifactIdsToShow:ft,numPages:pt,currentPageIndex:mt}=(0,u.useMemo)((()=>{const t=Math.ceil(ht.length/F),e=(0,n.re)(E,0,t-1);return{artifactIdsToShow:ht.slice(e*F,(e+1)*F),numPages:t,currentPageIndex:e}}),[ht,E,F]),yt=ht.length!==ut?`${ht.length}/${ut}`:`${ut}`,gt={count:pt,page:mt+1,onChange:(0,u.useCallback)(((t,e)=>{var i;null==(i=G.current)||i.scrollIntoView({behavior:"smooth"}),O(e-1)}),[O,G])},bt={numShowing:ft.length,total:yt,t,namespace:"artifact"},xt={sortKeys:[...j.OQ],value:D,onChange:t=>e.displayArtifact.set({sortType:t}),ascending:M,onChangeAsc:t=>e.displayArtifact.set({ascending:t})};return(0,I.BX)(s.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,I.tZ)(u.Suspense,{fallback:!1,children:(0,I.tZ)(lt,{artifactIdToEdit:x?"new":"",cancelEdit:w,allowUpload:!0,allowEmpty:!0})}),(0,I.tZ)(u.Suspense,{fallback:!1,children:(0,I.tZ)(L,{show:P,onHide:C})}),(0,I.tZ)(A,{pageKey:"artifactPage",modalTitle:t(et||(et=nt`info.title`)),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,I.tZ)(at,{})}),Q&&(0,I.tZ)(m.Z,{}),(0,I.tZ)(T,{numShowing:ht.length,total:ut,artifactIds:ht}),(0,I.tZ)(b.Z,{ref:G,children:(0,I.tZ)(o.Z,{children:(0,I.tZ)(g.Z,{placement:"top",title:(0,I.tZ)(p.cC,{t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"}),children:(0,I.tZ)(s.Z,{children:(0,I.tZ)(y.Z,{selectedKeys:W,onChange:t=>e.displayArtifact.set({effFilter:t})})})})})}),(0,I.tZ)(b.Z,{children:(0,I.BX)(o.Z,{children:[(0,I.tZ)(s.Z,{pb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,I.tZ)(B.Z,{paginationProps:gt,showingTextProps:bt,displaySort:!0,sortByButtonProps:xt})}),(0,I.tZ)(K,{artifactIds:ht})]})}),V&&(0,I.tZ)(Y,{probabilityFilter:$,setProbabilityFilter:R}),(0,I.BX)(d.ZP,{container:!0,columns:ct,spacing:1,children:[(0,I.tZ)(d.ZP,{item:!0,xs:!0,children:(0,I.tZ)(Z.Z,{fullWidth:!0,onClick:v,color:"info",startIcon:(0,I.tZ)(a.Z,{}),children:t(it||(it=nt`addNew`))})}),(0,I.tZ)(d.ZP,{item:!0,xs:1,children:(0,I.tZ)(Z.Z,{fullWidth:!0,onClick:k,color:"info",startIcon:(0,I.tZ)(c.Z,{}),children:t(rt||(rt=nt`showDup`))})})]}),(0,I.tZ)(u.Suspense,{fallback:(0,I.tZ)(h.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,I.tZ)(d.ZP,{container:!0,spacing:1,columns:ct,children:ft.map((t=>(0,I.tZ)(d.ZP,{item:!0,xs:1,children:(0,I.tZ)(S.Z,{artifactId:t,effFilter:N,onDelete:_,editorProps:{},canEquip:!0})},t)))})}),pt>1&&(0,I.tZ)(b.Z,{children:(0,I.tZ)(o.Z,{children:(0,I.tZ)(s.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,I.tZ)(B.Z,{paginationProps:gt,showingTextProps:bt})})})})]})}}}]);