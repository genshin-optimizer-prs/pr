"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[922],{66859:(t,e,i)=>{var r=i(51093);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M8.65 5.82C9.36 4.72 10.6 4 12 4c2.21 0 4 1.79 4 4 0 1.4-.72 2.64-1.82 3.35L8.65 5.82zM20 17.17c-.02-1.1-.63-2.11-1.61-2.62-.54-.28-1.13-.54-1.77-.76L20 17.17zm1.19 4.02L2.81 2.81 1.39 4.22l8.89 8.89c-1.81.23-3.39.79-4.67 1.45-1 .51-1.61 1.54-1.61 2.66V20h13.17l2.61 2.61 1.41-1.42z"}),"PersonOff");e.Z=a},24648:(t,e,i)=>{var r=i(51093);e.Z=void 0;var n=r(i(68671)),l=i(52322),a=(0,n.default)((0,l.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");e.Z=a},18922:(t,e,i)=>{i.r(e),i.d(e,{default:()=>gt});var r=i(45492),n=i(42745),l=i(83568),a=i(92252),c=i(42861),s=i(67550),o=i(7671),d=i(41075),Z=i(83249),h=i(79906),u=i(2784),f=i(61877),p=i(11141),m=i(83660),y=i(98883),g=i(31653),b=i(92794),x=i(39099),w=i(61851),v=i(58489),P=i(6480),k=i(52903);const C=(0,w.X)([...g._m]),I=g._m.slice(0,6),A=g._m.slice(6);function X({selectedKeys:t,onChange:e}){const i=t.filter((t=>I.includes(t))),r=t.filter((t=>A.includes(t)));return(0,k.BX)(s.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,k.tZ)(v.Z,{value:i,sx:{flexGrow:1},children:I.map((i=>(0,k.tZ)(b.Z,{sx:{flexGrow:1},size:"small",value:i,onClick:()=>e(C(t,i)),children:(0,k.BX)(s.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,k.tZ)(x.C,{statKey:i,iconProps:y.mX}),(0,k.tZ)(P.w0,{statKey:i})]})},i)))}),(0,k.tZ)(v.Z,{value:r,sx:{flexGrow:1},children:A.map((i=>(0,k.tZ)(b.Z,{sx:{flexGrow:1},size:"small",value:i,onClick:()=>e(C(t,i)),children:(0,k.BX)(s.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,k.tZ)(x.C,{statKey:i,iconProps:y.mX}),(0,k.tZ)(P.w0,{statKey:i})]})},i)))})]})}var B=i(45269),S=i(24264),F=i(16549),K=i(62197),W=i(56961),z=i(23690),D=i(69698),$=i(1665);function G({pageKey:t,text:e="",modalTitle:i="",children:l}){const[a,c,s]=(0,r.aV)("true"!==localStorage.getItem(`infoShown_${t}`)),[f]=(0,u.useState)(Array.isArray(e)?(0,n.F_)(e):e),p=(0,u.useCallback)((()=>{s(),localStorage.setItem(`infoShown_${t}`,"true")}),[s,t]);return(0,k.BX)(S.Z,{children:[(0,k.BX)(d.ZP,{container:!0,children:[(0,k.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,k.tZ)(K.Z,{variant:"caption",pl:1,children:f})}),(0,k.tZ)(d.ZP,{item:!0,xs:"auto",children:(0,k.tZ)(Z.Z,{size:"small",color:"info",variant:"contained",onClick:c,startIcon:(0,k.tZ)(F.Z,{}),children:(0,k.tZ)($.v,{ns:"ui",key18:"info"})})})]}),(0,k.tZ)(D.Z,{containerProps:{maxWidth:"xl"},open:a,onClose:p,children:(0,k.BX)(S.Z,{children:[(0,k.tZ)(o.Z,{sx:{py:1},children:(0,k.BX)(d.ZP,{container:!0,children:[(0,k.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,k.tZ)(K.Z,{variant:"h6",children:i})}),(0,k.tZ)(d.ZP,{item:!0,children:(0,k.tZ)(z.Z,{onClick:p})})]})}),(0,k.tZ)(W.Z,{}),(0,k.tZ)(o.Z,{children:(0,k.tZ)(u.Suspense,{fallback:(0,k.tZ)(h.Z,{variant:"rectangular",width:"100%",height:500}),children:l})}),(0,k.tZ)(W.Z,{}),(0,k.tZ)(o.Z,{sx:{py:1},children:(0,k.tZ)(z.Z,{large:!0,onClick:p})})]})})]})}var M=i(66146);function T(){const t=(0,l.Wz)(),[e,i]=(0,u.useState)(t.displayArtifact.get());return(0,u.useEffect)((()=>t.displayArtifact.follow(((t,e)=>i(e)))),[t]),e}var E=i(30706),O=i(22698),j=i(75927),V=i(93994),U=i(66859),q=i(24648),L=i(12366);const _=(0,u.lazy)((()=>Promise.all([i.e(497),i.e(537),i.e(313)]).then(i.bind(i,22537))));function N({numShowing:t,total:e,artifactIds:i}){const{t:r}=(0,p.$G)(["artifact","ui"]),n=(0,l.Wz)(),{filterOption:a}=T(),c=(0,u.useCallback)((t=>n.displayArtifact.set({filterOption:Object.assign({},a,t)})),[n,a]);return(0,k.tZ)(u.Suspense,{fallback:(0,k.tZ)(h.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,k.tZ)(S.Z,{children:(0,k.BX)(o.Z,{children:[(0,k.BX)(d.ZP,{container:!0,children:[(0,k.tZ)(d.ZP,{item:!0,children:(0,k.tZ)(K.Z,{variant:"h6",children:(0,k.tZ)(p.cC,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,k.tZ)(d.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:t!==e&&(0,k.BX)(K.Z,{children:["Filtered ",(0,k.tZ)("strong",{children:t})," / ",e]})}),(0,k.tZ)(d.ZP,{item:!0,children:(0,k.tZ)(Z.Z,{size:"small",color:"error",onClick:()=>n.displayArtifact.set({action:"reset"}),startIcon:(0,k.tZ)(q.Z,{}),children:(0,k.tZ)(p.cC,{t:r,i18nKey:"ui:reset"})})})]}),(0,k.tZ)(u.Suspense,{fallback:(0,k.tZ)(h.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,k.tZ)(_,{filterOption:a,filterOptionDispatch:c,filteredIds:i})})]})})})}function H({artifactIds:t}){const{t:e}=(0,p.$G)(["artifact","ui"]),i=(0,l.Wz)(),{numDelete:r,numUnequip:n,numUnlock:a,numLock:c}=(0,u.useMemo)((()=>{const e=t.map((t=>i.arts.get(t))),r=e.reduce(((t,e)=>t+(e.lock?0:1)),0),n=e.length-r;return{numDelete:r,numUnequip:e.reduce(((t,e)=>t+(e.location?1:0)),0),numUnlock:r,numLock:n}}),[t,i]);return(0,k.BX)(d.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,k.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!n,onClick:()=>window.confirm(`Are you sure you want to unequip ${n} artifacts currently equipped on characters?`)&&t.map((t=>i.arts.set(t,{location:""}))),startIcon:(0,k.tZ)(U.Z,{}),children:[(0,k.tZ)(p.cC,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,k.tZ)(L.Z,{sx:{ml:1},color:n?"success":"secondary",children:n})]})}),(0,k.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!r,onClick:()=>window.confirm(`Are you sure you want to delete ${r} artifacts?`)&&t.map((t=>{var e;return!(null!=(e=i.arts.get(t))&&e.lock)&&i.arts.remove(t)})),startIcon:(0,k.tZ)(O.Z,{}),children:[(0,k.tZ)(p.cC,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,k.tZ)(L.Z,{sx:{ml:1},color:r?"success":"secondary",children:r})]})}),(0,k.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:()=>window.confirm(`Are you sure you want to unlock ${c} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!1}))),startIcon:(0,k.tZ)(V.Z,{}),children:[(0,k.tZ)(p.cC,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,k.tZ)(L.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,k.tZ)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,k.BX)(Z.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:()=>window.confirm(`Are you sure you want to lock ${a} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!0}))),startIcon:(0,k.tZ)(j.Z,{}),children:[(0,k.tZ)(p.cC,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,k.tZ)(L.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,k.tZ)(d.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-around",children:(0,k.tZ)(K.Z,{variant:"caption",color:"text.secondary",children:(0,k.BX)(p.cC,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only apply to",(0,k.tZ)("b",{children:"currently filtered artifacts"})]})})})]})}var R=i(15015),Q=i(33927),J=i(107),Y=i(87833);let tt,et,it=t=>t;function rt({show:t,onHide:e}){const{t:i}=(0,p.$G)("artifact");return(0,k.tZ)(D.Z,{open:t,onClose:e,children:(0,k.BX)(Y.Z,{children:[(0,k.BX)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,k.BX)(K.Z,{variant:"h6",flexGrow:1,children:[(0,k.tZ)(c.Z,{sx:{verticalAlign:"text-top",mr:1}}),i(tt||(tt=it`showDup`))]}),(0,k.tZ)(z.Z,{onClick:e})]}),(0,k.tZ)(W.Z,{}),(0,k.tZ)(o.Z,{children:(0,k.tZ)(nt,{})})]})})}function nt(){const{t}=(0,p.$G)("artifact"),e=(0,l.Wz)(),[i,n]=(0,r.NW)();(0,u.useEffect)((()=>e.arts.followAny(n)),[n,e]);const a=(0,u.useMemo)((()=>{const t=i&&[];let r=e.arts.keys;for(;0!==r.length;){const i=r.shift();if(!i)continue;const n=e.arts.get(i);if(!n)continue;const{duplicated:l}=e.arts.findDups(n,r);if(!l.length)continue;const a=l.map((t=>t.id));t.push([i,...a].sort((t=>{var i,r;return null!=(i=null==(r=e.arts.get(t))?void 0:r.location)&&i?-1:1}))),r=r.filter((t=>!a.includes(t)))}return t}),[e,i]),c=(0,u.useMemo)((()=>({})),[]);return(0,k.BX)(Q.Z,{spacing:2,children:[a.map((t=>(0,k.tZ)(S.Z,{sx:{overflowX:"scroll"},children:(0,k.tZ)(o.Z,{sx:{display:"flex",gap:1},children:t.map((t=>(0,k.tZ)(s.Z,{sx:{minWidth:300},children:(0,k.tZ)(E.Z,{artifactId:t,canEquip:!0,onDelete:()=>e.arts.remove(t),editorProps:c})},t)))})},t.join()))),!a.length&&(0,k.tZ)(J.Z,{variant:"filled",severity:"success",children:t(et||(et=it`noDupAlert`))})]})}var lt=i(86569),at=i(68330);const ct=[...g._m];function st({probabilityFilter:t={},setProbabilityFilter:e,disabled:i=!1}){const{t:r}=(0,p.$G)("artifact");return(0,k.BX)(S.Z,{children:[(0,k.tZ)(o.Z,{sx:{py:1},children:(0,k.tZ)(K.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,k.tZ)(W.Z,{}),(0,k.tZ)(o.Z,{children:(0,k.BX)(d.ZP,{container:!0,spacing:1,children:[(0,k.tZ)(d.ZP,{item:!0,xs:12,md:6,children:(0,k.tZ)(Y.Z,{children:(0,k.tZ)(o.Z,{children:(0,k.BX)(K.Z,{children:['This UI only pops up when "Sort by"',(0,k.tZ)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,k.BX)(lt.Z,{color:"warning",children:[" ","Artifacts that already reach the criteria(100%) or are at 0% are hidden."]})]})})})}),(0,k.tZ)(d.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,k.tZ)(at.Z,{statKeys:ct,statFilters:t,setStatFilters:e,disabled:i,label:r("probabilityFilter.label")})})]})})]})}var ot=i(57928);let dt,Zt,ht,ut=t=>t;const ft=u.lazy((()=>Promise.all([i.e(497),i.e(579)]).then(i.bind(i,40947)))),pt=u.lazy((()=>Promise.all([i.e(592),i.e(528)]).then(i.bind(i,76806)))),mt={xs:1,sm:2,md:3,lg:3,xl:4},yt={xs:10,sm:12,md:24,lg:24,xl:24};function gt(){const{t}=(0,p.$G)(["artifact","ui"]),e=(0,l.Wz)(),i=T(),[y,g,b]=(0,r.aV)(!1),[x,w,v]=(0,r.aV)(!1),P=(0,r.JT)(),C=yt[P],{sortType:I,effFilter:A,ascending:F,probabilityFilter:K}=i,W="probability"===I,[z,D]=(0,u.useState)(0),$=(0,u.useRef)(null),[O,j]=(0,r.NW)(),V=(0,u.useDeferredValue)(O),U=(0,u.useMemo)((()=>new Set(A)),[A]),q=(0,u.useCallback)((t=>e.arts.remove(t)),[e]);(0,u.useEffect)((()=>(f.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((()=>j())))),[e,j]);const L=(0,u.useCallback)((t=>e.displayArtifact.set({probabilityFilter:t})),[e]),_=(0,u.useMemo)((()=>!e.arts.values.length),[e]),Q=(0,u.useMemo)((()=>(0,R.x3)(U,K)),[U,K]),J=(0,u.useMemo)((()=>(0,R.EM)(U)),[U]),Y=(0,u.useDeferredValue)(i),tt=(0,u.useDeferredValue)(K);(0,u.useEffect)((()=>{if(W)return e.arts.values.forEach((t=>e.arts.setProbability(t.id,(0,ot.B)(t,tt)))),()=>e.arts.values.forEach((t=>e.arts.setProbability(t.id,-1)))}),[e,W,tt]);const{artifactIds:et,totalArtNum:it}=(0,u.useMemo)((()=>{var t;const{sortType:i=R.OQ[0],ascending:r=!1,filterOption:l}=Y;let a=e.arts.values;W&&(a=a.filter((t=>t.probability&&1!==t.probability)));const c=a.filter((0,n.CZ)(l,J)).sort((0,n.ef)(null!=(t=R.t$[i])?t:[],r,Q)).map((t=>t.id));return Object.assign({artifactIds:c,totalArtNum:a.length},V)}),[Y,V,e,Q,J,W]),{artifactIdsToShow:nt,numPages:lt,currentPageIndex:at}=(0,u.useMemo)((()=>{const t=Math.ceil(et.length/C),e=(0,n.re)(z,0,t-1);return{artifactIdsToShow:et.slice(e*C,(e+1)*C),numPages:t,currentPageIndex:e}}),[et,z,C]),ct=et.length!==it?`${et.length}/${it}`:`${it}`,gt={count:lt,page:at+1,onChange:(0,u.useCallback)(((t,e)=>{var i;null==(i=$.current)||i.scrollIntoView({behavior:"smooth"}),D(e-1)}),[D,$])},bt={numShowing:nt.length,total:ct,t,namespace:"artifact"},xt={sortKeys:[...R.OQ],value:I,onChange:t=>e.displayArtifact.set({sortType:t}),ascending:F,onChangeAsc:t=>e.displayArtifact.set({ascending:t})};return(0,k.BX)(s.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,k.tZ)(u.Suspense,{fallback:!1,children:(0,k.tZ)(ft,{artifactIdToEdit:y?"new":"",cancelEdit:b,allowUpload:!0,allowEmpty:!0})}),(0,k.tZ)(u.Suspense,{fallback:!1,children:(0,k.tZ)(rt,{show:x,onHide:v})}),(0,k.tZ)(G,{pageKey:"artifactPage",modalTitle:t(dt||(dt=ut`info.title`)),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,k.tZ)(pt,{})}),_&&(0,k.tZ)(m.Z,{}),(0,k.tZ)(N,{numShowing:et.length,total:it,artifactIds:et}),(0,k.tZ)(S.Z,{ref:$,children:(0,k.tZ)(o.Z,{children:(0,k.tZ)(B.Z,{placement:"top",title:(0,k.tZ)(p.cC,{t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"}),children:(0,k.tZ)(s.Z,{children:(0,k.tZ)(X,{selectedKeys:A,onChange:t=>e.displayArtifact.set({effFilter:t})})})})})}),(0,k.tZ)(S.Z,{children:(0,k.BX)(o.Z,{children:[(0,k.tZ)(s.Z,{pb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,k.tZ)(M.Z,{paginationProps:gt,showingTextProps:bt,displaySort:!0,sortByButtonProps:xt})}),(0,k.tZ)(H,{artifactIds:et})]})}),W&&(0,k.tZ)(st,{probabilityFilter:K,setProbabilityFilter:L}),(0,k.BX)(d.ZP,{container:!0,columns:mt,spacing:1,children:[(0,k.tZ)(d.ZP,{item:!0,xs:!0,children:(0,k.tZ)(Z.Z,{fullWidth:!0,onClick:g,color:"info",startIcon:(0,k.tZ)(a.Z,{}),children:t(Zt||(Zt=ut`addNew`))})}),(0,k.tZ)(d.ZP,{item:!0,xs:1,children:(0,k.tZ)(Z.Z,{fullWidth:!0,onClick:w,color:"info",startIcon:(0,k.tZ)(c.Z,{}),children:t(ht||(ht=ut`showDup`))})})]}),(0,k.tZ)(u.Suspense,{fallback:(0,k.tZ)(h.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,k.tZ)(d.ZP,{container:!0,spacing:1,columns:mt,children:nt.map((t=>(0,k.tZ)(d.ZP,{item:!0,xs:1,children:(0,k.tZ)(E.Z,{artifactId:t,effFilter:U,onDelete:q,editorProps:{},canEquip:!0})},t)))})}),lt>1&&(0,k.tZ)(S.Z,{children:(0,k.tZ)(o.Z,{children:(0,k.tZ)(s.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:(0,k.tZ)(M.Z,{paginationProps:gt,showingTextProps:bt})})})})]})}}}]);