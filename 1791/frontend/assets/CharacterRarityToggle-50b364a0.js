import{b as $,av as Xe,au as Je,aw as ge,aY as X,ax as E,e as i,ay as dt,az as Ze,c9 as pa,aA as je,j as D,aB as Qe,aV as yn,aU as wn,ca as La,c as Ie,a$ as _n,b0 as kt,cb as Rn,T as _,a0 as Sa,p as e,cc as Ln,cd as Sn,ce as kn,bB as $n,F as Tn,r as _e,i as Re,n as h,V as le,B as A,cf as Dn,aT as Un,c6 as jn,ar as Ke,K as g,d as Ce,U as Q,s as Bt,C as z,ao as se,J as b,bG as At,ab as ut,q as ve,cg as In,bK as nt,bo as pe,l as zt,bE as Mn,ch as Bn,t as we,bi as rt,bh as ka,a4 as An,ci as zn,aR as On,cj as ma,ck as Nn,cl as bt,cm as vt,cn as yt,bw as En,a5 as et,D as Z,b2 as xe,be as Ot,Y as F,aC as fe,aN as ht,u as K,bq as fa,br as ga,bp as Ca,Z as We,Q as de,o as Ve,k as he,bg as ke,v as oe,W as tt,bs as Wn,co as $a,cp as Pn,cq as Ta,cr as Fn,cs as qn,ct as Hn,b8 as Vn,cu as Gn,_ as Da,ah as Ua,ag as Kn,cv as Yn,$ as Nt,cw as Xn,X as Et,b1 as Jn,aE as pt,bj as Zn,bd as Qn,cx as $t,at as Tt,cy as er,m as Dt,f as Wt,cz as tr,cA as wt,h as ar,bW as nr,aG as ja}from"./index-7e42dce9.js";import{t as Pt,s as Ft,v as qt,i as Ia,j as rr,k as or,C as H,H as sr,w as ir,x as lr,c as Ne,u as cr,g as dr,y as ur,q as hr,b as Ma,T as Ba,d as Ht,z as pr}from"./TeamCard-2f7781b7.js";import{D as J}from"./DataContext-de0b3495.js";import{p as me,g as ce,u as B,E as Vt,S as Gt,d as Aa,B as za,x as Oa,y as mr,v as fr,w as Na,n as gr,q as Cr,r as xa,z as xr,A as br,C as vr,D as yr,a as ba,b as va,F as wr}from"./index-a741b4fe.js";import{d as Me}from"./Close-7ee18e5c.js";import{I as $e,i as Pe,C as mt,B as _r}from"./ColoredText-fa9c0893.js";import{a as Ea,C as Rr,L as Lr,b as Sr,A as kr,W as Wa,D as Pa,c as $r}from"./WeaponEditor-19a18d3c.js";import{S as ae}from"./SqBadge-793370e6.js";import{b as Kt,c as Fa,e as Yt,C as Tr,T as Ye,u as qa,a as Ha,S as Va,f as Xt,s as Ga,d as Ka,g as Dr}from"./StarDisplay-ecb69494.js";import{C as Be}from"./CardActionArea-d3a01ffb.js";import{F as Jt,C as Zt,A as Ya,d as Ur}from"./ConditionalWrapper-37d4fc9d.js";import{u as Ut,f as jr,A as ot,d as Ir,i as Mr,b as Br}from"./ArtifactSort-b69533c8.js";import{b as st,c as Ar,d as zr,w as Or,W as Nr}from"./WeaponCard-2e0e14a6.js";import{B as at,d as ft}from"./BootstrapTooltip-768bb686.js";import{a as Xa,d as Ja}from"./CheckBoxOutlineBlank-1e967a85.js";import{A as Er}from"./Artifact-ffa961c6.js";import{g as Za,a as Wr,b as Pr}from"./index-39cc2bb8.js";import{g as gt,W as Qa}from"./index-77bb8326.js";import{u as Fr}from"./useWeapon-21bd5564.js";import{C as ye}from"./CardHeader-a0be35ef.js";import{S as qr}from"./SlotIcon-b1304795.js";import{C as en,a as Hr}from"./ChevronRight-53d7b8bd.js";import{T as Ee,S as Ct,h as Qt,a as Vr}from"./SolidToggleButtonGroup-9e6c8fca.js";import Gr from"./WeaponSelectionModal-ffcb093e.js";import{C as Kr,a as Yr,M as Xr}from"./DropdownButton-aa034528.js";import{d as Jr}from"./Settings-b713908f.js";import{c as ya}from"./totalUtils-10bdf315.js";function Zr(t){const a=$();return Kt(a.builds,t)}function tn(t){const a=$();return Kt(a.buildTcs,t)}function Fe(t){const a=$();return Kt(a.optConfigs,t)}function Qr(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:s=!1}=t,o=Fa({badgeContent:a,max:r});let l=n;n===!1&&a===0&&!s&&(l=!0);const{badgeContent:c,max:p=r}=l?o:t,d=c&&Number(c)>p?`${p}+`:c;return{badgeContent:c,invisible:l,max:p,displayValue:d}}function eo(t){return Je("MuiBadge",t)}const to=Xe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Le=to,ao=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],_t=10,Rt=4,no=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:s,variant:o,classes:l={}}=t,c={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${X(n.vertical)}${X(n.horizontal)}`,`anchorOrigin${X(n.vertical)}${X(n.horizontal)}${X(s)}`,`overlap${X(s)}`,a!=="default"&&`color${X(a)}`]};return Qe(c,eo,l)},ro=ge("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),oo=ge("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${X(n.anchorOrigin.vertical)}${X(n.anchorOrigin.horizontal)}${X(n.overlap)}`],n.color!=="default"&&a[`color${X(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>E({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:_t*2,lineHeight:1,padding:"0 6px",height:_t*2,borderRadius:_t,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:Rt,height:Rt*2,minWidth:Rt*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Le.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),so=i.forwardRef(function(a,n){var r,s,o,l,c,p;const d=dt({props:a,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:m,component:C,components:f={},componentsProps:x={},children:w,overlap:y="rectangular",color:L="default",invisible:S=!1,max:U=99,badgeContent:W,slots:j,slotProps:I,showZero:P=!1,variant:R="standard"}=d,v=Ze(d,ao),{badgeContent:M,invisible:k,max:q,displayValue:ne}=Qr({max:U,invisible:S,badgeContent:W,showZero:P}),ee=Fa({anchorOrigin:u,color:L,overlap:y,variant:R,badgeContent:W}),Y=k||M==null&&R!=="dot",{color:te=L,overlap:V=y,anchorOrigin:G=u,variant:O=R}=Y?ee:d,re=O!=="dot"?ne:void 0,Te=E({},d,{badgeContent:M,invisible:Y,max:q,displayValue:re,showZero:P,anchorOrigin:G,color:te,overlap:V,variant:O}),Ae=no(Te),De=(r=(s=j==null?void 0:j.root)!=null?s:f.Root)!=null?r:ro,ie=(o=(l=j==null?void 0:j.badge)!=null?l:f.Badge)!=null?o:oo,ue=(c=I==null?void 0:I.root)!=null?c:x.root,ze=(p=I==null?void 0:I.badge)!=null?p:x.badge,T=pa({elementType:De,externalSlotProps:ue,externalForwardedProps:v,additionalProps:{ref:n,as:C},ownerState:Te,className:je(ue==null?void 0:ue.className,Ae.root,m)}),N=pa({elementType:ie,externalSlotProps:ze,ownerState:Te,className:je(Ae.badge,ze==null?void 0:ze.className)});return D.jsxs(De,E({},T,{children:[w,D.jsx(ie,E({},N,{children:re}))]}))}),io=so;function lo(t){return Je("PrivateSwitchBase",t)}Xe("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const co=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],uo=t=>{const{classes:a,checked:n,disabled:r,edge:s}=t,o={root:["root",n&&"checked",r&&"disabled",s&&`edge${X(s)}`],input:["input"]};return Qe(o,lo,a)},ho=ge(yn)(({ownerState:t})=>E({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),po=ge("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),mo=i.forwardRef(function(a,n){const{autoFocus:r,checked:s,checkedIcon:o,className:l,defaultChecked:c,disabled:p,disableFocusRipple:d=!1,edge:u=!1,icon:m,id:C,inputProps:f,inputRef:x,name:w,onBlur:y,onChange:L,onFocus:S,readOnly:U,required:W=!1,tabIndex:j,type:I,value:P}=a,R=Ze(a,co),[v,M]=wn({controlled:s,default:!!c,name:"SwitchBase",state:"checked"}),k=La(),q=O=>{S&&S(O),k&&k.onFocus&&k.onFocus(O)},ne=O=>{y&&y(O),k&&k.onBlur&&k.onBlur(O)},ee=O=>{if(O.nativeEvent.defaultPrevented)return;const re=O.target.checked;M(re),L&&L(O,re)};let Y=p;k&&typeof Y>"u"&&(Y=k.disabled);const te=I==="checkbox"||I==="radio",V=E({},a,{checked:v,disabled:Y,disableFocusRipple:d,edge:u}),G=uo(V);return D.jsxs(ho,E({component:"span",className:je(G.root,l),centerRipple:!0,focusRipple:!d,disabled:Y,tabIndex:null,role:void 0,onFocus:q,onBlur:ne,ownerState:V,ref:n},R,{children:[D.jsx(po,E({autoFocus:r,checked:s,defaultChecked:c,className:G.input,disabled:Y,id:te?C:void 0,name:w,onChange:ee,readOnly:U,ref:x,required:W,ownerState:V,tabIndex:j,type:I},I==="checkbox"&&P===void 0?{}:{value:P},f)),v?o:m]}))}),fo=mo,go=Ie(D.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Co=Ie(D.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),xo=Ie(D.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function bo(t){return Je("MuiCheckbox",t)}const vo=Xe("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Lt=vo,yo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],wo=t=>{const{classes:a,indeterminate:n,color:r,size:s}=t,o={root:["root",n&&"indeterminate",`color${X(r)}`,`size${X(s)}`]},l=Qe(o,bo,a);return E({},a,l)},_o=ge(fo,{shouldForwardProp:t=>_n(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.indeterminate&&a.indeterminate,n.color!=="default"&&a[`color${X(n.color)}`]]}})(({theme:t,ownerState:a})=>E({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:kt(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${Lt.checked}, &.${Lt.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${Lt.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),Ro=D.jsx(Co,{}),Lo=D.jsx(go,{}),So=D.jsx(xo,{}),ko=i.forwardRef(function(a,n){var r,s;const o=dt({props:a,name:"MuiCheckbox"}),{checkedIcon:l=Ro,color:c="primary",icon:p=Lo,indeterminate:d=!1,indeterminateIcon:u=So,inputProps:m,size:C="medium",className:f}=o,x=Ze(o,yo),w=d?u:p,y=d?u:l,L=E({},o,{color:c,indeterminate:d,size:C}),S=wo(L);return D.jsx(_o,E({type:"checkbox",inputProps:E({"data-indeterminate":d},m),icon:i.cloneElement(w,{fontSize:(r=w.props.fontSize)!=null?r:C}),checkedIcon:i.cloneElement(y,{fontSize:(s=y.props.fontSize)!=null?s:C}),ownerState:L,ref:n,className:je(S.root,f)},x,{classes:S}))}),$o=ko;function To(t){return Je("MuiFormControlLabel",t)}const Do=Xe("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ge=Do,Uo=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],jo=t=>{const{classes:a,disabled:n,labelPlacement:r,error:s,required:o}=t,l={root:["root",n&&"disabled",`labelPlacement${X(r)}`,s&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return Qe(l,To,a)},Io=ge("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[{[`& .${Ge.label}`]:a.label},a.root,a[`labelPlacement${X(n.labelPlacement)}`]]}})(({theme:t,ownerState:a})=>E({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ge.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ge.label}`]:{[`&.${Ge.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Mo=ge("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,a)=>a.asterisk})(({theme:t})=>({[`&.${Ge.error}`]:{color:(t.vars||t).palette.error.main}})),Bo=i.forwardRef(function(a,n){var r,s;const o=dt({props:a,name:"MuiFormControlLabel"}),{className:l,componentsProps:c={},control:p,disabled:d,disableTypography:u,label:m,labelPlacement:C="end",required:f,slotProps:x={}}=o,w=Ze(o,Uo),y=La(),L=(r=d??p.props.disabled)!=null?r:y==null?void 0:y.disabled,S=f??p.props.required,U={disabled:L,required:S};["checked","name","onChange","value","inputRef"].forEach(v=>{typeof p.props[v]>"u"&&typeof o[v]<"u"&&(U[v]=o[v])});const W=Rn({props:o,muiFormControl:y,states:["error"]}),j=E({},o,{disabled:L,labelPlacement:C,required:S,error:W.error}),I=jo(j),P=(s=x.typography)!=null?s:c.typography;let R=m;return R!=null&&R.type!==_&&!u&&(R=D.jsx(_,E({component:"span"},P,{className:je(I.label,P==null?void 0:P.className),children:R}))),D.jsxs(Io,E({className:je(I.root,l),ownerState:j,ref:n},w,{children:[i.cloneElement(p,U),S?D.jsxs(Sa,{direction:"row",alignItems:"center",children:[R,D.jsxs(Mo,{ownerState:j,"aria-hidden":!0,className:I.asterisk,children:["â€‰","*"]})]}):R]}))}),Ao=Bo;function an({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(Tn,{...a});case"plume":return e($n,{...a});case"sands":return e(kn,{...a});case"goblet":return e(Sn,{...a});case"circlet":return e(Ln,{...a})}}var ea={},zo=Re;Object.defineProperty(ea,"__esModule",{value:!0});var it=ea.default=void 0,Oo=zo(_e()),No=D,Eo=(0,Oo.default)((0,No.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");it=ea.default=Eo;function Wo({title:t,children:a,id:n="dropdownbtn",...r}){const[s,o]=i.useState(null),l=!!s,c=i.useCallback(d=>o(d.currentTarget),[o]),p=i.useCallback(()=>o(null),[o]);return h(i.Suspense,{fallback:e(A,{endIcon:e(it,{}),...r,children:e(le,{width:50})}),children:[e(A,{...r,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:c,endIcon:e(it,{}),children:t}),e(jn,{id:"basic-menu",anchorEl:s,open:l,placement:"bottom-start",transition:!0,onClick:p,sx:{zIndex:1500},children:({TransitionProps:d,placement:u})=>e(Dn,{...d,style:{transformOrigin:u==="bottom-start"?"left top":"left bottom"},children:e(Un,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Kr,{onClickAway:p,children:h("div",{children:[" ",e(i.Suspense,{fallback:e(le,{width:"100%",height:"1000"}),children:e(Yr,{"aria-labelledby":n,children:a})})]})})})})})]})}const Po=Ie(D.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),ta=Ie(D.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Fo=Ie(D.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),qo=Ie(D.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),Ho=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Vo=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Go=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Ko=""+new URL("splash_amber-51176566.png",import.meta.url).href,Yo=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,Xo=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,Jo=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,Zo=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,Qo=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,es=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,ts=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,as=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,ns=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,rs=""+new URL("splash_chiori-0fd0d497.png",import.meta.url).href,os=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,ss=""+new URL("splash_collei-504a299e.png",import.meta.url).href,is=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,ls=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,cs=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,ds=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,us=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,hs=""+new URL("splash_eula-1491affb.png",import.meta.url).href,ps=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,ms=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,fs=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,gs=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,Cs=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,xs=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,bs=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,vs=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,ys=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,ws=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,_s=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,Rs=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,Ls=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,Ss=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,ks=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,$s=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,Ts=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Ds=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Us=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,js=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,Is=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,Ms=""+new URL("splash_lumine-51240648.png",import.meta.url).href,Bs=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,As=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,zs=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Os=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Ns=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,Es=""+new URL("splash_navia-749d043e.png",import.meta.url).href,Ws=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Ps=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Fs=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,qs=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Hs=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Vs=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,Gs=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Ks=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Ys=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,Xs=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,Js=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,Zs=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,Qs=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,ei=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,ti=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,ai=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,ni=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,ri=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,oi=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,si=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,ii=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,li=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,ci=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,di=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,ui=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,hi=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,pi=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,mi=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,fi=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,gi=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,Ci={Albedo:Vo,Alhaitham:Go,Amber:Ko,AratakiItto:ws,Baizhu:Jo,Barbara:Zo,Beidou:Qo,Bennett:es,Candace:ts,Charlotte:as,Chevreuse:ns,Chiori:rs,Chongyun:os,Collei:ss,Cyno:is,Dehya:ls,Diluc:cs,Diona:ds,Dori:us,Eula:hs,Faruzan:ps,Fischl:ms,Freminet:fs,Furina:gs,Gaming:Cs,Ganyu:xs,Gorou:bs,HuTao:ys,Jean:_s,KaedeharaKazuha:Ss,Kaeya:Rs,KamisatoAyaka:Yo,KamisatoAyato:Xo,Kaveh:Ls,Keqing:ks,Kirara:$s,Klee:Ts,KujouSara:Ys,KukiShinobu:Us,Layla:js,Lisa:Is,Lynette:Bs,Lyney:As,Mika:zs,Mona:Os,Nahida:Ns,Navia:Es,Neuvillette:Ws,Nilou:Ps,Ningguang:Fs,Noelle:qs,Qiqi:Hs,RaidenShogun:Vs,Razor:Gs,Rosaria:Ks,SangonomiyaKokomi:Ds,Sayu:Xs,Shenhe:Js,ShikanoinHeizou:vs,Sucrose:Zs,Tartaglia:Qs,Thoma:ei,Tighnari:ti,TravelerF:Ms,TravelerM:Ho,Venti:ai,Wanderer:ni,Wriothesley:ri,Xiangling:oi,Xianyun:si,Xiao:ii,Xingqiu:li,Xinyan:ci,YaeMiko:di,Yanfei:ui,Yaoyao:hi,Yelan:pi,Yoimiya:mi,YunJin:fi,Zhongli:gi};function xi(t,a){return Ci[Ke(t,a)]??""}function aa(t){const a=$();return i.useCallback(n=>{if(!t)return;const r=a.chars.get(t);r&&a.chars.set(t,{...r,...n})},[t,a])}function nn(){const{data:t}=i.useContext(J);return h(g,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(a=>e(Ea,{node:a},JSON.stringify(a.info))),t.get(me.special).info.name&&h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(_,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(me.special).info.icon,e(_,{children:t.get(me.special).info.name})]})]})}function bi({characterKey:t,onClick:a,onClickHeader:n,footer:r,hideStats:s}){var L;const o=$(),l=Pt(t),c=Ft(t),{gender:p}=Ce(),d=ce(t,p),u=aa(t),m=(L=l==null?void 0:l[t])==null?void 0:L.target,C=i.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),f=i.useCallback(S=>e(Be,{onClick:C,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:S}),[C]),x=i.useMemo(()=>c&&d&&{character:c,characterSheet:d,characterDispatch:u},[c,d,u]),w=i.useMemo(()=>m&&l&&{data:m,teamData:l},[m,l]),{favorite:y}=qt(t);return e(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:s?300:600}),children:h(Bt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(g,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(Q,{sx:{p:.5},onClick:S=>o.charMeta.set(t,{favorite:!y}),children:y?e(Jt,{}):e(ta,{})})}),e(Zt,{condition:!!a,wrapper:f,children:c&&w&&x?e(vi,{characterContextObj:x,dataContextObj:w,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:s}):e(yi,{characterKey:t})}),r]})})}function vi({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:r,onClickHeader:s,hideStats:o}){return e(H.Provider,{value:t,children:h(J.Provider,{value:a,children:[e(Ia,{characterKey:n,onClick:r?void 0:s,children:e(rr,{characterKey:n})}),h(g,{sx:l=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:o?`${l.spacing(1)}!important`:void 0}),children:[e(or,{}),!o&&e(nn,{})]})]})})}function yi({characterKey:t}){return h(se,{children:[e(Ia,{characterKey:t,children:e(sr,{characterKey:t})}),e(z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const wi=i.createContext({}),_i=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,Ri=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,Li=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,Si=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,ki=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,$i=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,Ti=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,Di=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,Ui=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,ji=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,Ii=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,Mi=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Bi=""+new URL("Character_Chiori_Card-190184e6.jpg",import.meta.url).href,Ai=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,zi=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Oi=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,Ni=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Ei=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Wi=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,Pi=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,Fi=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,qi=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Hi=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Vi=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Gi=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,Ki=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Yi=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,Xi=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Ji=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,Zi=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,Qi=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,el=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,tl=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,al=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,nl=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,rl=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,ol=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,sl=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,il=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,ll=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,cl=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,dl=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,ul=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,hl=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,pl=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,ml=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,fl=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,gl=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,Cl=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,xl=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,bl=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,vl=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,yl=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,wl=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,_l=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,Rl=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,Ll=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,Sl=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,kl=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,$l=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,Tl=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Dl=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,Ul=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,jl=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,Il=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Ml=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,Bl=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Al=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,zl=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Ol=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,Nl=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,El=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Wl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,Pl=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Fl=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,ql=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Hl=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Vl=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Gl=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,Kl=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Yl=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,Xl=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,wa={Albedo:_i,Alhaitham:Ri,Aloy:Li,Amber:Si,AratakiItto:ki,Baizhu:$i,Barbara:Ti,Beidou:Di,Bennett:Ui,Candace:ji,Charlotte:Ii,Chevreuse:Mi,Chiori:Bi,Chongyun:Ai,Collei:zi,Cyno:Oi,Dehya:Ni,Diluc:Ei,Diona:Wi,Dori:Pi,Eula:Fi,Faruzan:qi,Fischl:Hi,Freminet:Vi,Furina:Gi,Gaming:Ki,Ganyu:Yi,Gorou:Xi,HuTao:Ji,Jean:Zi,KaedeharaKazuha:nl,Kaeya:Qi,KamisatoAyaka:el,KamisatoAyato:tl,Kaveh:al,Keqing:rl,Kirara:ol,Klee:sl,KujouSara:il,KukiShinobu:ll,Layla:cl,Lisa:dl,Lyney:hl,Lynette:ul,Mika:pl,Mona:ml,Nahida:fl,Navia:gl,Neuvillette:Cl,Nilou:xl,Ningguang:bl,Noelle:vl,Qiqi:yl,RaidenShogun:wl,Razor:_l,Rosaria:Rl,SangonomiyaKokomi:Ll,Sayu:Sl,Shenhe:kl,ShikanoinHeizou:$l,Somnia:Tl,Sucrose:Dl,Tartaglia:Ul,Thoma:jl,Tighnari:Il,TravelerF:Yl,TravelerM:Xl,Venti:Ml,Wanderer:Bl,Wriothesley:Al,Xiangling:zl,Xianyun:Ol,Xiao:Nl,Xingqiu:El,Xinyan:Wl,YaeMiko:Pl,Yanfei:Fl,Yaoyao:ql,Yelan:Hl,Yoimiya:Vl,YunJin:Gl,Zhongli:Kl};function Jl(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return wa[`Traveler${a}`]??"";default:return wa[t]??""}}function ku(){const{characterSheet:t}=i.useContext(H),{data:a}=i.useContext(J),n={auto:a.get(B.total.auto).value,skill:a.get(B.total.skill).value,burst:a.get(B.total.burst).value},r={auto:a.get(B.total.autoBoost).value,skill:a.get(B.total.skillBoost).value,burst:a.get(B.total.burstBoost).value};return e(g,{children:e(b,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var o;return e(b,{item:!0,xs:4,children:e(io,{badgeContent:n[s],color:r[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(g,{component:"img",src:(o=t.getTalentOfKey(s))==null?void 0:o.img,width:"100%",height:"auto"})})},s)})})})}function Zl(){const{characterSheet:t,character:{key:a}}=i.useContext(H),{data:n}=i.useContext(J),r=aa(a),s=n.get(B.constellation).value;return e(b,{container:!0,spacing:1,children:At(1,6).map(o=>{var l;return e(b,{item:!0,xs:4,children:e(Be,{onClick:()=>r({constellation:o===s?o-1:o}),children:e(g,{component:"img",src:(l=t.getTalentOfKey(`constellation${o}`))==null?void 0:l.img,sx:{...s>=o?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},o)})})}function Ql(){const{silly:t}=i.useContext(ut),{character:{key:a}}=i.useContext(H),{gender:n}=Ce(),{data:r}=i.useContext(J),s=r.get(B.lvl).value,o=r.get(B.asc).value,l=xi(a,n),c=Jl(a,n);return t&&l?e(ec,{src:l,level:s,ascension:o}):e(tc,{src:c,level:s,ascension:o})}function ec({src:t,level:a,ascension:n}){const{characterSheet:r}=i.useContext(H);return h(g,{sx:{position:"relative"},children:[e(g,{src:t,component:"img",width:"100%",height:"auto"}),h(g,{sx:{width:"100%",height:"100%"},children:[e(g,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(rn,{})}),e(_,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Yt,{stars:r.rarity,colored:!0})}),e(sn,{}),e(on,{level:a,ascension:n})]})]})}function tc({src:t,level:a,ascension:n}){const{characterSheet:r}=i.useContext(H);return h(g,{sx:{position:"relative"},children:[h(g,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(_,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Yt,{stars:r.rarity,colored:!0})}),e(g,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(rn,{})}),e(sn,{}),e(on,{level:a,ascension:n})]}),e(g,{src:t,component:"img",width:"100%",height:"auto"})]})}function rn(){var n;const{characterSheet:t}=i.useContext(H),a=t.elementKey;return e(ve,{color:a,sx:{height:"auto"},label:h(_,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Vt,{ele:a}),e(g,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e($e,{src:(n=Pe.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function on({level:t,ascension:a}){return e(_,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(ae,{children:In(t,a)})})}function sn(){const{character:{key:t}}=i.useContext(H),a=$(),{favorite:n}=qt(t);return e(g,{sx:{position:"absolute",left:0,top:0},children:e(Q,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(Jt,{}):e(ta,{})})})}var na={},ac=Re;Object.defineProperty(na,"__esModule",{value:!0});var qe=na.default=void 0,nc=ac(_e()),rc=D,oc=(0,nc.default)((0,rc.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");qe=na.default=oc;function ln({characterKey:t}){const{gender:a}=Ce();if(!t)return null;const n=ce(t,a);return n?e(at,{placement:"right-end",title:e(_,{children:n.name}),children:e(Tr,{characterKey:t,sideMargin:!0})}):null}function jt({statKey:t,disableIcon:a=!1}){return h(g,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Gt,{statKey:t,iconProps:pe}),h("span",{children:[nt.get(t),nt.unit(t)]})]})}function cn({statKey:t,disableIcon:a=!1}){return e(mt,{color:nt.getVariant(t),children:e(jt,{statKey:t,disableIcon:a})})}function lt({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:s,BGComponent:o=we}){const l=Ut(t),c=$(),p=i.useCallback(U=>e(Be,{onClick:s,sx:{height:"100%"},children:U}),[s]),d=zt();if(!l)return e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Pe.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:u,rarity:m,level:C,mainStatKey:f,substats:x,location:w}=l,y=Math.max(Math.min(n,m*4),C),L=Mn.find(U=>l.mainStatKey.includes(U)),S=L?kt(d.palette[L].main,.6):kt(d.palette.secondary.main,.6);return e(o,{sx:{height:"100%",maxHeight:"8em"},children:e(Zt,{condition:!!s,wrapper:p,children:h(g,{display:"flex",height:"100%",children:[h(g,{className:`grad-${m}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(ir,{art:l,children:e(g,{component:"img",src:Aa(l.setKey,u),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),h(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:` +${C}`}),color:Er.levelVariant(C)}),r&&e(ve,{size:"small",label:w?e(ln,{characterKey:w&&c.chars.LocationToCharacterKey(w)}):e(za,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(ve,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:S,p:1},icon:e(at,{placement:"top",title:e(_,{children:e(cn,{statKey:f})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(Gt,{statKey:f,iconProps:{style:{padding:"4px"}}})})}),label:e(_,{sx:{mx:-.7},children:e(mt,{color:y!==C?"warning":void 0,children:Bn(f,m,y)})})})]}),e(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:x.map((U,W)=>e(sc,{stat:U},W+U.key))})]})})})}function sc({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${An(a,1,6)}`,r=rt(t.key);return e(g,{display:"flex",gap:1,alignContent:"center",children:h(_,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(at,{placement:"top",title:e(_,{children:t.key&&e(cn,{statKey:t.key})}),disableInteractive:!0,children:e(g,{lineHeight:0,children:e(Gt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${ka(t.value,r)}${r}`})]})})}function ic(t){return Je("MuiMasonry",t)}Xe("MuiMasonry",["root"]);const lc=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],Se=t=>Number(t.replace("px","")),cc={flexBasis:"100%",width:0,margin:0,padding:0},dc=t=>{const{classes:a}=t;return Qe({root:["root"]},ic,a)},uc=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const d={},u=Se(a.spacing(t.defaultSpacing));for(let m=1;m<=t.defaultColumns;m+=1)d[`&:nth-of-type(${t.defaultColumns}n+${m%t.defaultColumns})`]={order:m};return r.height=t.defaultHeight,r.margin=-(u/2),r["& > *"]=E({},n["& > *"],d,{margin:u/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${u}px)`}),E({},n,r)}const s=ma({values:t.spacing,breakpoints:a.breakpoints.values}),o=Nn(a);n=bt(n,vt({theme:a},s,d=>{let u;if(typeof d=="string"&&!Number.isNaN(Number(d))||typeof d=="number"){const m=Number(d);u=yt(o,m)}else u=d;return E({margin:`calc(0px - (${u} / 2))`,"& > *":{margin:`calc(${u} / 2)`}},t.maxColumnHeight&&{height:typeof u=="number"?Math.ceil(t.maxColumnHeight+Se(u)):`calc(${t.maxColumnHeight}px + ${u})`})}));const c=ma({values:t.columns,breakpoints:a.breakpoints.values});return n=bt(n,vt({theme:a},c,d=>{const m=`${(100/Number(d)).toFixed(2)}%`,C=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?yt(o,Number(s)):"0px";return{"& > *":{width:`calc(${m} - ${C})`}}})),typeof s=="object"&&(n=bt(n,vt({theme:a},s,(d,u)=>{if(u){const m=Number(d),C=Object.keys(c).pop(),f=yt(o,m);return{"& > *":{width:`calc(${`${(100/(typeof c=="object"?c[u]||c[C]:c)).toFixed(2)}%`} - ${f})`}}}return null}))),n},hc=ge("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(uc),pc=i.forwardRef(function(a,n){const r=dt({props:a,name:"MuiMasonry"}),{children:s,className:o,component:l="div",columns:c=4,spacing:p=1,defaultColumns:d,defaultHeight:u,defaultSpacing:m}=r,C=Ze(r,lc),f=i.useRef(),[x,w]=i.useState(),y=!x&&u&&d!==void 0&&m!==void 0,[L,S]=i.useState(y?d-1:0),U=E({},r,{spacing:p,columns:c,maxColumnHeight:x,defaultColumns:d,defaultHeight:u,defaultSpacing:m,isSSR:y}),W=dc(U),j=R=>{if(!f.current||!R||R.length===0)return;const v=f.current,M=f.current.firstChild,k=v.clientWidth,q=M.clientWidth;if(k===0||q===0)return;const ne=window.getComputedStyle(M),ee=Se(ne.marginLeft),Y=Se(ne.marginRight),te=Math.round(k/(q+ee+Y)),V=new Array(te).fill(0);let G=!1;v.childNodes.forEach(O=>{if(O.nodeType!==Node.ELEMENT_NODE||O.dataset.class==="line-break"||G)return;const re=window.getComputedStyle(O),Te=Se(re.marginTop),Ae=Se(re.marginBottom),De=Se(re.height)?Math.ceil(Se(re.height))+Te+Ae:0;if(De===0){G=!0;return}for(let ie=0;ie<O.childNodes.length;ie+=1){const ue=O.childNodes[ie];if(ue.tagName==="IMG"&&ue.clientHeight===0){G=!0;break}}if(!G){const ie=V.indexOf(Math.min(...V));V[ie]+=De;const ue=ie+1;O.style.order=ue}}),G||En.flushSync(()=>{w(Math.max(...V)),S(te>0?te-1:0)})};zn(()=>{if(typeof ResizeObserver>"u")return;let R;const v=new ResizeObserver(()=>{R=requestAnimationFrame(j)});return f.current&&f.current.childNodes.forEach(M=>{v.observe(M)}),()=>{R&&window.cancelAnimationFrame(R),v&&v.disconnect()}},[c,p,s]);const I=On(n,f),P=new Array(L).fill("").map((R,v)=>D.jsx("span",{"data-class":"line-break",style:E({},cc,{order:v+1})},v));return D.jsxs(hc,E({as:l,className:je(W.root,o),ref:I,ownerState:U},C,{children:[s,P]}))}),mc=pc,fc=i.createContext(void 0),Oe={title:e(mt,{color:"warning",children:"ERROR"})},gc={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(At(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function dn(t,a,n){if(!a)return Oe;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[r,s]=a.split(":");if(r==="artifact"){const o=Za(s);return o?{title:o.name,icon:Wr(s)}:Oe}else if(r==="weapon"){const o=gt(s);if(!o)return Oe;const l=t.get(me.weapon.asc).value;return{title:o.name,icon:Oa(s,l>=2)}}}else{const r=t.get(me.charKey).value;if(!r)return Oe;const s=ce(r,n.gender),o=["normal","charged","plunging"].includes(a)?"auto":a,l=s==null?void 0:s.getTalentOfKey(o);if(!l)return Oe;const c=gc[a];return{icon:l.img,title:l.name,action:c}}return Oe}function Cc(t){const a=t.getDisplay(),n=Object.entries(a),r=n.filter(([d])=>d==="basic"),s=n.filter(([d])=>d==="reaction"),o=n.filter(([d])=>d==="custom"),l=n.filter(([d])=>d.startsWith("weapon")),c=n.filter(([d])=>d.startsWith("artifact")),p=n.filter(([d])=>d!=="basic"&&d!=="reaction"&&!d.startsWith("weapon")&&!d.startsWith("artifact")&&d!=="custom");return[...r,...s,...o,...p,...l,...c]}function xc({columns:t={xs:1,sm:2,md:3,xl:4}}){const{data:a}=i.useContext(J),n=i.useMemo(()=>Cc(a).filter(([,r])=>Object.values(r).some(s=>!s.isEmpty)),[a]);return e(g,{sx:{mr:-1,mb:-1},children:e(mc,{columns:t,spacing:1,children:n.map(([r,s])=>e(bc,{displayNs:s,sectionKey:r},r))})})}function bc({displayNs:t,sectionKey:a}){const n=i.useContext(fc),{data:r,oldData:s}=i.useContext(J),o=$(),l=i.useMemo(()=>dn(r,a,o),[o,r,a]),c=i.useMemo(()=>et(t,(m,C)=>mr(["display",a,C])),[t,a]);if(!l)return e(we,{});const{title:p,icon:d,action:u}=l;return h(we,{children:[e(Rr,{avatar:d&&e($e,{size:2,src:d}),title:p,action:u&&e(ae,{children:u})}),e(Z,{}),e(Sr,{sx:{m:0},children:Object.entries(t).map(([m,C])=>e(Ea,{node:C,oldValue:s?s.get(c[m]).value:void 0,component:Lr,emphasize:JSON.stringify(n)===JSON.stringify([a,m])},m))})]})}function ct({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=we,weaponTypeKey:s="sword"}){const o=Fr(t),l=(o==null?void 0:o.key)&&gt(o.key);return!o||!l?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(g,{component:"img",src:Pe.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e(un,{weapon:o,weaponSheet:l,onClick:n,showLocation:a,BGComponent:r})}function un({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:s=we}){const o=$(),{refinement:l,location:c}=t,p=i.useCallback(u=>e(Be,{sx:{height:"100%"},onClick:r,children:u}),[r]),d=i.useMemo(()=>a&&t&&fr([a.data,Na(t)]),[a,t]);return e(s,{sx:{height:"100%",maxHeight:"8em"},children:e(Zt,{condition:!!r,wrapper:p,children:h(g,{display:"flex",height:"100%",alignItems:"stretch",children:[h(g,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(lr,{sheet:a,children:e(g,{component:"img",src:Oa(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),h(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:Qa.getLevelString(t)}),color:"primary"}),n&&e(ve,{size:"small",label:c?e(ln,{characterKey:o.chars.LocationToCharacterKey(c)}):e(za,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(ve,{size:"small",color:"info",label:h("strong",{children:["R",l]})})})]}),h(g,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(_a,{node:d.get(me.weapon.main)}),e(_a,{node:d.get(me.weapon.sub)})]})]})})})}function _a({node:t}){return t.info.name?e(g,{display:"flex",gap:1,alignContent:"center",children:h(_,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(at,{placement:"top",title:e(_,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:gr(t)})]})}):null}function vc({equipChangeProps:t,showPrompt:a,OnHidePrompt:n,onEquip:r}){const[s,o]=i.useState(""),[l,c]=i.useState(!1),p=$(),{teamCharId:d,teamChar:{key:u}}=i.useContext(xe),m=Ot(u).weaponType,C=()=>{l&&p.teamChars.newBuild(d,{name:s!==""?s:`Duplicate of ${t.currentName}`,artifactIds:t.currentArtifacts,weaponId:t.currentWeapon}),r(),o(""),c(!1),n()};return e(ht,{open:a,onClose:n,children:h(F,{children:[e(ye,{title:h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ne,{}),h("span",{children:["Confirm Equipment Changes for"," ",e("strong",{children:t.currentName})]})]}),action:e(Q,{onClick:n,children:e(Me,{})})}),e(Z,{}),e(z,{sx:{display:"flex",flexDirection:"column"},children:h(g,{children:[h(F,{bgt:"light",children:[e(g,{sx:{pl:2,pt:2},children:e(fe,{color:"success",children:"Current Equipment"})}),e(z,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:h(b,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(b,{item:!0,xs:1,children:e(ct,{weaponId:t.currentWeapon,weaponTypeKey:m})}),Object.entries(t.currentArtifacts).map(([f,x])=>e(b,{item:!0,xs:1,children:e(lt,{artifactId:x,slotKey:f})},x||f))]})})]}),e(g,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",padding:2,children:e(it,{sx:{fontSize:40}})}),h(F,{bgt:"light",children:[e(g,{sx:{pl:2,pt:2},children:e(fe,{color:"success",children:"New Equipment"})}),e(z,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:h(b,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(b,{item:!0,xs:1,children:e(ct,{weaponId:t.newWeapon,weaponTypeKey:m})}),Object.entries(t.newArtifacts).map(([f,x])=>e(b,{item:!0,xs:1,children:e(lt,{artifactId:x,slotKey:f})},x||f))]})})]})]})}),h(z,{sx:{pt:"0",display:"flex",flexDirection:"column"},children:[e(_,{sx:{fontSize:20},children:"Do you want to make the changes shown above?"}),e(Ao,{label:h(se,{children:["Copy the current equipment in"," ",e("strong",{children:t.currentName})," to a new build. Otherwise, they will be overwritten."]}),control:e($o,{checked:l,onChange:f=>c(f.target.checked),color:l?"success":"secondary"})}),l&&e(Ye,{label:"Build Name",placeholder:`Duplicate of ${t.currentName}`,value:s,onChange:f=>o(f.target.value),size:"small",sx:{width:"75%",marginX:4}}),h(g,{sx:{display:"flex",justifyContent:"flex-end",gap:1,marginTop:4},children:[e(A,{color:"error",onClick:n,children:"Cancel"}),e(A,{color:"success",onClick:C,children:"Equip"})]})]})]})})}function yc({artifacts:t}){const a=i.useMemo(()=>{const n=t.filter(r=>r).reduce((r,s)=>(r[s.setKey]?r[s.setKey].push(s.slotKey):r[s.setKey]=[s.slotKey],r),{});return Object.keys(n).forEach(r=>{var s;((s=n[r])==null?void 0:s.length)===1&&delete n[r]}),n},[t]);return e(se,{children:Object.entries(a).sort(([n,r],[s,o])=>o.length-r.length).map(([n,r])=>e(wc,{setKey:n,slotarr:r},n))})}function wc({setKey:t,slotarr:a}){const n=Za(t),r=a.length,s=Object.keys(n.setEffects).map(o=>parseInt(o)).filter(o=>o<=r);return e(g,{children:e(jr,{artifactSheet:n,numInSet:r,children:e(ae,{sx:{height:"100%"},color:"primary",children:h(_,{children:[a.map(o=>e(qr,{slotKey:o,iconProps:pe},o))," ",n.name??"",s.map((o,l)=>e(ae,{sx:{ml:.5},color:"success",children:o},""+o+l))]})})})})}var ra={},_c=Re;Object.defineProperty(ra,"__esModule",{value:!0});var It=ra.default=void 0,Rc=_c(_e()),Lc=D,Sc=(0,Rc.default)((0,Lc.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");It=ra.default=Sc;var oa={},kc=Re;Object.defineProperty(oa,"__esModule",{value:!0});var Mt=oa.default=void 0,$c=kc(_e()),Tc=D,Dc=(0,$c.default)((0,Tc.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");Mt=oa.default=Dc;function Uc({setKey:t,buttonGroupSx:a}){const{t:n}=K("sheet"),{teamChar:{optConfigId:r}}=i.useContext(xe),{artSetExclusion:s}=Fe(r),o=(s==null?void 0:s[t])??[],l=o.includes(2),c=o.includes(4),p=$();return h(_r,{sx:a,fullWidth:!0,children:[e(A,{startIcon:l?e(fa,{}):e(ga,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:Ca(s,t,2)}),color:l?"secondary":"success",endIcon:l?e(It,{}):e(Mt,{}),children:n`2set`}),e(A,{startIcon:c?e(fa,{}):e(ga,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:Ca(s,t,4)}),color:c?"secondary":"success",endIcon:c?e(It,{}):e(Mt,{}),children:n`4set`})]})}function jc({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r}){var ze;const{loadoutDatum:{buildType:s,buildId:o},teamChar:{optConfigId:l,buildIds:c=[]}}=i.useContext(xe),{character:{key:p,equippedArtifacts:d,equippedWeapon:u}}=i.useContext(H),{mainStatAssumptionLevel:m,allowLocationsState:C}=Fe(l)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},f=$(),{data:x,oldData:w}=i.useContext(J),[y,L]=We();i.useEffect(()=>{const T=c.map(N=>f.builds.follow(N,L));return()=>T.forEach(N=>N())},[f,c,L]);const S=i.useMemo(()=>{var T;return{oldId:(T=w==null?void 0:w.get(B.weapon.id))==null?void 0:T.value,newId:x.get(B.weapon.id).value??""}},[x,w]),[U,W,j]=de(!1),I=i.useMemo(()=>Ve(he,T=>{var N;return{oldId:(N=w==null?void 0:w.get(B.art[T].id))==null?void 0:N.value,newId:x.get(B.art[T].id).value??""}}),[x,w]),[P,R]=i.useState(),v=i.useCallback(()=>R(void 0),[R]),M=o&&s==="real",k=i.useCallback(()=>{if(M){f.builds.set(o,{weaponId:x.get(B.weapon.id).value,artifactIds:Ve(he,be=>{var Ue;return(Ue=x.get(B.art[be].id).value)==null?void 0:Ue.toString()})});return}const T=f.chars.get(p);if(!T)return;he.forEach(be=>{var He;const Ue=(He=x.get(B.art[be].id).value)==null?void 0:He.toString();if(Ue)f.arts.set(Ue,{location:ke(p)});else{const xt=T.equippedArtifacts[be];xt&&f.arts.get(xt)&&f.arts.set(xt,{location:""})}});const N=x.get(B.weapon.id).value;N&&f.weapons.set(N,{location:ke(p)})},[p,M,o,x,f]),q=i.useMemo(()=>Object.fromEntries(he.map(T=>{var N;return[T,(N=x.get(B.art[T].id).value)==null?void 0:N.toString()]})),[x]),ne=i.useMemo(()=>q&&Object.values(q).map(T=>f.arts.get(T)).filter(T=>T),[q,f.arts]),ee=i.useMemo(()=>e(b,{item:!0,xs:1,children:e(ct,{showLocation:!0,weaponId:x.get(B.weapon.id).value,onClick:W})}),[x,W]),Y=i.useMemo(()=>he.map(T=>e(b,{item:!0,xs:1,children:e(lt,{showLocation:!0,slotKey:T,artifactId:q[T],mainStatAssumptionLevel:m,onClick:()=>{const N=I[T].oldId,be=I[T].newId;R({oldId:N!==be?N:void 0,newId:be})}})},T)),[R,I,m,q]),te=he.every(T=>q[T]===d[T])&&x.get(B.weapon.id).value===u,V=i.useMemo(()=>y&&c.filter(T=>{const N=f.builds.get(T);if(!N)return!1;const{artifactIds:be,weaponId:Ue}=N;return he.every(He=>q[He]===be[He])&&x.get(B.weapon.id).value===Ue}),[y,f,c,q,x]),G=s==="real"&&V.includes(o),O=G||s==="equipped"&&te,re=i.useMemo(()=>y&&s==="real"?f.builds.get(o).weaponId:y&&s==="equipped"?u:"",[y,f,s,o,u]),Te=i.useMemo(()=>y&&s==="real"?f.builds.get(o).artifactIds:y&&s==="equipped"?d:Ve(he,()=>""),[y,f,s,o,d]),[Ae,De,ie]=de(),ue={currentName:s==="real"?f.builds.get(o).name:"Equipped",currentWeapon:re,currentArtifacts:Te,newWeapon:x.get(B.weapon.id).value,newArtifacts:Ve(he,T=>x.get(B.art[T].id).value)};return e(Bt,{sx:{boxShadow:O?"0px 0px 0px 2px green inset":void 0},children:h(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:600}),children:[S&&e(Ic,{newOld:S,showWeapon:U,onClose:j}),P&&e(Mc,{newOld:P,mainStatAssumptionLevel:m,onClose:v,allowLocationsState:C}),h(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h(g,{display:"flex",gap:1,flexWrap:"wrap",children:[t!==void 0&&e(fe,{color:te?"success":"info",children:h(_,{sx:{display:"flex",gap:1},children:[e("strong",{children:t}),te&&e("span",{children:"(Equipped)"})]})}),!!V.length&&e(fe,{color:G?"success":"info",children:h(_,{sx:{display:"flex",gap:1},children:[e(Ne,{}),e("span",{children:(ze=f.builds.get(G?o:V[0]))==null?void 0:ze.name}),G&&e("span",{children:"(current build)"}),V.length>1&&e(oe,{arrow:!0,title:e(g,{children:V.map(T=>{var N;return h(_,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ne,{}),(N=f.builds.get(T))==null?void 0:N.name]})})}),children:e(ft,{})})]})}),e(yc,{artifacts:ne}),e(g,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(vc,{equipChangeProps:ue,showPrompt:Ae,onEquip:k,OnHidePrompt:ie}),e(A,{size:"small",color:"success",onClick:De,disabled:r||G,startIcon:e(Po,{}),children:"Equip to Current Build"}),a]}),e(g,{children:h(b,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[ee,Y]})}),e(xc,{})]})]})})}function Ic({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const s=$(),o=a!==t,l=i.useCallback(c=>s.weapons.remove(c),[s]);return e(tt,{open:n,onClose:r,containerProps:{maxWidth:o?"md":"xs"},children:e(we,{children:h(z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[o&&h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(F,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(_,{variant:"h6",textAlign:"center",color:"info",children:e(fe,{children:"TC Weapon"})}):e(st,{weaponId:a,onDelete:l})]}),o&&e(g,{display:"flex",flexGrow:1}),o&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(en,{sx:{fontSize:40}})}),o&&e(g,{display:"flex",flexGrow:1}),h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(F,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(st,{weaponId:t,onDelete:l})]})]})})})}function Mc({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:s}){var m;const o=$(),{character:{key:l}}=i.useContext(H),c=((m=o.arts.get(t))==null?void 0:m.location)??"",p=Ut(t),d=Ut(a),u=i.useCallback(C=>o.arts.remove(C),[o]);return e(tt,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(we,{children:h(z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(F,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(_,{variant:"h6",textAlign:"center",color:"info",children:e(fe,{children:"TC Artifact"})}):e(ot,{artifactId:a,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:d==null?void 0:d.slotKey}}),a!=="tc"&&e(Ra,{id:a})]}),a&&e(g,{display:"flex",flexGrow:1}),a&&e(g,{display:"flex",alignItems:"center",justifyContent:"center",children:e(en,{sx:{fontSize:40}})}),a&&e(g,{display:"flex",flexGrow:1}),h(g,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(F,{bgt:"light",sx:{p:1},children:e(_,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(ot,{artifactId:t,onDelete:u,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:p==null?void 0:p.slotKey}}),p&&e(Ra,{id:t}),c&&c!==ke(l)&&s!=="all"&&e(Bc,{locationKey:c}),p&&Wn.includes(p.setKey)&&e(Uc,{setKey:p.setKey})]})]})})})}function Ra({id:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=i.useContext(xe),r=$(),{artExclusion:s}=Fe(n),o=s.includes(t),l=i.useCallback(()=>r.optConfigs.set(n,{artExclusion:$a(s,t)}),[t,s,r,n]);return n?e(at,{title:e(g,{children:e(_,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(A,{onClick:l,color:o?"secondary":"success",size:"small",startIcon:o?e(Xa,{}):e(Ja,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Bc({locationKey:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=i.useContext(xe),r=$(),s=ce(r.chars.LocationToCharacterKey(t)),{excludedLocations:o}=Fe(n)??{excludedLocations:[]},l=o.includes(t),c=i.useCallback(()=>r.optConfigs.set(n,{excludedLocations:$a(o,t)}),[t,o,r,n]);return n?e(A,{onClick:c,color:l?"secondary":"success",size:"small",startIcon:l?e(Xa,{}):e(Ja,{}),children:h("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}function Ac(t=0,a,n){const{teamId:r,teamCharId:s}=i.useContext(xe);return zc(r,s,t,a,n)}function zc(t,a,n=0,r,s){const o=$(),[l,c]=We(),p=i.useDeferredValue(l),{gender:d}=Ce(),{loadoutData:u}=cr(t)??{loadoutData:[]},m=i.useMemo(()=>p&&Oc(o,t,d,a,n,r,s),[p,d,t,o,n,a,r,s]);return i.useEffect(()=>t?o.teams.follow(t,c):void 0,[t,c,o]),i.useEffect(()=>{if(!l)return()=>{};const C=u.map(f=>{if(!f)return()=>{};const x=o.teamChars.follow(f.teamCharId,c),w=o.teamChars.followChar(f.teamCharId,c),y=o.teams.followLoadoutDatum(f,c);return()=>{x(),w(),y()}});return()=>{C.forEach(f=>f())}},[l,o,u,c]),m}function Oc(t,a,n,r,s=0,o,l){if(!a)return;const c=t.teams.getActiveTeamChar(a);if(!c)return;const{teamData:p,teamBundle:d}=Nc(t,a,r,s,o,l)??{};if(!p||!d)return;const u=Cr(p,n,c.key);return et(u,(C,f)=>{const{data:x,...w}=d[f];return{...C,...w}})}function Nc(t,a,n,r=0,s,o){if(!a)return;const l=t.teams.get(a);if(!l)return;const{loadoutData:c,enemyOverride:p,conditional:d}=l,u=c.map(f=>{if(!f)return;const{teamCharId:x,buildType:w,buildTcId:y}=f,L=t.teamChars.get(x);if(!L)return;const{key:S,infusionAura:U,customMultiTargets:W,conditional:j,bonusStats:I,hitMode:P,reaction:R}=L,v=t.chars.get(S);if(!v)return;const{key:M,level:k,constellation:q,ascension:ne,talent:ee}=v,Y=x===n,te=(()=>o&&Y?o:t.teams.getLoadoutWeapon(f))(),V=(()=>s&&Y?s:w==="tc"&&y?dr(t.buildTcs.get(y)):Object.values(t.teams.getLoadoutArtifacts(f)).filter(O=>O))(),G=(()=>r&&Y?r:0)();return Ec(t,Y,G,{key:M,level:k,constellation:q,ascension:ne,talent:ee,infusionAura:U,customMultiTargets:W,conditional:{...j,...d},bonusStats:I,enemyOverride:p,hitMode:P,reaction:R},te,V)}).filter(f=>f),m=Object.fromEntries(u.filter(f=>f).map(f=>[f.character.key,f]));return{teamData:et(m,({data:f})=>f),teamBundle:m}}function Ec(t,a=!1,n,r,s,o){const l=t.chars.get(r.key),c=ce(r.key,t.gender);if(!c)return;const p=gt(s.key);if(!p)return;const d=Qa.getAllDataOfType(c.weaponTypeKey),u=a?(()=>{const{display:x,...w}=p.data;return xa([w,d])})():p.data,m=xa([c.data,u,Pr]),f=[...Array.isArray(o)?o.map(x=>xr(x,n)):[o],br(r,a?m:void 0),Na(s),m,vr,ur];return{character:l,weapon:s,characterSheet:c,weaponSheet:p,data:f}}const St={mx:.25,px:.25};function Wc({reaction:t}){const{t:a}=K("sheet_gen"),n=t==="spread"?"dendro":"electro";return h(g,{display:"flex",alignItems:"center",children:[e(mt,{color:t,children:a(`reaction.${t}`)}),e(ae,{sx:St,color:"dendro",children:e(Pn,{...pe})}),"+",e(ae,{sx:St,color:"electro",children:e(Ta,{...pe})}),"+",e(ae,{sx:St,color:n,children:e(Vt,{ele:n,iconProps:pe})})]})}const $u={"":e("span",{children:"No Team Melee Infusion"}),pyro:h("span",{children:[e(Fn,{...pe})," ",e(ae,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:h("span",{children:[e(qn,{...pe})," ",e(ae,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:h("span",{children:[e(Hn,{...pe})," ",e(ae,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:h("span",{children:[e(Ta,{...pe})," ",e(ae,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Pc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{reaction:r}}=i.useContext(xe),s=$(),{data:o}=i.useContext(J),l=o.get(B.charEle).value,c=o.get(yr).value,p=[...new Set([...ba[l]??[],...ba[c]??[],...va[l]??[],...va[c]??[]])];return h(Ct,{exclusive:!0,baseColor:"secondary",value:r,onChange:(d,u)=>s.teamChars.set(n,{reaction:u}),disabled:!n,...t,children:[e(Ee,{value:"",disabled:!r,children:a`noReaction`}),p.map(d=>e(Ee,{value:d,disabled:r===d,children:[...Vn].includes(d)?e(kr,{reaction:d}):e(Wc,{reaction:d})},d))]})}function Fc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=i.useContext(xe),s=$();return e(Ct,{exclusive:!0,baseColor:"secondary",value:r,onChange:(o,l)=>s.teamChars.set(n,{hitMode:l}),disabled:!n,...t,children:Gn.map(o=>e(Ee,{value:o,disabled:r===o,children:a(`hitmode.${o}`)},o))})}function hn({artId:t,weaponId:a}){const{t:n}=K("page_character"),[r,s,o]=de(!1);return h(se,{children:[e(ht,{open:r,onClose:o,containerProps:{maxWidth:"xl"},children:e(qc,{artId:t,weaponId:a,onHide:o})}),e(oe,{title:e(_,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(Ir,{})})})]})}function qc(t){var r;const a=i.useContext(xe),n=i.useContext(H);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(Hc,{...t}):n!=null&&n.character?e(Vc,{...t}):null}function Hc({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:s}}=i.useContext(H),{loadoutDatum:o,teamChar:{optConfigId:l}}=i.useContext(xe),{mainStatAssumptionLevel:c}=Fe(l),{data:p}=i.useContext(J),d=i.useMemo(()=>{const C=r.arts.get(t??""),f=r.teams.getLoadoutArtifacts(o),x=et(f,(w,y)=>y===(C==null?void 0:C.slotKey)?C:w);return Object.values(x).filter(w=>w)},[r,o,t]),u=Ac(c,d,a?r.weapons.get(a):void 0),m=i.useMemo(()=>u&&{data:u[s].target,teamData:u,oldData:p},[s,u,p]);return m?e(pn,{dataProviderValue:m,onHide:n}):null}function Vc({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:s,equippedArtifacts:o}}=i.useContext(H),{data:l}=i.useContext(J),c=i.useMemo(()=>{const u=r.arts.get(t??""),m=et(o,(C,f)=>f===(u==null?void 0:u.slotKey)?u:r.arts.get(C));return Object.values(m).filter(C=>C)},[r,o,t]),p=Pt(s,0,c,a?r.weapons.get(a):void 0),d=i.useMemo(()=>p&&{data:p[s].target,teamData:p,oldData:l},[s,p,l]);if(d)return e(pn,{dataProviderValue:d,onHide:n})}function pn({dataProviderValue:t,onHide:a}){return e(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:600}),children:t&&e(J.Provider,{value:t,children:e(jc,{extraButtonsLeft:h(se,{children:[e(Fc,{size:"small"}),e(Pc,{size:"small"})]}),extraButtonsRight:e(A,{size:"small",color:"error",onClick:a,children:e(Me,{})})})})})}const Gc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Kc=i.lazy(()=>Da(()=>import("./ArtifactEditor-0473dfb2.js"),["./ArtifactEditor-0473dfb2.js","./index-7e42dce9.js","./index-f125a42b.css","./ChevronRight-53d7b8bd.js","./index-a741b4fe.js","./ColoredText-fa9c0893.js","./SqBadge-793370e6.js","./Close-7ee18e5c.js","./InfoTooltip-0657fa54.js","./BootstrapTooltip-768bb686.js","./LockOpen-75d096bc.js","./ArtifactRarityDropdown-7b60e355.js","./index-39cc2bb8.js","./ConditionalWrapper-37d4fc9d.js","./StarDisplay-ecb69494.js","./DropdownButton-aa034528.js","./ArtifactStatKeyDisplay-6ab16ce0.js","./Artifact-ffa961c6.js","./SlotIcon-b1304795.js","./ArtifactSort-b69533c8.js","./CardActionArea-d3a01ffb.js","./TextButton-9831d83e.js","./CardHeader-a0be35ef.js"],import.meta.url)),Yc=i.lazy(()=>Da(()=>import("./ArtifactFilterDisplay-56d9c173.js").then(t=>t.b),["./ArtifactFilterDisplay-56d9c173.js","./index-7e42dce9.js","./index-f125a42b.css","./LockOpen-75d096bc.js","./useDisplayArtifact-88af49c8.js","./SolidToggleButtonGroup-9e6c8fca.js","./totalUtils-10bdf315.js","./BootstrapTooltip-768bb686.js","./StarDisplay-ecb69494.js","./DropdownButton-aa034528.js","./ColoredText-fa9c0893.js","./index-a741b4fe.js","./SqBadge-793370e6.js","./ArtifactStatKeyDisplay-6ab16ce0.js","./Artifact-ffa961c6.js","./ConditionalWrapper-37d4fc9d.js","./index-39cc2bb8.js","./SlotIcon-b1304795.js"],import.meta.url));function mn({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:s}=K(["page_character","artifact"]),o=$(),l=i.useCallback(R=>{t(R),r()},[t,r]),c=i.useCallback((R,v)=>({...R,...v,slotKeys:[a]}),[a]),[p,d,u]=de(!1),[m,C]=i.useReducer(c,{...Mr(),slotKeys:[a]}),[f,x]=We();i.useEffect(()=>o.arts.followAny(x),[o,x]);const w=qa(),y=i.useMemo(()=>Br(),[]),L=o.arts.values.filter(R=>R.slotKey===m.slotKeys[0]).length,S=i.useMemo(()=>{const R=Xt(m,y);return f&&o.arts.values.filter(R).map(v=>v.id)},[f,o,y,m]),{numShow:U,setTriggerElement:W}=Ha(Gc[w],S.length),j=i.useMemo(()=>S.slice(0,U),[S,U]),I=S.length!==L?`${S.length}/${L}`:`${L}`,P={numShowing:j.length,total:I,t:s,namespace:"artifact"};return e(tt,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:h(we,{children:[e(i.Suspense,{fallback:!1,children:e(Kc,{artifactIdToEdit:p?"new":"",cancelEdit:u,allowUpload:!0,allowEmpty:!0,fixedSlotKey:m.slotKeys[0]})}),h(z,{sx:{py:1,display:"flex",alignItems:"center"},children:[h(_,{variant:"h6",children:[a?e($e,{src:Pe.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(Q,{onClick:r,sx:{ml:"auto"},children:e(Me,{})})]}),e(Z,{}),e(z,{children:e(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:200}),children:e(Yc,{filterOption:m,filterOptionDispatch:C,filteredIds:S,disableSlotFilter:!0})})}),e(Z,{}),h(z,{children:[e(g,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Va,{showingTextProps:P})}),e(A,{fullWidth:!0,onClick:d,color:"info",startIcon:e(Ya,{}),children:s("artifact:addNew")}),e(g,{mt:1,children:e(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:300}),children:e(b,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:j.map(R=>e(b,{item:!0,xs:1,children:e(ot,{artifactId:R,extraButtons:e(hn,{artId:R}),onClick:l})},R))})})}),S.length!==j.length&&e(le,{ref:R=>{R&&W(R)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const Xc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Jc=Qt([...Ua]);function sa({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:s}=K(["page_character","page_weapon","weaponNames_gen"]),o=$(),[l,c]=i.useState(!1),p=i.useCallback(k=>{t(k),r()},[t,r]),[d,u]=i.useState(""),m=i.useCallback(k=>{u(o.weapons.new(Kn(k)))},[o,u]),C=i.useCallback(()=>u(""),[]),[f,x]=We();i.useEffect(()=>o.weapons.followAny(x),[x,o]);const w=qa(),[y,L]=i.useState([5,4,3]),[S,U]=i.useState(""),W=i.useDeferredValue(S),j=i.useMemo(()=>(f&&o.weapons.values.filter(Xt({weaponType:a,rarity:y,name:W},Ar())).sort(Ga(Or.level??[],!1,zr())).map(k=>k.id))??[],[f,o,y,a,W]),{numShow:I,setTriggerElement:P}=Ha(Xc[w],j.length),R=i.useMemo(()=>j.slice(0,I),[j,I]),v=`${j.length}`,M={numShowing:R.length,total:v,t:s,namespace:"page_weapon"};return h(se,{children:[e(i.Suspense,{fallback:!1,children:e(Gr,{show:l,onHide:()=>c(!1),onSelect:m,weaponTypeFilter:a})}),e(i.Suspense,{fallback:!1,children:e(Wa,{weaponId:d,footer:!0,onClose:C})}),e(tt,{open:n,onClose:r,children:h(F,{children:[e(ye,{title:h(_,{variant:"h6",display:"flex",gap:1,children:[a?e($e,{src:Pe.weaponTypes[a]}):null,e("span",{children:s`page_character:tabEquip.swapWeapon`})]}),action:e(Q,{onClick:r,children:e(Me,{})})}),e(Z,{}),h(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h(b,{container:!0,spacing:1,children:[e(b,{item:!0,children:e(Ct,{sx:{height:"100%"},value:y,size:"small",children:Ua.map(k=>e(Ee,{value:k,onClick:()=>L(Jc(y,k)),children:h(g,{display:"flex",children:[e("strong",{children:k}),e(Ka,{})]})},k))})}),e(b,{item:!0,flexGrow:1,children:e(Ye,{autoFocus:!0,size:"small",value:S,onChange:k=>U(k.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(g,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Va,{showingTextProps:M})}),e(A,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:e(Ya,{}),children:s("page_weapon:addWeapon")}),e(b,{container:!0,spacing:1,children:R.map(k=>e(b,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(st,{weaponId:k,onClick:p,extraButtons:e(hn,{weaponId:k})})},k))}),j.length!==R.length&&e(le,{ref:k=>{k&&P(k)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})]})}const Zc={xs:1,sm:2,md:3,lg:3,xl:3};function Qc({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:r,setArtifact:s}){const o=$(),[l,c]=i.useState("");i.useEffect(()=>{a&&l&&l!==a&&c(a)},[l,a]);const p=i.useCallback(()=>a&&c(a),[a]),d=i.useCallback(()=>c(""),[]);return h(g,{children:[e(Wa,{weaponId:l,footer:!0,onClose:d,extraButtons:e(rd,{weaponTypeKey:t,onChangeId:r})}),h(b,{item:!0,columns:Zc,container:!0,spacing:1,children:[e(b,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&o.weapons.keys.includes(a)?e(st,{weaponId:a,onEdit:p,extraButtons:e(nd,{weaponTypeKey:t,onChangeId:r})}):e(ed,{weaponTypeKey:t,onChangeId:r})}),!!n&&Object.entries(n).map(([u,m])=>e(b,{item:!0,xs:1,children:o.arts.keys.includes(m)?e(ot,{artifactId:m,extraButtons:e(ad,{slotKey:u,onChangeId:C=>s(u,C)}),editorProps:{}}):e(td,{slotKey:u,onChangeId:C=>s(u,C)})},m||u))]})]})}function ed({weaponTypeKey:t,onChangeId:a}){const[n,r,s]=de();return h(F,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(z,{children:h(_,{children:[e($e,{src:Pe.weaponTypes[t]})," ",t]})}),e(Z,{}),h(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(sa,{weaponTypeKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(qe,{sx:{height:100,width:100}})})]})]})}function td({slotKey:t,onChangeId:a}){const[n,r,s]=de(),{t:o}=K("artifact");return h(F,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(z,{children:h(_,{children:[e(an,{iconProps:pe,slotKey:t})," ",o(`slotName.${t}`)]})}),e(Z,{}),h(g,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(mn,{slotKey:t,show:n,onClose:s,onChangeId:a}),e(A,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(qe,{sx:{height:100,width:100}})})]})]})}function ad({slotKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=de();return h(se,{children:[e(oe,{title:e(_,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(qe,{})})}),e(mn,{slotKey:t,show:r,onClose:o,onChangeId:a})]})}function nd({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=de();return h(se,{children:[e(oe,{title:e(_,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(A,{color:"info",size:"small",onClick:s,children:e(qe,{})})}),e(sa,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function rd({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=de();return h(se,{children:[e(A,{color:"info",onClick:s,startIcon:e(qe,{}),children:n`tabEquip.swapWeapon`}),e(sa,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function od({talentKey:t,dropDownButtonProps:a}){const{t:n}=K("sheet_gen"),{character:{talent:r,key:s}}=i.useContext(H),o=$(),{data:l}=i.useContext(J),c=l.get(me.total[`${t}Boost`]).value,p=l.get(me.total[t]).value,d=l.get(me.asc).value;return e(Wo,{fullWidth:!0,title:n("talentLvl",{level:p}),color:c?"info":"primary",...a,children:At(1,Yn[d]).map(u=>e(Xr,{selected:r[t]===u,disabled:r[t]===u,onClick:()=>o.chars.set(s,m=>{m.talent[t]=u}),children:n("talentLvl",{level:u+c})},u))})}var ia={},sd=Re;Object.defineProperty(ia,"__esModule",{value:!0});var fn=ia.default=void 0,id=sd(_e()),ld=D,cd=(0,id.default)((0,ld.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart");fn=ia.default=cd;var la={},dd=Re;Object.defineProperty(la,"__esModule",{value:!0});var ca=la.default=void 0,ud=dd(_e()),hd=D,pd=(0,ud.default)((0,hd.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");ca=la.default=pd;var da={},md=Re;Object.defineProperty(da,"__esModule",{value:!0});var gn=da.default=void 0,fd=md(_e()),gd=D,Cd=(0,fd.default)((0,gd.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm15 0h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"DashboardCustomize");gn=da.default=Cd;function xd(){return h(Nt,{severity:"info",children:["A ",e("strong",{children:"Build"})," is comprised of a weapon and 5 artifacts. A"," ",e("strong",{children:"TC Build"})," allows the artifacts to be created from its stats."]})}function bd(){return h(Nt,{severity:"info",children:[e("strong",{children:"Loadouts"})," provides character context data, including bonus stats, conditionals, multi-targets, optimization config, and stores builds. A single ",e("strong",{children:"Loadout"})," can be used for many teams."]})}function vd({teamCharId:t}){const a=$(),n=a.teamChars.get(t),[r,s]=i.useState(n.name),o=i.useDeferredValue(r),[l,c]=i.useState(n.description),p=i.useDeferredValue(l);return i.useEffect(()=>{const d=a.teamChars.get(t);if(!d)return;const{name:u,description:m}=d;s(u),c(m)},[a,t]),i.useEffect(()=>{a.teamChars.set(t,d=>{d.name=o})},[a,o]),i.useEffect(()=>{a.teamChars.set(t,d=>{d.description=p})},[a,p]),h(se,{children:[e(Ye,{fullWidth:!0,label:"Loadout Name",placeholder:"Loadout Name",value:r,onChange:d=>s(d.target.value)}),e(Ye,{fullWidth:!0,label:"Loadout Description",placeholder:"Loadout Description",value:l,onChange:d=>c(d.target.value),multiline:!0,minRows:2})]})}var ua={},yd=Re;Object.defineProperty(ua,"__esModule",{value:!0});var Cn=ua.default=void 0,wd=yd(_e()),_d=D,Rd=(0,wd.default)((0,_d.jsx)("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science");Cn=ua.default=Rd;function xn({name:t,description:a,active:n=!1,onActive:r,children:s,onEdit:o,onCopyToTc:l,onDupe:c,onEquip:p,onRemove:d,hideFooter:u=!1}){const m=h(se,{children:[e(ye,{title:t,action:a&&e(oe,{title:e(_,{children:a}),children:e(ft,{})})}),e(z,{sx:{pt:0,pb:1},children:s})]});return h(F,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:n?"0px 0px 0px 2px green inset":void 0},children:[r?e(Be,{onClick:r,children:m}):m,!u&&h(Xn,{sx:{display:"flex",justifyContent:"space-around",marginTop:"auto"},children:[e(oe,{title:e(_,{children:"Edit Build Settings"}),placement:"top",arrow:!0,children:e(Q,{color:"info",size:"small",onClick:o,disabled:!o,children:e("span",{children:e(Ur,{})})})}),e(oe,{title:e(_,{children:"Copy to TC Builds"}),placement:"top",arrow:!0,children:e(Q,{color:"info",size:"small",onClick:l,disabled:!l,children:e(Cn,{})})}),e(oe,{title:e(_,{children:"Duplicate Build"}),placement:"top",arrow:!0,children:e(Q,{color:"info",size:"small",onClick:c,disabled:!c,children:e(ca,{})})}),e(oe,{title:e(_,{children:"Equip Build"}),placement:"top",arrow:!0,children:e(Q,{color:"info",size:"small",onClick:p,disabled:!p,children:e(Ne,{})})}),e(oe,{title:e(_,{children:"Delete Build"}),placement:"top",arrow:!0,children:e(Q,{color:"error",size:"small",onClick:d,disabled:!d,children:e(Et,{})})})]})]})}function Ld({buildId:t,characterKey:a}){const{name:n,description:r,weaponId:s,artifactIds:o}=Zr(t),l=Ot(a).weaponType;return e(xn,{name:n,description:r,hideFooter:!0,children:e(g,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:h(b,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:3,xl:3},children:[e(b,{item:!0,xs:1,children:e(ct,{weaponId:s,weaponTypeKey:l})}),Object.entries(o).map(([c,p])=>e(b,{item:!0,xs:1,children:e(lt,{artifactId:p,slotKey:c})},p||c))]})})})}function Sd({buildTcId:t}){const a=tn(t),{name:n,description:r}=a;return e(xn,{name:n,description:r,hideFooter:!0,children:e(kd,{buildTcId:t})})}function kd({buildTcId:t}){const{weapon:a,artifact:{slots:n,substats:{stats:r},sets:s}}=tn(t),o=gt(a.key),l=Object.entries(r),c=l.slice(0,5),p=l.slice(5);return e(g,{children:h(b,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:2,xl:2},children:[e(b,{item:!0,xs:1,children:h(g,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(un,{weapon:a,weaponSheet:o}),!!Object.keys(s).length&&e(F,{sx:{flexGrow:1},children:e(g,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:Object.entries(s).map(([d,u])=>h(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e($e,{size:2,src:Aa(d,"flower")}),e("span",{children:e(Hr,{setKey:d})}),h(fe,{children:["x",u]})]},d))})})]})}),e(b,{item:!0,xs:1,children:e(F,{sx:{flexGrow:1,height:"100%",p:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"space-between"},children:Object.entries(n).map(([d,{level:u,statKey:m}])=>h(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(an,{slotKey:d}),h(fe,{children:["+",u]}),e(jt,{statKey:m})]},d))})}),[c,p].map((d,u)=>e(b,{item:!0,xs:1,children:e(F,{sx:{flexGrow:1,height:"100%"},children:e(g,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1},children:d.map(([m,C])=>h(g,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[e(jt,{statKey:m}),h("span",{children:[ka(C,rt(m)),rt(m)]})]},m))})})},u))]})})}var ha={},$d=Re;Object.defineProperty(ha,"__esModule",{value:!0});var bn=ha.default=void 0,Td=$d(_e()),Dd=D,Ud=(0,Td.default)((0,Dd.jsx)("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"}),"TrackChanges");bn=ha.default=Ud;function jd({optimizationTarget:t,showEmptyTargets:a=!1}){const{t:n}=K("page_character_optimize"),{data:r}=i.useContext(J),s=$(),o=i.useMemo(()=>t&&dn(r,t[0],s),[r,t,s]),l=n("targetSelector.selectOptTarget"),{title:c,icon:p,action:d}=o??{},u=t&&Jn(r.getDisplay(),t),m=!t||!o||!u||!a&&u.isEmpty,C=m?"secondary":u.info.variant,f=C==="invalid"?void 0:C,{textSuffix:x}=(u==null?void 0:u.info)??{},w=x&&h("span",{children:[" ",x]}),y=p?e($e,{src:p,size:2}):u==null?void 0:u.info.icon;return h(F,{bgt:"light",children:[e(ye,{title:h(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(bn,{}),e("span",{children:"Optimization Target"})]})}),e(Z,{}),e(z,{children:m?e("strong",{children:l}):h(Sa,{divider:e(Z,{orientation:"vertical",flexItem:!0}),spacing:1,children:[h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[y,e("span",{children:c}),!!d&&e(fe,{color:"success",sx:{whiteSpace:"normal"},children:d})]}),e(_,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:h(fe,{color:f,sx:{whiteSpace:"normal"},children:[e("strong",{children:u.info.name}),w]})})]})})]})}function Id(){return h(Nt,{severity:"info",children:[e("strong",{children:"Teams"})," are a container for 4 character loadouts. It provides a way for characters to apply team buffs, and configuration of enemy stats. Loadouts can be shared between teams."]})}function Md({show:t,onHide:a,teamCharId:n,teamIds:r}){const s=pt(),o=$(),{key:l,name:c,buildIds:p,buildTcIds:d,customMultiTargets:u,bonusStats:m,optConfigId:C}=hr(n),{optimizationTarget:f}=Fe(C),x=()=>{window.confirm(`Delete loadout? ${r.length?"Teams with this loadout will have this loadout removed from the team. Teams will not be deleted.":""}`)&&(a(),o.teamChars.remove(n))},w=()=>{o.teamChars.duplicate(n)&&a()},y=L=>{const S=o.teams.new();o.teams.set(S,U=>{U.loadoutData[0]={teamCharId:L}}),s(`/teams/${S}`,{state:{openSetting:!0}})};return e(ht,{open:t,onClose:a,containerProps:{maxWidth:"lg"},children:h(F,{children:[e(ye,{title:h(g,{display:"flex",gap:1,alignItems:"center",children:[e(Ma,{}),e("strong",{children:c})]}),action:e(Q,{onClick:a,children:e(Me,{})})}),e(Z,{}),h(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(bd,{}),e(vd,{teamCharId:n}),e(g,{children:h(b,{container:!0,columns:{xs:1,md:2},spacing:2,children:[e(b,{item:!0,xs:1,children:e(A,{color:"info",onClick:()=>w(),fullWidth:!0,startIcon:e(ca,{}),children:"Duplicate Loadout"})}),e(b,{item:!0,xs:1,children:e(A,{fullWidth:!0,startIcon:e(Et,{}),color:"error",onClick:x,children:"Delete Loadout"})})]})}),e(g,{children:h(b,{container:!0,columns:{xs:1,md:2},spacing:2,children:[!!Object.keys(m).length&&e(b,{item:!0,xs:1,children:e(Bd,{bonusStats:m})}),!!f&&e(b,{item:!0,xs:1,children:e(jd,{optimizationTarget:f})}),!!u.length&&e(b,{item:!0,xs:1,children:e(Ad,{customMultiTargets:u})})]})})]}),e(Z,{}),e(ye,{title:h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ne,{}),e("span",{children:"Builds"})]})}),e(Z,{}),h(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(xd,{}),e(g,{children:e(b,{container:!0,columns:{xs:1,md:2},spacing:2,children:p.map(L=>e(b,{item:!0,xs:1,children:e(Ld,{buildId:L,characterKey:l})},L))})}),e(g,{children:e(b,{container:!0,columns:{xs:1,md:2},spacing:2,children:d.map(L=>e(b,{item:!0,xs:1,children:e(Sd,{buildTcId:L})},L))})})]}),e(Z,{}),e(ye,{title:h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ne,{}),e("span",{children:"Teams"})]})}),e(Z,{}),h(z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Id,{}),h(b,{container:!0,columns:{xs:1,md:2},spacing:2,children:[r.map(L=>e(b,{item:!0,xs:1,children:e(Ba,{bgt:"light",teamId:L,onClick:S=>s(`/teams/${L}${S?`/${S}`:""}`)})},L)),e(b,{item:!0,xs:1,children:e(A,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentLight.main"},variant:"outlined",onClick:()=>y(n),color:"info",startIcon:e(Ht,{}),children:"Add new Team"})})]})]})]})})}function Bd({bonusStats:t}){return h(F,{bgt:"light",children:[e(ye,{title:h(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(fn,{}),e("span",{children:"Bonus Stats"})]}),titleTypographyProps:{variant:"h6"}}),e(Pa,{bgt:"light",sections:[{fields:Object.entries(t).map(([a,n])=>({text:nt.getStr(a)??a,value:n,unit:rt(a)}))}]})]})}function Ad({customMultiTargets:t}){return h(F,{bgt:"light",children:[e(ye,{title:h(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(gn,{}),e("span",{children:"Custom multi-targets"})]}),titleTypographyProps:{variant:"h6"}}),e(Pa,{bgt:"light",sections:[{fields:t.map(({name:a,description:n})=>({text:a,value:n?e(oe,{title:n,children:e(ft,{})}):void 0}))}]})]})}const zd={xs:1,md:2};function Od({teamCharId:t,teamIds:a}){const n=pt(),r=$(),{name:s,description:o}=r.teamChars.get(t),l=u=>{const m=r.teams.new();r.teams.set(m,C=>{C.loadoutData[0]={teamCharId:u}}),n(`/teams/${m}`,{state:{openSetting:!0}})},[c,p,d]=de();return h(se,{children:[e(Md,{show:c,onHide:d,teamCharId:t,teamIds:a}),h(F,{bgt:"light",children:[e(Be,{onClick:p,children:e(z,{children:h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Ma,{}),e(_,{children:s}),e(Zn,{title:e(_,{children:o}),children:e(ft,{})}),e(Jr,{sx:{ml:"auto"}})]})})}),e(Z,{}),e(z,{children:h(b,{container:!0,columns:zd,spacing:1,children:[a.map(u=>e(b,{item:!0,xs:1,children:e(Ba,{teamId:u,onClick:m=>n(`/teams/${u}${m?`/${m}`:""}`)})},u)),e(b,{item:!0,xs:1,children:e(A,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentNormal.main"},variant:"outlined",onClick:()=>l(t),color:"info",startIcon:e(Ht,{}),children:"Add new Team"})})]})})]},t)]})}function Nd(){const{t}=K("ui"),a=$(),{character:n}=i.useContext(H),{key:r}=n,{gender:s}=Ce(),o=i.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return r.startsWith("Traveler")?h(A,{onClick:o,startIcon:s==="F"?e(Fo,{}):e(qo,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function Ed({onClose:t}){const{t:a}=K(["page_character","sillyWisher_charNames","charNames_gen"]),n=pt(),r=$(),{character:s,character:{key:o},characterSheet:l}=i.useContext(H),{gender:c}=Ce(),{silly:p}=i.useContext(ut),d=i.useCallback(async()=>{let u=ce(o,c).name;typeof u=="object"&&(u=a(`${p?"sillyWisher_charNames":"charNames_gen"}:${Ke(o,c)}`)),window.confirm(a("removeCharacter",{value:u}))&&(r.chars.remove(o),n("/characters"))},[r,n,o,c,p,a]);return h(g,{display:"flex",flexDirection:"column",gap:1,children:[h(g,{display:"flex",gap:1,children:[e(Nd,{}),e(A,{color:"error",onClick:()=>d(),startIcon:e(Et,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(Q,{onClick:t,children:e(Me,{})})]}),e(g,{children:h(b,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(b,{item:!0,xs:8,sm:5,md:4,lg:3,children:h(F,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Ql,{}),e(g,{sx:{px:1},children:e($r,{level:s.level,ascension:s.ascension,setBoth:u=>r.chars.set(o,u)})}),e(g,{sx:{px:2},children:e(nn,{})}),e(_,{sx:{textAlign:"center",pb:-1},variant:"h6",children:l.constellationName}),e(Zl,{})]})}),h(b,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(g,{children:e(b,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(u=>{var m;return e(b,{item:!0,xs:1,children:e(od,{talentKey:u,dropDownButtonProps:{startIcon:e($e,{src:(m=l.getTalentOfKey(u))==null?void 0:m.img,size:1.75,sideMargin:!0})}},u)},u)})})}),e(Wd,{}),e(Pd,{})]})]})})]})}function Wd(){const{character:{key:t}}=i.useContext(H),{data:a}=i.useContext(J),n=$(),r=Ot(t).weaponType,s=a.get(B.weapon.id).value,o=i.useMemo(()=>Ve(he,l=>a.get(B.art[l].id).value),[a]);return e(g,{children:e(Qc,{weaponTypeKey:r,weaponId:s,artifactIds:o,setWeapon:l=>{n.weapons.set(l,{location:ke(t)})},setArtifact:(l,c)=>{n.arts.set(c,{location:ke(t)})}})})}function Pd(){const t=pt(),{character:{key:a}}=i.useContext(H),n=$(),{gender:r}=Ce(),[s,o]=We(),l=i.useMemo(()=>{const p={};return n.teamChars.entries.map(([d,u])=>{u.key===a&&(p[d]||(p[d]=[]))}),n.teams.entries.forEach(([d,u])=>{const m=u.loadoutData.find(C=>{var f;return C&&((f=n.teamChars.get(C==null?void 0:C.teamCharId))==null?void 0:f.key)===a});m&&p[m==null?void 0:m.teamCharId].push(d)}),s&&p},[s,a,n]);i.useEffect(()=>n.teams.followAny(()=>o()),[n,o]),i.useEffect(()=>n.teamChars.followAny(()=>o()),[n,o]);const c=()=>{const p=n.teams.new(),d=n.teamChars.new(a);n.teams.set(p,u=>{u.loadoutData[0]={teamCharId:d}}),t(`/teams/${p}`,{state:{openSetting:!0}})};return h(g,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h(_,{variant:"h6",children:["Team Loadouts with"," ",e(Qn,{characterKey:a,gender:r})]}),Object.entries(l).map(([p,d])=>e(Od,{teamCharId:p,teamIds:d},p)),e(A,{fullWidth:!0,onClick:()=>c(),color:"info",startIcon:e(Ht,{}),variant:"outlined",sx:{backgroundColor:"contentLight.main"},children:"Add new Loadout+Team"}),e(F,{bgt:"light"})]})}function Tu({characterKey:t,onClose:a}){return e(ht,{open:!!t,onClose:a,children:e(i.Suspense,{fallback:e(le,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Fd,{characterKey:t,onClose:a},t)})})}function Fd({characterKey:t,onClose:a}){const n=Ft(t),{gender:r}=Ce(),s=ce(t,r),o=Pt(t),{target:l}=(o==null?void 0:o[t])??{},c=aa((n==null?void 0:n.key)??""),p=i.useMemo(()=>{if(!(!o||!l))return{data:l,teamData:o,oldData:void 0}},[l,o]),d=i.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:c}},[n,s,c]),[u,m]=i.useState(),[C,f]=i.useState(),x=i.useMemo(()=>({chartData:u,setChartData:m,graphBuilds:C,setGraphBuilds:f}),[u,C]);return i.useEffect(()=>{m(void 0),f(void 0)},[t]),e(F,{children:e(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:p&&d&&x?e(H.Provider,{value:d,children:e(J.Provider,{value:p,children:e(wi.Provider,{value:x,children:e(Ed,{onClose:a})})})}):e(le,{variant:"rectangular",width:"100%",height:1e3})})})}function qd(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>$t.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ke(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>Tt.char.data[ke(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Hd(t,a){return{element:(n,r)=>r.includes(er(n)),weaponType:(n,r)=>r.includes(Tt.char.data[ke(n)].weaponType),rarity:(n,r)=>r.includes(Tt.char.data[ke(n)].rarity),name:(n,r)=>r===void 0||$t.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Ke(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&$t.t(`charNames_gen:${Ke(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const vn={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Vd=ge(Ee,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),Gd=Vd,Kd=Qt([...Wt]);function Yd({value:t,totals:a,onChange:n,...r}){const s=zt(),o=!Dt(s.breakpoints.up("md")),l=!Dt(s.breakpoints.up("sm"));return e(Vr,{exclusive:!0,value:t,...r,children:Wt.map(c=>h(Gd,{value:c,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex"},selectedColor:c,onClick:()=>n(Kd(t,c)),children:[e(Vt,{ele:c,iconProps:{fontSize:o&&!l?"inherit":void 0}}),!l&&e(ve,{sx:{ml:.5},label:a[c],size:"small"})]},c))})}const Xd=Object.keys(vn);function Du({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:s=!1}){const{t:o}=K(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:l}=i.useContext(ut),c=$(),[p,d]=i.useState(()=>c.displayCharacter.get());i.useEffect(()=>c.displayCharacter.follow((v,M)=>d(M)),[c,d]);const{gender:u}=Ce(),[m,C]=We();i.useEffect(()=>c.charMeta.followAny(()=>C()),[C,c]);const[f,x]=i.useState(""),w=i.useDeferredValue(f),y=i.useDeferredValue(p),L=i.useDeferredValue(m),S=i.useMemo(()=>{const{element:v,weaponType:M,sortType:k,ascending:q}=y,ne=[...s?["new"]:[],...vn[k]??[]];return L&&wt.filter(ee=>r(ee,c.chars.get(ee),ce(ee,u))).filter(Xt({element:v,weaponType:M,name:w},Hd(c,l))).sort(Ga(ne,q,qd(c,l),["new","favorite"]))},[y,s,L,w,c,l,r,u]),U=i.useMemo(()=>ya(ar,v=>wt.forEach(M=>{const k=ce(M,c.gender).weaponTypeKey;v[k].total++,S.includes(M)&&v[k].current++})),[S,c]),W=i.useMemo(()=>ya(Wt,v=>wt.forEach(M=>{const k=ce(M,c.gender).elementKey;v[k].total++,S.includes(M)&&v[k].current++})),[S,c]),{weaponType:j,element:I,sortType:P,ascending:R}=p;return e(tt,{open:t,onClose:()=>{x(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:h(we,{children:[h(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[h(g,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Nr,{sx:{height:"100%"},onChange:v=>c.displayCharacter.set({weaponType:v}),value:j,totals:U,size:"small"}),e(Yd,{sx:{height:"100%"},onChange:v=>c.displayCharacter.set({element:v}),value:I,totals:W,size:"small"}),e(Q,{sx:{ml:"auto"},onClick:()=>{x(""),a()},children:e(Me,{})})]}),h(g,{display:"flex",gap:1,children:[e(Ye,{autoFocus:!0,value:f,onChange:v=>x(v.target.value),label:o("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),e(Dr,{sortKeys:Xd,value:P,onChange:v=>c.displayCharacter.set({sortType:v}),ascending:R,onChangeAsc:v=>c.displayCharacter.set({ascending:v})})]})]}),e(Z,{}),e(J.Provider,{value:{teamData:void 0},children:e(z,{children:e(b,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:S.map(v=>e(b,{item:!0,xs:1,children:e(Zd,{characterKey:v,onClick:()=>{x(""),a(),n==null||n(v)}})},v))})})})]})})}const Jd=ge(({className:t,...a})=>e(oe,{...a,classes:{popper:t}}))({[`& .${tr.tooltip}`]:{padding:0}});function Zd({characterKey:t,onClick:a}){const{gender:n}=Ce(),r=ce(t,n),s=Ft(t),{favorite:o}=qt(t),l=$(),{silly:c}=i.useContext(ut),[p,d,u]=de(),{level:m=1,ascension:C=0,constellation:f=0}=s??{},x=wr(t,"banner",n);return e(Jd,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:p,onClose:u,onOpen:d,title:e(g,{sx:{width:300},children:e(bi,{hideStats:!0,characterKey:t})}),children:e(g,{children:h(Bt,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(g,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(Q,{sx:{p:.25},onClick:w=>{u(),l.charMeta.set(t,{favorite:!o})},children:o?e(Jt,{}):e(ta,{})})}),e(Be,{onClick:a,children:h(g,{display:"flex",position:"relative",className:x?void 0:`grad-${r==null?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${x})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(g,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(g,{component:"img",src:pr(t,n,c),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),h(g,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(_,{variant:"body2",sx:{flexGrow:1},children:e(ae,{color:r==null?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:r==null?void 0:r.name})}),s?h(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h(g,{sx:{textShadow:"0 0 5px gray"},children:[h(_,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",m]}),h(_,{variant:"body2",component:"span",color:"text.secondary",children:["/",nr[C]]})]}),h(_,{variant:"body2",children:["C",f]})]}):e(_,{component:"span",variant:"body2",children:e(ae,{children:"NEW"})}),e(Yt,{stars:(r==null?void 0:r.rarity)??1,colored:!0})]})]})})]})})})}const Qd=Qt([...ja]);function Uu({value:t,totals:a,onChange:n,...r}){const s=zt(),o=!Dt(s.breakpoints.up("sm"));return e(Ct,{exclusive:!0,value:t,...r,children:ja.map(l=>e(Ee,{value:l,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex",gap:o?0:1},onClick:()=>n(Qd(t,l)),children:h(g,{display:"flex",children:[e("strong",{children:l}),e(Ka,{}),!o&&e(ve,{label:a[l],size:"small"})]})},l))})}export{zc as $,Wc as A,xn as B,Uu as C,Wo as D,Yd as E,yc as F,wi as G,cn as H,Nc as I,nn as J,Fc as K,bd as L,mc as M,jc as N,fc as O,Ac as P,Ql as Q,Pc as R,an as S,ku as T,Zl as U,xc as V,ct as W,aa as X,od as Y,Cn as Z,Id as _,bi as a,Hd as b,vn as c,qd as d,Tu as e,Du as f,Cc as g,dn as h,gn as i,ca as j,$u as k,lt as l,vc as m,Qc as n,tn as o,un as p,jt as q,vd as r,xd as s,fn as t,Zr as u,Oc as v,Fe as w,Mt as x,It as y,Uc as z};
