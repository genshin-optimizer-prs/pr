import{b as $,av as Ze,au as Qe,aw as xe,aY as X,ax as P,e as l,ay as pt,az as et,c9 as fa,aA as Ae,j as U,aB as tt,aV as _n,aU as Rn,ca as Sa,c as ze,a$ as Ln,b0 as Tt,cb as kn,T as b,a0 as $a,p as e,cc as Sn,cd as $n,ce as Tn,bB as Dn,F as jn,r as Re,i as Le,n as u,V as ce,B,cf as In,aT as Un,c6 as Mn,ar as Xe,K as f,d as Ce,U as ee,s as zt,C as O,ao as ie,J as y,bG as Ot,ab as mt,q as ve,cg as Bn,bK as st,bo as pe,l as Nt,bE as An,ch as zn,t as we,bi as it,bh as Ta,a4 as On,ci as Nn,aR as En,cj as ga,ck as Wn,cl as vt,cm as wt,cn as _t,bw as Pn,a5 as at,D as J,b2 as be,be as Et,Y as N,aC as ge,aN as nt,u as K,bq as xa,br as Ca,bp as ba,Z as Fe,Q as se,o as Ke,k as he,bg as Te,v as Q,W as rt,bs as Fn,co as Da,cp as qn,cq as ja,cr as Hn,cs as Vn,ct as Gn,b8 as Kn,cu as Yn,_ as Ia,ah as Ua,ag as Xn,cv as Jn,$ as Wt,cw as Ma,X as ft,b1 as Zn,c5 as Qn,c0 as er,aE as gt,bj as tr,bd as ar,cx as Dt,at as jt,cy as nr,m as It,f as Pt,cz as rr,cA as Rt,h as or,bW as sr,aG as Ba}from"./index-7930126e.js";import{t as Ft,s as qt,v as Ht,i as Aa,j as ir,k as lr,C as H,H as cr,w as dr,x as ur,c as De,u as hr,g as pr,y as mr,q as fr,b as za,T as Oa,d as Vt,z as gr}from"./TeamCard-82c45bfd.js";import{D as Z}from"./DataContext-3fd17c5f.js";import{p as me,g as de,u as z,E as Gt,S as Kt,d as Na,B as Ea,x as Wa,y as xr,v as Cr,w as Pa,n as br,q as yr,r as ya,z as vr,A as wr,C as _r,D as Rr,a as va,b as wa,F as Lr}from"./index-78a6cf62.js";import{d as _e}from"./Close-9ef2b3d2.js";import{I as je,i as qe,C as xt,B as kr}from"./ColoredText-a9e8450d.js";import{a as Fa,C as Sr,L as Be,b as $r,A as Tr,W as qa,D as Ha,c as Dr}from"./WeaponEditor-9b27fbea.js";import{S as ne}from"./SqBadge-088dde18.js";import{b as Yt,c as Va,e as Xt,C as jr,T as Je,u as Ga,a as Ka,S as Ya,f as Jt,s as Xa,d as Ja,g as Ir}from"./StarDisplay-1dd420b5.js";import{C as Oe}from"./CardActionArea-fdaaa46e.js";import{F as Zt,C as Qt,A as Za,d as Ur}from"./ConditionalWrapper-4bf56f1c.js";import{u as Ut,f as Mr,A as lt,d as Br,i as Ar,b as zr}from"./ArtifactSort-74b9fd1c.js";import{b as ct,c as Or,d as Nr,w as Er,W as Wr}from"./WeaponCard-fcc62b63.js";import{B as ot,d as $e}from"./BootstrapTooltip-b128342d.js";import{a as Qa,d as en}from"./CheckBoxOutlineBlank-bc8e27b8.js";import{A as Pr}from"./Artifact-5c3ecf45.js";import{g as tn,a as Fr,b as qr}from"./index-6a1205f6.js";import{g as Ct,W as an}from"./index-113dbfaf.js";import{u as Hr}from"./useWeapon-83bc6a04.js";import{C as fe}from"./CardHeader-4dfdabff.js";import{S as Vr}from"./SlotIcon-159d47e8.js";import{C as nn,a as Gr}from"./ChevronRight-a28662e9.js";import{T as Pe,S as bt,h as ea,a as Kr}from"./SolidToggleButtonGroup-295b022e.js";import Yr from"./WeaponSelectionModal-4c3152c8.js";import{C as Xr,a as Jr,M as Zr}from"./DropdownButton-cdb73e26.js";import{d as Qr}from"./Settings-74c8a513.js";import{c as _a}from"./totalUtils-af4c9996.js";function eo(t){const a=$();return Yt(a.builds,t)}function rn(t){const a=$();return Yt(a.buildTcs,t)}function He(t){const a=$();return Yt(a.optConfigs,t)}function to(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:s=!1}=t,o=Va({badgeContent:a,max:r});let i=n;n===!1&&a===0&&!s&&(i=!0);const{badgeContent:c,max:p=r}=i?o:t,d=c&&Number(c)>p?`${p}+`:c;return{badgeContent:c,invisible:i,max:p,displayValue:d}}function ao(t){return Qe("MuiBadge",t)}const no=Ze("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ke=no,ro=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Lt=10,kt=4,oo=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:s,variant:o,classes:i={}}=t,c={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${X(n.vertical)}${X(n.horizontal)}`,`anchorOrigin${X(n.vertical)}${X(n.horizontal)}${X(s)}`,`overlap${X(s)}`,a!=="default"&&`color${X(a)}`]};return tt(c,ao,i)},so=xe("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),io=xe("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${X(n.anchorOrigin.vertical)}${X(n.anchorOrigin.horizontal)}${X(n.overlap)}`],n.color!=="default"&&a[`color${X(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>P({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Lt*2,lineHeight:1,padding:"0 6px",height:Lt*2,borderRadius:Lt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:kt,height:kt*2,minWidth:kt*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),lo=l.forwardRef(function(a,n){var r,s,o,i,c,p;const d=pt({props:a,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:g,component:C,components:m={},componentsProps:x={},children:_,overlap:v="rectangular",color:S="default",invisible:k=!1,max:M=99,badgeContent:T,slots:D,slotProps:I,showZero:F=!1,variant:R="standard"}=d,w=et(d,ro),{badgeContent:A,invisible:L,max:q,displayValue:re}=to({max:M,invisible:k,badgeContent:T,showZero:F}),te=Va({anchorOrigin:h,color:S,overlap:v,variant:R,badgeContent:T}),Y=L||A==null&&R!=="dot",{color:ae=S,overlap:V=v,anchorOrigin:G=h,variant:E=R}=Y?te:d,oe=E!=="dot"?re:void 0,Ie=P({},d,{badgeContent:A,invisible:Y,max:q,displayValue:oe,showZero:F,anchorOrigin:G,color:ae,overlap:V,variant:E}),Ne=oo(Ie),Ue=(r=(s=D==null?void 0:D.root)!=null?s:m.Root)!=null?r:so,le=(o=(i=D==null?void 0:D.badge)!=null?i:m.Badge)!=null?o:io,ue=(c=I==null?void 0:I.root)!=null?c:x.root,Ee=(p=I==null?void 0:I.badge)!=null?p:x.badge,j=fa({elementType:Ue,externalSlotProps:ue,externalForwardedProps:w,additionalProps:{ref:n,as:C},ownerState:Ie,className:Ae(ue==null?void 0:ue.className,Ne.root,g)}),W=fa({elementType:le,externalSlotProps:Ee,ownerState:Ie,className:Ae(Ne.badge,Ee==null?void 0:Ee.className)});return U.jsxs(Ue,P({},j,{children:[_,U.jsx(le,P({},W,{children:oe}))]}))}),co=lo;function uo(t){return Qe("PrivateSwitchBase",t)}Ze("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ho=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],po=t=>{const{classes:a,checked:n,disabled:r,edge:s}=t,o={root:["root",n&&"checked",r&&"disabled",s&&`edge${X(s)}`],input:["input"]};return tt(o,uo,a)},mo=xe(_n)(({ownerState:t})=>P({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),fo=xe("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),go=l.forwardRef(function(a,n){const{autoFocus:r,checked:s,checkedIcon:o,className:i,defaultChecked:c,disabled:p,disableFocusRipple:d=!1,edge:h=!1,icon:g,id:C,inputProps:m,inputRef:x,name:_,onBlur:v,onChange:S,onFocus:k,readOnly:M,required:T=!1,tabIndex:D,type:I,value:F}=a,R=et(a,ho),[w,A]=Rn({controlled:s,default:!!c,name:"SwitchBase",state:"checked"}),L=Sa(),q=E=>{k&&k(E),L&&L.onFocus&&L.onFocus(E)},re=E=>{v&&v(E),L&&L.onBlur&&L.onBlur(E)},te=E=>{if(E.nativeEvent.defaultPrevented)return;const oe=E.target.checked;A(oe),S&&S(E,oe)};let Y=p;L&&typeof Y>"u"&&(Y=L.disabled);const ae=I==="checkbox"||I==="radio",V=P({},a,{checked:w,disabled:Y,disableFocusRipple:d,edge:h}),G=po(V);return U.jsxs(mo,P({component:"span",className:Ae(G.root,i),centerRipple:!0,focusRipple:!d,disabled:Y,tabIndex:null,role:void 0,onFocus:q,onBlur:re,ownerState:V,ref:n},R,{children:[U.jsx(fo,P({autoFocus:r,checked:s,defaultChecked:c,className:G.input,disabled:Y,id:ae?C:void 0,name:_,onChange:te,readOnly:M,ref:x,required:T,ownerState:V,tabIndex:D,type:I},I==="checkbox"&&F===void 0?{}:{value:F},m)),w?o:g]}))}),xo=go,Co=ze(U.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),bo=ze(U.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),yo=ze(U.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function vo(t){return Qe("MuiCheckbox",t)}const wo=Ze("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),St=wo,_o=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Ro=t=>{const{classes:a,indeterminate:n,color:r,size:s}=t,o={root:["root",n&&"indeterminate",`color${X(r)}`,`size${X(s)}`]},i=tt(o,vo,a);return P({},a,i)},Lo=xe(xo,{shouldForwardProp:t=>Ln(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.indeterminate&&a.indeterminate,n.color!=="default"&&a[`color${X(n.color)}`]]}})(({theme:t,ownerState:a})=>P({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Tt(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${St.checked}, &.${St.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${St.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),ko=U.jsx(bo,{}),So=U.jsx(Co,{}),$o=U.jsx(yo,{}),To=l.forwardRef(function(a,n){var r,s;const o=pt({props:a,name:"MuiCheckbox"}),{checkedIcon:i=ko,color:c="primary",icon:p=So,indeterminate:d=!1,indeterminateIcon:h=$o,inputProps:g,size:C="medium",className:m}=o,x=et(o,_o),_=d?h:p,v=d?h:i,S=P({},o,{color:c,indeterminate:d,size:C}),k=Ro(S);return U.jsx(Lo,P({type:"checkbox",inputProps:P({"data-indeterminate":d},g),icon:l.cloneElement(_,{fontSize:(r=_.props.fontSize)!=null?r:C}),checkedIcon:l.cloneElement(v,{fontSize:(s=v.props.fontSize)!=null?s:C}),ownerState:S,ref:n,className:Ae(k.root,m)},x,{classes:k}))}),Do=To;function jo(t){return Qe("MuiFormControlLabel",t)}const Io=Ze("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ye=Io,Uo=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Mo=t=>{const{classes:a,disabled:n,labelPlacement:r,error:s,required:o}=t,i={root:["root",n&&"disabled",`labelPlacement${X(r)}`,s&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return tt(i,jo,a)},Bo=xe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[{[`& .${Ye.label}`]:a.label},a.root,a[`labelPlacement${X(n.labelPlacement)}`]]}})(({theme:t,ownerState:a})=>P({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ye.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ye.label}`]:{[`&.${Ye.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Ao=xe("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,a)=>a.asterisk})(({theme:t})=>({[`&.${Ye.error}`]:{color:(t.vars||t).palette.error.main}})),zo=l.forwardRef(function(a,n){var r,s;const o=pt({props:a,name:"MuiFormControlLabel"}),{className:i,componentsProps:c={},control:p,disabled:d,disableTypography:h,label:g,labelPlacement:C="end",required:m,slotProps:x={}}=o,_=et(o,Uo),v=Sa(),S=(r=d??p.props.disabled)!=null?r:v==null?void 0:v.disabled,k=m??p.props.required,M={disabled:S,required:k};["checked","name","onChange","value","inputRef"].forEach(w=>{typeof p.props[w]>"u"&&typeof o[w]<"u"&&(M[w]=o[w])});const T=kn({props:o,muiFormControl:v,states:["error"]}),D=P({},o,{disabled:S,labelPlacement:C,required:k,error:T.error}),I=Mo(D),F=(s=x.typography)!=null?s:c.typography;let R=g;return R!=null&&R.type!==b&&!h&&(R=U.jsx(b,P({component:"span"},F,{className:Ae(I.label,F==null?void 0:F.className),children:R}))),U.jsxs(Bo,P({className:Ae(I.root,i),ownerState:D,ref:n},_,{children:[l.cloneElement(p,M),k?U.jsxs($a,{direction:"row",alignItems:"center",children:[R,U.jsxs(Ao,{ownerState:D,"aria-hidden":!0,className:I.asterisk,children:[" ","*"]})]}):R]}))}),Oo=zo;function on({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(jn,{...a});case"plume":return e(Dn,{...a});case"sands":return e(Tn,{...a});case"goblet":return e($n,{...a});case"circlet":return e(Sn,{...a})}}var ta={},No=Le;Object.defineProperty(ta,"__esModule",{value:!0});var dt=ta.default=void 0,Eo=No(Re()),Wo=U,Po=(0,Eo.default)((0,Wo.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");dt=ta.default=Po;function Fo({title:t,children:a,id:n="dropdownbtn",...r}){const[s,o]=l.useState(null),i=!!s,c=l.useCallback(d=>o(d.currentTarget),[o]),p=l.useCallback(()=>o(null),[o]);return u(l.Suspense,{fallback:e(B,{endIcon:e(dt,{}),...r,children:e(ce,{width:50})}),children:[e(B,{...r,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:c,endIcon:e(dt,{}),children:t}),e(Mn,{id:"basic-menu",anchorEl:s,open:i,placement:"bottom-start",transition:!0,onClick:p,sx:{zIndex:1500},children:({TransitionProps:d,placement:h})=>e(In,{...d,style:{transformOrigin:h==="bottom-start"?"left top":"left bottom"},children:e(Un,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Xr,{onClickAway:p,children:u("div",{children:[" ",e(l.Suspense,{fallback:e(ce,{width:"100%",height:"1000"}),children:e(Jr,{"aria-labelledby":n,children:a})})]})})})})})]})}const qo=ze(U.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),aa=ze(U.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Ho=ze(U.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),Vo=ze(U.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),Go=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Ko=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Yo=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Xo=""+new URL("splash_amber-51176566.png",import.meta.url).href,Jo=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,Zo=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,Qo=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,es=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,ts=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,as=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,ns=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,rs=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,os=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,ss=""+new URL("splash_chiori-0fd0d497.png",import.meta.url).href,is=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,ls=""+new URL("splash_collei-504a299e.png",import.meta.url).href,cs=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,ds=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,us=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,hs=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,ps=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,ms=""+new URL("splash_eula-1491affb.png",import.meta.url).href,fs=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,gs=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,xs=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,Cs=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,bs=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,ys=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,vs=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,ws=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,_s=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,Rs=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,Ls=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,ks=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,Ss=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,$s=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,Ts=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,Ds=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,js=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Is=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Us=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Ms=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,Bs=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,As=""+new URL("splash_lumine-51240648.png",import.meta.url).href,zs=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,Os=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,Ns=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Es=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Ws=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,Ps=""+new URL("splash_navia-749d043e.png",import.meta.url).href,Fs=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,qs=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Hs=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,Vs=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Gs=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Ks=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,Ys=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Xs=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Js=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,Zs=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,Qs=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,ei=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,ti=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,ai=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,ni=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,ri=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,oi=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,si=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,ii=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,li=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,ci=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,di=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,ui=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,hi=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,pi=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,mi=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,fi=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,gi=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,xi=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,Ci=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,bi={Albedo:Ko,Alhaitham:Yo,Amber:Xo,AratakiItto:Rs,Baizhu:Qo,Barbara:es,Beidou:ts,Bennett:as,Candace:ns,Charlotte:rs,Chevreuse:os,Chiori:ss,Chongyun:is,Collei:ls,Cyno:cs,Dehya:ds,Diluc:us,Diona:hs,Dori:ps,Eula:ms,Faruzan:fs,Fischl:gs,Freminet:xs,Furina:Cs,Gaming:bs,Ganyu:ys,Gorou:vs,HuTao:_s,Jean:Ls,KaedeharaKazuha:$s,Kaeya:ks,KamisatoAyaka:Jo,KamisatoAyato:Zo,Kaveh:Ss,Keqing:Ts,Kirara:Ds,Klee:js,KujouSara:Js,KukiShinobu:Us,Layla:Ms,Lisa:Bs,Lynette:zs,Lyney:Os,Mika:Ns,Mona:Es,Nahida:Ws,Navia:Ps,Neuvillette:Fs,Nilou:qs,Ningguang:Hs,Noelle:Vs,Qiqi:Gs,RaidenShogun:Ks,Razor:Ys,Rosaria:Xs,SangonomiyaKokomi:Is,Sayu:Zs,Shenhe:Qs,ShikanoinHeizou:ws,Sucrose:ei,Tartaglia:ti,Thoma:ai,Tighnari:ni,TravelerF:As,TravelerM:Go,Venti:ri,Wanderer:oi,Wriothesley:si,Xiangling:ii,Xianyun:li,Xiao:ci,Xingqiu:di,Xinyan:ui,YaeMiko:hi,Yanfei:pi,Yaoyao:mi,Yelan:fi,Yoimiya:gi,YunJin:xi,Zhongli:Ci};function yi(t,a){return bi[Xe(t,a)]??""}function na(t){const a=$();return l.useCallback(n=>{if(!t)return;const r=a.chars.get(t);r&&a.chars.set(t,{...r,...n})},[t,a])}function sn(){const{data:t}=l.useContext(Z);return u(f,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(a=>e(Fa,{node:a},JSON.stringify(a.info))),t.get(me.special).info.name&&u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(b,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(me.special).info.icon,e(b,{children:t.get(me.special).info.name})]})]})}function vi({characterKey:t,onClick:a,onClickHeader:n,footer:r,hideStats:s}){var S;const o=$(),i=Ft(t),c=qt(t),{gender:p}=Ce(),d=de(t,p),h=na(t),g=(S=i==null?void 0:i[t])==null?void 0:S.target,C=l.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),m=l.useCallback(k=>e(Oe,{onClick:C,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:k}),[C]),x=l.useMemo(()=>c&&d&&{character:c,characterSheet:d,characterDispatch:h},[c,d,h]),_=l.useMemo(()=>g&&i&&{data:g,teamData:i},[g,i]),{favorite:v}=Ht(t);return e(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:s?300:600}),children:u(zt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(f,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(ee,{sx:{p:.5},onClick:k=>o.charMeta.set(t,{favorite:!v}),children:v?e(Zt,{}):e(aa,{})})}),e(Qt,{condition:!!a,wrapper:m,children:c&&_&&x?e(wi,{characterContextObj:x,dataContextObj:_,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:s}):e(_i,{characterKey:t})}),r]})})}function wi({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:r,onClickHeader:s,hideStats:o}){return e(H.Provider,{value:t,children:u(Z.Provider,{value:a,children:[e(Aa,{characterKey:n,onClick:r?void 0:s,children:e(ir,{characterKey:n})}),u(f,{sx:i=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:o?`${i.spacing(1)}!important`:void 0}),children:[e(lr,{}),!o&&e(sn,{})]})]})})}function _i({characterKey:t}){return u(ie,{children:[e(Aa,{characterKey:t,children:e(cr,{characterKey:t})}),e(O,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const Ri=l.createContext({}),Li=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,ki=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,Si=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,$i=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,Ti=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Di=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,ji=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,Ii=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,Ui=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,Mi=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,Bi=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,Ai=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,zi=""+new URL("Character_Chiori_Card-190184e6.jpg",import.meta.url).href,Oi=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,Ni=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Ei=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,Wi=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Pi=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Fi=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,qi=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,Hi=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Vi=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Gi=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Ki=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Yi=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,Xi=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,Ji=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,Zi=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,Qi=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,el=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,tl=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,al=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,nl=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,rl=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,ol=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,sl=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,il=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,ll=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,cl=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,dl=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,ul=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,hl=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,pl=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,ml=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,fl=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,gl=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,xl=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,Cl=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,bl=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,yl=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,vl=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,wl=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,_l=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,Rl=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,Ll=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,kl=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,Sl=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,$l=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,Tl=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,Dl=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,jl=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Il=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,Ul=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,Ml=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,Bl=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Al=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,zl=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Ol=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,Nl=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,El=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,Wl=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Pl=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Fl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,ql=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Hl=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Vl=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Gl=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Kl=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Yl=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,Xl=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,Jl=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,Zl=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,Ra={Albedo:Li,Alhaitham:ki,Aloy:Si,Amber:$i,AratakiItto:Ti,Baizhu:Di,Barbara:ji,Beidou:Ii,Bennett:Ui,Candace:Mi,Charlotte:Bi,Chevreuse:Ai,Chiori:zi,Chongyun:Oi,Collei:Ni,Cyno:Ei,Dehya:Wi,Diluc:Pi,Diona:Fi,Dori:qi,Eula:Hi,Faruzan:Vi,Fischl:Gi,Freminet:Ki,Furina:Yi,Gaming:Xi,Ganyu:Ji,Gorou:Zi,HuTao:Qi,Jean:el,KaedeharaKazuha:ol,Kaeya:tl,KamisatoAyaka:al,KamisatoAyato:nl,Kaveh:rl,Keqing:sl,Kirara:il,Klee:ll,KujouSara:cl,KukiShinobu:dl,Layla:ul,Lisa:hl,Lyney:ml,Lynette:pl,Mika:fl,Mona:gl,Nahida:xl,Navia:Cl,Neuvillette:bl,Nilou:yl,Ningguang:vl,Noelle:wl,Qiqi:_l,RaidenShogun:Rl,Razor:Ll,Rosaria:kl,SangonomiyaKokomi:Sl,Sayu:$l,Shenhe:Tl,ShikanoinHeizou:Dl,Somnia:jl,Sucrose:Il,Tartaglia:Ul,Thoma:Ml,Tighnari:Bl,TravelerF:Jl,TravelerM:Zl,Venti:Al,Wanderer:zl,Wriothesley:Ol,Xiangling:Nl,Xianyun:El,Xiao:Wl,Xingqiu:Pl,Xinyan:Fl,YaeMiko:ql,Yanfei:Hl,Yaoyao:Vl,Yelan:Gl,Yoimiya:Kl,YunJin:Yl,Zhongli:Xl};function Ql(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return Ra[`Traveler${a}`]??"";default:return Ra[t]??""}}function Du(){const{characterSheet:t}=l.useContext(H),{data:a}=l.useContext(Z),n={auto:a.get(z.total.auto).value,skill:a.get(z.total.skill).value,burst:a.get(z.total.burst).value},r={auto:a.get(z.total.autoBoost).value,skill:a.get(z.total.skillBoost).value,burst:a.get(z.total.burstBoost).value};return e(f,{children:e(y,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(s=>{var o;return e(y,{item:!0,xs:4,children:e(co,{badgeContent:n[s],color:r[s]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(f,{component:"img",src:(o=t.getTalentOfKey(s))==null?void 0:o.img,width:"100%",height:"auto"})})},s)})})})}function ec(){const{characterSheet:t,character:{key:a}}=l.useContext(H),{data:n}=l.useContext(Z),r=na(a),s=n.get(z.constellation).value;return e(y,{container:!0,spacing:1,children:Ot(1,6).map(o=>{var i;return e(y,{item:!0,xs:4,children:e(Oe,{onClick:()=>r({constellation:o===s?o-1:o}),children:e(f,{component:"img",src:(i=t.getTalentOfKey(`constellation${o}`))==null?void 0:i.img,sx:{...s>=o?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},o)})})}function tc(){const{silly:t}=l.useContext(mt),{character:{key:a}}=l.useContext(H),{gender:n}=Ce(),{data:r}=l.useContext(Z),s=r.get(z.lvl).value,o=r.get(z.asc).value,i=yi(a,n),c=Ql(a,n);return t&&i?e(ac,{src:i,level:s,ascension:o}):e(nc,{src:c,level:s,ascension:o})}function ac({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(H);return u(f,{sx:{position:"relative"},children:[e(f,{src:t,component:"img",width:"100%",height:"auto"}),u(f,{sx:{width:"100%",height:"100%"},children:[e(f,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(ln,{})}),e(b,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Xt,{stars:r.rarity,colored:!0})}),e(dn,{}),e(cn,{level:a,ascension:n})]})]})}function nc({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(H);return u(f,{sx:{position:"relative"},children:[u(f,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(b,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Xt,{stars:r.rarity,colored:!0})}),e(f,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(ln,{})}),e(dn,{}),e(cn,{level:a,ascension:n})]}),e(f,{src:t,component:"img",width:"100%",height:"auto"})]})}function ln(){var n;const{characterSheet:t}=l.useContext(H),a=t.elementKey;return e(ve,{color:a,sx:{height:"auto"},label:u(b,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Gt,{ele:a}),e(f,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e(je,{src:(n=qe.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function cn({level:t,ascension:a}){return e(b,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(ne,{children:Bn(t,a)})})}function dn(){const{character:{key:t}}=l.useContext(H),a=$(),{favorite:n}=Ht(t);return e(f,{sx:{position:"absolute",left:0,top:0},children:e(ee,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(Zt,{}):e(aa,{})})})}var ra={},rc=Le;Object.defineProperty(ra,"__esModule",{value:!0});var Ve=ra.default=void 0,oc=rc(Re()),sc=U,ic=(0,oc.default)((0,sc.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");Ve=ra.default=ic;function un({characterKey:t}){const{gender:a}=Ce();if(!t)return null;const n=de(t,a);return n?e(ot,{placement:"right-end",title:e(b,{children:n.name}),children:e(jr,{characterKey:t,sideMargin:!0})}):null}function Mt({statKey:t,disableIcon:a=!1}){return u(f,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Kt,{statKey:t,iconProps:pe}),u("span",{children:[st.get(t),st.unit(t)]})]})}function hn({statKey:t,disableIcon:a=!1}){return e(xt,{color:st.getVariant(t),children:e(Mt,{statKey:t,disableIcon:a})})}function ut({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:s,BGComponent:o=we}){const i=Ut(t),c=$(),p=l.useCallback(M=>e(Oe,{onClick:s,sx:{height:"100%"},children:M}),[s]),d=Nt();if(!i)return e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:qe.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:h,rarity:g,level:C,mainStatKey:m,substats:x,location:_}=i,v=Math.max(Math.min(n,g*4),C),S=An.find(M=>i.mainStatKey.includes(M)),k=S?Tt(d.palette[S].main,.6):Tt(d.palette.secondary.main,.6);return e(o,{sx:{height:"100%",maxHeight:"8em"},children:e(Qt,{condition:!!s,wrapper:p,children:u(f,{display:"flex",height:"100%",children:[u(f,{className:`grad-${g}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(dr,{art:i,children:e(f,{component:"img",src:Na(i.setKey,h),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),u(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:` +${C}`}),color:Pr.levelVariant(C)}),r&&e(ve,{size:"small",label:_?e(un,{characterKey:_&&c.chars.LocationToCharacterKey(_)}):e(Ea,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(ve,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:k,p:1},icon:e(ot,{placement:"top",title:e(b,{children:e(hn,{statKey:m})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Kt,{statKey:m,iconProps:{style:{padding:"4px"}}})})}),label:e(b,{sx:{mx:-.7},children:e(xt,{color:v!==C?"warning":void 0,children:zn(m,g,v)})})})]}),e(f,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:x.map((M,T)=>e(lc,{stat:M},T+M.key))})]})})})}function lc({stat:t}){var s;if(!t.value)return null;const a=((s=t.rolls)==null?void 0:s.length)??0,n=`roll${On(a,1,6)}`,r=it(t.key);return e(f,{display:"flex",gap:1,alignContent:"center",children:u(b,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(ot,{placement:"top",title:e(b,{children:t.key&&e(hn,{statKey:t.key})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Kt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${Ta(t.value,r)}${r}`})]})})}function cc(t){return Qe("MuiMasonry",t)}Ze("MuiMasonry",["root"]);const dc=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],Se=t=>Number(t.replace("px","")),uc={flexBasis:"100%",width:0,margin:0,padding:0},hc=t=>{const{classes:a}=t;return tt({root:["root"]},cc,a)},pc=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const d={},h=Se(a.spacing(t.defaultSpacing));for(let g=1;g<=t.defaultColumns;g+=1)d[`&:nth-of-type(${t.defaultColumns}n+${g%t.defaultColumns})`]={order:g};return r.height=t.defaultHeight,r.margin=-(h/2),r["& > *"]=P({},n["& > *"],d,{margin:h/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${h}px)`}),P({},n,r)}const s=ga({values:t.spacing,breakpoints:a.breakpoints.values}),o=Wn(a);n=vt(n,wt({theme:a},s,d=>{let h;if(typeof d=="string"&&!Number.isNaN(Number(d))||typeof d=="number"){const g=Number(d);h=_t(o,g)}else h=d;return P({margin:`calc(0px - (${h} / 2))`,"& > *":{margin:`calc(${h} / 2)`}},t.maxColumnHeight&&{height:typeof h=="number"?Math.ceil(t.maxColumnHeight+Se(h)):`calc(${t.maxColumnHeight}px + ${h})`})}));const c=ga({values:t.columns,breakpoints:a.breakpoints.values});return n=vt(n,wt({theme:a},c,d=>{const g=`${(100/Number(d)).toFixed(2)}%`,C=typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"?_t(o,Number(s)):"0px";return{"& > *":{width:`calc(${g} - ${C})`}}})),typeof s=="object"&&(n=vt(n,wt({theme:a},s,(d,h)=>{if(h){const g=Number(d),C=Object.keys(c).pop(),m=_t(o,g);return{"& > *":{width:`calc(${`${(100/(typeof c=="object"?c[h]||c[C]:c)).toFixed(2)}%`} - ${m})`}}}return null}))),n},mc=xe("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(pc),fc=l.forwardRef(function(a,n){const r=pt({props:a,name:"MuiMasonry"}),{children:s,className:o,component:i="div",columns:c=4,spacing:p=1,defaultColumns:d,defaultHeight:h,defaultSpacing:g}=r,C=et(r,dc),m=l.useRef(),[x,_]=l.useState(),v=!x&&h&&d!==void 0&&g!==void 0,[S,k]=l.useState(v?d-1:0),M=P({},r,{spacing:p,columns:c,maxColumnHeight:x,defaultColumns:d,defaultHeight:h,defaultSpacing:g,isSSR:v}),T=hc(M),D=R=>{if(!m.current||!R||R.length===0)return;const w=m.current,A=m.current.firstChild,L=w.clientWidth,q=A.clientWidth;if(L===0||q===0)return;const re=window.getComputedStyle(A),te=Se(re.marginLeft),Y=Se(re.marginRight),ae=Math.round(L/(q+te+Y)),V=new Array(ae).fill(0);let G=!1;w.childNodes.forEach(E=>{if(E.nodeType!==Node.ELEMENT_NODE||E.dataset.class==="line-break"||G)return;const oe=window.getComputedStyle(E),Ie=Se(oe.marginTop),Ne=Se(oe.marginBottom),Ue=Se(oe.height)?Math.ceil(Se(oe.height))+Ie+Ne:0;if(Ue===0){G=!0;return}for(let le=0;le<E.childNodes.length;le+=1){const ue=E.childNodes[le];if(ue.tagName==="IMG"&&ue.clientHeight===0){G=!0;break}}if(!G){const le=V.indexOf(Math.min(...V));V[le]+=Ue;const ue=le+1;E.style.order=ue}}),G||Pn.flushSync(()=>{_(Math.max(...V)),k(ae>0?ae-1:0)})};Nn(()=>{if(typeof ResizeObserver>"u")return;let R;const w=new ResizeObserver(()=>{R=requestAnimationFrame(D)});return m.current&&m.current.childNodes.forEach(A=>{w.observe(A)}),()=>{R&&window.cancelAnimationFrame(R),w&&w.disconnect()}},[c,p,s]);const I=En(n,m),F=new Array(S).fill("").map((R,w)=>U.jsx("span",{"data-class":"line-break",style:P({},uc,{order:w+1})},w));return U.jsxs(mc,P({as:i,className:Ae(T.root,o),ref:I,ownerState:M},C,{children:[s,F]}))}),gc=fc,xc=l.createContext(void 0),We={title:e(xt,{color:"warning",children:"ERROR"})},Cc={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(Ot(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function pn(t,a,n){if(!a)return We;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[r,s]=a.split(":");if(r==="artifact"){const o=tn(s);return o?{title:o.name,icon:Fr(s)}:We}else if(r==="weapon"){const o=Ct(s);if(!o)return We;const i=t.get(me.weapon.asc).value;return{title:o.name,icon:Wa(s,i>=2)}}}else{const r=t.get(me.charKey).value;if(!r)return We;const s=de(r,n.gender),o=["normal","charged","plunging"].includes(a)?"auto":a,i=s==null?void 0:s.getTalentOfKey(o);if(!i)return We;const c=Cc[a];return{icon:i.img,title:i.name,action:c}}return We}function bc(t){const a=t.getDisplay(),n=Object.entries(a),r=n.filter(([d])=>d==="basic"),s=n.filter(([d])=>d==="reaction"),o=n.filter(([d])=>d==="custom"),i=n.filter(([d])=>d.startsWith("weapon")),c=n.filter(([d])=>d.startsWith("artifact")),p=n.filter(([d])=>d!=="basic"&&d!=="reaction"&&!d.startsWith("weapon")&&!d.startsWith("artifact")&&d!=="custom");return[...r,...s,...o,...p,...i,...c]}function yc({columns:t={xs:1,sm:2,md:3,xl:4}}){const{data:a}=l.useContext(Z),n=l.useMemo(()=>bc(a).filter(([,r])=>Object.values(r).some(s=>!s.isEmpty)),[a]);return e(f,{sx:{mr:-1,mb:-1},children:e(gc,{columns:t,spacing:1,children:n.map(([r,s])=>e(vc,{displayNs:s,sectionKey:r},r))})})}function vc({displayNs:t,sectionKey:a}){const n=l.useContext(xc),{data:r,oldData:s}=l.useContext(Z),o=$(),i=l.useMemo(()=>pn(r,a,o),[o,r,a]),c=l.useMemo(()=>at(t,(g,C)=>xr(["display",a,C])),[t,a]);if(!i)return e(we,{});const{title:p,icon:d,action:h}=i;return u(we,{children:[e(Sr,{avatar:d&&e(je,{size:2,src:d}),title:p,action:h&&e(ne,{children:h})}),e(J,{}),e($r,{sx:{m:0},children:Object.entries(t).map(([g,C])=>e(Fa,{node:C,oldValue:s?s.get(c[g]).value:void 0,component:Be,emphasize:JSON.stringify(n)===JSON.stringify([a,g])},g))})]})}function ht({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=we,weaponTypeKey:s="sword"}){const o=Hr(t),i=(o==null?void 0:o.key)&&Ct(o.key);return!o||!i?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:qe.weaponTypes[s],sx:{width:"25%",height:"auto",opacity:.7}})}):e(mn,{weapon:o,weaponSheet:i,onClick:n,showLocation:a,BGComponent:r})}function mn({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:s=we}){const o=$(),{refinement:i,location:c}=t,p=l.useCallback(h=>e(Oe,{sx:{height:"100%"},onClick:r,children:h}),[r]),d=l.useMemo(()=>a&&t&&Cr([a.data,Pa(t)]),[a,t]);return e(s,{sx:{height:"100%",maxHeight:"8em"},children:e(Qt,{condition:!!r,wrapper:p,children:u(f,{display:"flex",height:"100%",alignItems:"stretch",children:[u(f,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(ur,{sheet:a,children:e(f,{component:"img",src:Wa(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),u(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:an.getLevelString(t)}),color:"primary"}),n&&e(ve,{size:"small",label:c?e(un,{characterKey:o.chars.LocationToCharacterKey(c)}):e(Ea,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(ve,{size:"small",color:"info",label:u("strong",{children:["R",i]})})})]}),u(f,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(La,{node:d.get(me.weapon.main)}),e(La,{node:d.get(me.weapon.sub)})]})]})})})}function La({node:t}){return t.info.name?e(f,{display:"flex",gap:1,alignContent:"center",children:u(b,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(ot,{placement:"top",title:e(b,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:br(t)})]})}):null}function wc({equipChangeProps:t,showPrompt:a,OnHidePrompt:n,onEquip:r}){const[s,o]=l.useState(""),[i,c]=l.useState(!1),p=$(),{teamCharId:d,teamChar:{key:h}}=l.useContext(be),g=Et(h).weaponType,C=()=>{i&&p.teamChars.newBuild(d,{name:s!==""?s:`Duplicate of ${t.currentName}`,artifactIds:t.currentArtifacts,weaponId:t.currentWeapon}),r(),o(""),c(!1),n()};return e(nt,{open:a,onClose:n,children:u(N,{children:[e(fe,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),u("span",{children:["Confirm Equipment Changes for"," ",e("strong",{children:t.currentName})]})]}),action:e(ee,{onClick:n,children:e(_e,{})})}),e(J,{}),e(O,{sx:{display:"flex",flexDirection:"column"},children:u(f,{children:[u(N,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(ge,{color:"success",children:"Current Equipment"})}),e(O,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:u(y,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(y,{item:!0,xs:1,children:e(ht,{weaponId:t.currentWeapon,weaponTypeKey:g})}),Object.entries(t.currentArtifacts).map(([m,x])=>e(y,{item:!0,xs:1,children:e(ut,{artifactId:x,slotKey:m})},x||m))]})})]}),e(f,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",padding:2,children:e(dt,{sx:{fontSize:40}})}),u(N,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(ge,{color:"success",children:"New Equipment"})}),e(O,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:u(y,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(y,{item:!0,xs:1,children:e(ht,{weaponId:t.newWeapon,weaponTypeKey:g})}),Object.entries(t.newArtifacts).map(([m,x])=>e(y,{item:!0,xs:1,children:e(ut,{artifactId:x,slotKey:m})},x||m))]})})]})]})}),u(O,{sx:{pt:"0",display:"flex",flexDirection:"column"},children:[e(b,{sx:{fontSize:20},children:"Do you want to make the changes shown above?"}),e(Oo,{label:u(ie,{children:["Copy the current equipment in"," ",e("strong",{children:t.currentName})," to a new build. Otherwise, they will be overwritten."]}),control:e(Do,{checked:i,onChange:m=>c(m.target.checked),color:i?"success":"secondary"})}),i&&e(Je,{label:"Build Name",placeholder:`Duplicate of ${t.currentName}`,value:s,onChange:m=>o(m.target.value),size:"small",sx:{width:"75%",marginX:4}}),u(f,{sx:{display:"flex",justifyContent:"flex-end",gap:1,marginTop:4},children:[e(B,{color:"error",onClick:n,children:"Cancel"}),e(B,{color:"success",onClick:C,children:"Equip"})]})]})]})})}function _c({artifacts:t}){const a=l.useMemo(()=>{const n=t.filter(r=>r).reduce((r,s)=>(r[s.setKey]?r[s.setKey].push(s.slotKey):r[s.setKey]=[s.slotKey],r),{});return Object.keys(n).forEach(r=>{var s;((s=n[r])==null?void 0:s.length)===1&&delete n[r]}),n},[t]);return e(ie,{children:Object.entries(a).sort(([n,r],[s,o])=>o.length-r.length).map(([n,r])=>e(Rc,{setKey:n,slotarr:r},n))})}function Rc({setKey:t,slotarr:a}){const n=tn(t),r=a.length,s=Object.keys(n.setEffects).map(o=>parseInt(o)).filter(o=>o<=r);return e(f,{children:e(Mr,{artifactSheet:n,numInSet:r,children:e(ne,{sx:{height:"100%"},color:"primary",children:u(b,{children:[a.map(o=>e(Vr,{slotKey:o,iconProps:pe},o))," ",n.name??"",s.map((o,i)=>e(ne,{sx:{ml:.5},color:"success",children:o},""+o+i))]})})})})}var oa={},Lc=Le;Object.defineProperty(oa,"__esModule",{value:!0});var Bt=oa.default=void 0,kc=Lc(Re()),Sc=U,$c=(0,kc.default)((0,Sc.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");Bt=oa.default=$c;var sa={},Tc=Le;Object.defineProperty(sa,"__esModule",{value:!0});var At=sa.default=void 0,Dc=Tc(Re()),jc=U,Ic=(0,Dc.default)((0,jc.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");At=sa.default=Ic;function Uc({setKey:t,buttonGroupSx:a}){const{t:n}=K("sheet"),{teamChar:{optConfigId:r}}=l.useContext(be),{artSetExclusion:s}=He(r),o=(s==null?void 0:s[t])??[],i=o.includes(2),c=o.includes(4),p=$();return u(kr,{sx:a,fullWidth:!0,children:[e(B,{startIcon:i?e(xa,{}):e(Ca,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ba(s,t,2)}),color:i?"secondary":"success",endIcon:i?e(Bt,{}):e(At,{}),children:n`2set`}),e(B,{startIcon:c?e(xa,{}):e(Ca,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ba(s,t,4)}),color:c?"secondary":"success",endIcon:c?e(Bt,{}):e(At,{}),children:n`4set`})]})}function Mc({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r}){var Ee;const{loadoutDatum:{buildType:s,buildId:o},teamChar:{optConfigId:i,buildIds:c=[]}}=l.useContext(be),{character:{key:p,equippedArtifacts:d,equippedWeapon:h}}=l.useContext(H),{mainStatAssumptionLevel:g,allowLocationsState:C}=He(i)??{mainStatAssumptionLevel:0,allowLocationsState:"all"},m=$(),{data:x,oldData:_}=l.useContext(Z),[v,S]=Fe();l.useEffect(()=>{const j=c.map(W=>m.builds.follow(W,S));return()=>j.forEach(W=>W())},[m,c,S]);const k=l.useMemo(()=>{var j;return{oldId:(j=_==null?void 0:_.get(z.weapon.id))==null?void 0:j.value,newId:x.get(z.weapon.id).value??""}},[x,_]),[M,T,D]=se(!1),I=l.useMemo(()=>Ke(he,j=>{var W;return{oldId:(W=_==null?void 0:_.get(z.art[j].id))==null?void 0:W.value,newId:x.get(z.art[j].id).value??""}}),[x,_]),[F,R]=l.useState(),w=l.useCallback(()=>R(void 0),[R]),A=o&&s==="real",L=l.useCallback(()=>{if(A){m.builds.set(o,{weaponId:x.get(z.weapon.id).value,artifactIds:Ke(he,ye=>{var Me;return(Me=x.get(z.art[ye].id).value)==null?void 0:Me.toString()})});return}const j=m.chars.get(p);if(!j)return;he.forEach(ye=>{var Ge;const Me=(Ge=x.get(z.art[ye].id).value)==null?void 0:Ge.toString();if(Me)m.arts.set(Me,{location:Te(p)});else{const yt=j.equippedArtifacts[ye];yt&&m.arts.get(yt)&&m.arts.set(yt,{location:""})}});const W=x.get(z.weapon.id).value;W&&m.weapons.set(W,{location:Te(p)})},[p,A,o,x,m]),q=l.useMemo(()=>Object.fromEntries(he.map(j=>{var W;return[j,(W=x.get(z.art[j].id).value)==null?void 0:W.toString()]})),[x]),re=l.useMemo(()=>q&&Object.values(q).map(j=>m.arts.get(j)).filter(j=>j),[q,m.arts]),te=l.useMemo(()=>e(y,{item:!0,xs:1,children:e(ht,{showLocation:!0,weaponId:x.get(z.weapon.id).value,onClick:T})}),[x,T]),Y=l.useMemo(()=>he.map(j=>e(y,{item:!0,xs:1,children:e(ut,{showLocation:!0,slotKey:j,artifactId:q[j],mainStatAssumptionLevel:g,onClick:()=>{const W=I[j].oldId,ye=I[j].newId;R({oldId:W!==ye?W:void 0,newId:ye})}})},j)),[R,I,g,q]),ae=he.every(j=>q[j]===d[j])&&x.get(z.weapon.id).value===h,V=l.useMemo(()=>v&&c.filter(j=>{const W=m.builds.get(j);if(!W)return!1;const{artifactIds:ye,weaponId:Me}=W;return he.every(Ge=>q[Ge]===ye[Ge])&&x.get(z.weapon.id).value===Me}),[v,m,c,q,x]),G=s==="real"&&V.includes(o),E=G||s==="equipped"&&ae,oe=l.useMemo(()=>v&&s==="real"?m.builds.get(o).weaponId:v&&s==="equipped"?h:"",[v,m,s,o,h]),Ie=l.useMemo(()=>v&&s==="real"?m.builds.get(o).artifactIds:v&&s==="equipped"?d:Ke(he,()=>""),[v,m,s,o,d]),[Ne,Ue,le]=se(),ue={currentName:s==="real"?m.builds.get(o).name:"Equipped",currentWeapon:oe,currentArtifacts:Ie,newWeapon:x.get(z.weapon.id).value,newArtifacts:Ke(he,j=>x.get(z.art[j].id).value)};return e(zt,{sx:{boxShadow:E?"0px 0px 0px 2px green inset":void 0},children:u(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:600}),children:[k&&e(Bc,{newOld:k,showWeapon:M,onClose:D}),F&&e(Ac,{newOld:F,mainStatAssumptionLevel:g,onClose:w,allowLocationsState:C}),u(O,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(f,{display:"flex",gap:1,flexWrap:"wrap",children:[t!==void 0&&e(ge,{color:ae?"success":"info",children:u(b,{sx:{display:"flex",gap:1},children:[e("strong",{children:t}),ae&&e("span",{children:"(Equipped)"})]})}),!!V.length&&e(ge,{color:G?"success":"info",children:u(b,{sx:{display:"flex",gap:1},children:[e(De,{}),e("span",{children:(Ee=m.builds.get(G?o:V[0]))==null?void 0:Ee.name}),G&&e("span",{children:"(current build)"}),V.length>1&&e(Q,{arrow:!0,title:e(f,{children:V.map(j=>{var W;return u(b,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),(W=m.builds.get(j))==null?void 0:W.name]})})}),children:e($e,{})})]})}),e(_c,{artifacts:re}),e(f,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(wc,{equipChangeProps:ue,showPrompt:Ne,onEquip:L,OnHidePrompt:le}),e(B,{size:"small",color:"success",onClick:Ue,disabled:r||G,startIcon:e(qo,{}),children:"Equip to Current Build"}),a]}),e(f,{children:u(y,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[te,Y]})}),e(yc,{})]})]})})}function Bc({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const s=$(),o=a!==t,i=l.useCallback(c=>s.weapons.remove(c),[s]);return e(rt,{open:n,onClose:r,containerProps:{maxWidth:o?"md":"xs"},children:e(we,{children:u(O,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[o&&u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(b,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(b,{variant:"h6",textAlign:"center",color:"info",children:e(ge,{children:"TC Weapon"})}):e(ct,{weaponId:a,onDelete:i})]}),o&&e(f,{display:"flex",flexGrow:1}),o&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(nn,{sx:{fontSize:40}})}),o&&e(f,{display:"flex",flexGrow:1}),u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(b,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(ct,{weaponId:t,onDelete:i})]})]})})})}function Ac({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:s}){var g;const o=$(),{character:{key:i}}=l.useContext(H),c=((g=o.arts.get(t))==null?void 0:g.location)??"",p=Ut(t),d=Ut(a),h=l.useCallback(C=>o.arts.remove(C),[o]);return e(rt,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(we,{children:u(O,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(b,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(b,{variant:"h6",textAlign:"center",color:"info",children:e(ge,{children:"TC Artifact"})}):e(lt,{artifactId:a,onDelete:h,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:d==null?void 0:d.slotKey}}),a!=="tc"&&e(ka,{id:a})]}),a&&e(f,{display:"flex",flexGrow:1}),a&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(nn,{sx:{fontSize:40}})}),a&&e(f,{display:"flex",flexGrow:1}),u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(N,{bgt:"light",sx:{p:1},children:e(b,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(lt,{artifactId:t,onDelete:h,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:p==null?void 0:p.slotKey}}),p&&e(ka,{id:t}),c&&c!==Te(i)&&s!=="all"&&e(zc,{locationKey:c}),p&&Fn.includes(p.setKey)&&e(Uc,{setKey:p.setKey})]})]})})})}function ka({id:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(be),r=$(),{artExclusion:s}=He(n),o=s.includes(t),i=l.useCallback(()=>r.optConfigs.set(n,{artExclusion:Da(s,t)}),[t,s,r,n]);return n?e(ot,{title:e(f,{children:e(b,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(B,{onClick:i,color:o?"secondary":"success",size:"small",startIcon:o?e(Qa,{}):e(en,{}),children:a`excludeArt.includeArtifactButton`})}):null}function zc({locationKey:t}){const{t:a}=K("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(be),r=$(),s=de(r.chars.LocationToCharacterKey(t)),{excludedLocations:o}=He(n)??{excludedLocations:[]},i=o.includes(t),c=l.useCallback(()=>r.optConfigs.set(n,{excludedLocations:Da(o,t)}),[t,o,r,n]);return n?e(B,{onClick:c,color:i?"secondary":"success",size:"small",startIcon:i?e(Qa,{}):e(en,{}),children:u("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:s.name})]})}):null}function Oc(t=0,a,n){const{teamId:r,teamCharId:s}=l.useContext(be);return Nc(r,s,t,a,n)}function Nc(t,a,n=0,r,s){const o=$(),[i,c]=Fe(),p=l.useDeferredValue(i),{gender:d}=Ce(),{loadoutData:h}=hr(t)??{loadoutData:[]},g=l.useMemo(()=>p&&Ec(o,t,d,a,n,r,s),[p,d,t,o,n,a,r,s]);return l.useEffect(()=>t?o.teams.follow(t,c):void 0,[t,c,o]),l.useEffect(()=>{if(!i)return()=>{};const C=h.map(m=>{if(!m)return()=>{};const x=o.teamChars.follow(m.teamCharId,c),_=o.teamChars.followChar(m.teamCharId,c),v=o.teams.followLoadoutDatum(m,c);return()=>{x(),_(),v()}});return()=>{C.forEach(m=>m())}},[i,o,h,c]),g}function Ec(t,a,n,r,s=0,o,i){if(!a)return;const c=t.teams.getActiveTeamChar(a);if(!c)return;const{teamData:p,teamBundle:d}=Wc(t,a,r,s,o,i)??{};if(!p||!d)return;const h=yr(p,n,c.key);return at(h,(C,m)=>{const{data:x,..._}=d[m];return{...C,..._}})}function Wc(t,a,n,r=0,s,o){if(!a)return;const i=t.teams.get(a);if(!i)return;const{loadoutData:c,enemyOverride:p,conditional:d}=i,h=c.map(m=>{if(!m)return;const{teamCharId:x,buildType:_,buildTcId:v}=m,S=t.teamChars.get(x);if(!S)return;const{key:k,infusionAura:M,customMultiTargets:T,conditional:D,bonusStats:I,hitMode:F,reaction:R}=S,w=t.chars.get(k);if(!w)return;const{key:A,level:L,constellation:q,ascension:re,talent:te}=w,Y=x===n,ae=(()=>o&&Y?o:t.teams.getLoadoutWeapon(m))(),V=(()=>s&&Y?s:_==="tc"&&v?pr(t.buildTcs.get(v)):Object.values(t.teams.getLoadoutArtifacts(m)).filter(E=>E))(),G=(()=>r&&Y?r:0)();return Pc(t,Y,G,{key:A,level:L,constellation:q,ascension:re,talent:te,infusionAura:M,customMultiTargets:T,conditional:{...D,...d},bonusStats:I,enemyOverride:p,hitMode:F,reaction:R},ae,V)}).filter(m=>m),g=Object.fromEntries(h.filter(m=>m).map(m=>[m.character.key,m]));return{teamData:at(g,({data:m})=>m),teamBundle:g}}function Pc(t,a=!1,n,r,s,o){const i=t.chars.get(r.key),c=de(r.key,t.gender);if(!c)return;const p=Ct(s.key);if(!p)return;const d=an.getAllDataOfType(c.weaponTypeKey),h=a?(()=>{const{display:x,..._}=p.data;return ya([_,d])})():p.data,g=ya([c.data,h,qr]),m=[...Array.isArray(o)?o.map(x=>vr(x,n)):[o],wr(r,a?g:void 0),Pa(s),g,_r,mr];return{character:i,weapon:s,characterSheet:c,weaponSheet:p,data:m}}const $t={mx:.25,px:.25};function Fc({reaction:t}){const{t:a}=K("sheet_gen"),n=t==="spread"?"dendro":"electro";return u(f,{display:"flex",alignItems:"center",children:[e(xt,{color:t,children:a(`reaction.${t}`)}),e(ne,{sx:$t,color:"dendro",children:e(qn,{...pe})}),"+",e(ne,{sx:$t,color:"electro",children:e(ja,{...pe})}),"+",e(ne,{sx:$t,color:n,children:e(Gt,{ele:n,iconProps:pe})})]})}const ju={"":e("span",{children:"No Team Melee Infusion"}),pyro:u("span",{children:[e(Hn,{...pe})," ",e(ne,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:u("span",{children:[e(Vn,{...pe})," ",e(ne,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:u("span",{children:[e(Gn,{...pe})," ",e(ne,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:u("span",{children:[e(ja,{...pe})," ",e(ne,{children:"Somnia Burst"})," ","Parallax Paws"]})};function qc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{reaction:r}}=l.useContext(be),s=$(),{data:o}=l.useContext(Z),i=o.get(z.charEle).value,c=o.get(Rr).value,p=[...new Set([...va[i]??[],...va[c]??[],...wa[i]??[],...wa[c]??[]])];return u(bt,{exclusive:!0,baseColor:"secondary",value:r,onChange:(d,h)=>s.teamChars.set(n,{reaction:h}),disabled:!n,...t,children:[e(Pe,{value:"",disabled:!r,children:a`noReaction`}),p.map(d=>e(Pe,{value:d,disabled:r===d,children:[...Kn].includes(d)?e(Tr,{reaction:d}):e(Fc,{reaction:d})},d))]})}function Hc(t){const{t:a}=K("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=l.useContext(be),s=$();return e(bt,{exclusive:!0,baseColor:"secondary",value:r,onChange:(o,i)=>s.teamChars.set(n,{hitMode:i}),disabled:!n,...t,children:Yn.map(o=>e(Pe,{value:o,disabled:r===o,children:a(`hitmode.${o}`)},o))})}function fn({artId:t,weaponId:a}){const{t:n}=K("page_character"),[r,s,o]=se(!1);return u(ie,{children:[e(nt,{open:r,onClose:o,containerProps:{maxWidth:"xl"},children:e(Vc,{artId:t,weaponId:a,onHide:o})}),e(Q,{title:e(b,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(B,{color:"info",size:"small",onClick:s,children:e(Br,{})})})]})}function Vc(t){var r;const a=l.useContext(be),n=l.useContext(H);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(Gc,{...t}):n!=null&&n.character?e(Kc,{...t}):null}function Gc({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:s}}=l.useContext(H),{loadoutDatum:o,teamChar:{optConfigId:i}}=l.useContext(be),{mainStatAssumptionLevel:c}=He(i),{data:p}=l.useContext(Z),d=l.useMemo(()=>{const C=r.arts.get(t??""),m=r.teams.getLoadoutArtifacts(o),x=at(m,(_,v)=>v===(C==null?void 0:C.slotKey)?C:_);return Object.values(x).filter(_=>_)},[r,o,t]),h=Oc(c,d,a?r.weapons.get(a):void 0),g=l.useMemo(()=>h&&{data:h[s].target,teamData:h,oldData:p},[s,h,p]);return g?e(gn,{dataProviderValue:g,onHide:n}):null}function Kc({artId:t,weaponId:a,onHide:n}){const r=$(),{character:{key:s,equippedArtifacts:o}}=l.useContext(H),{data:i}=l.useContext(Z),c=l.useMemo(()=>{const h=r.arts.get(t??""),g=at(o,(C,m)=>m===(h==null?void 0:h.slotKey)?h:r.arts.get(C));return Object.values(g).filter(C=>C)},[r,o,t]),p=Ft(s,0,c,a?r.weapons.get(a):void 0),d=l.useMemo(()=>p&&{data:p[s].target,teamData:p,oldData:i},[s,p,i]);if(d)return e(gn,{dataProviderValue:d,onHide:n})}function gn({dataProviderValue:t,onHide:a}){return e(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:600}),children:t&&e(Z.Provider,{value:t,children:e(Mc,{extraButtonsLeft:u(ie,{children:[e(Hc,{size:"small"}),e(qc,{size:"small"})]}),extraButtonsRight:e(B,{size:"small",color:"error",onClick:a,children:e(_e,{})})})})})}const Yc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Xc=l.lazy(()=>Ia(()=>import("./ArtifactEditor-8e1fed0b.js"),["./ArtifactEditor-8e1fed0b.js","./index-7930126e.js","./index-b6829c4f.css","./ChevronRight-a28662e9.js","./index-78a6cf62.js","./ColoredText-a9e8450d.js","./SqBadge-088dde18.js","./Close-9ef2b3d2.js","./InfoTooltip-2825b705.js","./BootstrapTooltip-b128342d.js","./LockOpen-1ed8dde6.js","./ArtifactRarityDropdown-824243f8.js","./index-6a1205f6.js","./ConditionalWrapper-4bf56f1c.js","./StarDisplay-1dd420b5.js","./DropdownButton-cdb73e26.js","./ArtifactStatKeyDisplay-6121c14e.js","./Artifact-5c3ecf45.js","./SlotIcon-159d47e8.js","./ArtifactSort-74b9fd1c.js","./CardActionArea-fdaaa46e.js","./TextButton-ca97bf97.js","./CardHeader-4dfdabff.js"],import.meta.url)),Jc=l.lazy(()=>Ia(()=>import("./ArtifactFilterDisplay-315bbf80.js").then(t=>t.b),["./ArtifactFilterDisplay-315bbf80.js","./index-7930126e.js","./index-b6829c4f.css","./LockOpen-1ed8dde6.js","./useDisplayArtifact-6f4d3d2e.js","./SolidToggleButtonGroup-295b022e.js","./totalUtils-af4c9996.js","./BootstrapTooltip-b128342d.js","./StarDisplay-1dd420b5.js","./DropdownButton-cdb73e26.js","./ColoredText-a9e8450d.js","./index-78a6cf62.js","./SqBadge-088dde18.js","./ArtifactStatKeyDisplay-6121c14e.js","./Artifact-5c3ecf45.js","./ConditionalWrapper-4bf56f1c.js","./index-6a1205f6.js","./SlotIcon-159d47e8.js"],import.meta.url));function xn({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:s}=K(["page_character","artifact"]),o=$(),i=l.useCallback(R=>{t(R),r()},[t,r]),c=l.useCallback((R,w)=>({...R,...w,slotKeys:[a]}),[a]),[p,d,h]=se(!1),[g,C]=l.useReducer(c,{...Ar(),slotKeys:[a]}),[m,x]=Fe();l.useEffect(()=>o.arts.followAny(x),[o,x]);const _=Ga(),v=l.useMemo(()=>zr(),[]),S=o.arts.values.filter(R=>R.slotKey===g.slotKeys[0]).length,k=l.useMemo(()=>{const R=Jt(g,v);return m&&o.arts.values.filter(R).map(w=>w.id)},[m,o,v,g]),{numShow:M,setTriggerElement:T}=Ka(Yc[_],k.length),D=l.useMemo(()=>k.slice(0,M),[k,M]),I=k.length!==S?`${k.length}/${S}`:`${S}`,F={numShowing:D.length,total:I,t:s,namespace:"artifact"};return e(rt,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:u(we,{children:[e(l.Suspense,{fallback:!1,children:e(Xc,{artifactIdToEdit:p?"new":"",cancelEdit:h,allowUpload:!0,allowEmpty:!0,fixedSlotKey:g.slotKeys[0]})}),u(O,{sx:{py:1,display:"flex",alignItems:"center"},children:[u(b,{variant:"h6",children:[a?e(je,{src:qe.slot[a]}):null," ",s`tabEquip.swapArt`]}),e(ee,{onClick:r,sx:{ml:"auto"},children:e(_e,{})})]}),e(J,{}),e(O,{children:e(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:200}),children:e(Jc,{filterOption:g,filterOptionDispatch:C,filteredIds:k,disableSlotFilter:!0})})}),e(J,{}),u(O,{children:[e(f,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Ya,{showingTextProps:F})}),e(B,{fullWidth:!0,onClick:d,color:"info",startIcon:e(Za,{}),children:s("artifact:addNew")}),e(f,{mt:1,children:e(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:300}),children:e(y,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:D.map(R=>e(y,{item:!0,xs:1,children:e(lt,{artifactId:R,extraButtons:e(fn,{artId:R}),onClick:i})},R))})})}),k.length!==D.length&&e(ce,{ref:R=>{R&&T(R)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const Zc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},Qc=ea([...Ua]);function ia({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:s}=K(["page_character","page_weapon","weaponNames_gen"]),o=$(),[i,c]=l.useState(!1),p=l.useCallback(L=>{t(L),r()},[t,r]),[d,h]=l.useState(""),g=l.useCallback(L=>{h(o.weapons.new(Xn(L)))},[o,h]),C=l.useCallback(()=>h(""),[]),[m,x]=Fe();l.useEffect(()=>o.weapons.followAny(x),[x,o]);const _=Ga(),[v,S]=l.useState([5,4,3]),[k,M]=l.useState(""),T=l.useDeferredValue(k),D=l.useMemo(()=>(m&&o.weapons.values.filter(Jt({weaponType:a,rarity:v,name:T},Or())).sort(Xa(Er.level??[],!1,Nr())).map(L=>L.id))??[],[m,o,v,a,T]),{numShow:I,setTriggerElement:F}=Ka(Zc[_],D.length),R=l.useMemo(()=>D.slice(0,I),[D,I]),w=`${D.length}`,A={numShowing:R.length,total:w,t:s,namespace:"page_weapon"};return u(ie,{children:[e(l.Suspense,{fallback:!1,children:e(Yr,{show:i,onHide:()=>c(!1),onSelect:g,weaponTypeFilter:a})}),e(l.Suspense,{fallback:!1,children:e(qa,{weaponId:d,footer:!0,onClose:C})}),e(rt,{open:n,onClose:r,children:u(N,{children:[e(fe,{title:u(b,{variant:"h6",display:"flex",gap:1,children:[a?e(je,{src:qe.weaponTypes[a]}):null,e("span",{children:s`page_character:tabEquip.swapWeapon`})]}),action:e(ee,{onClick:r,children:e(_e,{})})}),e(J,{}),u(O,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(y,{container:!0,spacing:1,children:[e(y,{item:!0,children:e(bt,{sx:{height:"100%"},value:v,size:"small",children:Ua.map(L=>e(Pe,{value:L,onClick:()=>S(Qc(v,L)),children:u(f,{display:"flex",children:[e("strong",{children:L}),e(Ja,{})]})},L))})}),e(y,{item:!0,flexGrow:1,children:e(Je,{autoFocus:!0,size:"small",value:k,onChange:L=>M(L.target.value),label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(f,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Ya,{showingTextProps:A})}),e(B,{fullWidth:!0,onClick:()=>c(!0),color:"info",startIcon:e(Za,{}),children:s("page_weapon:addWeapon")}),e(y,{container:!0,spacing:1,children:R.map(L=>e(y,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(ct,{weaponId:L,onClick:p,extraButtons:e(fn,{weaponId:L})})},L))}),D.length!==R.length&&e(ce,{ref:L=>{L&&F(L)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})]})}const ed={xs:1,sm:2,md:3,lg:3,xl:3};function td({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:r,setArtifact:s}){const o=$(),[i,c]=l.useState("");l.useEffect(()=>{a&&i&&i!==a&&c(a)},[i,a]);const p=l.useCallback(()=>a&&c(a),[a]),d=l.useCallback(()=>c(""),[]);return u(f,{children:[e(qa,{weaponId:i,footer:!0,onClose:d,extraButtons:e(sd,{weaponTypeKey:t,onChangeId:r})}),u(y,{item:!0,columns:ed,container:!0,spacing:1,children:[e(y,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&o.weapons.keys.includes(a)?e(ct,{weaponId:a,onEdit:p,extraButtons:e(od,{weaponTypeKey:t,onChangeId:r})}):e(ad,{weaponTypeKey:t,onChangeId:r})}),!!n&&Object.entries(n).map(([h,g])=>e(y,{item:!0,xs:1,children:o.arts.keys.includes(g)?e(lt,{artifactId:g,extraButtons:e(rd,{slotKey:h,onChangeId:C=>s(h,C)}),editorProps:{}}):e(nd,{slotKey:h,onChangeId:C=>s(h,C)})},g||h))]})]})}function ad({weaponTypeKey:t,onChangeId:a}){const[n,r,s]=se();return u(N,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(O,{children:u(b,{children:[e(je,{src:qe.weaponTypes[t]})," ",t]})}),e(J,{}),u(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(ia,{weaponTypeKey:t,show:n,onClose:s,onChangeId:a}),e(B,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Ve,{sx:{height:100,width:100}})})]})]})}function nd({slotKey:t,onChangeId:a}){const[n,r,s]=se(),{t:o}=K("artifact");return u(N,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(O,{children:u(b,{children:[e(on,{iconProps:pe,slotKey:t})," ",o(`slotName.${t}`)]})}),e(J,{}),u(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(xn,{slotKey:t,show:n,onClose:s,onChangeId:a}),e(B,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Ve,{sx:{height:100,width:100}})})]})]})}function rd({slotKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=se();return u(ie,{children:[e(Q,{title:e(b,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(B,{color:"info",size:"small",onClick:s,children:e(Ve,{})})}),e(xn,{slotKey:t,show:r,onClose:o,onChangeId:a})]})}function od({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=se();return u(ie,{children:[e(Q,{title:e(b,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(B,{color:"info",size:"small",onClick:s,children:e(Ve,{})})}),e(ia,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function sd({weaponTypeKey:t,onChangeId:a}){const{t:n}=K("page_character"),[r,s,o]=se();return u(ie,{children:[e(B,{color:"info",onClick:s,startIcon:e(Ve,{}),children:n`tabEquip.swapWeapon`}),e(ia,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function id({talentKey:t,dropDownButtonProps:a}){const{t:n}=K("sheet_gen"),{character:{talent:r,key:s}}=l.useContext(H),o=$(),{data:i}=l.useContext(Z),c=i.get(me.total[`${t}Boost`]).value,p=i.get(me.total[t]).value,d=i.get(me.asc).value;return e(Fo,{fullWidth:!0,title:n("talentLvl",{level:p}),color:c?"info":"primary",...a,children:Ot(1,Jn[d]).map(h=>e(Zr,{selected:r[t]===h,disabled:r[t]===h,onClick:()=>o.chars.set(s,g=>{g.talent[t]=h}),children:n("talentLvl",{level:h+c})},h))})}var la={},ld=Le;Object.defineProperty(la,"__esModule",{value:!0});var Cn=la.default=void 0,cd=ld(Re()),dd=U,ud=(0,cd.default)((0,dd.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart");Cn=la.default=ud;var ca={},hd=Le;Object.defineProperty(ca,"__esModule",{value:!0});var da=ca.default=void 0,pd=hd(Re()),md=U,fd=(0,pd.default)((0,md.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");da=ca.default=fd;var ua={},gd=Le;Object.defineProperty(ua,"__esModule",{value:!0});var ha=ua.default=void 0,xd=gd(Re()),Cd=U,bd=(0,xd.default)((0,Cd.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm15 0h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"DashboardCustomize");ha=ua.default=bd;function yd(){return u(Wt,{severity:"info",children:["A ",e("strong",{children:"Build"})," is comprised of a weapon and 5 artifacts. A"," ",e("strong",{children:"TC Build"})," allows the artifacts to be created from its stats."]})}function vd(){return u(Wt,{severity:"info",children:[e("strong",{children:"Loadouts"})," provides character context data, including bonus stats, conditionals, multi-targets, optimization config, and stores builds. A single ",e("strong",{children:"Loadout"})," can be used for many teams."]})}function wd({teamCharId:t}){const a=$(),n=a.teamChars.get(t),[r,s]=l.useState(n.name),o=l.useDeferredValue(r),[i,c]=l.useState(n.description),p=l.useDeferredValue(i);return l.useEffect(()=>{const d=a.teamChars.get(t);if(!d)return;const{name:h,description:g}=d;s(h),c(g)},[a,t]),l.useEffect(()=>{a.teamChars.set(t,d=>{d.name=o})},[a,o]),l.useEffect(()=>{a.teamChars.set(t,d=>{d.description=p})},[a,p]),u(ie,{children:[e(Je,{fullWidth:!0,label:"Loadout Name",placeholder:"Loadout Name",value:r,onChange:d=>s(d.target.value)}),e(Je,{fullWidth:!0,label:"Loadout Description",placeholder:"Loadout Description",value:i,onChange:d=>c(d.target.value),multiline:!0,minRows:2})]})}var pa={},_d=Le;Object.defineProperty(pa,"__esModule",{value:!0});var bn=pa.default=void 0,Rd=_d(Re()),Ld=U,kd=(0,Rd.default)((0,Ld.jsx)("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science");bn=pa.default=kd;function yn({name:t,description:a,active:n=!1,onActive:r,children:s,onEdit:o,onCopyToTc:i,onDupe:c,onEquip:p,onRemove:d,hideFooter:h=!1}){const g=u(ie,{children:[e(fe,{title:t,action:a&&e(Q,{title:e(b,{children:a}),children:e($e,{})})}),e(O,{sx:{pt:0,pb:1},children:s})]});return u(N,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:n?"0px 0px 0px 2px green inset":void 0},children:[r?e(Oe,{onClick:r,children:g}):g,!h&&u(Ma,{sx:{display:"flex",justifyContent:"space-around",marginTop:"auto"},children:[e(Q,{title:e(b,{children:"Edit Build Settings"}),placement:"top",arrow:!0,children:e(ee,{color:"info",size:"small",onClick:o,disabled:!o,children:e("span",{children:e(Ur,{})})})}),e(Q,{title:e(b,{children:"Copy to TC Builds"}),placement:"top",arrow:!0,children:e(ee,{color:"info",size:"small",onClick:i,disabled:!i,children:e(bn,{})})}),e(Q,{title:e(b,{children:"Duplicate Build"}),placement:"top",arrow:!0,children:e(ee,{color:"info",size:"small",onClick:c,disabled:!c,children:e(da,{})})}),e(Q,{title:e(b,{children:"Equip Build"}),placement:"top",arrow:!0,children:e(ee,{color:"info",size:"small",onClick:p,disabled:!p,children:e(De,{})})}),e(Q,{title:e(b,{children:"Delete Build"}),placement:"top",arrow:!0,children:e(ee,{color:"error",size:"small",onClick:d,disabled:!d,children:e(ft,{})})})]})]})}function Sd({buildId:t,characterKey:a}){const{name:n,description:r,weaponId:s,artifactIds:o}=eo(t),i=Et(a).weaponType;return e(yn,{name:n,description:r,hideFooter:!0,children:e(f,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:u(y,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:3,xl:3},children:[e(y,{item:!0,xs:1,children:e(ht,{weaponId:s,weaponTypeKey:i})}),Object.entries(o).map(([c,p])=>e(y,{item:!0,xs:1,children:e(ut,{artifactId:p,slotKey:c})},p||c))]})})})}function $d({buildTcId:t}){const a=rn(t),{name:n,description:r}=a;return e(yn,{name:n,description:r,hideFooter:!0,children:e(Td,{buildTcId:t})})}function Td({buildTcId:t}){const{weapon:a,artifact:{slots:n,substats:{stats:r},sets:s}}=rn(t),o=Ct(a.key),i=Object.entries(r),c=i.slice(0,5),p=i.slice(5);return e(f,{children:u(y,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:2,xl:2},children:[e(y,{item:!0,xs:1,children:u(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(mn,{weapon:a,weaponSheet:o}),!!Object.keys(s).length&&e(N,{sx:{flexGrow:1},children:e(f,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:Object.entries(s).map(([d,h])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(je,{size:2,src:Na(d,"flower")}),e("span",{children:e(Gr,{setKey:d})}),u(ge,{children:["x",h]})]},d))})})]})}),e(y,{item:!0,xs:1,children:e(N,{sx:{flexGrow:1,height:"100%",p:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"space-between"},children:Object.entries(n).map(([d,{level:h,statKey:g}])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(on,{slotKey:d}),u(ge,{children:["+",h]}),e(Mt,{statKey:g})]},d))})}),[c,p].map((d,h)=>e(y,{item:!0,xs:1,children:e(N,{sx:{flexGrow:1,height:"100%"},children:e(f,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1},children:d.map(([g,C])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[e(Mt,{statKey:g}),u("span",{children:[Ta(C,it(g)),it(g)]})]},g))})})},h))]})})}var ma={},Dd=Le;Object.defineProperty(ma,"__esModule",{value:!0});var vn=ma.default=void 0,jd=Dd(Re()),Id=U,Ud=(0,jd.default)((0,Id.jsx)("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"}),"TrackChanges");vn=ma.default=Ud;function Md({optimizationTarget:t,showEmptyTargets:a=!1}){const{t:n}=K("page_character_optimize"),{data:r}=l.useContext(Z),s=$(),o=l.useMemo(()=>t&&pn(r,t[0],s),[r,t,s]),i=n("targetSelector.selectOptTarget"),{title:c,icon:p,action:d}=o??{},h=t&&Zn(r.getDisplay(),t),g=!t||!o||!h||!a&&h.isEmpty,C=g?"secondary":h.info.variant,m=C==="invalid"?void 0:C,{textSuffix:x}=(h==null?void 0:h.info)??{},_=x&&u("span",{children:[" ",x]}),v=p?e(je,{src:p,size:2}):h==null?void 0:h.info.icon;return u(N,{bgt:"light",children:[e(fe,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(vn,{}),e("span",{children:"Optimization Target"})]})}),e(J,{}),e(O,{children:g?e("strong",{children:i}):u($a,{divider:e(J,{orientation:"vertical",flexItem:!0}),spacing:1,children:[u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[v,e("span",{children:c}),!!d&&e(ge,{color:"success",sx:{whiteSpace:"normal"},children:d})]}),e(b,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:u(ge,{color:m,sx:{whiteSpace:"normal"},children:[e("strong",{children:h.info.name}),_]})})]})})]})}function Bd(){return u(Wt,{severity:"info",children:[e("strong",{children:"Teams"})," are a container for 4 character loadouts. It provides a way for characters to apply team buffs, and configuration of enemy stats. Loadouts can be shared between teams."]})}function Ad({show:t,onHide:a,teamCharId:n,onDelete:r,teamIds:s}){const o=$(),{name:i,description:c,buildIds:p,buildTcIds:d,customMultiTargets:h,bonusStats:g}=o.teamChars.get(n),C=l.useCallback(()=>{a(),r()},[r,a]);return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"md"},children:u(N,{children:[e(fe,{title:u("span",{children:["Delete Loadout: ",e("strong",{children:i}),"?"]}),action:e(ee,{onClick:a,children:e(_e,{})})}),e(J,{}),u(O,{children:[c&&e(N,{bgt:"dark",sx:{mb:2},children:e(O,{children:c})}),e(b,{children:"Deleting the Loadout will also delete the following data:"}),u(Qn,{sx:{listStyleType:"disc",pl:4},children:[!!p.length&&e(Be,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved builds: ",p.length," ",e(Q,{title:e(f,{children:p.map(m=>{var x;return u(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(De,{}),e("span",{children:(x=o.builds.get(m))==null?void 0:x.name})]},m)})}),children:e($e,{})})]})}),!!d.length&&e(Be,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved TC builds: ",d.length," ",e(Q,{title:e(f,{children:d.map(m=>{var x;return u(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(De,{}),e("span",{children:(x=o.buildTcs.get(m))==null?void 0:x.name})]},m)})}),children:e($e,{})})]})}),!!h.length&&e(Be,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All Custom Multi-targets: ",h.length," ",e(Q,{title:e(f,{children:h.map((m,x)=>u(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ha,{}),e("span",{children:m.name})]},x))}),children:e($e,{})})]})}),!!Object.keys(g).length&&u(Be,{sx:{display:"list-item"},children:["Bonus stats: ",Object.keys(g).length]}),e(Be,{sx:{display:"list-item"},children:"Optimization Configuration"}),!!s.length&&e(Be,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[u("span",{children:["Any teams with this loadout will have this loadout removed from the team. Teams will not be deleted. Teams affected:"," ",s.length]}),e(Q,{title:e(f,{children:s.map(m=>{var x;return u(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(er,{}),e("span",{children:(x=o.teams.get(m))==null?void 0:x.name})]},m)})}),children:e($e,{})})]})})]})]}),u(Ma,{sx:{float:"right"},children:[e(B,{startIcon:e(_e,{}),color:"secondary",onClick:a,children:"Cancel"}),e(B,{startIcon:e(ft,{}),color:"error",onClick:C,children:"Delete"})]})]})})}function zd({show:t,onHide:a,teamCharId:n,teamIds:r}){const[s,o,i]=se(),c=gt(),p=$(),{key:d,name:h,buildIds:g,buildTcIds:C,customMultiTargets:m,bonusStats:x,optConfigId:_}=fr(n),{optimizationTarget:v}=He(_),S=()=>{a(),p.teamChars.remove(n)},k=()=>{p.teamChars.duplicate(n)&&a()},M=T=>{const D=p.teams.new();p.teams.set(D,I=>{I.loadoutData[0]={teamCharId:T}}),c(`/teams/${D}`,{state:{openSetting:!0}})};return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"lg"},children:u(N,{children:[e(fe,{title:u(f,{display:"flex",gap:1,alignItems:"center",children:[e(za,{}),e("strong",{children:h})]}),action:e(ee,{onClick:a,children:e(_e,{})})}),e(J,{}),u(O,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(vd,{}),e(wd,{teamCharId:n}),e(f,{children:u(y,{container:!0,columns:{xs:1,md:2},spacing:2,children:[e(y,{item:!0,xs:1,children:e(B,{color:"info",onClick:()=>k(),fullWidth:!0,startIcon:e(da,{}),children:"Duplicate Loadout"})}),u(y,{item:!0,xs:1,children:[e(Ad,{show:s,onHide:i,onDelete:S,teamCharId:n,teamIds:r}),e(B,{fullWidth:!0,startIcon:e(ft,{}),color:"error",onClick:o,children:"Delete Loadout"})]})]})}),e(f,{children:u(y,{container:!0,columns:{xs:1,md:2},spacing:2,children:[!!Object.keys(x).length&&e(y,{item:!0,xs:1,children:e(Od,{bonusStats:x})}),!!v&&e(y,{item:!0,xs:1,children:e(Md,{optimizationTarget:v})}),!!m.length&&e(y,{item:!0,xs:1,children:e(Nd,{customMultiTargets:m})})]})})]}),e(J,{}),e(fe,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),e("span",{children:"Builds"})]})}),e(J,{}),u(O,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(yd,{}),e(f,{children:e(y,{container:!0,columns:{xs:1,md:2},spacing:2,children:g.map(T=>e(y,{item:!0,xs:1,children:e(Sd,{buildId:T,characterKey:d})},T))})}),e(f,{children:e(y,{container:!0,columns:{xs:1,md:2},spacing:2,children:C.map(T=>e(y,{item:!0,xs:1,children:e($d,{buildTcId:T})},T))})})]}),e(J,{}),e(fe,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),e("span",{children:"Teams"})]})}),e(J,{}),u(O,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Bd,{}),u(y,{container:!0,columns:{xs:1,md:2},spacing:2,children:[r.map(T=>e(y,{item:!0,xs:1,children:e(Oa,{bgt:"light",teamId:T,onClick:D=>c(`/teams/${T}${D?`/${D}`:""}`)})},T)),e(y,{item:!0,xs:1,children:e(B,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentLight.main"},variant:"outlined",onClick:()=>M(n),color:"info",startIcon:e(Vt,{}),children:"Add new Team"})})]})]})]})})}function Od({bonusStats:t}){return u(N,{bgt:"light",children:[e(fe,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Cn,{}),e("span",{children:"Bonus Stats"})]}),titleTypographyProps:{variant:"h6"}}),e(Ha,{bgt:"light",sections:[{fields:Object.entries(t).map(([a,n])=>({text:st.getStr(a)??a,value:n,unit:it(a)}))}]})]})}function Nd({customMultiTargets:t}){return u(N,{bgt:"light",children:[e(fe,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ha,{}),e("span",{children:"Custom multi-targets"})]}),titleTypographyProps:{variant:"h6"}}),e(Ha,{bgt:"light",sections:[{fields:t.map(({name:a,description:n})=>({text:a,value:n?e(Q,{title:n,children:e($e,{})}):void 0}))}]})]})}const Ed={xs:1,md:2};function Wd({teamCharId:t,teamIds:a}){const n=gt(),r=$(),{name:s,description:o}=r.teamChars.get(t),i=h=>{const g=r.teams.new();r.teams.set(g,C=>{C.loadoutData[0]={teamCharId:h}}),n(`/teams/${g}`,{state:{openSetting:!0}})},[c,p,d]=se();return u(ie,{children:[e(zd,{show:c,onHide:d,teamCharId:t,teamIds:a}),u(N,{bgt:"light",children:[e(Oe,{onClick:p,children:e(O,{children:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(za,{}),e(b,{children:s}),e(tr,{title:e(b,{children:o}),children:e($e,{})}),e(Qr,{sx:{ml:"auto"}})]})})}),e(J,{}),e(O,{children:u(y,{container:!0,columns:Ed,spacing:1,children:[a.map(h=>e(y,{item:!0,xs:1,children:e(Oa,{teamId:h,onClick:g=>n(`/teams/${h}${g?`/${g}`:""}`)})},h)),e(y,{item:!0,xs:1,children:e(B,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentNormal.main"},variant:"outlined",onClick:()=>i(t),color:"info",startIcon:e(Vt,{}),children:"Add new Team"})})]})})]},t)]})}function Pd(){const{t}=K("ui"),a=$(),{character:n}=l.useContext(H),{key:r}=n,{gender:s}=Ce(),o=l.useCallback(()=>a.dbMeta.set({gender:s==="F"?"M":"F"}),[s,a]);return r.startsWith("Traveler")?u(B,{onClick:o,startIcon:s==="F"?e(Ho,{}):e(Vo,{}),children:[e("strong",{children:t(`gender.${s}`)})," "]}):null}function Fd({onClose:t}){const{t:a}=K(["page_character","sillyWisher_charNames","charNames_gen"]),n=gt(),r=$(),{character:s,character:{key:o},characterSheet:i}=l.useContext(H),{gender:c}=Ce(),{silly:p}=l.useContext(mt),d=l.useCallback(async()=>{let h=de(o,c).name;typeof h=="object"&&(h=a(`${p?"sillyWisher_charNames":"charNames_gen"}:${Xe(o,c)}`)),window.confirm(a("removeCharacter",{value:h}))&&(r.chars.remove(o),n("/characters"))},[r,n,o,c,p,a]);return u(f,{display:"flex",flexDirection:"column",gap:1,children:[u(f,{display:"flex",gap:1,children:[e(Pd,{}),e(B,{color:"error",onClick:()=>d(),startIcon:e(ft,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(ee,{onClick:t,children:e(_e,{})})]}),e(f,{children:u(y,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(y,{item:!0,xs:8,sm:5,md:4,lg:3,children:u(N,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(tc,{}),e(f,{sx:{px:1},children:e(Dr,{level:s.level,ascension:s.ascension,setBoth:h=>r.chars.set(o,h)})}),e(f,{sx:{px:2},children:e(sn,{})}),e(b,{sx:{textAlign:"center",pb:-1},variant:"h6",children:i.constellationName}),e(ec,{})]})}),u(y,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(f,{children:e(y,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(h=>{var g;return e(y,{item:!0,xs:1,children:e(id,{talentKey:h,dropDownButtonProps:{startIcon:e(je,{src:(g=i.getTalentOfKey(h))==null?void 0:g.img,size:1.75,sideMargin:!0})}},h)},h)})})}),e(qd,{}),e(Hd,{})]})]})})]})}function qd(){const{character:{key:t}}=l.useContext(H),{data:a}=l.useContext(Z),n=$(),r=Et(t).weaponType,s=a.get(z.weapon.id).value,o=l.useMemo(()=>Ke(he,i=>a.get(z.art[i].id).value),[a]);return e(f,{children:e(td,{weaponTypeKey:r,weaponId:s,artifactIds:o,setWeapon:i=>{n.weapons.set(i,{location:Te(t)})},setArtifact:(i,c)=>{n.arts.set(c,{location:Te(t)})}})})}function Hd(){const t=gt(),{character:{key:a}}=l.useContext(H),n=$(),{gender:r}=Ce(),[s,o]=Fe(),i=l.useMemo(()=>{const p={};return n.teamChars.entries.map(([d,h])=>{h.key===a&&(p[d]||(p[d]=[]))}),n.teams.entries.forEach(([d,h])=>{const g=h.loadoutData.find(C=>{var m;return C&&((m=n.teamChars.get(C==null?void 0:C.teamCharId))==null?void 0:m.key)===a});g&&p[g==null?void 0:g.teamCharId].push(d)}),s&&p},[s,a,n]);l.useEffect(()=>n.teams.followAny(()=>o()),[n,o]),l.useEffect(()=>n.teamChars.followAny(()=>o()),[n,o]);const c=()=>{const p=n.teams.new(),d=n.teamChars.new(a);n.teams.set(p,h=>{h.loadoutData[0]={teamCharId:d}}),t(`/teams/${p}`,{state:{openSetting:!0}})};return u(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(b,{variant:"h6",children:["Team Loadouts with"," ",e(ar,{characterKey:a,gender:r})]}),Object.entries(i).map(([p,d])=>e(Wd,{teamCharId:p,teamIds:d},p)),e(B,{fullWidth:!0,onClick:()=>c(),color:"info",startIcon:e(Vt,{}),variant:"outlined",sx:{backgroundColor:"contentLight.main"},children:"Add new Loadout+Team"}),e(N,{bgt:"light"})]})}function Iu({characterKey:t,onClose:a}){return e(nt,{open:!!t,onClose:a,children:e(l.Suspense,{fallback:e(ce,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Vd,{characterKey:t,onClose:a},t)})})}function Vd({characterKey:t,onClose:a}){const n=qt(t),{gender:r}=Ce(),s=de(t,r),o=Ft(t),{target:i}=(o==null?void 0:o[t])??{},c=na((n==null?void 0:n.key)??""),p=l.useMemo(()=>{if(!(!o||!i))return{data:i,teamData:o,oldData:void 0}},[i,o]),d=l.useMemo(()=>{if(!(!n||!s))return{character:n,characterSheet:s,characterDispatch:c}},[n,s,c]),[h,g]=l.useState(),[C,m]=l.useState(),x=l.useMemo(()=>({chartData:h,setChartData:g,graphBuilds:C,setGraphBuilds:m}),[h,C]);return l.useEffect(()=>{g(void 0),m(void 0)},[t]),e(N,{children:e(O,{sx:{display:"flex",flexDirection:"column",gap:1},children:p&&d&&x?e(H.Provider,{value:d,children:e(Z.Provider,{value:p,children:e(Ri.Provider,{value:x,children:e(Fd,{onClose:a})})})}):e(ce,{variant:"rectangular",width:"100%",height:1e3})})})}function Gd(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>Dt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Xe(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>jt.char.data[Te(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Kd(t,a){return{element:(n,r)=>r.includes(nr(n)),weaponType:(n,r)=>r.includes(jt.char.data[Te(n)].weaponType),rarity:(n,r)=>r.includes(jt.char.data[Te(n)].rarity),name:(n,r)=>r===void 0||Dt.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Xe(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&Dt.t(`charNames_gen:${Xe(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const wn={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Yd=xe(Pe,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),Xd=Yd,Jd=ea([...Pt]);function Zd({value:t,totals:a,onChange:n,...r}){const s=Nt(),o=!It(s.breakpoints.up("md")),i=!It(s.breakpoints.up("sm"));return e(Kr,{exclusive:!0,value:t,...r,children:Pt.map(c=>u(Xd,{value:c,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex"},selectedColor:c,onClick:()=>n(Jd(t,c)),children:[e(Gt,{ele:c,iconProps:{fontSize:o&&!i?"inherit":void 0}}),!i&&e(ve,{sx:{ml:.5},label:a[c],size:"small"})]},c))})}const Qd=Object.keys(wn);function Uu({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:s=!1}){const{t:o}=K(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:i}=l.useContext(mt),c=$(),[p,d]=l.useState(()=>c.displayCharacter.get());l.useEffect(()=>c.displayCharacter.follow((w,A)=>d(A)),[c,d]);const{gender:h}=Ce(),[g,C]=Fe();l.useEffect(()=>c.charMeta.followAny(()=>C()),[C,c]);const[m,x]=l.useState(""),_=l.useDeferredValue(m),v=l.useDeferredValue(p),S=l.useDeferredValue(g),k=l.useMemo(()=>{const{element:w,weaponType:A,sortType:L,ascending:q}=v,re=[...s?["new"]:[],...wn[L]??[]];return S&&Rt.filter(te=>r(te,c.chars.get(te),de(te,h))).filter(Jt({element:w,weaponType:A,name:_},Kd(c,i))).sort(Xa(re,q,Gd(c,i),["new","favorite"]))},[v,s,S,_,c,i,r,h]),M=l.useMemo(()=>_a(or,w=>Rt.forEach(A=>{const L=de(A,c.gender).weaponTypeKey;w[L].total++,k.includes(A)&&w[L].current++})),[k,c]),T=l.useMemo(()=>_a(Pt,w=>Rt.forEach(A=>{const L=de(A,c.gender).elementKey;w[L].total++,k.includes(A)&&w[L].current++})),[k,c]),{weaponType:D,element:I,sortType:F,ascending:R}=p;return e(rt,{open:t,onClose:()=>{x(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:u(we,{children:[u(O,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(f,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Wr,{sx:{height:"100%"},onChange:w=>c.displayCharacter.set({weaponType:w}),value:D,totals:M,size:"small"}),e(Zd,{sx:{height:"100%"},onChange:w=>c.displayCharacter.set({element:w}),value:I,totals:T,size:"small"}),e(ee,{sx:{ml:"auto"},onClick:()=>{x(""),a()},children:e(_e,{})})]}),u(f,{display:"flex",gap:1,children:[e(Je,{autoFocus:!0,value:m,onChange:w=>x(w.target.value),label:o("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),e(Ir,{sortKeys:Qd,value:F,onChange:w=>c.displayCharacter.set({sortType:w}),ascending:R,onChangeAsc:w=>c.displayCharacter.set({ascending:w})})]})]}),e(J,{}),e(Z.Provider,{value:{teamData:void 0},children:e(O,{children:e(y,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:k.map(w=>e(y,{item:!0,xs:1,children:e(tu,{characterKey:w,onClick:()=>{x(""),a(),n==null||n(w)}})},w))})})})]})})}const eu=xe(({className:t,...a})=>e(Q,{...a,classes:{popper:t}}))({[`& .${rr.tooltip}`]:{padding:0}});function tu({characterKey:t,onClick:a}){const{gender:n}=Ce(),r=de(t,n),s=qt(t),{favorite:o}=Ht(t),i=$(),{silly:c}=l.useContext(mt),[p,d,h]=se(),{level:g=1,ascension:C=0,constellation:m=0}=s??{},x=Lr(t,"banner",n);return e(eu,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:p,onClose:h,onOpen:d,title:e(f,{sx:{width:300},children:e(vi,{hideStats:!0,characterKey:t})}),children:e(f,{children:u(zt,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(f,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(ee,{sx:{p:.25},onClick:_=>{h(),i.charMeta.set(t,{favorite:!o})},children:o?e(Zt,{}):e(aa,{})})}),e(Oe,{onClick:a,children:u(f,{display:"flex",position:"relative",className:x?void 0:`grad-${r==null?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${x})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(f,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(f,{component:"img",src:gr(t,n,c),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),u(f,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(b,{variant:"body2",sx:{flexGrow:1},children:e(ne,{color:r==null?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:r==null?void 0:r.name})}),s?u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[u(f,{sx:{textShadow:"0 0 5px gray"},children:[u(b,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",g]}),u(b,{variant:"body2",component:"span",color:"text.secondary",children:["/",sr[C]]})]}),u(b,{variant:"body2",children:["C",m]})]}):e(b,{component:"span",variant:"body2",children:e(ne,{children:"NEW"})}),e(Xt,{stars:(r==null?void 0:r.rarity)??1,colored:!0})]})]})})]})})})}const au=ea([...Ba]);function Mu({value:t,totals:a,onChange:n,...r}){const s=Nt(),o=!It(s.breakpoints.up("sm"));return e(bt,{exclusive:!0,value:t,...r,children:Ba.map(i=>e(Pe,{value:i,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex",gap:o?0:1},onClick:()=>n(au(t,i)),children:u(f,{display:"flex",children:[e("strong",{children:i}),e(Ja,{}),!o&&e(ve,{label:a[i],size:"small"})]})},i))})}export{Nc as $,Fc as A,yn as B,Mu as C,Fo as D,Zd as E,_c as F,Ri as G,hn as H,Wc as I,sn as J,Hc as K,vd as L,gc as M,Mc as N,xc as O,Oc as P,tc as Q,qc as R,on as S,Du as T,ec as U,yc as V,ht as W,na as X,id as Y,bn as Z,Bd as _,vi as a,Kd as b,wn as c,Gd as d,Iu as e,Uu as f,bc as g,pn as h,ha as i,da as j,ju as k,ut as l,wc as m,td as n,rn as o,mn as p,Mt as q,wd as r,yd as s,Cn as t,eo as u,Ec as v,He as w,At as x,Bt as y,Uc as z};
